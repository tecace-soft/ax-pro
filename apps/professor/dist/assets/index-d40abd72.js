var BR=Object.defineProperty;var WR=(e,t,n)=>t in e?BR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ru=(e,t,n)=>(WR(e,typeof t!="symbol"?t+"":t,n),n);function qR(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var zt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ln(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function HR(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var O_={exports:{}},Wf={},A_={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wc=Symbol.for("react.element"),KR=Symbol.for("react.portal"),VR=Symbol.for("react.fragment"),GR=Symbol.for("react.strict_mode"),YR=Symbol.for("react.profiler"),JR=Symbol.for("react.provider"),XR=Symbol.for("react.context"),QR=Symbol.for("react.forward_ref"),ZR=Symbol.for("react.suspense"),eM=Symbol.for("react.memo"),tM=Symbol.for("react.lazy"),vw=Symbol.iterator;function nM(e){return e===null||typeof e!="object"?null:(e=vw&&e[vw]||e["@@iterator"],typeof e=="function"?e:null)}var T_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I_=Object.assign,D_={};function ks(e,t,n){this.props=e,this.context=t,this.refs=D_,this.updater=n||T_}ks.prototype.isReactComponent={};ks.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ks.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function R_(){}R_.prototype=ks.prototype;function Ov(e,t,n){this.props=e,this.context=t,this.refs=D_,this.updater=n||T_}var Av=Ov.prototype=new R_;Av.constructor=Ov;I_(Av,ks.prototype);Av.isPureReactComponent=!0;var xw=Array.isArray,M_=Object.prototype.hasOwnProperty,Tv={current:null},L_={key:!0,ref:!0,__self:!0,__source:!0};function $_(e,t,n){var r,i={},a=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)M_.call(t,r)&&!L_.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:wc,type:e,key:a,ref:o,props:i,_owner:Tv.current}}function rM(e,t){return{$$typeof:wc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Iv(e){return typeof e=="object"&&e!==null&&e.$$typeof===wc}function iM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var bw=/\/+/g;function Em(e,t){return typeof e=="object"&&e!==null&&e.key!=null?iM(""+e.key):t.toString(36)}function Vu(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case wc:case KR:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Em(o,0):r,xw(i)?(n="",e!=null&&(n=e.replace(bw,"$&/")+"/"),Vu(i,t,n,"",function(c){return c})):i!=null&&(Iv(i)&&(i=rM(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(bw,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",xw(e))for(var s=0;s<e.length;s++){a=e[s];var l=r+Em(a,s);o+=Vu(a,t,n,l,i)}else if(l=nM(e),typeof l=="function")for(e=l.call(e),s=0;!(a=e.next()).done;)a=a.value,l=r+Em(a,s++),o+=Vu(a,t,n,l,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function iu(e,t,n){if(e==null)return e;var r=[],i=0;return Vu(e,r,"","",function(a){return t.call(n,a,i++)}),r}function aM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Xt={current:null},Gu={transition:null},oM={ReactCurrentDispatcher:Xt,ReactCurrentBatchConfig:Gu,ReactCurrentOwner:Tv};function F_(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:iu,forEach:function(e,t,n){iu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return iu(e,function(){t++}),t},toArray:function(e){return iu(e,function(t){return t})||[]},only:function(e){if(!Iv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};we.Component=ks;we.Fragment=VR;we.Profiler=YR;we.PureComponent=Ov;we.StrictMode=GR;we.Suspense=ZR;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oM;we.act=F_;we.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=I_({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=Tv.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)M_.call(t,l)&&!L_.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:wc,type:e.type,key:i,ref:a,props:r,_owner:o}};we.createContext=function(e){return e={$$typeof:XR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:JR,_context:e},e.Consumer=e};we.createElement=$_;we.createFactory=function(e){var t=$_.bind(null,e);return t.type=e,t};we.createRef=function(){return{current:null}};we.forwardRef=function(e){return{$$typeof:QR,render:e}};we.isValidElement=Iv;we.lazy=function(e){return{$$typeof:tM,_payload:{_status:-1,_result:e},_init:aM}};we.memo=function(e,t){return{$$typeof:eM,type:e,compare:t===void 0?null:t}};we.startTransition=function(e){var t=Gu.transition;Gu.transition={};try{e()}finally{Gu.transition=t}};we.unstable_act=F_;we.useCallback=function(e,t){return Xt.current.useCallback(e,t)};we.useContext=function(e){return Xt.current.useContext(e)};we.useDebugValue=function(){};we.useDeferredValue=function(e){return Xt.current.useDeferredValue(e)};we.useEffect=function(e,t){return Xt.current.useEffect(e,t)};we.useId=function(){return Xt.current.useId()};we.useImperativeHandle=function(e,t,n){return Xt.current.useImperativeHandle(e,t,n)};we.useInsertionEffect=function(e,t){return Xt.current.useInsertionEffect(e,t)};we.useLayoutEffect=function(e,t){return Xt.current.useLayoutEffect(e,t)};we.useMemo=function(e,t){return Xt.current.useMemo(e,t)};we.useReducer=function(e,t,n){return Xt.current.useReducer(e,t,n)};we.useRef=function(e){return Xt.current.useRef(e)};we.useState=function(e){return Xt.current.useState(e)};we.useSyncExternalStore=function(e,t,n){return Xt.current.useSyncExternalStore(e,t,n)};we.useTransition=function(){return Xt.current.useTransition()};we.version="18.3.1";A_.exports=we;var v=A_.exports;const si=Ln(v),U_=qR({__proto__:null,default:si},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sM=v,lM=Symbol.for("react.element"),cM=Symbol.for("react.fragment"),uM=Object.prototype.hasOwnProperty,dM=sM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fM={key:!0,ref:!0,__self:!0,__source:!0};function z_(e,t,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)uM.call(t,r)&&!fM.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:lM,type:e,key:a,ref:o,props:i,_owner:dM.current}}Wf.Fragment=cM;Wf.jsx=z_;Wf.jsxs=z_;O_.exports=Wf;var u=O_.exports,ag={},B_={exports:{}},$n={},W_={exports:{}},q_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,R){var C=I.length;I.push(R);e:for(;0<C;){var Q=C-1>>>1,q=I[Q];if(0<i(q,R))I[Q]=R,I[C]=q,C=Q;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var R=I[0],C=I.pop();if(C!==R){I[0]=C;e:for(var Q=0,q=I.length,A=q>>>1;Q<A;){var le=2*(Q+1)-1,U=I[le],Z=le+1,J=I[Z];if(0>i(U,C))Z<q&&0>i(J,U)?(I[Q]=J,I[Z]=C,Q=Z):(I[Q]=U,I[le]=C,Q=le);else if(Z<q&&0>i(J,C))I[Q]=J,I[Z]=C,Q=Z;else break e}}return R}function i(I,R){var C=I.sortIndex-R.sortIndex;return C!==0?C:I.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var l=[],c=[],d=1,f=null,h=3,m=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(I){for(var R=n(c);R!==null;){if(R.callback===null)r(c);else if(R.startTime<=I)r(c),R.sortIndex=R.expirationTime,t(l,R);else break;R=n(c)}}function j(I){if(g=!1,w(I),!p)if(n(l)!==null)p=!0,z(S);else{var R=n(c);R!==null&&G(j,R.startTime-I)}}function S(I,R){p=!1,g&&(g=!1,x(N),N=-1),m=!0;var C=h;try{for(w(R),f=n(l);f!==null&&(!(f.expirationTime>R)||I&&!T());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,h=f.priorityLevel;var q=Q(f.expirationTime<=R);R=e.unstable_now(),typeof q=="function"?f.callback=q:f===n(l)&&r(l),w(R)}else r(l);f=n(l)}if(f!==null)var A=!0;else{var le=n(c);le!==null&&G(j,le.startTime-R),A=!1}return A}finally{f=null,h=C,m=!1}}var k=!1,_=null,N=-1,P=5,E=-1;function T(){return!(e.unstable_now()-E<P)}function L(){if(_!==null){var I=e.unstable_now();E=I;var R=!0;try{R=_(!0,I)}finally{R?$():(k=!1,_=null)}}else k=!1}var $;if(typeof b=="function")$=function(){b(L)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,D=B.port2;B.port1.onmessage=L,$=function(){D.postMessage(null)}}else $=function(){y(L,0)};function z(I){_=I,k||(k=!0,$())}function G(I,R){N=y(function(){I(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){p||m||(p=!0,z(S))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(I){switch(h){case 1:case 2:case 3:var R=3;break;default:R=h}var C=h;h=R;try{return I()}finally{h=C}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,R){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var C=h;h=I;try{return R()}finally{h=C}},e.unstable_scheduleCallback=function(I,R,C){var Q=e.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?Q+C:Q):C=Q,I){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=C+q,I={id:d++,callback:R,priorityLevel:I,startTime:C,expirationTime:q,sortIndex:-1},C>Q?(I.sortIndex=C,t(c,I),n(l)===null&&I===n(c)&&(g?(x(N),N=-1):g=!0,G(j,C-Q))):(I.sortIndex=q,t(l,I),p||m||(p=!0,z(S))),I},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(I){var R=h;return function(){var C=h;h=R;try{return I.apply(this,arguments)}finally{h=C}}}})(q_);W_.exports=q_;var hM=W_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mM=v,In=hM;function ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var H_=new Set,Ul={};function io(e,t){Xo(e,t),Xo(e+"Capture",t)}function Xo(e,t){for(Ul[e]=t,e=0;e<t.length;e++)H_.add(t[e])}var li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),og=Object.prototype.hasOwnProperty,pM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ww={},kw={};function gM(e){return og.call(kw,e)?!0:og.call(ww,e)?!1:pM.test(e)?kw[e]=!0:(ww[e]=!0,!1)}function yM(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function vM(e,t,n,r){if(t===null||typeof t>"u"||yM(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Qt(e,t,n,r,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){It[e]=new Qt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];It[t]=new Qt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){It[e]=new Qt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){It[e]=new Qt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){It[e]=new Qt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){It[e]=new Qt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){It[e]=new Qt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){It[e]=new Qt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){It[e]=new Qt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Dv=/[\-:]([a-z])/g;function Rv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Dv,Rv);It[t]=new Qt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Dv,Rv);It[t]=new Qt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Dv,Rv);It[t]=new Qt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){It[e]=new Qt(e,1,!1,e.toLowerCase(),null,!1,!1)});It.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){It[e]=new Qt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Mv(e,t,n,r){var i=It.hasOwnProperty(t)?It[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(vM(t,n,i,r)&&(n=null),r||i===null?gM(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var yi=mM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,au=Symbol.for("react.element"),Eo=Symbol.for("react.portal"),No=Symbol.for("react.fragment"),Lv=Symbol.for("react.strict_mode"),sg=Symbol.for("react.profiler"),K_=Symbol.for("react.provider"),V_=Symbol.for("react.context"),$v=Symbol.for("react.forward_ref"),lg=Symbol.for("react.suspense"),cg=Symbol.for("react.suspense_list"),Fv=Symbol.for("react.memo"),Ti=Symbol.for("react.lazy"),G_=Symbol.for("react.offscreen"),Sw=Symbol.iterator;function Vs(e){return e===null||typeof e!="object"?null:(e=Sw&&e[Sw]||e["@@iterator"],typeof e=="function"?e:null)}var Qe=Object.assign,Nm;function ml(e){if(Nm===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Nm=t&&t[1]||""}return`
`+Nm+e}var Pm=!1;function Om(e,t){if(!e||Pm)return"";Pm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=s);break}}}finally{Pm=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ml(e):""}function xM(e){switch(e.tag){case 5:return ml(e.type);case 16:return ml("Lazy");case 13:return ml("Suspense");case 19:return ml("SuspenseList");case 0:case 2:case 15:return e=Om(e.type,!1),e;case 11:return e=Om(e.type.render,!1),e;case 1:return e=Om(e.type,!0),e;default:return""}}function ug(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case No:return"Fragment";case Eo:return"Portal";case sg:return"Profiler";case Lv:return"StrictMode";case lg:return"Suspense";case cg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case V_:return(e.displayName||"Context")+".Consumer";case K_:return(e._context.displayName||"Context")+".Provider";case $v:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Fv:return t=e.displayName||null,t!==null?t:ug(e.type)||"Memo";case Ti:t=e._payload,e=e._init;try{return ug(e(t))}catch{}}return null}function bM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ug(t);case 8:return t===Lv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ea(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Y_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function wM(e){var t=Y_(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ou(e){e._valueTracker||(e._valueTracker=wM(e))}function J_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y_(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function gd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function dg(e,t){var n=t.checked;return Qe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function jw(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ea(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function X_(e,t){t=t.checked,t!=null&&Mv(e,"checked",t,!1)}function fg(e,t){X_(e,t);var n=ea(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?hg(e,t.type,n):t.hasOwnProperty("defaultValue")&&hg(e,t.type,ea(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Cw(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function hg(e,t,n){(t!=="number"||gd(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var pl=Array.isArray;function zo(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ea(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function mg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ee(91));return Qe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _w(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ee(92));if(pl(n)){if(1<n.length)throw Error(ee(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ea(n)}}function Q_(e,t){var n=ea(t.value),r=ea(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ew(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Z_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Z_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var su,eE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(su=su||document.createElement("div"),su.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=su.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var wl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kM=["Webkit","ms","Moz","O"];Object.keys(wl).forEach(function(e){kM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),wl[t]=wl[e]})});function tE(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||wl.hasOwnProperty(e)&&wl[e]?(""+t).trim():t+"px"}function nE(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=tE(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var SM=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gg(e,t){if(t){if(SM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ee(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ee(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ee(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ee(62))}}function yg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vg=null;function Uv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xg=null,Bo=null,Wo=null;function Nw(e){if(e=jc(e)){if(typeof xg!="function")throw Error(ee(280));var t=e.stateNode;t&&(t=Gf(t),xg(e.stateNode,e.type,t))}}function rE(e){Bo?Wo?Wo.push(e):Wo=[e]:Bo=e}function iE(){if(Bo){var e=Bo,t=Wo;if(Wo=Bo=null,Nw(e),t)for(e=0;e<t.length;e++)Nw(t[e])}}function aE(e,t){return e(t)}function oE(){}var Am=!1;function sE(e,t,n){if(Am)return e(t,n);Am=!0;try{return aE(e,t,n)}finally{Am=!1,(Bo!==null||Wo!==null)&&(oE(),iE())}}function Bl(e,t){var n=e.stateNode;if(n===null)return null;var r=Gf(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ee(231,t,typeof n));return n}var bg=!1;if(li)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){bg=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{bg=!1}function jM(e,t,n,r,i,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var kl=!1,yd=null,vd=!1,wg=null,CM={onError:function(e){kl=!0,yd=e}};function _M(e,t,n,r,i,a,o,s,l){kl=!1,yd=null,jM.apply(CM,arguments)}function EM(e,t,n,r,i,a,o,s,l){if(_M.apply(this,arguments),kl){if(kl){var c=yd;kl=!1,yd=null}else throw Error(ee(198));vd||(vd=!0,wg=c)}}function ao(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function lE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Pw(e){if(ao(e)!==e)throw Error(ee(188))}function NM(e){var t=e.alternate;if(!t){if(t=ao(e),t===null)throw Error(ee(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Pw(i),e;if(a===r)return Pw(i),t;a=a.sibling}throw Error(ee(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?e:t}function cE(e){return e=NM(e),e!==null?uE(e):null}function uE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=uE(e);if(t!==null)return t;e=e.sibling}return null}var dE=In.unstable_scheduleCallback,Ow=In.unstable_cancelCallback,PM=In.unstable_shouldYield,OM=In.unstable_requestPaint,nt=In.unstable_now,AM=In.unstable_getCurrentPriorityLevel,zv=In.unstable_ImmediatePriority,fE=In.unstable_UserBlockingPriority,xd=In.unstable_NormalPriority,TM=In.unstable_LowPriority,hE=In.unstable_IdlePriority,qf=null,Fr=null;function IM(e){if(Fr&&typeof Fr.onCommitFiberRoot=="function")try{Fr.onCommitFiberRoot(qf,e,void 0,(e.current.flags&128)===128)}catch{}}var pr=Math.clz32?Math.clz32:MM,DM=Math.log,RM=Math.LN2;function MM(e){return e>>>=0,e===0?32:31-(DM(e)/RM|0)|0}var lu=64,cu=4194304;function gl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bd(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var s=o&~i;s!==0?r=gl(s):(a&=o,a!==0&&(r=gl(a)))}else o=n&~i,o!==0?r=gl(o):a!==0&&(r=gl(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-pr(t),i=1<<n,r|=e[n],t&=~i;return r}function LM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $M(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-pr(a),s=1<<o,l=i[o];l===-1?(!(s&n)||s&r)&&(i[o]=LM(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}function kg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function mE(){var e=lu;return lu<<=1,!(lu&4194240)&&(lu=64),e}function Tm(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function kc(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-pr(t),e[t]=n}function FM(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-pr(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function Bv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-pr(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Te=0;function pE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var gE,Wv,yE,vE,xE,Sg=!1,uu=[],Wi=null,qi=null,Hi=null,Wl=new Map,ql=new Map,Mi=[],UM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Aw(e,t){switch(e){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":qi=null;break;case"mouseover":case"mouseout":Hi=null;break;case"pointerover":case"pointerout":Wl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ql.delete(t.pointerId)}}function Ys(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=jc(t),t!==null&&Wv(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function zM(e,t,n,r,i){switch(t){case"focusin":return Wi=Ys(Wi,e,t,n,r,i),!0;case"dragenter":return qi=Ys(qi,e,t,n,r,i),!0;case"mouseover":return Hi=Ys(Hi,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Wl.set(a,Ys(Wl.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ql.set(a,Ys(ql.get(a)||null,e,t,n,r,i)),!0}return!1}function bE(e){var t=Oa(e.target);if(t!==null){var n=ao(t);if(n!==null){if(t=n.tag,t===13){if(t=lE(n),t!==null){e.blockedOn=t,xE(e.priority,function(){yE(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=jg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);vg=r,n.target.dispatchEvent(r),vg=null}else return t=jc(n),t!==null&&Wv(t),e.blockedOn=n,!1;t.shift()}return!0}function Tw(e,t,n){Yu(e)&&n.delete(t)}function BM(){Sg=!1,Wi!==null&&Yu(Wi)&&(Wi=null),qi!==null&&Yu(qi)&&(qi=null),Hi!==null&&Yu(Hi)&&(Hi=null),Wl.forEach(Tw),ql.forEach(Tw)}function Js(e,t){e.blockedOn===t&&(e.blockedOn=null,Sg||(Sg=!0,In.unstable_scheduleCallback(In.unstable_NormalPriority,BM)))}function Hl(e){function t(i){return Js(i,e)}if(0<uu.length){Js(uu[0],e);for(var n=1;n<uu.length;n++){var r=uu[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Wi!==null&&Js(Wi,e),qi!==null&&Js(qi,e),Hi!==null&&Js(Hi,e),Wl.forEach(t),ql.forEach(t),n=0;n<Mi.length;n++)r=Mi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Mi.length&&(n=Mi[0],n.blockedOn===null);)bE(n),n.blockedOn===null&&Mi.shift()}var qo=yi.ReactCurrentBatchConfig,wd=!0;function WM(e,t,n,r){var i=Te,a=qo.transition;qo.transition=null;try{Te=1,qv(e,t,n,r)}finally{Te=i,qo.transition=a}}function qM(e,t,n,r){var i=Te,a=qo.transition;qo.transition=null;try{Te=4,qv(e,t,n,r)}finally{Te=i,qo.transition=a}}function qv(e,t,n,r){if(wd){var i=jg(e,t,n,r);if(i===null)Bm(e,t,r,kd,n),Aw(e,r);else if(zM(i,e,t,n,r))r.stopPropagation();else if(Aw(e,r),t&4&&-1<UM.indexOf(e)){for(;i!==null;){var a=jc(i);if(a!==null&&gE(a),a=jg(e,t,n,r),a===null&&Bm(e,t,r,kd,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Bm(e,t,r,null,n)}}var kd=null;function jg(e,t,n,r){if(kd=null,e=Uv(r),e=Oa(e),e!==null)if(t=ao(e),t===null)e=null;else if(n=t.tag,n===13){if(e=lE(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return kd=e,null}function wE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AM()){case zv:return 1;case fE:return 4;case xd:case TM:return 16;case hE:return 536870912;default:return 16}default:return 16}}var Ui=null,Hv=null,Ju=null;function kE(){if(Ju)return Ju;var e,t=Hv,n=t.length,r,i="value"in Ui?Ui.value:Ui.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return Ju=i.slice(e,1<r?1-r:void 0)}function Xu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function du(){return!0}function Iw(){return!1}function Fn(e){function t(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?du:Iw,this.isPropagationStopped=Iw,this}return Qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=du)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=du)},persist:function(){},isPersistent:du}),t}var Ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kv=Fn(Ss),Sc=Qe({},Ss,{view:0,detail:0}),HM=Fn(Sc),Im,Dm,Xs,Hf=Qe({},Sc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xs&&(Xs&&e.type==="mousemove"?(Im=e.screenX-Xs.screenX,Dm=e.screenY-Xs.screenY):Dm=Im=0,Xs=e),Im)},movementY:function(e){return"movementY"in e?e.movementY:Dm}}),Dw=Fn(Hf),KM=Qe({},Hf,{dataTransfer:0}),VM=Fn(KM),GM=Qe({},Sc,{relatedTarget:0}),Rm=Fn(GM),YM=Qe({},Ss,{animationName:0,elapsedTime:0,pseudoElement:0}),JM=Fn(YM),XM=Qe({},Ss,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),QM=Fn(XM),ZM=Qe({},Ss,{data:0}),Rw=Fn(ZM),eL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rL(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=nL[e])?!!t[e]:!1}function Vv(){return rL}var iL=Qe({},Sc,{key:function(e){if(e.key){var t=eL[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tL[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vv,charCode:function(e){return e.type==="keypress"?Xu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),aL=Fn(iL),oL=Qe({},Hf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mw=Fn(oL),sL=Qe({},Sc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vv}),lL=Fn(sL),cL=Qe({},Ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),uL=Fn(cL),dL=Qe({},Hf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fL=Fn(dL),hL=[9,13,27,32],Gv=li&&"CompositionEvent"in window,Sl=null;li&&"documentMode"in document&&(Sl=document.documentMode);var mL=li&&"TextEvent"in window&&!Sl,SE=li&&(!Gv||Sl&&8<Sl&&11>=Sl),Lw=String.fromCharCode(32),$w=!1;function jE(e,t){switch(e){case"keyup":return hL.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function CE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Po=!1;function pL(e,t){switch(e){case"compositionend":return CE(t);case"keypress":return t.which!==32?null:($w=!0,Lw);case"textInput":return e=t.data,e===Lw&&$w?null:e;default:return null}}function gL(e,t){if(Po)return e==="compositionend"||!Gv&&jE(e,t)?(e=kE(),Ju=Hv=Ui=null,Po=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return SE&&t.locale!=="ko"?null:t.data;default:return null}}var yL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yL[e.type]:t==="textarea"}function _E(e,t,n,r){rE(r),t=Sd(t,"onChange"),0<t.length&&(n=new Kv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var jl=null,Kl=null;function vL(e){LE(e,0)}function Kf(e){var t=To(e);if(J_(t))return e}function xL(e,t){if(e==="change")return t}var EE=!1;if(li){var Mm;if(li){var Lm="oninput"in document;if(!Lm){var Uw=document.createElement("div");Uw.setAttribute("oninput","return;"),Lm=typeof Uw.oninput=="function"}Mm=Lm}else Mm=!1;EE=Mm&&(!document.documentMode||9<document.documentMode)}function zw(){jl&&(jl.detachEvent("onpropertychange",NE),Kl=jl=null)}function NE(e){if(e.propertyName==="value"&&Kf(Kl)){var t=[];_E(t,Kl,e,Uv(e)),sE(vL,t)}}function bL(e,t,n){e==="focusin"?(zw(),jl=t,Kl=n,jl.attachEvent("onpropertychange",NE)):e==="focusout"&&zw()}function wL(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Kf(Kl)}function kL(e,t){if(e==="click")return Kf(t)}function SL(e,t){if(e==="input"||e==="change")return Kf(t)}function jL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xr=typeof Object.is=="function"?Object.is:jL;function Vl(e,t){if(xr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!og.call(t,i)||!xr(e[i],t[i]))return!1}return!0}function Bw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ww(e,t){var n=Bw(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bw(n)}}function PE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?PE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function OE(){for(var e=window,t=gd();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=gd(e.document)}return t}function Yv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function CL(e){var t=OE(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&PE(n.ownerDocument.documentElement,n)){if(r!==null&&Yv(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=Ww(n,a);var o=Ww(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _L=li&&"documentMode"in document&&11>=document.documentMode,Oo=null,Cg=null,Cl=null,_g=!1;function qw(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_g||Oo==null||Oo!==gd(r)||(r=Oo,"selectionStart"in r&&Yv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Cl&&Vl(Cl,r)||(Cl=r,r=Sd(Cg,"onSelect"),0<r.length&&(t=new Kv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Oo)))}function fu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ao={animationend:fu("Animation","AnimationEnd"),animationiteration:fu("Animation","AnimationIteration"),animationstart:fu("Animation","AnimationStart"),transitionend:fu("Transition","TransitionEnd")},$m={},AE={};li&&(AE=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function Vf(e){if($m[e])return $m[e];if(!Ao[e])return e;var t=Ao[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in AE)return $m[e]=t[n];return e}var TE=Vf("animationend"),IE=Vf("animationiteration"),DE=Vf("animationstart"),RE=Vf("transitionend"),ME=new Map,Hw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ia(e,t){ME.set(e,t),io(t,[e])}for(var Fm=0;Fm<Hw.length;Fm++){var Um=Hw[Fm],EL=Um.toLowerCase(),NL=Um[0].toUpperCase()+Um.slice(1);ia(EL,"on"+NL)}ia(TE,"onAnimationEnd");ia(IE,"onAnimationIteration");ia(DE,"onAnimationStart");ia("dblclick","onDoubleClick");ia("focusin","onFocus");ia("focusout","onBlur");ia(RE,"onTransitionEnd");Xo("onMouseEnter",["mouseout","mouseover"]);Xo("onMouseLeave",["mouseout","mouseover"]);Xo("onPointerEnter",["pointerout","pointerover"]);Xo("onPointerLeave",["pointerout","pointerover"]);io("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));io("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));io("onBeforeInput",["compositionend","keypress","textInput","paste"]);io("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));io("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));io("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PL=new Set("cancel close invalid load scroll toggle".split(" ").concat(yl));function Kw(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,EM(r,t,void 0,e),e.currentTarget=null}function LE(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Kw(i,s,c),a=l}else for(o=0;o<r.length;o++){if(s=r[o],l=s.instance,c=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Kw(i,s,c),a=l}}}if(vd)throw e=wg,vd=!1,wg=null,e}function qe(e,t){var n=t[Ag];n===void 0&&(n=t[Ag]=new Set);var r=e+"__bubble";n.has(r)||($E(t,e,2,!1),n.add(r))}function zm(e,t,n){var r=0;t&&(r|=4),$E(n,e,r,t)}var hu="_reactListening"+Math.random().toString(36).slice(2);function Gl(e){if(!e[hu]){e[hu]=!0,H_.forEach(function(n){n!=="selectionchange"&&(PL.has(n)||zm(n,!1,e),zm(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hu]||(t[hu]=!0,zm("selectionchange",!1,t))}}function $E(e,t,n,r){switch(wE(t)){case 1:var i=WM;break;case 4:i=qM;break;default:i=qv}n=i.bind(null,t,n,e),i=void 0,!bg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Bm(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;s!==null;){if(o=Oa(s),o===null)return;if(l=o.tag,l===5||l===6){r=a=o;continue e}s=s.parentNode}}r=r.return}sE(function(){var c=a,d=Uv(n),f=[];e:{var h=ME.get(e);if(h!==void 0){var m=Kv,p=e;switch(e){case"keypress":if(Xu(n)===0)break e;case"keydown":case"keyup":m=aL;break;case"focusin":p="focus",m=Rm;break;case"focusout":p="blur",m=Rm;break;case"beforeblur":case"afterblur":m=Rm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Dw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=VM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=lL;break;case TE:case IE:case DE:m=JM;break;case RE:m=uL;break;case"scroll":m=HM;break;case"wheel":m=fL;break;case"copy":case"cut":case"paste":m=QM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Mw}var g=(t&4)!==0,y=!g&&e==="scroll",x=g?h!==null?h+"Capture":null:h;g=[];for(var b=c,w;b!==null;){w=b;var j=w.stateNode;if(w.tag===5&&j!==null&&(w=j,x!==null&&(j=Bl(b,x),j!=null&&g.push(Yl(b,j,w)))),y)break;b=b.return}0<g.length&&(h=new m(h,p,null,n,d),f.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==vg&&(p=n.relatedTarget||n.fromElement)&&(Oa(p)||p[ci]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(p=n.relatedTarget||n.toElement,m=c,p=p?Oa(p):null,p!==null&&(y=ao(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=c),m!==p)){if(g=Dw,j="onMouseLeave",x="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(g=Mw,j="onPointerLeave",x="onPointerEnter",b="pointer"),y=m==null?h:To(m),w=p==null?h:To(p),h=new g(j,b+"leave",m,n,d),h.target=y,h.relatedTarget=w,j=null,Oa(d)===c&&(g=new g(x,b+"enter",p,n,d),g.target=w,g.relatedTarget=y,j=g),y=j,m&&p)t:{for(g=m,x=p,b=0,w=g;w;w=mo(w))b++;for(w=0,j=x;j;j=mo(j))w++;for(;0<b-w;)g=mo(g),b--;for(;0<w-b;)x=mo(x),w--;for(;b--;){if(g===x||x!==null&&g===x.alternate)break t;g=mo(g),x=mo(x)}g=null}else g=null;m!==null&&Vw(f,h,m,g,!1),p!==null&&y!==null&&Vw(f,y,p,g,!0)}}e:{if(h=c?To(c):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var S=xL;else if(Fw(h))if(EE)S=SL;else{S=wL;var k=bL}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=kL);if(S&&(S=S(e,c))){_E(f,S,n,d);break e}k&&k(e,h,c),e==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&hg(h,"number",h.value)}switch(k=c?To(c):window,e){case"focusin":(Fw(k)||k.contentEditable==="true")&&(Oo=k,Cg=c,Cl=null);break;case"focusout":Cl=Cg=Oo=null;break;case"mousedown":_g=!0;break;case"contextmenu":case"mouseup":case"dragend":_g=!1,qw(f,n,d);break;case"selectionchange":if(_L)break;case"keydown":case"keyup":qw(f,n,d)}var _;if(Gv)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Po?jE(e,n)&&(N="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(SE&&n.locale!=="ko"&&(Po||N!=="onCompositionStart"?N==="onCompositionEnd"&&Po&&(_=kE()):(Ui=d,Hv="value"in Ui?Ui.value:Ui.textContent,Po=!0)),k=Sd(c,N),0<k.length&&(N=new Rw(N,e,null,n,d),f.push({event:N,listeners:k}),_?N.data=_:(_=CE(n),_!==null&&(N.data=_)))),(_=mL?pL(e,n):gL(e,n))&&(c=Sd(c,"onBeforeInput"),0<c.length&&(d=new Rw("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=_))}LE(f,t)})}function Yl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Sd(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Bl(e,n),a!=null&&r.unshift(Yl(e,a,i)),a=Bl(e,t),a!=null&&r.push(Yl(e,a,i))),e=e.return}return r}function mo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Vw(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&c!==null&&(s=c,i?(l=Bl(n,a),l!=null&&o.unshift(Yl(n,l,s))):i||(l=Bl(n,a),l!=null&&o.push(Yl(n,l,s)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var OL=/\r\n?/g,AL=/\u0000|\uFFFD/g;function Gw(e){return(typeof e=="string"?e:""+e).replace(OL,`
`).replace(AL,"")}function mu(e,t,n){if(t=Gw(t),Gw(e)!==t&&n)throw Error(ee(425))}function jd(){}var Eg=null,Ng=null;function Pg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Og=typeof setTimeout=="function"?setTimeout:void 0,TL=typeof clearTimeout=="function"?clearTimeout:void 0,Yw=typeof Promise=="function"?Promise:void 0,IL=typeof queueMicrotask=="function"?queueMicrotask:typeof Yw<"u"?function(e){return Yw.resolve(null).then(e).catch(DL)}:Og;function DL(e){setTimeout(function(){throw e})}function Wm(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Hl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Hl(t)}function Ki(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Jw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var js=Math.random().toString(36).slice(2),Ir="__reactFiber$"+js,Jl="__reactProps$"+js,ci="__reactContainer$"+js,Ag="__reactEvents$"+js,RL="__reactListeners$"+js,ML="__reactHandles$"+js;function Oa(e){var t=e[Ir];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ci]||n[Ir]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Jw(e);e!==null;){if(n=e[Ir])return n;e=Jw(e)}return t}e=n,n=e.parentNode}return null}function jc(e){return e=e[Ir]||e[ci],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function To(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ee(33))}function Gf(e){return e[Jl]||null}var Tg=[],Io=-1;function aa(e){return{current:e}}function Ke(e){0>Io||(e.current=Tg[Io],Tg[Io]=null,Io--)}function We(e,t){Io++,Tg[Io]=e.current,e.current=t}var ta={},Bt=aa(ta),hn=aa(!1),Ha=ta;function Qo(e,t){var n=e.type.contextTypes;if(!n)return ta;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function mn(e){return e=e.childContextTypes,e!=null}function Cd(){Ke(hn),Ke(Bt)}function Xw(e,t,n){if(Bt.current!==ta)throw Error(ee(168));We(Bt,t),We(hn,n)}function FE(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ee(108,bM(e)||"Unknown",i));return Qe({},n,r)}function _d(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ta,Ha=Bt.current,We(Bt,e),We(hn,hn.current),!0}function Qw(e,t,n){var r=e.stateNode;if(!r)throw Error(ee(169));n?(e=FE(e,t,Ha),r.__reactInternalMemoizedMergedChildContext=e,Ke(hn),Ke(Bt),We(Bt,e)):Ke(hn),We(hn,n)}var Jr=null,Yf=!1,qm=!1;function UE(e){Jr===null?Jr=[e]:Jr.push(e)}function LL(e){Yf=!0,UE(e)}function oa(){if(!qm&&Jr!==null){qm=!0;var e=0,t=Te;try{var n=Jr;for(Te=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Jr=null,Yf=!1}catch(i){throw Jr!==null&&(Jr=Jr.slice(e+1)),dE(zv,oa),i}finally{Te=t,qm=!1}}return null}var Do=[],Ro=0,Ed=null,Nd=0,Vn=[],Gn=0,Ka=null,Qr=1,Zr="";function wa(e,t){Do[Ro++]=Nd,Do[Ro++]=Ed,Ed=e,Nd=t}function zE(e,t,n){Vn[Gn++]=Qr,Vn[Gn++]=Zr,Vn[Gn++]=Ka,Ka=e;var r=Qr;e=Zr;var i=32-pr(r)-1;r&=~(1<<i),n+=1;var a=32-pr(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Qr=1<<32-pr(t)+i|n<<i|r,Zr=a+e}else Qr=1<<a|n<<i|r,Zr=e}function Jv(e){e.return!==null&&(wa(e,1),zE(e,1,0))}function Xv(e){for(;e===Ed;)Ed=Do[--Ro],Do[Ro]=null,Nd=Do[--Ro],Do[Ro]=null;for(;e===Ka;)Ka=Vn[--Gn],Vn[Gn]=null,Zr=Vn[--Gn],Vn[Gn]=null,Qr=Vn[--Gn],Vn[Gn]=null}var On=null,Pn=null,Ge=!1,dr=null;function BE(e,t){var n=Xn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Zw(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,On=e,Pn=Ki(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,On=e,Pn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ka!==null?{id:Qr,overflow:Zr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Xn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,On=e,Pn=null,!0):!1;default:return!1}}function Ig(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Dg(e){if(Ge){var t=Pn;if(t){var n=t;if(!Zw(e,t)){if(Ig(e))throw Error(ee(418));t=Ki(n.nextSibling);var r=On;t&&Zw(e,t)?BE(r,n):(e.flags=e.flags&-4097|2,Ge=!1,On=e)}}else{if(Ig(e))throw Error(ee(418));e.flags=e.flags&-4097|2,Ge=!1,On=e}}}function e1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;On=e}function pu(e){if(e!==On)return!1;if(!Ge)return e1(e),Ge=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Pg(e.type,e.memoizedProps)),t&&(t=Pn)){if(Ig(e))throw WE(),Error(ee(418));for(;t;)BE(e,t),t=Ki(t.nextSibling)}if(e1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ee(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Pn=Ki(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Pn=null}}else Pn=On?Ki(e.stateNode.nextSibling):null;return!0}function WE(){for(var e=Pn;e;)e=Ki(e.nextSibling)}function Zo(){Pn=On=null,Ge=!1}function Qv(e){dr===null?dr=[e]:dr.push(e)}var $L=yi.ReactCurrentBatchConfig;function Qs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var s=i.refs;o===null?delete s[a]:s[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,e))}return e}function gu(e,t){throw e=Object.prototype.toString.call(t),Error(ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function t1(e){var t=e._init;return t(e._payload)}function qE(e){function t(x,b){if(e){var w=x.deletions;w===null?(x.deletions=[b],x.flags|=16):w.push(b)}}function n(x,b){if(!e)return null;for(;b!==null;)t(x,b),b=b.sibling;return null}function r(x,b){for(x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function i(x,b){return x=Ji(x,b),x.index=0,x.sibling=null,x}function a(x,b,w){return x.index=w,e?(w=x.alternate,w!==null?(w=w.index,w<b?(x.flags|=2,b):w):(x.flags|=2,b)):(x.flags|=1048576,b)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function s(x,b,w,j){return b===null||b.tag!==6?(b=Xm(w,x.mode,j),b.return=x,b):(b=i(b,w),b.return=x,b)}function l(x,b,w,j){var S=w.type;return S===No?d(x,b,w.props.children,j,w.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ti&&t1(S)===b.type)?(j=i(b,w.props),j.ref=Qs(x,b,w),j.return=x,j):(j=id(w.type,w.key,w.props,null,x.mode,j),j.ref=Qs(x,b,w),j.return=x,j)}function c(x,b,w,j){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=Qm(w,x.mode,j),b.return=x,b):(b=i(b,w.children||[]),b.return=x,b)}function d(x,b,w,j,S){return b===null||b.tag!==7?(b=Ua(w,x.mode,j,S),b.return=x,b):(b=i(b,w),b.return=x,b)}function f(x,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Xm(""+b,x.mode,w),b.return=x,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case au:return w=id(b.type,b.key,b.props,null,x.mode,w),w.ref=Qs(x,null,b),w.return=x,w;case Eo:return b=Qm(b,x.mode,w),b.return=x,b;case Ti:var j=b._init;return f(x,j(b._payload),w)}if(pl(b)||Vs(b))return b=Ua(b,x.mode,w,null),b.return=x,b;gu(x,b)}return null}function h(x,b,w,j){var S=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:s(x,b,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case au:return w.key===S?l(x,b,w,j):null;case Eo:return w.key===S?c(x,b,w,j):null;case Ti:return S=w._init,h(x,b,S(w._payload),j)}if(pl(w)||Vs(w))return S!==null?null:d(x,b,w,j,null);gu(x,w)}return null}function m(x,b,w,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(w)||null,s(b,x,""+j,S);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case au:return x=x.get(j.key===null?w:j.key)||null,l(b,x,j,S);case Eo:return x=x.get(j.key===null?w:j.key)||null,c(b,x,j,S);case Ti:var k=j._init;return m(x,b,w,k(j._payload),S)}if(pl(j)||Vs(j))return x=x.get(w)||null,d(b,x,j,S,null);gu(b,j)}return null}function p(x,b,w,j){for(var S=null,k=null,_=b,N=b=0,P=null;_!==null&&N<w.length;N++){_.index>N?(P=_,_=null):P=_.sibling;var E=h(x,_,w[N],j);if(E===null){_===null&&(_=P);break}e&&_&&E.alternate===null&&t(x,_),b=a(E,b,N),k===null?S=E:k.sibling=E,k=E,_=P}if(N===w.length)return n(x,_),Ge&&wa(x,N),S;if(_===null){for(;N<w.length;N++)_=f(x,w[N],j),_!==null&&(b=a(_,b,N),k===null?S=_:k.sibling=_,k=_);return Ge&&wa(x,N),S}for(_=r(x,_);N<w.length;N++)P=m(_,x,N,w[N],j),P!==null&&(e&&P.alternate!==null&&_.delete(P.key===null?N:P.key),b=a(P,b,N),k===null?S=P:k.sibling=P,k=P);return e&&_.forEach(function(T){return t(x,T)}),Ge&&wa(x,N),S}function g(x,b,w,j){var S=Vs(w);if(typeof S!="function")throw Error(ee(150));if(w=S.call(w),w==null)throw Error(ee(151));for(var k=S=null,_=b,N=b=0,P=null,E=w.next();_!==null&&!E.done;N++,E=w.next()){_.index>N?(P=_,_=null):P=_.sibling;var T=h(x,_,E.value,j);if(T===null){_===null&&(_=P);break}e&&_&&T.alternate===null&&t(x,_),b=a(T,b,N),k===null?S=T:k.sibling=T,k=T,_=P}if(E.done)return n(x,_),Ge&&wa(x,N),S;if(_===null){for(;!E.done;N++,E=w.next())E=f(x,E.value,j),E!==null&&(b=a(E,b,N),k===null?S=E:k.sibling=E,k=E);return Ge&&wa(x,N),S}for(_=r(x,_);!E.done;N++,E=w.next())E=m(_,x,N,E.value,j),E!==null&&(e&&E.alternate!==null&&_.delete(E.key===null?N:E.key),b=a(E,b,N),k===null?S=E:k.sibling=E,k=E);return e&&_.forEach(function(L){return t(x,L)}),Ge&&wa(x,N),S}function y(x,b,w,j){if(typeof w=="object"&&w!==null&&w.type===No&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case au:e:{for(var S=w.key,k=b;k!==null;){if(k.key===S){if(S=w.type,S===No){if(k.tag===7){n(x,k.sibling),b=i(k,w.props.children),b.return=x,x=b;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ti&&t1(S)===k.type){n(x,k.sibling),b=i(k,w.props),b.ref=Qs(x,k,w),b.return=x,x=b;break e}n(x,k);break}else t(x,k);k=k.sibling}w.type===No?(b=Ua(w.props.children,x.mode,j,w.key),b.return=x,x=b):(j=id(w.type,w.key,w.props,null,x.mode,j),j.ref=Qs(x,b,w),j.return=x,x=j)}return o(x);case Eo:e:{for(k=w.key;b!==null;){if(b.key===k)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(x,b.sibling),b=i(b,w.children||[]),b.return=x,x=b;break e}else{n(x,b);break}else t(x,b);b=b.sibling}b=Qm(w,x.mode,j),b.return=x,x=b}return o(x);case Ti:return k=w._init,y(x,b,k(w._payload),j)}if(pl(w))return p(x,b,w,j);if(Vs(w))return g(x,b,w,j);gu(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(x,b.sibling),b=i(b,w),b.return=x,x=b):(n(x,b),b=Xm(w,x.mode,j),b.return=x,x=b),o(x)):n(x,b)}return y}var es=qE(!0),HE=qE(!1),Pd=aa(null),Od=null,Mo=null,Zv=null;function ex(){Zv=Mo=Od=null}function tx(e){var t=Pd.current;Ke(Pd),e._currentValue=t}function Rg(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ho(e,t){Od=e,Zv=Mo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(un=!0),e.firstContext=null)}function er(e){var t=e._currentValue;if(Zv!==e)if(e={context:e,memoizedValue:t,next:null},Mo===null){if(Od===null)throw Error(ee(308));Mo=e,Od.dependencies={lanes:0,firstContext:e}}else Mo=Mo.next=e;return t}var Aa=null;function nx(e){Aa===null?Aa=[e]:Aa.push(e)}function KE(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,nx(t)):(n.next=i.next,i.next=n),t.interleaved=n,ui(e,r)}function ui(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ii=!1;function rx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function VE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ii(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vi(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ui(e,n)}return i=r.interleaved,i===null?(t.next=t,nx(r)):(t.next=i.next,i.next=t),r.interleaved=t,ui(e,n)}function Qu(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Bv(e,n)}}function n1(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ad(e,t,n,r){var i=e.updateQueue;Ii=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,c=l.next;l.next=null,o===null?a=c:o.next=c,o=l;var d=e.alternate;d!==null&&(d=d.updateQueue,s=d.lastBaseUpdate,s!==o&&(s===null?d.firstBaseUpdate=c:s.next=c,d.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;o=0,d=c=l=null,s=a;do{var h=s.lane,m=s.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,g=s;switch(h=t,m=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){f=p.call(m,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(m,f,h):p,h==null)break e;f=Qe({},f,h);break e;case 2:Ii=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else m={eventTime:m,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},d===null?(c=d=m,l=f):d=d.next=m,o|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Ga|=o,e.lanes=o,e.memoizedState=f}}function r1(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ee(191,i));i.call(r)}}}var Cc={},Ur=aa(Cc),Xl=aa(Cc),Ql=aa(Cc);function Ta(e){if(e===Cc)throw Error(ee(174));return e}function ix(e,t){switch(We(Ql,t),We(Xl,e),We(Ur,Cc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=pg(t,e)}Ke(Ur),We(Ur,t)}function ts(){Ke(Ur),Ke(Xl),Ke(Ql)}function GE(e){Ta(Ql.current);var t=Ta(Ur.current),n=pg(t,e.type);t!==n&&(We(Xl,e),We(Ur,n))}function ax(e){Xl.current===e&&(Ke(Ur),Ke(Xl))}var Je=aa(0);function Td(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hm=[];function ox(){for(var e=0;e<Hm.length;e++)Hm[e]._workInProgressVersionPrimary=null;Hm.length=0}var Zu=yi.ReactCurrentDispatcher,Km=yi.ReactCurrentBatchConfig,Va=0,Xe=null,ht=null,kt=null,Id=!1,_l=!1,Zl=0,FL=0;function Dt(){throw Error(ee(321))}function sx(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!xr(e[n],t[n]))return!1;return!0}function lx(e,t,n,r,i,a){if(Va=a,Xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zu.current=e===null||e.memoizedState===null?WL:qL,e=n(r,i),_l){a=0;do{if(_l=!1,Zl=0,25<=a)throw Error(ee(301));a+=1,kt=ht=null,t.updateQueue=null,Zu.current=HL,e=n(r,i)}while(_l)}if(Zu.current=Dd,t=ht!==null&&ht.next!==null,Va=0,kt=ht=Xe=null,Id=!1,t)throw Error(ee(300));return e}function cx(){var e=Zl!==0;return Zl=0,e}function Or(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Xe.memoizedState=kt=e:kt=kt.next=e,kt}function tr(){if(ht===null){var e=Xe.alternate;e=e!==null?e.memoizedState:null}else e=ht.next;var t=kt===null?Xe.memoizedState:kt.next;if(t!==null)kt=t,ht=e;else{if(e===null)throw Error(ee(310));ht=e,e={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},kt===null?Xe.memoizedState=kt=e:kt=kt.next=e}return kt}function ec(e,t){return typeof t=="function"?t(e):t}function Vm(e){var t=tr(),n=t.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=e;var r=ht,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var s=o=null,l=null,c=a;do{var d=c.lane;if((Va&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=f,o=r):l=l.next=f,Xe.lanes|=d,Ga|=d}c=c.next}while(c!==null&&c!==a);l===null?o=r:l.next=s,xr(r,t.memoizedState)||(un=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,Xe.lanes|=a,Ga|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Gm(e){var t=tr(),n=t.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);xr(a,t.memoizedState)||(un=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function YE(){}function JE(e,t){var n=Xe,r=tr(),i=t(),a=!xr(r.memoizedState,i);if(a&&(r.memoizedState=i,un=!0),r=r.queue,ux(ZE.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||kt!==null&&kt.memoizedState.tag&1){if(n.flags|=2048,tc(9,QE.bind(null,n,r,i,t),void 0,null),St===null)throw Error(ee(349));Va&30||XE(n,t,i)}return i}function XE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function QE(e,t,n,r){t.value=n,t.getSnapshot=r,e2(t)&&t2(e)}function ZE(e,t,n){return n(function(){e2(t)&&t2(e)})}function e2(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!xr(e,n)}catch{return!0}}function t2(e){var t=ui(e,1);t!==null&&gr(t,e,1,-1)}function i1(e){var t=Or();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ec,lastRenderedState:e},t.queue=e,e=e.dispatch=BL.bind(null,Xe,e),[t.memoizedState,e]}function tc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function n2(){return tr().memoizedState}function ed(e,t,n,r){var i=Or();Xe.flags|=e,i.memoizedState=tc(1|t,n,void 0,r===void 0?null:r)}function Jf(e,t,n,r){var i=tr();r=r===void 0?null:r;var a=void 0;if(ht!==null){var o=ht.memoizedState;if(a=o.destroy,r!==null&&sx(r,o.deps)){i.memoizedState=tc(t,n,a,r);return}}Xe.flags|=e,i.memoizedState=tc(1|t,n,a,r)}function a1(e,t){return ed(8390656,8,e,t)}function ux(e,t){return Jf(2048,8,e,t)}function r2(e,t){return Jf(4,2,e,t)}function i2(e,t){return Jf(4,4,e,t)}function a2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function o2(e,t,n){return n=n!=null?n.concat([e]):null,Jf(4,4,a2.bind(null,t,e),n)}function dx(){}function s2(e,t){var n=tr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&sx(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function l2(e,t){var n=tr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&sx(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function c2(e,t,n){return Va&21?(xr(n,t)||(n=mE(),Xe.lanes|=n,Ga|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,un=!0),e.memoizedState=n)}function UL(e,t){var n=Te;Te=n!==0&&4>n?n:4,e(!0);var r=Km.transition;Km.transition={};try{e(!1),t()}finally{Te=n,Km.transition=r}}function u2(){return tr().memoizedState}function zL(e,t,n){var r=Yi(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},d2(e))f2(t,n);else if(n=KE(e,t,n,r),n!==null){var i=Jt();gr(n,e,r,i),h2(n,t,r)}}function BL(e,t,n){var r=Yi(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(d2(e))f2(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,xr(s,o)){var l=t.interleaved;l===null?(i.next=i,nx(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=KE(e,t,i,r),n!==null&&(i=Jt(),gr(n,e,r,i),h2(n,t,r))}}function d2(e){var t=e.alternate;return e===Xe||t!==null&&t===Xe}function f2(e,t){_l=Id=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function h2(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Bv(e,n)}}var Dd={readContext:er,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},WL={readContext:er,useCallback:function(e,t){return Or().memoizedState=[e,t===void 0?null:t],e},useContext:er,useEffect:a1,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ed(4194308,4,a2.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ed(4194308,4,e,t)},useInsertionEffect:function(e,t){return ed(4,2,e,t)},useMemo:function(e,t){var n=Or();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Or();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=zL.bind(null,Xe,e),[r.memoizedState,e]},useRef:function(e){var t=Or();return e={current:e},t.memoizedState=e},useState:i1,useDebugValue:dx,useDeferredValue:function(e){return Or().memoizedState=e},useTransition:function(){var e=i1(!1),t=e[0];return e=UL.bind(null,e[1]),Or().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Xe,i=Or();if(Ge){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=t(),St===null)throw Error(ee(349));Va&30||XE(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,a1(ZE.bind(null,r,a,e),[e]),r.flags|=2048,tc(9,QE.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Or(),t=St.identifierPrefix;if(Ge){var n=Zr,r=Qr;n=(r&~(1<<32-pr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Zl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=FL++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},qL={readContext:er,useCallback:s2,useContext:er,useEffect:ux,useImperativeHandle:o2,useInsertionEffect:r2,useLayoutEffect:i2,useMemo:l2,useReducer:Vm,useRef:n2,useState:function(){return Vm(ec)},useDebugValue:dx,useDeferredValue:function(e){var t=tr();return c2(t,ht.memoizedState,e)},useTransition:function(){var e=Vm(ec)[0],t=tr().memoizedState;return[e,t]},useMutableSource:YE,useSyncExternalStore:JE,useId:u2,unstable_isNewReconciler:!1},HL={readContext:er,useCallback:s2,useContext:er,useEffect:ux,useImperativeHandle:o2,useInsertionEffect:r2,useLayoutEffect:i2,useMemo:l2,useReducer:Gm,useRef:n2,useState:function(){return Gm(ec)},useDebugValue:dx,useDeferredValue:function(e){var t=tr();return ht===null?t.memoizedState=e:c2(t,ht.memoizedState,e)},useTransition:function(){var e=Gm(ec)[0],t=tr().memoizedState;return[e,t]},useMutableSource:YE,useSyncExternalStore:JE,useId:u2,unstable_isNewReconciler:!1};function lr(e,t){if(e&&e.defaultProps){t=Qe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Mg(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Qe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Xf={isMounted:function(e){return(e=e._reactInternals)?ao(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Jt(),i=Yi(e),a=ii(r,i);a.payload=t,n!=null&&(a.callback=n),t=Vi(e,a,i),t!==null&&(gr(t,e,i,r),Qu(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Jt(),i=Yi(e),a=ii(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Vi(e,a,i),t!==null&&(gr(t,e,i,r),Qu(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Jt(),r=Yi(e),i=ii(n,r);i.tag=2,t!=null&&(i.callback=t),t=Vi(e,i,r),t!==null&&(gr(t,e,r,n),Qu(t,e,r))}};function o1(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Vl(n,r)||!Vl(i,a):!0}function m2(e,t,n){var r=!1,i=ta,a=t.contextType;return typeof a=="object"&&a!==null?a=er(a):(i=mn(t)?Ha:Bt.current,r=t.contextTypes,a=(r=r!=null)?Qo(e,i):ta),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Xf,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function s1(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Xf.enqueueReplaceState(t,t.state,null)}function Lg(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},rx(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=er(a):(a=mn(t)?Ha:Bt.current,i.context=Qo(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Mg(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Xf.enqueueReplaceState(i,i.state,null),Ad(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ns(e,t){try{var n="",r=t;do n+=xM(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function Ym(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function $g(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var KL=typeof WeakMap=="function"?WeakMap:Map;function p2(e,t,n){n=ii(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Md||(Md=!0,Gg=r),$g(e,t)},n}function g2(e,t,n){n=ii(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){$g(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){$g(e,t),typeof r!="function"&&(Gi===null?Gi=new Set([this]):Gi.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function l1(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new KL;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=o4.bind(null,e,t,n),t.then(e,e))}function c1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function u1(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ii(-1,1),t.tag=2,Vi(n,t,1))),n.lanes|=1),e)}var VL=yi.ReactCurrentOwner,un=!1;function Kt(e,t,n,r){t.child=e===null?HE(t,null,n,r):es(t,e.child,n,r)}function d1(e,t,n,r,i){n=n.render;var a=t.ref;return Ho(t,i),r=lx(e,t,n,r,a,i),n=cx(),e!==null&&!un?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,di(e,t,i)):(Ge&&n&&Jv(t),t.flags|=1,Kt(e,t,r,i),t.child)}function f1(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!xx(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,y2(e,t,a,r,i)):(e=id(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Vl,n(o,r)&&e.ref===t.ref)return di(e,t,i)}return t.flags|=1,e=Ji(a,r),e.ref=t.ref,e.return=t,t.child=e}function y2(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Vl(a,r)&&e.ref===t.ref)if(un=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(un=!0);else return t.lanes=e.lanes,di(e,t,i)}return Fg(e,t,n,r,i)}function v2(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},We($o,Cn),Cn|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,We($o,Cn),Cn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,We($o,Cn),Cn|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,We($o,Cn),Cn|=r;return Kt(e,t,i,n),t.child}function x2(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Fg(e,t,n,r,i){var a=mn(n)?Ha:Bt.current;return a=Qo(t,a),Ho(t,i),n=lx(e,t,n,r,a,i),r=cx(),e!==null&&!un?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,di(e,t,i)):(Ge&&r&&Jv(t),t.flags|=1,Kt(e,t,n,i),t.child)}function h1(e,t,n,r,i){if(mn(n)){var a=!0;_d(t)}else a=!1;if(Ho(t,i),t.stateNode===null)td(e,t),m2(t,n,r),Lg(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=er(c):(c=mn(n)?Ha:Bt.current,c=Qo(t,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||l!==c)&&s1(t,o,r,c),Ii=!1;var h=t.memoizedState;o.state=h,Ad(t,r,o,i),l=t.memoizedState,s!==r||h!==l||hn.current||Ii?(typeof d=="function"&&(Mg(t,n,d,r),l=t.memoizedState),(s=Ii||o1(t,n,s,r,h,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=s):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,VE(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:lr(t.type,s),o.props=c,f=t.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=er(l):(l=mn(n)?Ha:Bt.current,l=Qo(t,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==f||h!==l)&&s1(t,o,r,l),Ii=!1,h=t.memoizedState,o.state=h,Ad(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||hn.current||Ii?(typeof m=="function"&&(Mg(t,n,m,r),p=t.memoizedState),(c=Ii||o1(t,n,c,r,h,p,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ug(e,t,n,r,a,i)}function Ug(e,t,n,r,i,a){x2(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Qw(t,n,!1),di(e,t,a);r=t.stateNode,VL.current=t;var s=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=es(t,e.child,null,a),t.child=es(t,null,s,a)):Kt(e,t,s,a),t.memoizedState=r.state,i&&Qw(t,n,!0),t.child}function b2(e){var t=e.stateNode;t.pendingContext?Xw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Xw(e,t.context,!1),ix(e,t.containerInfo)}function m1(e,t,n,r,i){return Zo(),Qv(i),t.flags|=256,Kt(e,t,n,r),t.child}var zg={dehydrated:null,treeContext:null,retryLane:0};function Bg(e){return{baseLanes:e,cachePool:null,transitions:null}}function w2(e,t,n){var r=t.pendingProps,i=Je.current,a=!1,o=(t.flags&128)!==0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),We(Je,i&1),e===null)return Dg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=eh(o,r,0,null),e=Ua(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Bg(n),t.memoizedState=zg,e):fx(t,o));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return GL(e,t,o,r,s,i,n);if(a){a=r.fallback,o=t.mode,i=e.child,s=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Ji(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=Ji(s,a):(a=Ua(a,o,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,o=e.child.memoizedState,o=o===null?Bg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=zg,r}return a=e.child,e=a.sibling,r=Ji(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function fx(e,t){return t=eh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function yu(e,t,n,r){return r!==null&&Qv(r),es(t,e.child,null,n),e=fx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function GL(e,t,n,r,i,a,o){if(n)return t.flags&256?(t.flags&=-257,r=Ym(Error(ee(422))),yu(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=eh({mode:"visible",children:r.children},i,0,null),a=Ua(a,i,o,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&es(t,e.child,null,o),t.child.memoizedState=Bg(o),t.memoizedState=zg,a);if(!(t.mode&1))return yu(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,a=Error(ee(419)),r=Ym(a,r,void 0),yu(e,t,o,r)}if(s=(o&e.childLanes)!==0,un||s){if(r=St,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,ui(e,i),gr(r,e,i,-1))}return vx(),r=Ym(Error(ee(421))),yu(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=s4.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Pn=Ki(i.nextSibling),On=t,Ge=!0,dr=null,e!==null&&(Vn[Gn++]=Qr,Vn[Gn++]=Zr,Vn[Gn++]=Ka,Qr=e.id,Zr=e.overflow,Ka=t),t=fx(t,r.children),t.flags|=4096,t)}function p1(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Rg(e.return,t,n)}function Jm(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function k2(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Kt(e,t,r.children,n),r=Je.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&p1(e,n,t);else if(e.tag===19)p1(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(We(Je,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Td(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Jm(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Td(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Jm(t,!0,n,null,a);break;case"together":Jm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function td(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function di(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ga|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ee(153));if(t.child!==null){for(e=t.child,n=Ji(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ji(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function YL(e,t,n){switch(t.tag){case 3:b2(t),Zo();break;case 5:GE(t);break;case 1:mn(t.type)&&_d(t);break;case 4:ix(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;We(Pd,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(We(Je,Je.current&1),t.flags|=128,null):n&t.child.childLanes?w2(e,t,n):(We(Je,Je.current&1),e=di(e,t,n),e!==null?e.sibling:null);We(Je,Je.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return k2(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),We(Je,Je.current),r)break;return null;case 22:case 23:return t.lanes=0,v2(e,t,n)}return di(e,t,n)}var S2,Wg,j2,C2;S2=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wg=function(){};j2=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ta(Ur.current);var a=null;switch(n){case"input":i=dg(e,i),r=dg(e,r),a=[];break;case"select":i=Qe({},i,{value:void 0}),r=Qe({},r,{value:void 0}),a=[];break;case"textarea":i=mg(e,i),r=mg(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=jd)}gg(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var s=i[c];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ul.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var l=r[c];if(s=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(a||(a=[]),a.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ul.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&qe("scroll",e),a||s===l||(a=[])):(a=a||[]).push(c,l))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}};C2=function(e,t,n,r){n!==r&&(t.flags|=4)};function Zs(e,t){if(!Ge)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Rt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function JL(e,t,n){var r=t.pendingProps;switch(Xv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(t),null;case 1:return mn(t.type)&&Cd(),Rt(t),null;case 3:return r=t.stateNode,ts(),Ke(hn),Ke(Bt),ox(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(pu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,dr!==null&&(Xg(dr),dr=null))),Wg(e,t),Rt(t),null;case 5:ax(t);var i=Ta(Ql.current);if(n=t.type,e!==null&&t.stateNode!=null)j2(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ee(166));return Rt(t),null}if(e=Ta(Ur.current),pu(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Ir]=t,r[Jl]=a,e=(t.mode&1)!==0,n){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(i=0;i<yl.length;i++)qe(yl[i],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":jw(r,a),qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},qe("invalid",r);break;case"textarea":_w(r,a),qe("invalid",r)}gg(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?r.textContent!==s&&(a.suppressHydrationWarning!==!0&&mu(r.textContent,s,e),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&mu(r.textContent,s,e),i=["children",""+s]):Ul.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&qe("scroll",r)}switch(n){case"input":ou(r),Cw(r,a,!0);break;case"textarea":ou(r),Ew(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=jd)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Z_(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Ir]=t,e[Jl]=r,S2(e,t,!1,!1),t.stateNode=e;e:{switch(o=yg(n,r),n){case"dialog":qe("cancel",e),qe("close",e),i=r;break;case"iframe":case"object":case"embed":qe("load",e),i=r;break;case"video":case"audio":for(i=0;i<yl.length;i++)qe(yl[i],e);i=r;break;case"source":qe("error",e),i=r;break;case"img":case"image":case"link":qe("error",e),qe("load",e),i=r;break;case"details":qe("toggle",e),i=r;break;case"input":jw(e,r),i=dg(e,r),qe("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Qe({},r,{value:void 0}),qe("invalid",e);break;case"textarea":_w(e,r),i=mg(e,r),qe("invalid",e);break;default:i=r}gg(n,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?nE(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&eE(e,l)):a==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&zl(e,l):typeof l=="number"&&zl(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ul.hasOwnProperty(a)?l!=null&&a==="onScroll"&&qe("scroll",e):l!=null&&Mv(e,a,l,o))}switch(n){case"input":ou(e),Cw(e,r,!1);break;case"textarea":ou(e),Ew(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ea(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?zo(e,!!r.multiple,a,!1):r.defaultValue!=null&&zo(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=jd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Rt(t),null;case 6:if(e&&t.stateNode!=null)C2(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ee(166));if(n=Ta(Ql.current),Ta(Ur.current),pu(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ir]=t,(a=r.nodeValue!==n)&&(e=On,e!==null))switch(e.tag){case 3:mu(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&mu(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ir]=t,t.stateNode=r}return Rt(t),null;case 13:if(Ke(Je),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ge&&Pn!==null&&t.mode&1&&!(t.flags&128))WE(),Zo(),t.flags|=98560,a=!1;else if(a=pu(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(ee(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ee(317));a[Ir]=t}else Zo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Rt(t),a=!1}else dr!==null&&(Xg(dr),dr=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Je.current&1?gt===0&&(gt=3):vx())),t.updateQueue!==null&&(t.flags|=4),Rt(t),null);case 4:return ts(),Wg(e,t),e===null&&Gl(t.stateNode.containerInfo),Rt(t),null;case 10:return tx(t.type._context),Rt(t),null;case 17:return mn(t.type)&&Cd(),Rt(t),null;case 19:if(Ke(Je),a=t.memoizedState,a===null)return Rt(t),null;if(r=(t.flags&128)!==0,o=a.rendering,o===null)if(r)Zs(a,!1);else{if(gt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Td(e),o!==null){for(t.flags|=128,Zs(a,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return We(Je,Je.current&1|2),t.child}e=e.sibling}a.tail!==null&&nt()>rs&&(t.flags|=128,r=!0,Zs(a,!1),t.lanes=4194304)}else{if(!r)if(e=Td(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Zs(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ge)return Rt(t),null}else 2*nt()-a.renderingStartTime>rs&&n!==1073741824&&(t.flags|=128,r=!0,Zs(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=nt(),t.sibling=null,n=Je.current,We(Je,r?n&1|2:n&1),t):(Rt(t),null);case 22:case 23:return yx(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Cn&1073741824&&(Rt(t),t.subtreeFlags&6&&(t.flags|=8192)):Rt(t),null;case 24:return null;case 25:return null}throw Error(ee(156,t.tag))}function XL(e,t){switch(Xv(t),t.tag){case 1:return mn(t.type)&&Cd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ts(),Ke(hn),Ke(Bt),ox(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ax(t),null;case 13:if(Ke(Je),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ee(340));Zo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ke(Je),null;case 4:return ts(),null;case 10:return tx(t.type._context),null;case 22:case 23:return yx(),null;case 24:return null;default:return null}}var vu=!1,Lt=!1,QL=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Lo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){et(e,t,r)}else n.current=null}function qg(e,t,n){try{n()}catch(r){et(e,t,r)}}var g1=!1;function ZL(e,t){if(Eg=wd,e=OE(),Yv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,s=-1,l=-1,c=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(s=o+i),f!==a||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===n&&++c===i&&(s=o),h===a&&++d===r&&(l=o),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ng={focusedElem:e,selectionRange:n},wd=!1,ae=t;ae!==null;)if(t=ae,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ae=e;else for(;ae!==null;){t=ae;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,y=p.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:lr(t.type,g),y);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(j){et(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,ae=e;break}ae=t.return}return p=g1,g1=!1,p}function El(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&qg(t,n,a)}i=i.next}while(i!==r)}}function Qf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Hg(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function _2(e){var t=e.alternate;t!==null&&(e.alternate=null,_2(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ir],delete t[Jl],delete t[Ag],delete t[RL],delete t[ML])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function E2(e){return e.tag===5||e.tag===3||e.tag===4}function y1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||E2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Kg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=jd));else if(r!==4&&(e=e.child,e!==null))for(Kg(e,t,n),e=e.sibling;e!==null;)Kg(e,t,n),e=e.sibling}function Vg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Vg(e,t,n),e=e.sibling;e!==null;)Vg(e,t,n),e=e.sibling}var Pt=null,cr=!1;function Ni(e,t,n){for(n=n.child;n!==null;)N2(e,t,n),n=n.sibling}function N2(e,t,n){if(Fr&&typeof Fr.onCommitFiberUnmount=="function")try{Fr.onCommitFiberUnmount(qf,n)}catch{}switch(n.tag){case 5:Lt||Lo(n,t);case 6:var r=Pt,i=cr;Pt=null,Ni(e,t,n),Pt=r,cr=i,Pt!==null&&(cr?(e=Pt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Pt.removeChild(n.stateNode));break;case 18:Pt!==null&&(cr?(e=Pt,n=n.stateNode,e.nodeType===8?Wm(e.parentNode,n):e.nodeType===1&&Wm(e,n),Hl(e)):Wm(Pt,n.stateNode));break;case 4:r=Pt,i=cr,Pt=n.stateNode.containerInfo,cr=!0,Ni(e,t,n),Pt=r,cr=i;break;case 0:case 11:case 14:case 15:if(!Lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&qg(n,t,o),i=i.next}while(i!==r)}Ni(e,t,n);break;case 1:if(!Lt&&(Lo(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){et(n,t,s)}Ni(e,t,n);break;case 21:Ni(e,t,n);break;case 22:n.mode&1?(Lt=(r=Lt)||n.memoizedState!==null,Ni(e,t,n),Lt=r):Ni(e,t,n);break;default:Ni(e,t,n)}}function v1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new QL),t.forEach(function(r){var i=l4.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function or(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,s=o;e:for(;s!==null;){switch(s.tag){case 5:Pt=s.stateNode,cr=!1;break e;case 3:Pt=s.stateNode.containerInfo,cr=!0;break e;case 4:Pt=s.stateNode.containerInfo,cr=!0;break e}s=s.return}if(Pt===null)throw Error(ee(160));N2(a,o,i),Pt=null,cr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){et(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)P2(t,e),t=t.sibling}function P2(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(or(t,e),_r(e),r&4){try{El(3,e,e.return),Qf(3,e)}catch(g){et(e,e.return,g)}try{El(5,e,e.return)}catch(g){et(e,e.return,g)}}break;case 1:or(t,e),_r(e),r&512&&n!==null&&Lo(n,n.return);break;case 5:if(or(t,e),_r(e),r&512&&n!==null&&Lo(n,n.return),e.flags&32){var i=e.stateNode;try{zl(i,"")}catch(g){et(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&X_(i,a),yg(s,o);var c=yg(s,a);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?nE(i,f):d==="dangerouslySetInnerHTML"?eE(i,f):d==="children"?zl(i,f):Mv(i,d,f,c)}switch(s){case"input":fg(i,a);break;case"textarea":Q_(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?zo(i,!!a.multiple,m,!1):h!==!!a.multiple&&(a.defaultValue!=null?zo(i,!!a.multiple,a.defaultValue,!0):zo(i,!!a.multiple,a.multiple?[]:"",!1))}i[Jl]=a}catch(g){et(e,e.return,g)}}break;case 6:if(or(t,e),_r(e),r&4){if(e.stateNode===null)throw Error(ee(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){et(e,e.return,g)}}break;case 3:if(or(t,e),_r(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Hl(t.containerInfo)}catch(g){et(e,e.return,g)}break;case 4:or(t,e),_r(e);break;case 13:or(t,e),_r(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(px=nt())),r&4&&v1(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Lt=(c=Lt)||d,or(t,e),Lt=c):or(t,e),_r(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(ae=e,d=e.child;d!==null;){for(f=ae=d;ae!==null;){switch(h=ae,m=h.child,h.tag){case 0:case 11:case 14:case 15:El(4,h,h.return);break;case 1:Lo(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){et(r,n,g)}}break;case 5:Lo(h,h.return);break;case 22:if(h.memoizedState!==null){b1(f);continue}}m!==null?(m.return=h,ae=m):b1(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=tE("display",o))}catch(g){et(e,e.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){et(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:or(t,e),_r(e),r&4&&v1(e);break;case 21:break;default:or(t,e),_r(e)}}function _r(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(E2(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(zl(i,""),r.flags&=-33);var a=y1(e);Vg(e,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,s=y1(e);Kg(e,s,o);break;default:throw Error(ee(161))}}catch(l){et(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function e4(e,t,n){ae=e,O2(e)}function O2(e,t,n){for(var r=(e.mode&1)!==0;ae!==null;){var i=ae,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||vu;if(!o){var s=i.alternate,l=s!==null&&s.memoizedState!==null||Lt;s=vu;var c=Lt;if(vu=o,(Lt=l)&&!c)for(ae=i;ae!==null;)o=ae,l=o.child,o.tag===22&&o.memoizedState!==null?w1(i):l!==null?(l.return=o,ae=l):w1(i);for(;a!==null;)ae=a,O2(a),a=a.sibling;ae=i,vu=s,Lt=c}x1(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ae=a):x1(e)}}function x1(e){for(;ae!==null;){var t=ae;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Lt||Qf(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Lt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:lr(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&r1(t,a,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}r1(t,o,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Hl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Lt||t.flags&512&&Hg(t)}catch(h){et(t,t.return,h)}}if(t===e){ae=null;break}if(n=t.sibling,n!==null){n.return=t.return,ae=n;break}ae=t.return}}function b1(e){for(;ae!==null;){var t=ae;if(t===e){ae=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ae=n;break}ae=t.return}}function w1(e){for(;ae!==null;){var t=ae;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Qf(4,t)}catch(l){et(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){et(t,i,l)}}var a=t.return;try{Hg(t)}catch(l){et(t,a,l)}break;case 5:var o=t.return;try{Hg(t)}catch(l){et(t,o,l)}}}catch(l){et(t,t.return,l)}if(t===e){ae=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ae=s;break}ae=t.return}}var t4=Math.ceil,Rd=yi.ReactCurrentDispatcher,hx=yi.ReactCurrentOwner,Zn=yi.ReactCurrentBatchConfig,_e=0,St=null,ct=null,Tt=0,Cn=0,$o=aa(0),gt=0,nc=null,Ga=0,Zf=0,mx=0,Nl=null,ln=null,px=0,rs=1/0,Gr=null,Md=!1,Gg=null,Gi=null,xu=!1,zi=null,Ld=0,Pl=0,Yg=null,nd=-1,rd=0;function Jt(){return _e&6?nt():nd!==-1?nd:nd=nt()}function Yi(e){return e.mode&1?_e&2&&Tt!==0?Tt&-Tt:$L.transition!==null?(rd===0&&(rd=mE()),rd):(e=Te,e!==0||(e=window.event,e=e===void 0?16:wE(e.type)),e):1}function gr(e,t,n,r){if(50<Pl)throw Pl=0,Yg=null,Error(ee(185));kc(e,n,r),(!(_e&2)||e!==St)&&(e===St&&(!(_e&2)&&(Zf|=n),gt===4&&Li(e,Tt)),pn(e,r),n===1&&_e===0&&!(t.mode&1)&&(rs=nt()+500,Yf&&oa()))}function pn(e,t){var n=e.callbackNode;$M(e,t);var r=bd(e,e===St?Tt:0);if(r===0)n!==null&&Ow(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ow(n),t===1)e.tag===0?LL(k1.bind(null,e)):UE(k1.bind(null,e)),IL(function(){!(_e&6)&&oa()}),n=null;else{switch(pE(r)){case 1:n=zv;break;case 4:n=fE;break;case 16:n=xd;break;case 536870912:n=hE;break;default:n=xd}n=$2(n,A2.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function A2(e,t){if(nd=-1,rd=0,_e&6)throw Error(ee(327));var n=e.callbackNode;if(Ko()&&e.callbackNode!==n)return null;var r=bd(e,e===St?Tt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=$d(e,r);else{t=r;var i=_e;_e|=2;var a=I2();(St!==e||Tt!==t)&&(Gr=null,rs=nt()+500,Fa(e,t));do try{i4();break}catch(s){T2(e,s)}while(1);ex(),Rd.current=a,_e=i,ct!==null?t=0:(St=null,Tt=0,t=gt)}if(t!==0){if(t===2&&(i=kg(e),i!==0&&(r=i,t=Jg(e,i))),t===1)throw n=nc,Fa(e,0),Li(e,r),pn(e,nt()),n;if(t===6)Li(e,r);else{if(i=e.current.alternate,!(r&30)&&!n4(i)&&(t=$d(e,r),t===2&&(a=kg(e),a!==0&&(r=a,t=Jg(e,a))),t===1))throw n=nc,Fa(e,0),Li(e,r),pn(e,nt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ee(345));case 2:ka(e,ln,Gr);break;case 3:if(Li(e,r),(r&130023424)===r&&(t=px+500-nt(),10<t)){if(bd(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Jt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Og(ka.bind(null,e,ln,Gr),t);break}ka(e,ln,Gr);break;case 4:if(Li(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-pr(r);a=1<<o,o=t[o],o>i&&(i=o),r&=~a}if(r=i,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*t4(r/1960))-r,10<r){e.timeoutHandle=Og(ka.bind(null,e,ln,Gr),r);break}ka(e,ln,Gr);break;case 5:ka(e,ln,Gr);break;default:throw Error(ee(329))}}}return pn(e,nt()),e.callbackNode===n?A2.bind(null,e):null}function Jg(e,t){var n=Nl;return e.current.memoizedState.isDehydrated&&(Fa(e,t).flags|=256),e=$d(e,t),e!==2&&(t=ln,ln=n,t!==null&&Xg(t)),e}function Xg(e){ln===null?ln=e:ln.push.apply(ln,e)}function n4(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!xr(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Li(e,t){for(t&=~mx,t&=~Zf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-pr(t),r=1<<n;e[n]=-1,t&=~r}}function k1(e){if(_e&6)throw Error(ee(327));Ko();var t=bd(e,0);if(!(t&1))return pn(e,nt()),null;var n=$d(e,t);if(e.tag!==0&&n===2){var r=kg(e);r!==0&&(t=r,n=Jg(e,r))}if(n===1)throw n=nc,Fa(e,0),Li(e,t),pn(e,nt()),n;if(n===6)throw Error(ee(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ka(e,ln,Gr),pn(e,nt()),null}function gx(e,t){var n=_e;_e|=1;try{return e(t)}finally{_e=n,_e===0&&(rs=nt()+500,Yf&&oa())}}function Ya(e){zi!==null&&zi.tag===0&&!(_e&6)&&Ko();var t=_e;_e|=1;var n=Zn.transition,r=Te;try{if(Zn.transition=null,Te=1,e)return e()}finally{Te=r,Zn.transition=n,_e=t,!(_e&6)&&oa()}}function yx(){Cn=$o.current,Ke($o)}function Fa(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,TL(n)),ct!==null)for(n=ct.return;n!==null;){var r=n;switch(Xv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cd();break;case 3:ts(),Ke(hn),Ke(Bt),ox();break;case 5:ax(r);break;case 4:ts();break;case 13:Ke(Je);break;case 19:Ke(Je);break;case 10:tx(r.type._context);break;case 22:case 23:yx()}n=n.return}if(St=e,ct=e=Ji(e.current,null),Tt=Cn=t,gt=0,nc=null,mx=Zf=Ga=0,ln=Nl=null,Aa!==null){for(t=0;t<Aa.length;t++)if(n=Aa[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}Aa=null}return e}function T2(e,t){do{var n=ct;try{if(ex(),Zu.current=Dd,Id){for(var r=Xe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Id=!1}if(Va=0,kt=ht=Xe=null,_l=!1,Zl=0,hx.current=null,n===null||n.return===null){gt=1,nc=t,ct=null;break}e:{var a=e,o=n.return,s=n,l=t;if(t=Tt,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=s,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=c1(o);if(m!==null){m.flags&=-257,u1(m,o,s,a,t),m.mode&1&&l1(a,c,t),t=m,l=c;var p=t.updateQueue;if(p===null){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break e}else{if(!(t&1)){l1(a,c,t),vx();break e}l=Error(ee(426))}}else if(Ge&&s.mode&1){var y=c1(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),u1(y,o,s,a,t),Qv(ns(l,s));break e}}a=l=ns(l,s),gt!==4&&(gt=2),Nl===null?Nl=[a]:Nl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var x=p2(a,l,t);n1(a,x);break e;case 1:s=l;var b=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Gi===null||!Gi.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=g2(a,s,t);n1(a,j);break e}}a=a.return}while(a!==null)}R2(n)}catch(S){t=S,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(1)}function I2(){var e=Rd.current;return Rd.current=Dd,e===null?Dd:e}function vx(){(gt===0||gt===3||gt===2)&&(gt=4),St===null||!(Ga&268435455)&&!(Zf&268435455)||Li(St,Tt)}function $d(e,t){var n=_e;_e|=2;var r=I2();(St!==e||Tt!==t)&&(Gr=null,Fa(e,t));do try{r4();break}catch(i){T2(e,i)}while(1);if(ex(),_e=n,Rd.current=r,ct!==null)throw Error(ee(261));return St=null,Tt=0,gt}function r4(){for(;ct!==null;)D2(ct)}function i4(){for(;ct!==null&&!PM();)D2(ct)}function D2(e){var t=L2(e.alternate,e,Cn);e.memoizedProps=e.pendingProps,t===null?R2(e):ct=t,hx.current=null}function R2(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=XL(n,t),n!==null){n.flags&=32767,ct=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{gt=6,ct=null;return}}else if(n=JL(n,t,Cn),n!==null){ct=n;return}if(t=t.sibling,t!==null){ct=t;return}ct=t=e}while(t!==null);gt===0&&(gt=5)}function ka(e,t,n){var r=Te,i=Zn.transition;try{Zn.transition=null,Te=1,a4(e,t,n,r)}finally{Zn.transition=i,Te=r}return null}function a4(e,t,n,r){do Ko();while(zi!==null);if(_e&6)throw Error(ee(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ee(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(FM(e,a),e===St&&(ct=St=null,Tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xu||(xu=!0,$2(xd,function(){return Ko(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Zn.transition,Zn.transition=null;var o=Te;Te=1;var s=_e;_e|=4,hx.current=null,ZL(e,n),P2(n,e),CL(Ng),wd=!!Eg,Ng=Eg=null,e.current=n,e4(n),OM(),_e=s,Te=o,Zn.transition=a}else e.current=n;if(xu&&(xu=!1,zi=e,Ld=i),a=e.pendingLanes,a===0&&(Gi=null),IM(n.stateNode),pn(e,nt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Md)throw Md=!1,e=Gg,Gg=null,e;return Ld&1&&e.tag!==0&&Ko(),a=e.pendingLanes,a&1?e===Yg?Pl++:(Pl=0,Yg=e):Pl=0,oa(),null}function Ko(){if(zi!==null){var e=pE(Ld),t=Zn.transition,n=Te;try{if(Zn.transition=null,Te=16>e?16:e,zi===null)var r=!1;else{if(e=zi,zi=null,Ld=0,_e&6)throw Error(ee(331));var i=_e;for(_e|=4,ae=e.current;ae!==null;){var a=ae,o=a.child;if(ae.flags&16){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for(ae=c;ae!==null;){var d=ae;switch(d.tag){case 0:case 11:case 15:El(8,d,a)}var f=d.child;if(f!==null)f.return=d,ae=f;else for(;ae!==null;){d=ae;var h=d.sibling,m=d.return;if(_2(d),d===c){ae=null;break}if(h!==null){h.return=m,ae=h;break}ae=m}}}var p=a.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}ae=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ae=o;else e:for(;ae!==null;){if(a=ae,a.flags&2048)switch(a.tag){case 0:case 11:case 15:El(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,ae=x;break e}ae=a.return}}var b=e.current;for(ae=b;ae!==null;){o=ae;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ae=w;else e:for(o=b;ae!==null;){if(s=ae,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Qf(9,s)}}catch(S){et(s,s.return,S)}if(s===o){ae=null;break e}var j=s.sibling;if(j!==null){j.return=s.return,ae=j;break e}ae=s.return}}if(_e=i,oa(),Fr&&typeof Fr.onPostCommitFiberRoot=="function")try{Fr.onPostCommitFiberRoot(qf,e)}catch{}r=!0}return r}finally{Te=n,Zn.transition=t}}return!1}function S1(e,t,n){t=ns(n,t),t=p2(e,t,1),e=Vi(e,t,1),t=Jt(),e!==null&&(kc(e,1,t),pn(e,t))}function et(e,t,n){if(e.tag===3)S1(e,e,n);else for(;t!==null;){if(t.tag===3){S1(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gi===null||!Gi.has(r))){e=ns(n,e),e=g2(t,e,1),t=Vi(t,e,1),e=Jt(),t!==null&&(kc(t,1,e),pn(t,e));break}}t=t.return}}function o4(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Jt(),e.pingedLanes|=e.suspendedLanes&n,St===e&&(Tt&n)===n&&(gt===4||gt===3&&(Tt&130023424)===Tt&&500>nt()-px?Fa(e,0):mx|=n),pn(e,t)}function M2(e,t){t===0&&(e.mode&1?(t=cu,cu<<=1,!(cu&130023424)&&(cu=4194304)):t=1);var n=Jt();e=ui(e,t),e!==null&&(kc(e,t,n),pn(e,n))}function s4(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),M2(e,n)}function l4(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(t),M2(e,n)}var L2;L2=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||hn.current)un=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return un=!1,YL(e,t,n);un=!!(e.flags&131072)}else un=!1,Ge&&t.flags&1048576&&zE(t,Nd,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;td(e,t),e=t.pendingProps;var i=Qo(t,Bt.current);Ho(t,n),i=lx(null,t,r,e,i,n);var a=cx();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mn(r)?(a=!0,_d(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,rx(t),i.updater=Xf,t.stateNode=i,i._reactInternals=t,Lg(t,r,e,n),t=Ug(null,t,r,!0,a,n)):(t.tag=0,Ge&&a&&Jv(t),Kt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(td(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=u4(r),e=lr(r,e),i){case 0:t=Fg(null,t,r,e,n);break e;case 1:t=h1(null,t,r,e,n);break e;case 11:t=d1(null,t,r,e,n);break e;case 14:t=f1(null,t,r,lr(r.type,e),n);break e}throw Error(ee(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:lr(r,i),Fg(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:lr(r,i),h1(e,t,r,i,n);case 3:e:{if(b2(t),e===null)throw Error(ee(387));r=t.pendingProps,a=t.memoizedState,i=a.element,VE(e,t),Ad(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=ns(Error(ee(423)),t),t=m1(e,t,r,n,i);break e}else if(r!==i){i=ns(Error(ee(424)),t),t=m1(e,t,r,n,i);break e}else for(Pn=Ki(t.stateNode.containerInfo.firstChild),On=t,Ge=!0,dr=null,n=HE(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zo(),r===i){t=di(e,t,n);break e}Kt(e,t,r,n)}t=t.child}return t;case 5:return GE(t),e===null&&Dg(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,Pg(r,i)?o=null:a!==null&&Pg(r,a)&&(t.flags|=32),x2(e,t),Kt(e,t,o,n),t.child;case 6:return e===null&&Dg(t),null;case 13:return w2(e,t,n);case 4:return ix(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=es(t,null,r,n):Kt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:lr(r,i),d1(e,t,r,i,n);case 7:return Kt(e,t,t.pendingProps,n),t.child;case 8:return Kt(e,t,t.pendingProps.children,n),t.child;case 12:return Kt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,We(Pd,r._currentValue),r._currentValue=o,a!==null)if(xr(a.value,o)){if(a.children===i.children&&!hn.current){t=di(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=ii(-1,n&-n),l.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Rg(a.return,n,t),s.lanes|=n;break}l=l.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ee(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),Rg(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Kt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ho(t,n),i=er(i),r=r(i),t.flags|=1,Kt(e,t,r,n),t.child;case 14:return r=t.type,i=lr(r,t.pendingProps),i=lr(r.type,i),f1(e,t,r,i,n);case 15:return y2(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:lr(r,i),td(e,t),t.tag=1,mn(r)?(e=!0,_d(t)):e=!1,Ho(t,n),m2(t,r,i),Lg(t,r,i,n),Ug(null,t,r,!0,e,n);case 19:return k2(e,t,n);case 22:return v2(e,t,n)}throw Error(ee(156,t.tag))};function $2(e,t){return dE(e,t)}function c4(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(e,t,n,r){return new c4(e,t,n,r)}function xx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function u4(e){if(typeof e=="function")return xx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$v)return 11;if(e===Fv)return 14}return 2}function Ji(e,t){var n=e.alternate;return n===null?(n=Xn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function id(e,t,n,r,i,a){var o=2;if(r=e,typeof e=="function")xx(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case No:return Ua(n.children,i,a,t);case Lv:o=8,i|=8;break;case sg:return e=Xn(12,n,t,i|2),e.elementType=sg,e.lanes=a,e;case lg:return e=Xn(13,n,t,i),e.elementType=lg,e.lanes=a,e;case cg:return e=Xn(19,n,t,i),e.elementType=cg,e.lanes=a,e;case G_:return eh(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case K_:o=10;break e;case V_:o=9;break e;case $v:o=11;break e;case Fv:o=14;break e;case Ti:o=16,r=null;break e}throw Error(ee(130,e==null?e:typeof e,""))}return t=Xn(o,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function Ua(e,t,n,r){return e=Xn(7,e,r,t),e.lanes=n,e}function eh(e,t,n,r){return e=Xn(22,e,r,t),e.elementType=G_,e.lanes=n,e.stateNode={isHidden:!1},e}function Xm(e,t,n){return e=Xn(6,e,null,t),e.lanes=n,e}function Qm(e,t,n){return t=Xn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function d4(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tm(0),this.expirationTimes=Tm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function bx(e,t,n,r,i,a,o,s,l){return e=new d4(e,t,n,s,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Xn(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rx(a),e}function f4(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Eo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function F2(e){if(!e)return ta;e=e._reactInternals;e:{if(ao(e)!==e||e.tag!==1)throw Error(ee(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ee(171))}if(e.tag===1){var n=e.type;if(mn(n))return FE(e,n,t)}return t}function U2(e,t,n,r,i,a,o,s,l){return e=bx(n,r,!0,e,i,a,o,s,l),e.context=F2(null),n=e.current,r=Jt(),i=Yi(n),a=ii(r,i),a.callback=t??null,Vi(n,a,i),e.current.lanes=i,kc(e,i,r),pn(e,r),e}function th(e,t,n,r){var i=t.current,a=Jt(),o=Yi(i);return n=F2(n),t.context===null?t.context=n:t.pendingContext=n,t=ii(a,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Vi(i,t,o),e!==null&&(gr(e,i,o,a),Qu(e,i,o)),o}function Fd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function j1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function wx(e,t){j1(e,t),(e=e.alternate)&&j1(e,t)}function h4(){return null}var z2=typeof reportError=="function"?reportError:function(e){console.error(e)};function kx(e){this._internalRoot=e}nh.prototype.render=kx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ee(409));th(e,t,null,null)};nh.prototype.unmount=kx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ya(function(){th(null,e,null,null)}),t[ci]=null}};function nh(e){this._internalRoot=e}nh.prototype.unstable_scheduleHydration=function(e){if(e){var t=vE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mi.length&&t!==0&&t<Mi[n].priority;n++);Mi.splice(n,0,e),n===0&&bE(e)}};function Sx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function rh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function C1(){}function m4(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var c=Fd(o);a.call(c)}}var o=U2(t,r,e,0,null,!1,!1,"",C1);return e._reactRootContainer=o,e[ci]=o.current,Gl(e.nodeType===8?e.parentNode:e),Ya(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var c=Fd(l);s.call(c)}}var l=bx(e,0,!1,null,null,!1,!1,"",C1);return e._reactRootContainer=l,e[ci]=l.current,Gl(e.nodeType===8?e.parentNode:e),Ya(function(){th(t,l,n,r)}),l}function ih(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var l=Fd(o);s.call(l)}}th(t,o,e,i)}else o=m4(n,t,e,i,r);return Fd(o)}gE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=gl(t.pendingLanes);n!==0&&(Bv(t,n|1),pn(t,nt()),!(_e&6)&&(rs=nt()+500,oa()))}break;case 13:Ya(function(){var r=ui(e,1);if(r!==null){var i=Jt();gr(r,e,1,i)}}),wx(e,1)}};Wv=function(e){if(e.tag===13){var t=ui(e,134217728);if(t!==null){var n=Jt();gr(t,e,134217728,n)}wx(e,134217728)}};yE=function(e){if(e.tag===13){var t=Yi(e),n=ui(e,t);if(n!==null){var r=Jt();gr(n,e,t,r)}wx(e,t)}};vE=function(){return Te};xE=function(e,t){var n=Te;try{return Te=e,t()}finally{Te=n}};xg=function(e,t,n){switch(t){case"input":if(fg(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Gf(r);if(!i)throw Error(ee(90));J_(r),fg(r,i)}}}break;case"textarea":Q_(e,n);break;case"select":t=n.value,t!=null&&zo(e,!!n.multiple,t,!1)}};aE=gx;oE=Ya;var p4={usingClientEntryPoint:!1,Events:[jc,To,Gf,rE,iE,gx]},el={findFiberByHostInstance:Oa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},g4={bundleType:el.bundleType,version:el.version,rendererPackageName:el.rendererPackageName,rendererConfig:el.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cE(e),e===null?null:e.stateNode},findFiberByHostInstance:el.findFiberByHostInstance||h4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bu.isDisabled&&bu.supportsFiber)try{qf=bu.inject(g4),Fr=bu}catch{}}$n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p4;$n.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sx(t))throw Error(ee(200));return f4(e,t,null,n)};$n.createRoot=function(e,t){if(!Sx(e))throw Error(ee(299));var n=!1,r="",i=z2;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=bx(e,1,!1,null,null,n,!1,r,i),e[ci]=t.current,Gl(e.nodeType===8?e.parentNode:e),new kx(t)};$n.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ee(188)):(e=Object.keys(e).join(","),Error(ee(268,e)));return e=cE(t),e=e===null?null:e.stateNode,e};$n.flushSync=function(e){return Ya(e)};$n.hydrate=function(e,t,n){if(!rh(t))throw Error(ee(200));return ih(null,e,t,!0,n)};$n.hydrateRoot=function(e,t,n){if(!Sx(e))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=z2;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=U2(t,null,e,1,n??null,i,!1,a,o),e[ci]=t.current,Gl(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new nh(t)};$n.render=function(e,t,n){if(!rh(t))throw Error(ee(200));return ih(null,e,t,!1,n)};$n.unmountComponentAtNode=function(e){if(!rh(e))throw Error(ee(40));return e._reactRootContainer?(Ya(function(){ih(null,null,e,!1,function(){e._reactRootContainer=null,e[ci]=null})}),!0):!1};$n.unstable_batchedUpdates=gx;$n.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!rh(n))throw Error(ee(200));if(e==null||e._reactInternals===void 0)throw Error(ee(38));return ih(e,t,n,!1,r)};$n.version="18.3.1-next-f1338f8080-20240426";function B2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(B2)}catch(e){console.error(e)}}B2(),B_.exports=$n;var jx=B_.exports,_1=jx;ag.createRoot=_1.createRoot,ag.hydrateRoot=_1.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rc(){return rc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rc.apply(this,arguments)}var Bi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Bi||(Bi={}));const E1="popstate";function y4(e){e===void 0&&(e={});function t(r,i){let{pathname:a,search:o,hash:s}=r.location;return Qg("",{pathname:a,search:o,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ud(i)}return x4(t,n,null,e)}function rt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function W2(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function v4(){return Math.random().toString(36).substr(2,8)}function N1(e,t){return{usr:e.state,key:e.key,idx:t}}function Qg(e,t,n,r){return n===void 0&&(n=null),rc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Cs(t):t,{state:n,key:t&&t.key||r||v4()})}function Ud(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Cs(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function x4(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s=Bi.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(rc({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function f(){s=Bi.Pop;let y=d(),x=y==null?null:y-c;c=y,l&&l({action:s,location:g.location,delta:x})}function h(y,x){s=Bi.Push;let b=Qg(g.location,y,x);n&&n(b,y),c=d()+1;let w=N1(b,c),j=g.createHref(b);try{o.pushState(w,"",j)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(j)}a&&l&&l({action:s,location:g.location,delta:1})}function m(y,x){s=Bi.Replace;let b=Qg(g.location,y,x);n&&n(b,y),c=d();let w=N1(b,c),j=g.createHref(b);o.replaceState(w,"",j),a&&l&&l({action:s,location:g.location,delta:0})}function p(y){let x=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof y=="string"?y:Ud(y);return b=b.replace(/ $/,"%20"),rt(x,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,x)}let g={get action(){return s},get location(){return e(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(E1,f),l=y,()=>{i.removeEventListener(E1,f),l=null}},createHref(y){return t(i,y)},createURL:p,encodeLocation(y){let x=p(y);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:m,go(y){return o.go(y)}};return g}var P1;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(P1||(P1={}));function b4(e,t,n){return n===void 0&&(n="/"),w4(e,t,n,!1)}function w4(e,t,n,r){let i=typeof t=="string"?Cs(t):t,a=Cx(i.pathname||"/",n);if(a==null)return null;let o=q2(e);k4(o);let s=null;for(let l=0;s==null&&l<o.length;++l){let c=I4(a);s=A4(o[l],c,r)}return s}function q2(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,s)=>{let l={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};l.relativePath.startsWith("/")&&(rt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Xi([r,l.relativePath]),d=n.concat(l);a.children&&a.children.length>0&&(rt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),q2(a.children,t,d,c)),!(a.path==null&&!a.index)&&t.push({path:c,score:P4(c,a.index),routesMeta:d})};return e.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let l of H2(a.path))i(a,o,l)}),t}function H2(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=H2(r.join("/")),s=[];return s.push(...o.map(l=>l===""?a:[a,l].join("/"))),i&&s.push(...o),s.map(l=>e.startsWith("/")&&l===""?"/":l)}function k4(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:O4(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const S4=/^:[\w-]+$/,j4=3,C4=2,_4=1,E4=10,N4=-2,O1=e=>e==="*";function P4(e,t){let n=e.split("/"),r=n.length;return n.some(O1)&&(r+=N4),t&&(r+=C4),n.filter(i=>!O1(i)).reduce((i,a)=>i+(S4.test(a)?j4:a===""?_4:E4),r)}function O4(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function A4(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,i={},a="/",o=[];for(let s=0;s<r.length;++s){let l=r[s],c=s===r.length-1,d=a==="/"?t:t.slice(a.length)||"/",f=A1({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),h=l.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=A1({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Xi([a,f.pathname]),pathnameBase:L4(Xi([a,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(a=Xi([a,f.pathnameBase]))}return o}function A1(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=T4(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((c,d,f)=>{let{paramName:h,isOptional:m}=d;if(h==="*"){let g=s[f]||"";o=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const p=s[f];return m&&!p?c[h]=void 0:c[h]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:o,pattern:e}}function T4(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),W2(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,l)=>(r.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function I4(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return W2(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Cx(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function D4(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Cs(e):e;return{pathname:n?n.startsWith("/")?n:R4(n,t):t,search:$4(r),hash:F4(i)}}function R4(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Zm(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function M4(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function _x(e,t){let n=M4(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ex(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Cs(e):(i=rc({},e),rt(!i.pathname||!i.pathname.includes("?"),Zm("?","pathname","search",i)),rt(!i.pathname||!i.pathname.includes("#"),Zm("#","pathname","hash",i)),rt(!i.search||!i.search.includes("#"),Zm("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}s=f>=0?t[f]:"/"}let l=D4(i,s),c=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Xi=e=>e.join("/").replace(/\/\/+/g,"/"),L4=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),$4=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,F4=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function U4(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const K2=["post","put","patch","delete"];new Set(K2);const z4=["get",...K2];new Set(z4);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ic(){return ic=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ic.apply(this,arguments)}const Nx=v.createContext(null),B4=v.createContext(null),sa=v.createContext(null),ah=v.createContext(null),vi=v.createContext({outlet:null,matches:[],isDataRoute:!1}),V2=v.createContext(null);function W4(e,t){let{relative:n}=t===void 0?{}:t;_s()||rt(!1);let{basename:r,navigator:i}=v.useContext(sa),{hash:a,pathname:o,search:s}=J2(e,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Xi([r,o])),i.createHref({pathname:l,search:s,hash:a})}function _s(){return v.useContext(ah)!=null}function xi(){return _s()||rt(!1),v.useContext(ah).location}function G2(e){v.useContext(sa).static||v.useLayoutEffect(e)}function Wt(){let{isDataRoute:e}=v.useContext(vi);return e?n$():q4()}function q4(){_s()||rt(!1);let e=v.useContext(Nx),{basename:t,future:n,navigator:r}=v.useContext(sa),{matches:i}=v.useContext(vi),{pathname:a}=xi(),o=JSON.stringify(_x(i,n.v7_relativeSplatPath)),s=v.useRef(!1);return G2(()=>{s.current=!0}),v.useCallback(function(c,d){if(d===void 0&&(d={}),!s.current)return;if(typeof c=="number"){r.go(c);return}let f=Ex(c,JSON.parse(o),a,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Xi([t,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[t,r,o,a,e])}function Y2(){let{matches:e}=v.useContext(vi),t=e[e.length-1];return t?t.params:{}}function J2(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=v.useContext(sa),{matches:i}=v.useContext(vi),{pathname:a}=xi(),o=JSON.stringify(_x(i,r.v7_relativeSplatPath));return v.useMemo(()=>Ex(e,JSON.parse(o),a,n==="path"),[e,o,a,n])}function H4(e,t){return K4(e,t)}function K4(e,t,n,r){_s()||rt(!1);let{navigator:i}=v.useContext(sa),{matches:a}=v.useContext(vi),o=a[a.length-1],s=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=xi(),d;if(t){var f;let y=typeof t=="string"?Cs(t):t;l==="/"||(f=y.pathname)!=null&&f.startsWith(l)||rt(!1),d=y}else d=c;let h=d.pathname||"/",m=h;if(l!=="/"){let y=l.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=b4(e,{pathname:m}),g=X4(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},s,y.params),pathname:Xi([l,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Xi([l,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),a,n,r);return t&&g?v.createElement(ah.Provider,{value:{location:ic({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Bi.Pop}},g):g}function V4(){let e=t$(),t=U4(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},a=null;return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),n?v.createElement("pre",{style:i},n):null,a)}const G4=v.createElement(V4,null);class Y4 extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?v.createElement(vi.Provider,{value:this.props.routeContext},v.createElement(V2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function J4(e){let{routeContext:t,match:n,children:r}=e,i=v.useContext(Nx);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),v.createElement(vi.Provider,{value:t},r)}function X4(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var a;if(!n)return null;if(n.errors)e=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,s=(i=n)==null?void 0:i.errors;if(s!=null){let d=o.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);d>=0||rt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:h,errors:m}=n,p=f.route.loader&&h[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||p){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,f,h)=>{let m,p=!1,g=null,y=null;n&&(m=s&&f.route.id?s[f.route.id]:void 0,g=f.route.errorElement||G4,l&&(c<0&&h===0?(r$("route-fallback",!1),p=!0,y=null):c===h&&(p=!0,y=f.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,h+1)),b=()=>{let w;return m?w=g:p?w=y:f.route.Component?w=v.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,v.createElement(J4,{match:f,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:w})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?v.createElement(Y4,{location:n.location,revalidation:n.revalidation,component:g,error:m,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}var X2=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(X2||{}),zd=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(zd||{});function Q4(e){let t=v.useContext(Nx);return t||rt(!1),t}function Z4(e){let t=v.useContext(B4);return t||rt(!1),t}function e$(e){let t=v.useContext(vi);return t||rt(!1),t}function Q2(e){let t=e$(),n=t.matches[t.matches.length-1];return n.route.id||rt(!1),n.route.id}function t$(){var e;let t=v.useContext(V2),n=Z4(zd.UseRouteError),r=Q2(zd.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function n$(){let{router:e}=Q4(X2.UseNavigateStable),t=Q2(zd.UseNavigateStable),n=v.useRef(!1);return G2(()=>{n.current=!0}),v.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,ic({fromRouteId:t},a)))},[e,t])}const T1={};function r$(e,t,n){!t&&!T1[e]&&(T1[e]=!0)}function i$(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Z2(e){let{to:t,replace:n,state:r,relative:i}=e;_s()||rt(!1);let{future:a,static:o}=v.useContext(sa),{matches:s}=v.useContext(vi),{pathname:l}=xi(),c=Wt(),d=Ex(t,_x(s,a.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(d);return v.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:i}),[c,f,i,n,r]),null}function rn(e){rt(!1)}function a$(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Bi.Pop,navigator:a,static:o=!1,future:s}=e;_s()&&rt(!1);let l=t.replace(/^\/*/,"/"),c=v.useMemo(()=>({basename:l,navigator:a,static:o,future:ic({v7_relativeSplatPath:!1},s)}),[l,s,a,o]);typeof r=="string"&&(r=Cs(r));let{pathname:d="/",search:f="",hash:h="",state:m=null,key:p="default"}=r,g=v.useMemo(()=>{let y=Cx(d,l);return y==null?null:{location:{pathname:y,search:f,hash:h,state:m,key:p},navigationType:i}},[l,d,f,h,m,p,i]);return g==null?null:v.createElement(sa.Provider,{value:c},v.createElement(ah.Provider,{children:n,value:g}))}function o$(e){let{children:t,location:n}=e;return H4(Zg(t),n)}new Promise(()=>{});function Zg(e,t){t===void 0&&(t=[]);let n=[];return v.Children.forEach(e,(r,i)=>{if(!v.isValidElement(r))return;let a=[...t,i];if(r.type===v.Fragment){n.push.apply(n,Zg(r.props.children,a));return}r.type!==rn&&rt(!1),!r.props.index||!r.props.children||rt(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Zg(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ey(){return ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ey.apply(this,arguments)}function s$(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function l$(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function c$(e,t){return e.button===0&&(!t||t==="_self")&&!l$(e)}function ty(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function u$(e,t){let n=ty(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(a=>{n.append(i,a)})}),n}const d$=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],f$="6";try{window.__reactRouterVersion=f$}catch{}const h$="startTransition",I1=U_[h$];function m$(e){let{basename:t,children:n,future:r,window:i}=e,a=v.useRef();a.current==null&&(a.current=y4({window:i,v5Compat:!0}));let o=a.current,[s,l]=v.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=v.useCallback(f=>{c&&I1?I1(()=>l(f)):l(f)},[l,c]);return v.useLayoutEffect(()=>o.listen(d),[o,d]),v.useEffect(()=>i$(r),[r]),v.createElement(a$,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:o,future:r})}const p$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",g$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eN=v.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:a,replace:o,state:s,target:l,to:c,preventScrollReset:d,viewTransition:f}=t,h=s$(t,d$),{basename:m}=v.useContext(sa),p,g=!1;if(typeof c=="string"&&g$.test(c)&&(p=c,p$))try{let w=new URL(window.location.href),j=c.startsWith("//")?new URL(w.protocol+c):new URL(c),S=Cx(j.pathname,m);j.origin===w.origin&&S!=null?c=S+j.search+j.hash:g=!0}catch{}let y=W4(c,{relative:i}),x=y$(c,{replace:o,state:s,target:l,preventScrollReset:d,relative:i,viewTransition:f});function b(w){r&&r(w),w.defaultPrevented||x(w)}return v.createElement("a",ey({},h,{href:p||y,onClick:g||a?r:b,ref:n,target:l}))});var D1;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(D1||(D1={}));var R1;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(R1||(R1={}));function y$(e,t){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:s}=t===void 0?{}:t,l=Wt(),c=xi(),d=J2(e,{relative:o});return v.useCallback(f=>{if(c$(f,n)){f.preventDefault();let h=r!==void 0?r:Ud(c)===Ud(d);l(e,{replace:h,state:i,preventScrollReset:a,relative:o,viewTransition:s})}},[c,l,d,r,i,n,e,a,o,s])}function v$(e){let t=v.useRef(ty(e)),n=v.useRef(!1),r=xi(),i=v.useMemo(()=>u$(r.search,n.current?null:t.current),[r.search]),a=Wt(),o=v.useCallback((s,l)=>{const c=ty(typeof s=="function"?s(i):s);n.current=!0,a("?"+c,l)},[a,i]);return[i,o]}const tN=v.createContext(void 0),M1="axpro_theme",x$=({children:e})=>{const[t,n]=v.useState(()=>{const s=localStorage.getItem(M1);return s==="light"||s==="dark"?s:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}),r=s=>{n(s),localStorage.setItem(M1,s),a(s)},i=()=>{r(t==="light"?"dark":"light")},a=s=>{document.documentElement.setAttribute("data-theme",s)};v.useEffect(()=>{a(t)},[t]);const o={theme:t,setTheme:r,toggleTheme:i};return u.jsx(tN.Provider,{value:o,children:e})},qr=()=>{const e=v.useContext(tN);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},Px=v.createContext(void 0),L1="axpro_lang",b$={en:{"app.brand":"AX PRO PLATFORM","auth.title.chat":"Sign in","auth.title.admin":"Sign in","auth.subtitle.chat":"Continue to the Chat Interface","auth.subtitle.admin":"Continue to the Administrative Console","auth.email":"Email","auth.password":"Password","auth.continue":"Continue","auth.error":"Invalid credentials. Try the demo accounts.","auth.demoHint":"Demo: demo@tecace.com / demo1234 · admin@tecace.com / admin1234","link.toAdmin":"Sign in to the Admin Console","link.toChat":"Use Chat Interface sign-in","ui.theme.light":"Light","ui.theme.dark":"Dark","ui.lang.en":"English","ui.lang.ko":"한국어","chat.title":"Chat Interface","chat.welcome":"Welcome to the chat interface","dashboard.title":"Admin Console","dashboard.welcome":"Welcome to the admin console","auth.signOut":"Sign out","dashboard.timeline":"Performance Timeline","dashboard.activity":"Daily Message Activity","usage.sessions":"Recent Conversations","usage.messages":"Messages","usage.feedback.admin":"Admin Feedback","usage.feedback.user":"User Feedback","mgmt.prompt":"Prompt Control","mgmt.knowledge":"Knowledge Management","actions.new":"New","actions.refresh":"Refresh","actions.save":"Save","actions.revert":"Revert","actions.test":"Test","actions.open":"Open","actions.rename":"Rename","actions.close":"Close","actions.delete":"Delete","filters.status":"Status","filters.search":"Search","labels.title":"Title","labels.lastActivity":"Last activity","labels.count":"Count","labels.status":"Status","context.rename":"Rename","context.reopen":"Reopen","context.close":"Close","context.deletePermanently":"Delete permanently","context.confirmDelete":"Are you sure you want to permanently delete this conversation? This action cannot be undone.","context.confirmDeleteClosed":"Are you sure you want to permanently delete this closed conversation? This action cannot be undone.","context.deleteFailed":"Failed to delete session. Please try again.","ui.user":"User","ui.settings":"Settings","ui.signOut":"Sign Out","ui.demoMode":"Demo Mode","ui.demoModeDescription":"Backend not running. Chat features limited.","ui.newChat":"New Chat","ui.searchConversations":"Search conversations...","ui.all":"All","ui.open":"Open","ui.closed":"Closed","ui.noConversations":"No conversations yet","ui.startConversation":"Start a new conversation to begin chatting","ui.startNewChat":"Start New Chat","ui.backendNote":"Note: Full chat features require backend server","ui.selectConversation":"Select a conversation from the sidebar or start a new chat","ui.newChatTitle":"New Chat","ui.closeChat":"Close Chat","ui.justNow":"Just now","ui.typeMessage":"Type a message... (Enter to send, Shift+Enter for new line)","ui.send":"Send","ui.sending":"Sending...","ui.suggestedQuestions":"Suggested questions","ui.question1":"What is artificial intelligence?","ui.question2":"How does machine learning work?","ui.question3":"Explain quantum computing","ui.question4":"What are the benefits of cloud computing?","admin.performance":"Performance","admin.excellent":"Excellent","admin.good":"Good","admin.fair":"Fair","admin.poor":"Poor","admin.conversations":"Conversations","admin.overview":"Overview","admin.documents":"Documents","admin.navigation":"Navigation","admin.activity":"Activity","admin.feedback":"Feedback","admin.knowledgeBase":"Knowledge Management","admin.satisfaction":"Satisfaction","admin.metrics":"Metrics","admin.recentConversations":"Recent Conversations","admin.userFeedback":"User Feedback","admin.promptControl":"Prompt Control","admin.systemPrompt":"System Prompt Control","admin.lastRefreshed":"Last refreshed","admin.loading":"Loading...","admin.saving":"Saving...","admin.saveChanges":"Save Changes","admin.confirmUpdate":"Confirm Update","admin.confirmUpdateMessage":"This will update the system prompt for the chatbot. Are you sure you would like to proceed?","admin.cancel":"Cancel","admin.confirm":"Confirm","admin.success":"Success","admin.error":"Error","admin.close":"Close","admin.goToChat":"Go to Chat Interface","admin.notifications":"Notifications","admin.toggleTheme":"Toggle theme","admin.userProfile":"User profile","admin.signOut":"Sign out","admin.performanceRadar":"Performance Radar","admin.performanceRadarDesc":"Monitor AI response quality and security performance across 6 key metrics in real-time for optimal user experience","admin.dailyMessageActivity":"Daily Message Activity","admin.moduleControl":"Module Control","admin.relevance":"Relevance","admin.tone":"Tone","admin.length":"Length","admin.accuracy":"Accuracy","admin.toxicity":"Toxicity","admin.promptInjection":"Prompt Injection","admin.contentMatching":"Content Matching","admin.responseStyle":"Response Style","admin.responseSize":"Response Size","admin.correctAnswers":"Correct Answers","admin.safetyCheck":"Safety Check","admin.securityFilter":"Security Filter","admin.performanceTimeline":"Performance Timeline","admin.date":"Date","admin.actual":"Actual","admin.estimated":"Estimated","admin.totalMessages":"Total Messages","admin.userFeedbackCount":"User Feedback","admin.adminReviews":"Admin Reviews","admin.corrected":"Corrected","admin.messages":"Messages","admin.sortBy":"Sort by","admin.search":"Search","admin.exportCSV":"Export CSV","admin.dateTimeNewest":"Date/Time (Newest)","admin.dateTimeOldest":"Date/Time (Oldest)","admin.user":"User","admin.userMessage":"User Message","admin.aiResponse":"AI Response","admin.searchConversations":"Search conversations...","admin.searchAll":"Search all data...","admin.avgPerDay":"avg/day","admin.average":"Average","admin.approval":"Approval","admin.uniqueUsers":"Unique Users","admin.last3Days":"Last 3 days","admin.last7Days":"Last 7 days","admin.last2Weeks":"Last 2 weeks","admin.last3Weeks":"Last 3 weeks","admin.last30Days":"Last 30 days","admin.last3Months":"Last 3 months","admin.customRange":"Custom range","admin.ragManagement":"RAG Management","admin.ragDescription":"Upload and manage documents for the RAG (Retrieval-Augmented Generation) system","admin.uploadingFiles":"Uploading files...","admin.dropFilesHere":"Drop files here to upload","admin.clickToUpload":"Click to upload or drag and drop files","admin.supportedFormats":"Supports PDF, Word, Excel, CSV, TXT, MD, JSON, HTML","admin.uploadResults":"Upload Results","admin.clear":"Clear","admin.uploadedFiles":"Uploaded Files","admin.status.uploading":"Uploading","admin.status.processing":"Processing","admin.status.ready":"Ready","admin.status.error":"Error","admin.removeFile":"Remove file","admin.instructions":"Instructions","admin.instruction1":"Upload documents to enhance the AI's knowledge base","admin.instruction2":"Supported formats: PDF, Word, Excel, CSV, TXT, Markdown, JSON, HTML","admin.instruction3":"Files are automatically processed and vectorized for search","admin.instruction4":"Maximum file size: 10MB per file","admin.searchFiles":"Search files...","admin.name":"Name","admin.size":"Size","admin.reindexFile":"Re-index file","admin.deleteFile":"Delete file","admin.confirmDeleteFile":"Are you sure you want to delete this file?","admin.deleteError":"Failed to delete file","knowledge.title":"Knowledge Management","knowledge.subtitle":"Manage files and knowledge base for AI chatbot","knowledge.note":"Files are stored in the **File Library**, while the **Knowledge Index** holds their searchable content. These can differ. Check the **Sync Overview** tab to see if they're in sync.","knowledge.fileLibrary":"File Library","knowledge.knowledgeIndex":"Knowledge Index","knowledge.syncOverview":"Sync Overview","knowledge.fileLibraryDescription":"Manage files in your library (upload/delete). Knowledge indexing is handled in the next section.","knowledge.knowledgeIndexDescription":"Documents indexed for AI chatbot knowledge queries","knowledge.syncOverviewDescription":"Monitor synchronization status between files and knowledge index","knowledge.dragFilesHere":"Drag text files here to upload or click to select","knowledge.supportedFormats":"Supported formats: .txt, .md, .json, .csv, .xml, .html, .css, .js, .ts, .pdf, .doc, .docx, .ppt, .pptx, .xls, .xlsx","knowledge.uploadingFiles":"Uploading files...","knowledge.searchByFilename":"Search by filename...","knowledge.searchByTitleFilepathContent":"Search by title, filepath, or content...","knowledge.refresh":"Refresh","knowledge.loading":"Loading...","knowledge.fileName":"File Name","knowledge.size":"Size","knowledge.lastModified":"Last Modified","knowledge.contentType":"Content Type","knowledge.syncStatus":"Sync Status","knowledge.actions":"Actions","knowledge.documentTitle":"Title","knowledge.parentId":"Parent ID","knowledge.chunkId":"Chunk ID","knowledge.url":"URL","knowledge.sync":"Sync","knowledge.view":"View","knowledge.download":"Download","knowledge.delete":"Delete","knowledge.stop":"Stop","knowledge.previous":"Previous","knowledge.next":"Next","knowledge.synced":"Synced","knowledge.pending":"Pending","knowledge.error":"Error","knowledge.unknown":"Unknown","knowledge.blobStatusLastModified":"Blob Status / Last Modified","knowledge.indexStatusChunks":"Index Status / Chunks"},ko:{"app.brand":"AX PRO 플랫폼","auth.title.chat":"로그인","auth.title.admin":"로그인","auth.subtitle.chat":"채팅 인터페이스로 이동","auth.subtitle.admin":"관리자 콘솔로 이동","auth.email":"이메일","auth.password":"비밀번호","auth.continue":"계속","auth.error":"계정 정보가 올바르지 않습니다. 데모 계정을 사용해 보세요.","auth.demoHint":"데모: demo@tecace.com / demo1234 · admin@tecace.com / admin1234","link.toAdmin":"관리자 콘솔로 이동","link.toChat":"채팅 인터페이스로 이동","ui.theme.light":"라이트","ui.theme.dark":"다크","ui.lang.en":"영어","ui.lang.ko":"한국어","chat.title":"채팅 인터페이스","chat.welcome":"채팅 인터페이스에 오신 것을 환영합니다","dashboard.title":"관리자 콘솔","dashboard.welcome":"관리자 콘솔에 오신 것을 환영합니다","auth.signOut":"로그아웃","dashboard.timeline":"성능 타임라인","dashboard.activity":"일일 메시지 활동","usage.sessions":"최근 대화","usage.messages":"메시지","usage.feedback.admin":"관리자 피드백","usage.feedback.user":"사용자 피드백","mgmt.prompt":"프롬프트 제어","mgmt.knowledge":"지식 관리","actions.new":"새로 만들기","actions.refresh":"새로고침","actions.save":"저장","actions.revert":"되돌리기","actions.test":"테스트","actions.open":"열기","actions.rename":"이름 변경","actions.close":"닫기","actions.delete":"삭제","filters.status":"상태","filters.search":"검색","labels.title":"제목","labels.lastActivity":"마지막 활동","labels.count":"개수","labels.status":"상태","context.rename":"이름 변경","context.reopen":"다시 열기","context.close":"닫기","context.deletePermanently":"영구 삭제","context.confirmDelete":"이 대화를 영구적으로 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.","context.confirmDeleteClosed":"이 닫힌 대화를 영구적으로 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.","context.deleteFailed":"세션 삭제에 실패했습니다. 다시 시도해 주세요.","ui.user":"사용자","ui.settings":"설정","ui.signOut":"로그아웃","ui.demoMode":"데모 모드","ui.demoModeDescription":"백엔드가 실행되지 않습니다. 채팅 기능이 제한됩니다.","ui.newChat":"새 채팅","ui.searchConversations":"대화 검색...","ui.all":"전체","ui.open":"열림","ui.closed":"닫힘","ui.noConversations":"아직 대화가 없습니다","ui.startConversation":"새 대화를 시작하여 채팅을 시작하세요","ui.startNewChat":"새 채팅 시작","ui.backendNote":"참고: 전체 채팅 기능은 백엔드 서버가 필요합니다","ui.selectConversation":"사이드바에서 대화를 선택하거나 새 채팅을 시작하세요","ui.newChatTitle":"새 채팅","ui.closeChat":"채팅 닫기","ui.justNow":"방금 전","ui.typeMessage":"메시지를 입력하세요... (Enter로 전송, Shift+Enter로 새 줄)","ui.send":"전송","ui.sending":"전송 중...","ui.suggestedQuestions":"추천 질문","ui.question1":"인공지능이란 무엇인가요?","ui.question2":"머신러닝은 어떻게 작동하나요?","ui.question3":"양자 컴퓨팅을 설명해주세요","ui.question4":"클라우드 컴퓨팅의 장점은 무엇인가요?","admin.performance":"성능","admin.excellent":"우수","admin.good":"좋음","admin.fair":"보통","admin.poor":"미흡","admin.conversations":"대화","admin.overview":"개요","admin.documents":"문서","admin.navigation":"네비게이션","admin.activity":"활동","admin.feedback":"피드백","admin.knowledgeBase":"지식 관리","admin.satisfaction":"만족도","admin.metrics":"지표","admin.recentConversations":"최근 대화","admin.userFeedback":"사용자 피드백","admin.promptControl":"프롬프트 제어","admin.systemPrompt":"시스템 프롬프트 제어","admin.lastRefreshed":"마지막 새로고침","admin.loading":"로딩 중...","admin.saving":"저장 중...","admin.saveChanges":"변경사항 저장","admin.confirmUpdate":"업데이트 확인","admin.confirmUpdateMessage":"챗봇의 시스템 프롬프트를 업데이트합니다. 계속하시겠습니까?","admin.cancel":"취소","admin.confirm":"확인","admin.success":"성공","admin.error":"오류","admin.close":"닫기","admin.goToChat":"채팅 인터페이스로 이동","admin.notifications":"알림","admin.toggleTheme":"테마 전환","admin.userProfile":"사용자 프로필","admin.signOut":"로그아웃","admin.performanceRadar":"Performance Radar","admin.performanceRadarDesc":"AI 응답 품질과 보안 성능을 6가지 핵심 지표로 실시간 모니터링하여 최적의 사용자 경험을 제공합니다","admin.dailyMessageActivity":"일일 메시지 활동","admin.moduleControl":"모듈 제어","admin.relevance":"관련성","admin.tone":"톤","admin.length":"길이","admin.accuracy":"정확도","admin.toxicity":"유해성","admin.promptInjection":"프롬프트 주입","admin.contentMatching":"콘텐츠 매칭","admin.responseStyle":"응답 스타일","admin.responseSize":"응답 크기","admin.correctAnswers":"정답률","admin.safetyCheck":"안전성 검사","admin.securityFilter":"보안 필터","admin.performanceTimeline":"성능 타임라인","admin.date":"날짜","admin.actual":"실제","admin.estimated":"추정","admin.totalMessages":"전체 메시지","admin.userFeedbackCount":"사용자 피드백","admin.adminReviews":"관리자 리뷰","admin.corrected":"수정됨","admin.messages":"메시지","admin.sortBy":"정렬","admin.search":"검색","admin.exportCSV":"CSV 내보내기","admin.dateTimeNewest":"날짜/시간 (최신순)","admin.dateTimeOldest":"날짜/시간 (오래된순)","admin.user":"사용자","admin.userMessage":"사용자 메시지","admin.aiResponse":"AI 응답","admin.searchConversations":"대화 검색...","admin.searchAll":"모든 데이터 검색...","admin.avgPerDay":"일평균","admin.average":"평균","admin.approval":"승인률","admin.uniqueUsers":"고유 사용자","admin.last3Days":"최근 3일","admin.last7Days":"최근 7일","admin.last2Weeks":"최근 2주","admin.last3Weeks":"최근 3주","admin.last30Days":"최근 30일","admin.last3Months":"최근 3개월","admin.customRange":"사용자 지정 범위","admin.ragManagement":"RAG 관리","admin.ragDescription":"RAG (검색 증강 생성) 시스템을 위한 문서 업로드 및 관리","admin.uploadingFiles":"파일 업로드 중...","admin.dropFilesHere":"파일을 여기에 드롭하여 업로드","admin.clickToUpload":"클릭하여 업로드하거나 파일을 드래그 앤 드롭","admin.supportedFormats":"PDF, Word, Excel, CSV, TXT, MD, JSON, HTML 지원","admin.uploadResults":"업로드 결과","admin.clear":"지우기","admin.uploadedFiles":"업로드된 파일","admin.status.uploading":"업로드 중","admin.status.processing":"처리 중","admin.status.ready":"준비됨","admin.status.error":"오류","admin.removeFile":"파일 제거","admin.instructions":"사용 방법","admin.instruction1":"AI의 지식 베이스를 향상시키기 위해 문서를 업로드하세요","admin.instruction2":"지원 형식: PDF, Word, Excel, CSV, TXT, Markdown, JSON, HTML","admin.instruction3":"파일은 자동으로 처리되어 검색을 위해 벡터화됩니다","admin.instruction4":"최대 파일 크기: 파일당 10MB","admin.searchFiles":"파일 검색...","admin.name":"이름","admin.size":"크기","admin.reindexFile":"파일 재인덱싱","admin.deleteFile":"파일 삭제","admin.confirmDeleteFile":"이 파일을 삭제하시겠습니까?","admin.deleteError":"파일 삭제에 실패했습니다","knowledge.title":"지식 관리","knowledge.subtitle":"AI 챗봇을 위한 파일 및 지식 베이스 관리","knowledge.note":"파일은 **파일 라이브러리**에 저장되며, **지식 인덱스**에는 검색 가능한 콘텐츠가 저장됩니다. 이 둘은 다를 수 있습니다. **동기화 개요** 탭에서 동기화 상태를 확인하세요.","knowledge.fileLibrary":"파일 라이브러리","knowledge.knowledgeIndex":"지식 인덱스","knowledge.syncOverview":"동기화 개요","knowledge.fileLibraryDescription":"라이브러리의 파일을 관리합니다 (업로드/삭제). 지식 인덱싱은 다음 섹션에서 처리됩니다.","knowledge.knowledgeIndexDescription":"AI 챗봇 지식 쿼리를 위해 인덱싱된 문서","knowledge.syncOverviewDescription":"파일과 지식 인덱스 간의 동기화 상태 모니터링","knowledge.dragFilesHere":"텍스트 파일을 여기에 드래그하여 업로드하거나 클릭하여 선택","knowledge.supportedFormats":"지원 형식: .txt, .md, .json, .csv, .xml, .html, .css, .js, .ts, .pdf, .doc, .docx, .ppt, .pptx, .xls, .xlsx","knowledge.uploadingFiles":"파일 업로드 중...","knowledge.searchByFilename":"파일명으로 검색...","knowledge.searchByTitleFilepathContent":"제목, 파일 경로 또는 내용으로 검색...","knowledge.refresh":"새로고침","knowledge.loading":"로딩 중...","knowledge.fileName":"파일명","knowledge.size":"크기","knowledge.lastModified":"마지막 수정","knowledge.contentType":"콘텐츠 유형","knowledge.syncStatus":"동기화 상태","knowledge.actions":"작업","knowledge.documentTitle":"제목","knowledge.parentId":"상위 ID","knowledge.chunkId":"청크 ID","knowledge.url":"URL","knowledge.sync":"동기화","knowledge.view":"보기","knowledge.download":"다운로드","knowledge.delete":"삭제","knowledge.stop":"중지","knowledge.previous":"이전","knowledge.next":"다음","knowledge.synced":"동기화됨","knowledge.pending":"대기 중","knowledge.error":"오류","knowledge.unknown":"알 수 없음","knowledge.blobStatusLastModified":"Blob 상태 / 마지막 수정","knowledge.indexStatusChunks":"인덱스 상태 / 청크"}},w$=({children:e})=>{const[t,n]=v.useState(()=>{const o=localStorage.getItem(L1);return o==="en"||o==="ko"?o:"en"}),a={language:t,setLanguage:o=>{n(o),localStorage.setItem(L1,o)},t:o=>b$[t][o]||o};return u.jsx(Px.Provider,{value:a,children:e})},_c=()=>{const e=v.useContext(Px);if(e===void 0)throw new Error("useT must be used within an I18nProvider");return e.t},Ze=()=>{const e=v.useContext(Px);if(e===void 0)throw new Error("useTranslation must be used within an I18nProvider");return e},k$="modulepreload",S$=function(e){return"/"+e},$1={},Hr=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(a=>{if(a=S$(a),a in $1)return;$1[a]=!0;const o=a.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(!!r)for(let d=i.length-1;d>=0;d--){const f=i[d];if(f.href===a&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${s}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":k$,o||(c.as="script",c.crossOrigin=""),c.href=a,document.head.appendChild(c),o)return new Promise((d,f)=>{c.addEventListener("load",d),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})},j$=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Hr(()=>Promise.resolve().then(()=>Es),void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Ox extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class F1 extends Ox{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class U1 extends Ox{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class z1 extends Ox{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var ny;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(ny||(ny={}));var C$=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?a(d.value):i(d.value).then(s,l)}c((r=r.apply(e,t||[])).next())})};class _${constructor(t,{headers:n={},customFetch:r,region:i=ny.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=j$(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return C$(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:a,method:o,body:s,signal:l}=r;let c={},{region:d}=r;d||(d=this.region);const f=new URL(`${this.url}/${n}`);d&&d!=="any"&&(c["x-region"]=d,f.searchParams.set("forceFunctionRegion",d));let h;s&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=s):typeof s=="string"?(c["Content-Type"]="text/plain",h=s):typeof FormData<"u"&&s instanceof FormData?h=s:(c["Content-Type"]="application/json",h=JSON.stringify(s)));const m=yield this.fetch(f.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),a),body:h,signal:l}).catch(x=>{throw x.name==="AbortError"?x:new F1(x)}),p=m.headers.get("x-relay-error");if(p&&p==="true")throw new U1(m);if(!m.ok)throw new z1(m);let g=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),y;return g==="application/json"?y=yield m.json():g==="application/octet-stream"?y=yield m.blob():g==="text/event-stream"?y=m:g==="multipart/form-data"?y=yield m.formData():y=yield m.text(),{data:y,error:null,response:m}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new F1(a)}:{data:null,error:a,response:a instanceof z1||a instanceof U1?a.context:void 0}}})}}var cn={},Ax={},oh={},Ec={},sh={},lh={},E$=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},is=E$();const N$=is.fetch,nN=is.fetch.bind(is),rN=is.Headers,P$=is.Request,O$=is.Response,Es=Object.freeze(Object.defineProperty({__proto__:null,Headers:rN,Request:P$,Response:O$,default:nN,fetch:N$},Symbol.toStringTag,{value:"Module"})),A$=HR(Es);var ch={};Object.defineProperty(ch,"__esModule",{value:!0});let T$=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};ch.default=T$;var iN=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lh,"__esModule",{value:!0});const I$=iN(A$),D$=iN(ch);let R$=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=I$.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,s,l,c;let d=null,f=null,h=null,m=a.status,p=a.statusText;if(a.ok){if(this.method!=="HEAD"){const b=await a.text();b===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?f=b:f=JSON.parse(b))}const y=(s=this.headers.get("Prefer"))===null||s===void 0?void 0:s.match(/count=(exact|planned|estimated)/),x=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&x&&x.length>1&&(h=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,h=null,m=406,p="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const y=await a.text();try{d=JSON.parse(y),Array.isArray(d)&&a.status===404&&(f=[],d=null,m=200,p="OK")}catch{a.status===404&&y===""?(m=204,p="No Content"):d={message:y}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,m=200,p="OK"),d&&this.shouldThrowOnError)throw new D$.default(d)}return{error:d,data:f,count:h,status:m,statusText:p}});return this.shouldThrowOnError||(i=i.catch(a=>{var o,s,l;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(s=a==null?void 0:a.stack)!==null&&s!==void 0?s:""}`,hint:"",code:`${(l=a==null?void 0:a.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,n)}returns(){return this}overrideTypes(){return this}};lh.default=R$;var M$=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sh,"__esModule",{value:!0});const L$=M$(lh);let $$=class extends L$.default{select(t){let n=!1;const r=(t??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.order`:"order",s=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${s?`${s},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:i=r}={}){const a=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:a=!1,format:o="text"}={}){var s;const l=[t?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(s=this.headers.get("Accept"))!==null&&s!==void 0?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};sh.default=$$;var F$=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ec,"__esModule",{value:!0});const U$=F$(sh);let z$=class extends U$.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${a}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Ec.default=z$;var B$=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oh,"__esModule",{value:!0});const tl=B$(Ec);let W$=class{constructor(t,{headers:n={},schema:r,fetch:i}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=i}select(t,n){const{head:r=!1,count:i}=n??{},a=r?"HEAD":"GET";let o=!1;const s=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",s),i&&this.headers.append("Prefer",`count=${i}`),new tl.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var i;const a="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((s,l)=>s.concat(Object.keys(l)),[]);if(o.length>0){const s=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",s.join(","))}}return new tl.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:a=!0}={}){var o;const s="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),i&&this.headers.append("Prefer",`count=${i}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new tl.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:n}={}){var r;const i="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new tl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new tl.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};oh.default=W$;var aN=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ax,"__esModule",{value:!0});const q$=aN(oh),H$=aN(Ec);let K$=class oN{constructor(t,{headers:n={},schema:r,fetch:i}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(t){const n=new URL(`${this.url}/${t}`);return new q$.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new oN(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:i=!1,count:a}={}){var o;let s;const l=new URL(`${this.url}/rpc/${t}`);let c;r||i?(s=r?"HEAD":"GET",Object.entries(n).filter(([f,h])=>h!==void 0).map(([f,h])=>[f,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([f,h])=>{l.searchParams.append(f,h)})):(s="POST",c=n);const d=new Headers(this.headers);return a&&d.set("Prefer",`count=${a}`),new H$.default({method:s,url:l,headers:d,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Ax.default=K$;var Ns=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cn,"__esModule",{value:!0});cn.PostgrestError=cn.PostgrestBuilder=cn.PostgrestTransformBuilder=cn.PostgrestFilterBuilder=cn.PostgrestQueryBuilder=cn.PostgrestClient=void 0;const sN=Ns(Ax);cn.PostgrestClient=sN.default;const lN=Ns(oh);cn.PostgrestQueryBuilder=lN.default;const cN=Ns(Ec);cn.PostgrestFilterBuilder=cN.default;const uN=Ns(sh);cn.PostgrestTransformBuilder=uN.default;const dN=Ns(lh);cn.PostgrestBuilder=dN.default;const fN=Ns(ch);cn.PostgrestError=fN.default;var V$=cn.default={PostgrestClient:sN.default,PostgrestQueryBuilder:lN.default,PostgrestFilterBuilder:cN.default,PostgrestTransformBuilder:uN.default,PostgrestBuilder:dN.default,PostgrestError:fN.default};const{PostgrestClient:G$,PostgrestQueryBuilder:vue,PostgrestFilterBuilder:xue,PostgrestTransformBuilder:bue,PostgrestBuilder:wue,PostgrestError:kue}=V$;class Y${static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const J$="2.75.0",X$=`realtime-js/${J$}`,Q$="1.0.0",ry=1e4,Z$=1e3,e3=100;var Ol;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ol||(Ol={}));var ft;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ft||(ft={}));var ur;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ur||(ur={}));var iy;(function(e){e.websocket="websocket"})(iy||(iy={}));var Ea;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ea||(Ea={}));class t3{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),a=n.getUint8(2);let o=this.HEADER_LENGTH+2;const s=r.decode(t.slice(o,o+i));o=o+i;const l=r.decode(t.slice(o,o+a));o=o+a;const c=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:s,event:l,payload:c}}}class hN{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ue;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ue||(Ue={}));const B1=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((a,o)=>(a[o]=n3(o,e,t,i),a),{}):{}},n3=(e,t,n,r)=>{const i=t.find(s=>s.name===e),a=i==null?void 0:i.type,o=n[e];return a&&!r.includes(a)?mN(a,o):ay(o)},mN=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return o3(t,n)}switch(e){case Ue.bool:return r3(t);case Ue.float4:case Ue.float8:case Ue.int2:case Ue.int4:case Ue.int8:case Ue.numeric:case Ue.oid:return i3(t);case Ue.json:case Ue.jsonb:return a3(t);case Ue.timestamp:return s3(t);case Ue.abstime:case Ue.date:case Ue.daterange:case Ue.int4range:case Ue.int8range:case Ue.money:case Ue.reltime:case Ue.text:case Ue.time:case Ue.timestamptz:case Ue.timetz:case Ue.tsrange:case Ue.tstzrange:return ay(t);default:return ay(t)}},ay=e=>e,r3=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},i3=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},a3=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},o3=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const o=e.slice(1,n);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(s=>mN(t,s))}return e},s3=e=>typeof e=="string"?e.replace(" ","T"):e,pN=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class ep{constructor(t,n,r={},i=ry){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var W1;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(W1||(W1={}));class Al{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:o,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Al.syncState(this.state,i,a,o),this.pendingDiffs.forEach(l=>{this.state=Al.syncDiff(this.state,l,a,o)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Al.syncDiff(this.state,i,a,o),s())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const a=this.cloneDeep(t),o=this.transformState(n),s={},l={};return this.map(a,(c,d)=>{o[c]||(l[c]=d)}),this.map(o,(c,d)=>{const f=a[c];if(f){const h=d.map(y=>y.presence_ref),m=f.map(y=>y.presence_ref),p=d.filter(y=>m.indexOf(y.presence_ref)<0),g=f.filter(y=>h.indexOf(y.presence_ref)<0);p.length>0&&(s[c]=p),g.length>0&&(l[c]=g)}else s[c]=d}),this.syncDiff(a,{joins:s,leaves:l},r,i)}static syncDiff(t,n,r,i){const{joins:a,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(s,l)=>{var c;const d=(c=t[s])!==null&&c!==void 0?c:[];if(t[s]=this.cloneDeep(l),d.length>0){const f=t[s].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[s].unshift(...h)}r(s,d,l)}),this.map(o,(s,l)=>{let c=t[s];if(!c)return;const d=l.map(f=>f.presence_ref);c=c.filter(f=>d.indexOf(f.presence_ref)<0),t[s]=c,i(s,c,l),c.length===0&&delete t[s]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var q1;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(q1||(q1={}));var Tl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Tl||(Tl={}));var Yr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Yr||(Yr={}));class Tx{constructor(t,n={config:{}},r){var i,a;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=ft.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ep(this,ur.join,this.params,this.timeout),this.rejoinTimer=new hN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ft.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ft.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ur.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new Al(this),this.broadcastEndpointURL=pN(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ft.closed){const{config:{broadcast:o,presence:s,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[Tl.PRESENCE]&&this.bindings[Tl.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,f={},h={broadcast:o,presence:Object.assign(Object.assign({},s),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Yr.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Yr.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var p;if(this.socket.setAuth(),m===void 0){t==null||t(Yr.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,y=(p=g==null?void 0:g.length)!==null&&p!==void 0?p:0,x=[];for(let b=0;b<y;b++){const w=g[b],{filter:{event:j,schema:S,table:k,filter:_}}=w,N=m&&m[b];if(N&&N.event===j&&N.schema===S&&N.table===k&&N.filter===_)x.push(Object.assign(Object.assign({},w),{id:N.id}));else{this.unsubscribe(),this.state=ft.errored,t==null||t(Yr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Yr.SUBSCRIBED);return}}).receive("error",m=>{this.state=ft.errored,t==null||t(Yr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Yr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===ft.joined&&t===Tl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,s,l;const c=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(s=(o=this.params)===null||o===void 0?void 0:o.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),c.receive("ok",()=>a("ok")),c.receive("error",()=>a("error")),c.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ft.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ur.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new ep(this,ur.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ft.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ep(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>e3){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,a;const o=t.toLocaleLowerCase(),{close:s,error:l,leave:c,join:d}=ur;if(r&&[s,l,c,d].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var p,g,y;return((p=m.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(g=m.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(m=>m.callback(h,r)):(a=this.bindings[o])===null||a===void 0||a.filter(m=>{var p,g,y,x,b,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const j=m.id,S=(p=m.filter)===null||p===void 0?void 0:p.event;return j&&((g=n.ids)===null||g===void 0?void 0:g.includes(j))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const j=(b=(x=m==null?void 0:m.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return j==="*"||j===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:g,table:y,commit_timestamp:x,type:b,errors:w}=p;h=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:x,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(p))}m.callback(h,r)})}_isClosed(){return this.state===ft.closed}_isJoined(){return this.state===ft.joined}_isJoining(){return this.state===ft.joining}_isLeaving(){return this.state===ft.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),a={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&Tx.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ur.close,{},t)}_onError(t){this._on(ur.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ft.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=B1(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=B1(t.columns,t.old_record)),n}}const tp=()=>{},wu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},l3=[1e3,2e3,5e3,1e4],c3=1e4,u3=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class d3{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ry,this.transport=null,this.heartbeatIntervalMs=wu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=tp,this.ref=0,this.reconnectTimer=null,this.logger=tp,this.conn=null,this.sendBuffer=[],this.serializer=new t3,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>Hr(()=>Promise.resolve().then(()=>Es),void 0).then(({default:s})=>s(...o)).catch(s=>{throw new Error(`Failed to load @supabase/node-fetch: ${s.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...o)=>a(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${iy.websocket}`,this.httpEndpoint=pN(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Y$.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Q$}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ol.connecting:return Ea.Connecting;case Ol.open:return Ea.Open;case Ol.closing:return Ea.Closing;default:return Ea.Closed}}isConnected(){return this.connectionState()===Ea.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new Tx(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:i,ref:a}=t,o=()=>{this.encode(t,s=>{var l;(l=this.conn)===null||l===void 0||l.send(s)})};this.log("push",`${n} ${r} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Z$,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},wu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:a,ref:o}=n,s=o?`(${o})`:"",l=a.status||"";this.log("receive",`${l} ${r} ${i} ${s}`.trim(),a),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,a,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ur.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([u3],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:X$};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(ur.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new hN(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},wu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,a,o,s,l,c,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:ry,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:wu.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(s=t==null?void 0:t.heartbeatCallback)!==null&&s!==void 0?s:tp,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:f=>l3[f-1]||c3,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(f,h)=>h(JSON.stringify(f)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Ix extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function lt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class f3 extends Ix{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class oy extends Ix{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var h3=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?a(d.value):i(d.value).then(s,l)}c((r=r.apply(e,t||[])).next())})};const gN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Hr(()=>Promise.resolve().then(()=>Es),void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},m3=()=>h3(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Hr(()=>Promise.resolve().then(()=>Es),void 0)).Response:Response}),sy=e=>{if(Array.isArray(e))return e.map(n=>sy(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=sy(r)}),t},p3=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var oo=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?a(d.value):i(d.value).then(s,l)}c((r=r.apply(e,t||[])).next())})};const np=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),g3=(e,t,n)=>oo(void 0,void 0,void 0,function*(){const r=yield m3();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const a=e.status||500,o=(i==null?void 0:i.statusCode)||a+"";t(new f3(np(i),a,o))}).catch(i=>{t(new oy(np(i),i))}):t(new oy(np(e),e))}),y3=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(p3(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function Nc(e,t,n,r,i,a){return oo(this,void 0,void 0,function*(){return new Promise((o,s)=>{e(n,y3(t,r,i,a)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>g3(l,s,r))})})}function Bd(e,t,n,r){return oo(this,void 0,void 0,function*(){return Nc(e,"GET",t,n,r)})}function Ar(e,t,n,r,i){return oo(this,void 0,void 0,function*(){return Nc(e,"POST",t,r,i,n)})}function ly(e,t,n,r,i){return oo(this,void 0,void 0,function*(){return Nc(e,"PUT",t,r,i,n)})}function v3(e,t,n,r){return oo(this,void 0,void 0,function*(){return Nc(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function yN(e,t,n,r,i){return oo(this,void 0,void 0,function*(){return Nc(e,"DELETE",t,r,i,n)})}var x3=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?a(d.value):i(d.value).then(s,l)}c((r=r.apply(e,t||[])).next())})};class b3{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return x3(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(lt(t))return{data:null,error:t};throw t}})}}var w3=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?a(d.value):i(d.value).then(s,l)}c((r=r.apply(e,t||[])).next())})};class k3{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new b3(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return w3(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(lt(t))return{data:null,error:t};throw t}})}}var nn=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?a(d.value):i(d.value).then(s,l)}c((r=r.apply(e,t||[])).next())})};const S3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},H1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class j3{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=gN(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return nn(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},H1),i);let s=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l))):(a=r,s["cache-control"]=`max-age=${o.cacheControl}`,s["content-type"]=o.contentType,l&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(s=Object.assign(Object.assign({},s),i.headers));const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),f=yield(t=="PUT"?ly:Ar)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:s},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:f.Id,fullPath:f.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(lt(a))return{data:null,error:a};throw a}})}upload(t,n,r){return nn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return nn(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),s=new URL(this.url+`/object/upload/sign/${o}`);s.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:H1.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const f=yield ly(this.fetch,s.toString(),l,{headers:d});return{data:{path:a,fullPath:f.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(lt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return nn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const a=yield Ar(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+a.url),s=o.searchParams.get("token");if(!s)throw new Ix("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:s},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}update(t,n,r){return nn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return nn(this,void 0,void 0,function*(){try{return{data:yield Ar(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(lt(i))return{data:null,error:i};throw i}})}copy(t,n,r){return nn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ar(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(lt(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return nn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield Ar(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(lt(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return nn(this,void 0,void 0,function*(){try{const i=yield Ar(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(lt(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=a?`?${a}`:"",s=this._getFinalPath(t),l=()=>Bd(this.fetch,`${this.url}/${i}/${s}${o}`,{headers:this.headers,noResolveJson:!0});return new k3(l,this.shouldThrowOnError)}info(t){return nn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Bd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:sy(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}exists(t){return nn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield v3(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r)&&r instanceof oy){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&i.push(a);const s=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${c}`)}}}remove(t){return nn(this,void 0,void 0,function*(){try{return{data:yield yN(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}})}list(t,n,r){return nn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},S3),n),{prefix:t||""});return{data:yield Ar(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(lt(i))return{data:null,error:i};throw i}})}listV2(t,n){return nn(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Ar(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const C3="2.75.0",_3={"X-Client-Info":`storage-js/${C3}`};var po=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?a(d.value):i(d.value).then(s,l)}c((r=r.apply(e,t||[])).next())})};class E3{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const a=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_3),n),this.fetch=gN(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return po(this,void 0,void 0,function*(){try{return{data:yield Bd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(lt(t))return{data:null,error:t};throw t}})}getBucket(t){return po(this,void 0,void 0,function*(){try{return{data:yield Bd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}})}createBucket(t){return po(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Ar(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(lt(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return po(this,void 0,void 0,function*(){try{return{data:yield ly(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return po(this,void 0,void 0,function*(){try{return{data:yield Ar(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return po(this,void 0,void 0,function*(){try{return{data:yield yN(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}})}}class N3 extends E3{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new j3(this.url,this.headers,t,this.fetch)}}const P3="2.75.0";let vl="";typeof Deno<"u"?vl="deno":typeof document<"u"?vl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vl="react-native":vl="node";const O3={"X-Client-Info":`supabase-js-${vl}/${P3}`},A3={headers:O3},T3={schema:"public"},I3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},D3={};var R3=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?a(d.value):i(d.value).then(s,l)}c((r=r.apply(e,t||[])).next())})};const M3=e=>{let t;return e?t=e:typeof fetch>"u"?t=nN:t=fetch,(...n)=>t(...n)},L3=()=>typeof Headers>"u"?rN:Headers,$3=(e,t,n)=>{const r=M3(n),i=L3();return(a,o)=>R3(void 0,void 0,void 0,function*(){var s;const l=(s=yield t())!==null&&s!==void 0?s:e;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(a,Object.assign(Object.assign({},o),{headers:c}))})};var F3=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?a(d.value):i(d.value).then(s,l)}c((r=r.apply(e,t||[])).next())})};function U3(e){return e.endsWith("/")?e:e+"/"}function z3(e,t){var n,r;const{db:i,auth:a,realtime:o,global:s}=e,{db:l,auth:c,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),s),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=s==null?void 0:s.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>F3(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function B3(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(U3(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const vN="2.75.0",So=30*1e3,cy=3,rp=cy*So,W3="http://localhost:9999",q3="supabase.auth.token",H3={"X-Client-Info":`gotrue-js/${vN}`},uy="X-Supabase-Api-Version",xN={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},K3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,V3=10*60*1e3;class ac extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function de(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class G3 extends ac{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Y3(e){return de(e)&&e.name==="AuthApiError"}class Na extends ac{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class la extends ac{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class Ai extends la{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function J3(e){return de(e)&&e.name==="AuthSessionMissingError"}class go extends la{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ku extends la{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Su extends la{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function X3(e){return de(e)&&e.name==="AuthImplicitGrantRedirectError"}class K1 extends la{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dy extends la{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function ip(e){return de(e)&&e.name==="AuthRetryableFetchError"}class V1 extends la{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class fy extends la{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),G1=` 	
\r=`.split(""),Q3=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<G1.length;t+=1)e[G1[t].charCodeAt(0)]=-2;for(let t=0;t<Wd.length;t+=1)e[Wd[t].charCodeAt(0)]=t;return e})();function Y1(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Wd[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Wd[r]),t.queuedBits-=6}}function bN(e,t,n){const r=Q3[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function J1(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{tF(o,r,n)};for(let o=0;o<e.length;o+=1)bN(e.charCodeAt(o),i,a);return t.join("")}function Z3(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function eF(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}Z3(r,t)}}function tF(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Vo(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)bN(e.charCodeAt(i),n,r);return new Uint8Array(t)}function nF(e){const t=[];return eF(e,n=>t.push(n)),new Uint8Array(t)}function Ia(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>Y1(i,n,r)),Y1(null,n,r),t.join("")}function rF(e){return Math.round(Date.now()/1e3)+e}function iF(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const kn=()=>typeof window<"u"&&typeof document<"u",ya={tested:!1,writable:!1},wN=()=>{if(!kn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ya.tested)return ya.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ya.tested=!0,ya.writable=!0}catch{ya.tested=!0,ya.writable=!1}return ya.writable};function aF(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const kN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Hr(()=>Promise.resolve().then(()=>Es),void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},oF=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",jo=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},va=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Pi=async(e,t)=>{await e.removeItem(t)};class uh{constructor(){this.promise=new uh.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}uh.promiseConstructor=Promise;function ap(e){const t=e.split(".");if(t.length!==3)throw new fy("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!K3.test(t[r]))throw new fy("JWT not in base64url format");return{header:JSON.parse(J1(t[0])),payload:JSON.parse(J1(t[1])),signature:Vo(t[2]),raw:{header:t[0],payload:t[1]}}}async function sF(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function lF(e,t){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){r(o);return}}catch(o){if(!t(a,o)){i(o);return}}})()})}function cF(e){return("0"+e.toString(16)).substr(-2)}function uF(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,cF).join("")}async function dF(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function fF(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await dF(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yo(e,t,n=!1){const r=uF();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await jo(e,`${t}-code-verifier`,i);const a=await fF(r);return[a,r===a?"plain":"s256"]}const hF=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mF(e){const t=e.headers.get(uy);if(!t||!t.match(hF))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function pF(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function gF(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const yF=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function vo(e){if(!yF.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function op(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function X1(e){return JSON.parse(JSON.stringify(e))}var vF=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Sa=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),xF=[502,503,504];async function Q1(e){var t;if(!oF(e))throw new dy(Sa(e),0);if(xF.includes(e.status))throw new dy(Sa(e),e.status);let n;try{n=await e.json()}catch(a){throw new Na(Sa(a),a)}let r;const i=mF(e);if(i&&i.getTime()>=xN["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new V1(Sa(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ai}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new V1(Sa(n),e.status,n.weak_password.reasons);throw new G3(Sa(n),e.status||500,r)}const bF=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ye(e,t,n,r){var i;const a=Object.assign({},r==null?void 0:r.headers);a[uy]||(a[uy]=xN["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const s=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await wF(e,t,n+s,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function wF(e,t,n,r,i,a){const o=bF(t,r,i,a);let s;try{s=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new dy(Sa(l),0)}if(s.ok||await Q1(s),r!=null&&r.noResolveJson)return s;try{return await s.json()}catch(l){await Q1(l)}}function sr(e){var t;let n=null;jF(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=rF(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Z1(e){const t=sr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function $i(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function kF(e){return{data:e,error:null}}function SF(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=e,o=vF(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},l=Object.assign({},o);return{data:{properties:s,user:l},error:null}}function ek(e){return e}function jF(e){return e.access_token&&e.refresh_token&&e.expires_in}const sp=["global","local","others"];var CF=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class _F{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=kN(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=sp[0]){if(sp.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${sp.join(", ")}`);try{return await ye(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:$i})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=CF(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:SF,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(de(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ye(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:$i})}catch(n){if(de(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,a,o,s,l;try{const c={nextPage:null,lastPage:0,total:0},d=await ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:ek});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(s=d.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);c[`${y}Page`]=g}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(de(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){vo(t);try{return await ye(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:$i})}catch(n){if(de(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){vo(t);try{return await ye(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:$i})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){vo(t);try{return await ye(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:$i})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){vo(t.userId);try{const{data:n,error:r}=await ye(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _deleteFactor(t){vo(t.userId),vo(t.id);try{return{data:await ye(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,a,o,s,l;try{const c={nextPage:null,lastPage:0,total:0},d=await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:ek});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(s=d.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);c[`${y}Page`]=g}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(de(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await ye(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}}function tk(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const xo={debug:!!(globalThis&&wN()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class SN extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class EF extends SN{}async function NF(e,t,n){xo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),xo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){xo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{xo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw xo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new EF(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(xo.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function PF(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function jN(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function OF(e){return parseInt(e,16)}function AF(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function TF(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:a=new Date,nonce:o,notBefore:s,requestId:l,resources:c,scheme:d,uri:f,version:h}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=jN(e.address),p=d?`${d}://${r}`:r,g=e.statement?`${e.statement}
`:"",y=`${p} wants you to sign in with your Ethereum account:
${m}

${g}`;let x=`URI: ${f}
Version: ${h}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(i&&(x+=`
Expiration Time: ${i.toISOString()}`),s&&(x+=`
Not Before: ${s.toISOString()}`),l&&(x+=`
Request ID: ${l}`),c){let b=`
Resources:`;for(const w of c){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);b+=`
- ${w}`}x+=b}return`${y}
${x}`}class st extends Error{constructor({message:t,code:n,cause:r,name:i}){var a;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=i??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class qd extends st{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function IF({error:e,options:t}){var n,r,i;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new st({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new st({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new st({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new st({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new st({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new st({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new st({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new st({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(_N(o)){if(a.rp.id!==o)return new st({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new st({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new st({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new st({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new st({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function DF({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new st({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new st({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(_N(r)){if(n.rpId!==r)return new st({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new st({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new st({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new st({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var CN=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class RF{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const MF=new RF;function LF(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=CN(e,["challenge","user","excludeCredentials"]),a=Vo(t).buffer,o=Object.assign(Object.assign({},n),{id:Vo(n.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:a,user:o});if(r&&r.length>0){s.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];s.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Vo(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return s}function $F(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=CN(e,["challenge","allowCredentials"]),i=Vo(t).buffer,a=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const s=n[o];a.allowCredentials[o]=Object.assign(Object.assign({},s),{id:Vo(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return a}function FF(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Ia(new Uint8Array(e.response.attestationObject)),clientDataJSON:Ia(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function UF(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Ia(new Uint8Array(i.authenticatorData)),clientDataJSON:Ia(new Uint8Array(i.clientDataJSON)),signature:Ia(new Uint8Array(i.signature)),userHandle:i.userHandle?Ia(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function _N(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function nk(){var e,t;return!!(kn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function zF(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new qd("Browser returned unexpected credential type",t)}:{data:null,error:new qd("Empty credential response",t)}}catch(t){return{data:null,error:IF({error:t,options:e})}}}async function BF(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new qd("Browser returned unexpected credential type",t)}:{data:null,error:new qd("Empty credential response",t)}}catch(t){return{data:null,error:DF({error:t,options:e})}}}const WF={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},qF={userVerification:"preferred",hints:["security-key"]};function Hd(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const a in i){const o=i[a];if(o!==void 0)if(Array.isArray(o))r[a]=o;else if(n(o))r[a]=o;else if(t(o)){const s=r[a];t(s)?r[a]=Hd(s,o):r[a]=Hd(o)}else r[a]=o}return r}function HF(e,t){return Hd(WF,e,t||{})}function KF(e,t){return Hd(qF,e,t||{})}class VF{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},a){try{const{data:o,error:s}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:s};const l=i??MF.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=HF(o.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:d,error:f}=await zF({publicKey:c,signal:l});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const c=KF(o.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:d,error:f}=await BF(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(o){return de(o)?{data:null,error:o}:{data:null,error:new Na("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},a){if(!n)return{data:null,error:new ac("rpId is required for WebAuthn authentication")};try{if(!nk())return{data:null,error:new Na("Browser does not support WebAuthn",null)};const{data:o,error:s}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:a});if(!o)return{data:null,error:s};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return de(o)?{data:null,error:o}:{data:null,error:new Na("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},a){if(!n)return{data:null,error:new ac("rpId is required for WebAuthn registration")};try{if(!nk())return{data:null,error:new Na("Browser does not support WebAuthn",null)};const{data:o,error:s}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:s};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:a});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return de(o)?{data:null,error:o}:{data:null,error:new Na("Unexpected error in register",o)}}}}PF();const GF={url:W3,storageKey:q3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:H3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function rk(e,t,n){return await n()}const bo={};class oc{get jwks(){var t,n;return(n=(t=bo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){bo[this.storageKey]=Object.assign(Object.assign({},bo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=bo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){bo[this.storageKey]=Object.assign(Object.assign({},bo[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=oc.nextInstanceID,oc.nextInstanceID+=1,this.instanceID>0&&kn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},GF),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new _F({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=kN(i.fetch),this.lock=i.lock||rk,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:kn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=NF:this.lock=rk,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new VF(this)},this.persistSession?(i.storage?this.storage=i.storage:wN()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=tk(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=tk(this.memoryStorage)),kn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${vN}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=aF(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),kn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),X3(a)){const l=(t=a.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",s),await this._saveSession(o),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return de(n)?{error:n}:{error:new Na("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const a=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:sr}),{data:o,error:s}=a;if(s||!o)return{data:{user:null,session:null},error:s};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(a){if(de(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var n,r,i;try{let a;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await yo(this.storage,this.storageKey)),a=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:p},xform:sr})}else if("phone"in t){const{phone:d,password:f,options:h}=t;a=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:sr})}else throw new ku("You must provide either an email or phone number and a password");const{data:o,error:s}=a;if(s||!o)return{data:{user:null,session:null},error:s};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(a){if(de(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:o,options:s}=t;n=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Z1})}else if("phone"in t){const{phone:a,password:o,options:s}=t;n=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Z1})}else throw new ku("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new go}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,a,o,s,l,c,d,f,h;let m,p;if("message"in t)m=t.message,p=t.signature;else{const{chain:g,wallet:y,statement:x,options:b}=t;let w;if(kn())if(typeof y=="object")w=y;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")w=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=y}const j=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href),S=await w.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=jN(S[0]);let _=(r=b==null?void 0:b.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!_){const P=await w.request({method:"eth_chainId"});_=OF(P)}const N={domain:j.host,address:k,statement:x,uri:j.href,version:"1",chainId:_,nonce:(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(a=b==null?void 0:b.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=b==null?void 0:b.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=TF(N),p=await w.request({method:"personal_sign",params:[AF(m),k]})}try{const{data:g,error:y}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:p},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:sr});if(y)throw y;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new go}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:y})}catch(g){if(de(g))return{data:{user:null,session:null},error:g};throw g}}async signInWithSolana(t){var n,r,i,a,o,s,l,c,d,f,h,m;let p,g;if("message"in t)p=t.message,g=t.signature;else{const{chain:y,wallet:x,statement:b,options:w}=t;let j;if(kn())if(typeof x=="object")j=x;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))j=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=x}const S=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const k=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),b?{statement:b}:null));let _;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")_=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)_=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)p=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),g=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${S.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(i=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const k=await j.signMessage(new TextEncoder().encode(p),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=k}}try{const{data:y,error:x}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Ia(g)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:sr});if(x)throw x;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new go}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:x})}catch(y){if(de(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(t){const n=await va(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:a,error:o}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:sr});if(await Pi(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new go}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(de(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:a,nonce:o}=t,s=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:sr}),{data:l,error:c}=s;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new go}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,a,o;try{if("email"in t){const{email:s,options:l}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await yo(this.storage,this.storageKey));const{error:f}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:s,options:l}=t,{data:c,error:d}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new ku("You must provide either an email or phone number.")}catch(s){if(de(s))return{data:{user:null,session:null},error:s};throw s}}async verifyOtp(t){var n,r;try{let i,a;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:s}=await ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:sr});if(s)throw s;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(de(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await yo(this.storage,this.storageKey)),await ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:kF})}catch(a){if(de(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Ai;const{error:i}=await ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(de(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:a}=t,{error:o}=await ye(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:i,options:a}=t,{data:o,error:s}=await ye(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:s}}throw new ku("You must provide either an email or phone number and a type")}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await va(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<rp:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await va(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=op()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,c,d)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,d))})}return{data:{session:t},error:null}}const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:$i}):await this._useSession(async n=>{var r,i,a;const{data:o,error:s}=n;if(s)throw s;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ai}:await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:$i})})}catch(n){if(de(n))return J3(n)&&(await this._removeSession(),await Pi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new Ai;const o=i.session;let s=null,l=null;this.flowType==="pkce"&&t.email!=null&&([s,l]=await yo(this.storage,this.storageKey));const{data:c,error:d}=await ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:s,code_challenge_method:l}),jwt:o.access_token,xform:$i});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ai;const n=Date.now()/1e3;let r=n,i=!0,a=null;const{payload:o}=ap(t.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:s,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!s)return{data:{user:null,session:null},error:null};a=s}else{const{data:s,error:l}=await this._getUser(t.access_token);if(l)throw l;a={access_token:t.access_token,refresh_token:t.refresh_token,user:s.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(de(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:s}=n;if(s)throw s;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ai;const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!kn())throw new Su("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Su(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new K1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Su("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new K1("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:s,expires_at:l,token_type:c}=t;if(!a||!s||!o||!c)throw new Su("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(s);let h=d+f;l&&(h=parseInt(l));const m=h-d;m*1e3<=So&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const p=h-f;d-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,d):d-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,d);const{data:g,error:y}=await this._getUser(a);if(y)throw y;const x={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:f,expires_at:h,refresh_token:o,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(r){if(de(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await va(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return{error:a};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:s}=await this.admin.signOut(o,t);if(s&&!(Y3(s)&&(s.status===404||s.status===401||s.status===403)))return{error:s}}return t!=="others"&&(await this._removeSession(),await Pi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=iF(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:a},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await yo(this.storage,this.storageKey,!0));try{return await ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(de(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async a=>{var o,s,l,c,d;const{data:f,error:h}=a;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ye(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return kn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(de(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:a}}=n;if(i)throw i;const{options:o,provider:s,token:l,access_token:c,nonce:d}=t,f=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:s,id_token:l,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:sr}),{data:h,error:m}=f;return m?{data:{user:null,session:null},error:m}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new go}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),{data:h,error:m})}catch(i){if(de(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:o}=n;if(o)throw o;return await ye(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await lF(async i=>(i>0&&await sF(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:sr})),(i,a)=>{const o=200*Math.pow(2,i);return a&&ip(a)&&Date.now()+o-r<So})}catch(r){if(this._debug(n,"error",r),de(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),kn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await va(this.storage,this.storageKey);if(i&&this.userStorage){let o=await va(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await jo(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:op()}else if(i&&!i.user&&!i.user){const o=await va(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Pi(this.storage,this.storageKey+"-user"),await jo(this.storage,this.storageKey,i)):i.user=op()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<rp;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${rp}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),ip(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:s}=await this._getUser(i.access_token);!s&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Ai;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new uh;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new Ai;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const s={data:a.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(a){if(this._debug(i,"error",a),de(a)){const o={data:null,error:a};return ip(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(t,n)}catch(l){a.push(l)}});if(await Promise.all(o),a.length>0){for(let s=0;s<a.length;s+=1)console.error(a[s]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await jo(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=X1(i);await jo(this.storage,this.storageKey,a)}else{const i=X1(n);await jo(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Pi(this.storage,this.storageKey),await Pi(this.storage,this.storageKey+"-code-verifier"),await Pi(this.storage,this.storageKey+"-user"),this.userStorage&&await Pi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&kn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),So);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/So);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${So}ms, refresh threshold is ${cy} ticks`),i<=cy&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof SN)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,o]=await yo(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(s.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?{data:null,error:a}:await ye(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:o}=n;if(o)return{data:null,error:o};const s=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:c}=await ye(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return{data:null,error:a};const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?FF(t.webauthn.credential_response):UF(t.webauthn.credential_response)})}:{code:t.code}),{data:s,error:l}=await ye(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:l})})}catch(n){if(de(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return{data:null,error:a};const o=await ye(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:s}=o;if(s.type!=="webauthn")return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:LF(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:$F(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(de(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:a}=t;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=ap(i.access_token);let s=null;o.aal&&(s=o.aal);let l=s;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:s,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(s=>s.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(s=>s.kid===t),r&&this.jwks_cached_at+V3>i)return r;const{data:a,error:o}=await ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(s=>s.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:m,error:p}=await this.getSession();if(p||!m.session)return{data:null,error:p};r=m.session.access_token}const{header:i,payload:a,signature:o,raw:{header:s,payload:l}}=ap(r);n!=null&&n.allowExpired||pF(a.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:a,header:i,signature:o},error:null}}const d=gF(i.alg),f=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,nF(`${s}.${l}`)))throw new fy("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}}oc.nextInstanceID=0;const YF=oc;class JF extends YF{constructor(t){super(t)}}var XF=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?a(d.value):i(d.value).then(s,l)}c((r=r.apply(e,t||[])).next())})};class QF{constructor(t,n,r){var i,a,o;this.supabaseUrl=t,this.supabaseKey=n;const s=B3(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const l=`sb-${s.hostname.split(".")[0]}-auth-token`,c={db:T3,realtime:D3,auth:Object.assign(Object.assign({},I3),{storageKey:l}),global:A3},d=z3(r??{},c);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=$3(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new G$(new URL("rest/v1",s).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new N3(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new _$(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return XF(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:a,storageKey:o,flowType:s,lock:l,debug:c},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new JF({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:a,flowType:s,lock:l,debug:c,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new d3(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Dx=(e,t,n)=>new QF(e,t,n);function ZF(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}ZF()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const eU="https://qpyteahuynkgkbmdasbv.supabase.co",tU="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFweXRlYWh1eW5rZ2tibWRhc2J2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5NDk2NTcsImV4cCI6MjA3NTUyNTY1N30.qvp5ox6Xm0wYcZK89S2MYVu18fqyfYmT8nercIFMKOY",Rx=Dx(eU,tU);function nU(e,t){const n=new Date,r=n.getFullYear().toString()+(n.getMonth()+1).toString().padStart(2,"0")+n.getDate().toString().padStart(2,"0")+n.getHours().toString().padStart(2,"0")+n.getMinutes().toString().padStart(2,"0")+n.getSeconds().toString().padStart(2,"0"),i=(e.charAt(0)+t.charAt(0)).toUpperCase(),a=Math.random().toString(36).substring(2,8).toUpperCase();return`${r}_${i}_${a}`}function rU(e){const t=[];return e.length<8&&t.push("Password must be at least 8 characters long"),/[A-Z]/.test(e)||t.push("Password must contain at least one uppercase letter"),/[a-z]/.test(e)||t.push("Password must contain at least one lowercase letter"),/[0-9]/.test(e)||t.push("Password must contain at least one number"),{isValid:t.length===0,errors:t}}async function iU(e){try{console.log("Checking email existence in default Supabase...");const{data:t,error:n}=await Rx.from("user").select("email").eq("email",e.toLowerCase()).single();if(n&&n.code!=="PGRST116")throw console.error("Error checking email:",n),n;return console.log(`Email ${e} exists:`,!!t),!!t}catch(t){throw console.error("Failed to check email existence:",t),t}}async function aU(e){try{console.log("Creating new user in default Supabase...",{...e,password:"[HIDDEN]"});const{data:t,error:n}=await Rx.from("user").insert([{user_id:e.user_id,first_name:e.first_name,last_name:e.last_name,email:e.email.toLowerCase(),password:e.password}]).select().single();if(n)throw console.error("Supabase error:",n),new Error(`Failed to create user: ${n.message}`);return console.log("✅ User created successfully in default Supabase:",t),t}catch(t){throw console.error("Failed to create user:",t),t}}async function EN(e){try{console.log("Getting user by email from default Supabase...");const{data:t,error:n}=await Rx.from("user").select("*").eq("email",e.toLowerCase()).single();if(n){if(n.code==="PGRST116")return console.log("User not found"),null;throw n}return console.log("✅ User found:",{...t,password:"[HIDDEN]"}),t}catch(t){throw console.error("Failed to get user by email:",t),t}}async function oU(e,t){try{console.log("Authenticating user with default Supabase...");const n=await EN(e);return n?n.password!==t?(console.log("Invalid password"),null):(console.log("✅ User authenticated successfully"),n):(console.log("User not found"),null)}catch(n){throw console.error("Failed to authenticate user:",n),n}}const Mx="axpro_session",Kd=async(e,t)=>{const n=e.toLowerCase().trim();try{const r=await oU(n,t);if(r){const i={email:n,userId:r.user_id,role:"user",createdAt:Date.now()};try{return sessionStorage.setItem(Mx,JSON.stringify(i)),console.log("✅ Database user logged in:",i),i}catch(a){return console.error("Failed to store session:",a),null}}return console.log("❌ Invalid credentials"),null}catch(r){return console.error("Authentication error:",r),null}},na=()=>{try{sessionStorage.removeItem(Mx)}catch(e){console.error("Failed to clear session:",e)}},yt=()=>{try{const e=sessionStorage.getItem(Mx);if(!e)return null;const t=JSON.parse(e);return!t.email||!t.userId||!t.role||!t.createdAt?(na(),null):t}catch(e){return console.error("Failed to retrieve session:",e),na(),null}},Lx=e=>{const t=yt();return t?e==="admin"?t.role==="admin":!0:!1},NN=()=>{const[e,t]=si.useState(null);return si.useEffect(()=>{t(yt())},[]),{session:e,login:async(a,o)=>{const s=await Kd(a,o);return t(s),s},logout:()=>{na(),t(null)},isAuthedFor:a=>Lx(a)}},sU=Object.freeze(Object.defineProperty({__proto__:null,getSession:yt,isAuthedFor:Lx,login:Kd,logout:na,useAuth:NN},Symbol.toStringTag,{value:"Module"})),PN="http://localhost:3000/api";class ad extends Error{constructor(t,n){super(n),this.status=t,this.name="ApiError"}}async function Dr(e,t={}){const n=`${PN}${e}`;try{const r=await fetch(n,{...t,credentials:"include",headers:{"Content-Type":"application/json",...t.headers}});if(!r.ok){const i=await r.json().catch(()=>({}));throw new ad(r.status,i.error||"Request failed")}return r.json()}catch(r){throw r instanceof ad?r:new ad(0,`Network error: ${r instanceof Error?r.message:"Unknown error"}`)}}const hy={async demoLogin(e,t){return Dr("/auth/demo-login",{method:"POST",body:JSON.stringify({email:e,password:t})})},async getMe(){return Dr("/auth/me")},async logout(){return Dr("/auth/logout",{method:"POST"})}},ju={async list(e=20,t){const n=new URLSearchParams({limit:e.toString()});return t&&n.append("cursor",t),Dr(`/sessions?${n}`)},async create(e){return Dr("/sessions",{method:"POST",body:JSON.stringify({title:e})})},async get(e){return Dr(`/sessions/${e}`)},async update(e,t){return Dr(`/sessions/${e}`,{method:"PATCH",body:JSON.stringify(t)})},async delete(e){return Dr(`/sessions/${e}`,{method:"DELETE"})}},lp={async list(e,t=50,n,r="older"){const i=new URLSearchParams({limit:t.toString(),direction:r});return n&&i.append("cursor",n),Dr(`/sessions/${e}/messages?${i}`)},async send(e,t,n=!1){if(n){const r=await fetch(`${PN}/sessions/${e}/messages`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t,stream:!0})});if(!r.ok)throw new ad(r.status,"Stream request failed");return r}else return Dr(`/sessions/${e}/messages`,{method:"POST",body:JSON.stringify({content:t,stream:!1})})}},ei=async()=>(console.log("Backend check: No backend API server, using local storage for sessions"),!1),lU=()=>{const e={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_N8N_BASE_URL;if(e&&e.trim())return console.log("n8n webhook check: Configured (environment variable)"),!0;const t=localStorage.getItem("axpro_n8n_webhook_url"),n=localStorage.getItem("axpro_n8n_configs");if(n)try{const r=JSON.parse(n);if(Array.isArray(r)&&r.length>0&&r[0].webhookUrl)return console.log("n8n webhook check: Configured (multi-config)"),!0}catch(r){console.error("Failed to parse n8n configs:",r)}return t&&t.trim()?(console.log("n8n webhook check: Configured (legacy)"),!0):(console.log("n8n webhook check: Not configured"),!1)},my=()=>{const e={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_ENABLE_SIMULATION;if(e!==void 0)return e==="true"||e==="1";const t=localStorage.getItem("axpro_enable_simulation");return t!==null?t==="true":!1},cU=e=>{localStorage.setItem("axpro_enable_simulation",e.toString())},uU=()=>{const e=Wt(),{theme:t,toggleTheme:n}=qr(),{language:r,setLanguage:i,t:a}=Ze(),[o,s]=v.useState({email:"",password:""}),[l,c]=v.useState(null),[d,f]=v.useState(!1),[h,m]=v.useState("checking");si.useEffect(()=>{const y=yt();y&&(y.role==="admin"?e("/admin/dashboard"):e("/chat"))},[e]),si.useEffect(()=>{(async()=>{const x=await ei();m(x?"available":"unavailable")})()},[]);const p=y=>{const{name:x,value:b}=y.target;s(w=>({...w,[x]:b})),l&&c(null)},g=async y=>{y.preventDefault(),f(!0),c(null);try{await hy.demoLogin(o.email,o.password),await Kd(o.email,o.password)?e("/group-management"):c(a("auth.error"))}catch(x){console.log("Backend API failed, trying local auth:",x),await Kd(o.email,o.password)?e("/group-management"):c(a("auth.error"))}finally{f(!1)}};return u.jsxs("div",{className:"min-h-screen flex flex-col",style:{backgroundColor:"var(--bg)"},children:[u.jsxs("div",{className:"flex justify-between items-center p-4",children:[u.jsx("div",{className:"text-xs uppercase tracking-wider",style:{color:"var(--text-muted)"},children:a("app.brand")}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("button",{onClick:n,className:"text-sm px-3 py-1 rounded border",style:{backgroundColor:"var(--card)",borderColor:"var(--border)",color:"var(--text)"},children:a(t==="light"?"ui.theme.dark":"ui.theme.light")}),u.jsxs("select",{value:r,onChange:y=>i(y.target.value),className:"text-sm px-3 py-1 rounded border bg-transparent",style:{borderColor:"var(--border)",color:"var(--text)"},children:[u.jsx("option",{value:"en",children:a("ui.lang.en")}),u.jsx("option",{value:"ko",children:a("ui.lang.ko")})]})]})]}),u.jsx("div",{className:"flex-grow flex items-center justify-center px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"max-w-md w-full space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-3xl font-light",style:{color:"var(--text)"},children:a("auth.title.chat")}),u.jsx("p",{className:"mt-2 text-sm",style:{color:"var(--text-secondary)"},children:a("auth.subtitle.chat")})]}),u.jsx("form",{className:"space-y-6",onSubmit:g,children:u.jsxs("div",{className:"card py-8 px-6 rounded-lg",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-1",style:{color:"var(--text)"},children:a("auth.email")}),u.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:o.email,onChange:p,className:"input w-full px-3 py-2 rounded-md",placeholder:a("auth.email")})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-1",style:{color:"var(--text)"},children:a("auth.password")}),u.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:o.password,onChange:p,className:"input w-full px-3 py-2 rounded-md",placeholder:a("auth.password")})]})]}),l&&u.jsxs("div",{className:"mt-4 p-3 rounded-md error",children:[u.jsx("p",{className:"text-sm",children:l}),u.jsx("p",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:a("auth.demoHint")})]}),u.jsx("button",{type:"submit",disabled:d,className:"btn-primary w-full mt-6 flex justify-center py-2 px-4 rounded-md text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:d?"...":a("auth.continue")})]})}),u.jsx("div",{className:"text-center mt-6",children:u.jsxs("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:["New user?"," ",u.jsx(eN,{to:"/signup",className:"font-medium hover:underline",style:{color:"var(--primary)"},children:"Create an account"})]})})]})}),u.jsx("footer",{className:"mt-auto py-6 px-4 border-t",style:{borderColor:"var(--border)"},children:u.jsxs("div",{className:"max-w-6xl mx-auto",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-semibold mb-3",style:{color:"var(--text)"},children:"TecAce"}),u.jsx("p",{className:"text-xs leading-relaxed",style:{color:"var(--text-muted)"},children:"Enterprise AI Solutions for Modern Businesses"})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-semibold mb-3",style:{color:"var(--text)"},children:"Product"}),u.jsxs("ul",{className:"space-y-2 text-xs",style:{color:"var(--text-muted)"},children:[u.jsx("li",{children:"AI Assistant Platform"}),u.jsx("li",{children:"Knowledge Management"}),u.jsx("li",{children:"Analytics Dashboard"})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-semibold mb-3",style:{color:"var(--text)"},children:"Company"}),u.jsxs("ul",{className:"space-y-2 text-xs",style:{color:"var(--text-muted)"},children:[u.jsx("li",{children:u.jsx("a",{href:"https://tecace.com",target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity",children:"About Us"})}),u.jsx("li",{children:u.jsx("a",{href:"https://tecace.com",target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity",children:"Contact"})})]})]})]}),u.jsx("div",{className:"pt-4 border-t text-center",style:{borderColor:"var(--border)"},children:u.jsxs("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:["© ",new Date().getFullYear()," TecAce Software, Ltd. All rights reserved. |"," ",u.jsx("a",{href:"https://tecace.com",target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity",style:{color:"var(--primary)"},children:"tecace.com"})]})})]})})]})},dU=()=>{const e=Wt(),{theme:t,toggleTheme:n}=qr();Ze();const[r,i]=v.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[a,o]=v.useState({}),[s,l]=v.useState(!1),[c,d]=v.useState({isValid:!1,errors:[]}),f=p=>{const{name:g,value:y}=p.target;let x=y;if((g==="firstName"||g==="lastName")&&(x=y.charAt(0).toUpperCase()+y.slice(1).toLowerCase()),i(b=>({...b,[g]:x})),a[g]&&o(b=>({...b,[g]:""})),g==="password"){const b=rU(x);d(b)}},h=()=>{const p={};return r.firstName.trim()?r.firstName.trim().length<2&&(p.firstName="First name must be at least 2 characters"):p.firstName="First name is required",r.lastName.trim()?r.lastName.trim().length<2&&(p.lastName="Last name must be at least 2 characters"):p.lastName="Last name is required",r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(p.email="Please enter a valid email address"):p.email="Email is required",r.password?c.isValid||(p.password=c.errors[0]):p.password="Password is required",r.confirmPassword?r.password!==r.confirmPassword&&(p.confirmPassword="Passwords do not match"):p.confirmPassword="Please confirm your password",o(p),Object.keys(p).length===0},m=async p=>{if(p.preventDefault(),!!h()){l(!0);try{if(await iU(r.email)){o({email:"An account with this email already exists"}),l(!1);return}const y=nU(r.firstName,r.lastName);await aU({user_id:y,first_name:r.firstName.trim(),last_name:r.lastName.trim(),email:r.email.trim(),password:r.password}),alert("Account created successfully! Please sign in with your credentials."),e("/")}catch(g){console.error("Signup error:",g),o({general:g instanceof Error?g.message:"Failed to create account. Please try again."})}finally{l(!1)}}};return u.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8","data-theme":t,children:u.jsxs("div",{className:"max-w-md w-full space-y-8",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"mt-6 text-3xl font-bold",style:{color:"var(--text)"},children:"Create Account"}),u.jsx("p",{className:"mt-2 text-sm",style:{color:"var(--text-muted)"},children:"Join AX Pro Platform"})]}),u.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m,children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium",style:{color:"var(--text)"},children:"First Name"}),u.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:r.firstName,onChange:f,className:"mt-1 block w-full px-3 py-2 rounded-md border",style:{backgroundColor:"var(--card)",borderColor:a.firstName?"var(--danger)":"var(--border)",color:"var(--text)"},placeholder:"Enter your first name"}),a.firstName&&u.jsx("p",{className:"mt-1 text-sm",style:{color:"var(--danger)"},children:a.firstName})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium",style:{color:"var(--text)"},children:"Last Name"}),u.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,value:r.lastName,onChange:f,className:"mt-1 block w-full px-3 py-2 rounded-md border",style:{backgroundColor:"var(--card)",borderColor:a.lastName?"var(--danger)":"var(--border)",color:"var(--text)"},placeholder:"Enter your last name"}),a.lastName&&u.jsx("p",{className:"mt-1 text-sm",style:{color:"var(--danger)"},children:a.lastName})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium",style:{color:"var(--text)"},children:"Email Address"}),u.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:r.email,onChange:f,className:"mt-1 block w-full px-3 py-2 rounded-md border",style:{backgroundColor:"var(--card)",borderColor:a.email?"var(--danger)":"var(--border)",color:"var(--text)"},placeholder:"Enter your email"}),a.email&&u.jsx("p",{className:"mt-1 text-sm",style:{color:"var(--danger)"},children:a.email})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium",style:{color:"var(--text)"},children:"Password"}),u.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:r.password,onChange:f,className:"mt-1 block w-full px-3 py-2 rounded-md border",style:{backgroundColor:"var(--card)",borderColor:a.password?"var(--danger)":"var(--border)",color:"var(--text)"},placeholder:"Create a password"}),a.password&&u.jsx("p",{className:"mt-1 text-sm",style:{color:"var(--danger)"},children:a.password}),r.password&&u.jsxs("div",{className:"mt-2 text-xs",style:{color:"var(--text-muted)"},children:[u.jsx("p",{className:"font-medium mb-1",children:"Password requirements:"}),u.jsxs("ul",{className:"space-y-1",children:[u.jsx("li",{className:r.password.length>=8?"text-green-500":"text-red-500",children:"• At least 8 characters"}),u.jsx("li",{className:/[A-Z]/.test(r.password)?"text-green-500":"text-red-500",children:"• At least one uppercase letter"}),u.jsx("li",{className:/[a-z]/.test(r.password)?"text-green-500":"text-red-500",children:"• At least one lowercase letter"}),u.jsx("li",{className:/[0-9]/.test(r.password)?"text-green-500":"text-red-500",children:"• At least one number"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium",style:{color:"var(--text)"},children:"Confirm Password"}),u.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:r.confirmPassword,onChange:f,className:"mt-1 block w-full px-3 py-2 rounded-md border",style:{backgroundColor:"var(--card)",borderColor:a.confirmPassword?"var(--danger)":"var(--border)",color:"var(--text)"},placeholder:"Confirm your password"}),a.confirmPassword&&u.jsx("p",{className:"mt-1 text-sm",style:{color:"var(--danger)"},children:a.confirmPassword})]})]}),a.general&&u.jsx("div",{className:"p-3 rounded-md",style:{backgroundColor:"var(--danger-bg)",border:"1px solid var(--danger)"},children:u.jsx("p",{className:"text-sm",style:{color:"var(--danger)"},children:a.general})}),u.jsx("div",{children:u.jsx("button",{type:"submit",disabled:s,className:"btn-primary w-full mt-6 flex justify-center py-2 px-4 rounded-md text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Creating Account...":"Create Account"})}),u.jsx("div",{className:"text-center",children:u.jsxs("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:["Already have an account?"," ",u.jsx(eN,{to:"/",className:"font-medium hover:underline",style:{color:"var(--primary)"},children:"Sign in"})]})})]}),u.jsx("div",{className:"text-center",children:u.jsx("button",{onClick:n,className:"text-sm px-3 py-1 rounded border",style:{backgroundColor:"var(--card)",borderColor:"var(--border)",color:"var(--text)"},children:t==="light"?"🌙 Dark":"☀️ Light"})})]})})},fU="https://qpyteahuynkgkbmdasbv.supabase.co",hU="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFweXRlYWh1eW5rZ2tibWRhc2J2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5NDk2NTcsImV4cCI6MjA3NTUyNTY1N30.qvp5ox6Xm0wYcZK89S2MYVu18fqyfYmT8nercIFMKOY",as=Dx(fU,hU);async function mU(e){try{const{data:t,error:n}=await as.from("user").select("id, user_id, first_name, last_name, email, groups").or(`first_name.ilike.%${e}%,last_name.ilike.%${e}%,email.ilike.%${e}%`).limit(10);if(n)throw console.error("Error searching users:",n),new Error(`Failed to search users: ${n.message}`);return t||[]}catch(t){throw console.error("Failed to search users:",t),t}}async function pU(e){try{const{data:t,error:n}=await as.from("group").insert({group_id:e.group_id,name:e.name,administrator:e.administrator,users:e.users,created_at:new Date().toISOString()}).select().single();if(n)throw console.error("Error creating group:",n),new Error(`Failed to create group: ${n.message}`);return t}catch(t){throw console.error("Failed to create group:",t),t}}async function gU(e,t){try{const{data:n,error:r}=await as.from("user").select("user_id, groups").in("user_id",e);if(r)throw console.error("Error fetching users:",r),new Error(`Failed to fetch users: ${r.message}`);const i=n.map(async a=>{const o=a.groups||[],s=o.includes(t)?o:[...o,t],{error:l}=await as.from("user").update({groups:s}).eq("user_id",a.user_id);if(l)throw console.error(`Error updating user ${a.user_id}:`,l),new Error(`Failed to update user groups: ${l.message}`)});await Promise.all(i),console.log("✅ User groups updated successfully")}catch(n){throw console.error("Failed to update user groups:",n),n}}async function yU(e){try{const{data:t,error:n}=await as.from("user").select("groups").eq("user_id",e).single();if(n)throw console.error("Error fetching user data:",n),new Error(`Failed to fetch user data: ${n.message}`);const r=(t==null?void 0:t.groups)||[];if(r.length===0)return[];const{data:i,error:a}=await as.from("group").select("*").in("group_id",r).order("created_at",{ascending:!1});if(a)throw console.error("Error fetching groups:",a),new Error(`Failed to fetch groups: ${a.message}`);return i||[]}catch(t){throw console.error("Failed to fetch user groups:",t),t}}const vU=({isOpen:e,onClose:t,onGroupCreated:n})=>{qr();const[r,i]=v.useState(""),[a,o]=v.useState(""),[s,l]=v.useState([]),[c,d]=v.useState([]),[f,h]=v.useState(!1),[m,p]=v.useState(!1),[g,y]=v.useState(null);v.useEffect(()=>{e&&(i(""),o(""),l([]),d([]),y(null))},[e]),v.useEffect(()=>{const k=setTimeout(async()=>{if(a.trim().length<2){l([]);return}h(!0);try{const _=await mU(a);l(_)}catch(_){console.error("Failed to search users:",_),y("Failed to search users")}finally{h(!1)}},300);return()=>clearTimeout(k)},[a]);const x=S=>{c.find(k=>k.id===S.id)||d([...c,S]),o(""),l([])},b=S=>{d(c.filter(k=>k.id!==S))},w=()=>{const S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let k="";for(let _=0;_<20;_++)k+=S.charAt(Math.floor(Math.random()*S.length));return k},j=async()=>{if(!r.trim()){y("Group name is required");return}const S=yt();if(!S){y("You must be logged in to create a group");return}p(!0),y(null);try{const k=w(),_=S.userId;await pU({group_id:k,name:r.trim(),administrator:_,users:c.map(P=>P.user_id)});const N=[_,...c.map(P=>P.user_id)];await gU(N,k),n(),t()}catch(k){console.error("Failed to create group:",k),y(k instanceof Error?k.message:"Failed to create group")}finally{p(!1)}};return e?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden",style:{backgroundColor:"var(--card)"},children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b",style:{borderColor:"var(--border)"},children:[u.jsx("h2",{className:"text-xl font-semibold",style:{color:"var(--text)"},children:"Create New Group"}),u.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:"Group Name *"}),u.jsx("input",{type:"text",value:r,onChange:S=>i(S.target.value),placeholder:"Enter group name",className:"w-full px-3 py-2 border rounded-md",style:{backgroundColor:"var(--bg)",borderColor:"var(--border)",color:"var(--text)"}})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:"Add Users"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:a,onChange:S=>o(S.target.value),placeholder:"Search by first name, last name, or email",className:"w-full px-3 py-2 border rounded-md",style:{backgroundColor:"var(--bg)",borderColor:"var(--border)",color:"var(--text)"}}),f&&u.jsx("div",{className:"absolute right-3 top-3",children:u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:"var(--primary)"}})})]}),s.length>0&&u.jsx("div",{className:"mt-2 border rounded-md max-h-40 overflow-y-auto",style:{borderColor:"var(--border)",backgroundColor:"var(--bg)"},children:s.map(S=>u.jsxs("div",{onClick:()=>x(S),className:"px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer border-b last:border-b-0",style:{borderColor:"var(--border)"},children:[u.jsxs("div",{className:"font-medium",style:{color:"var(--text)"},children:[S.first_name," ",S.last_name]}),u.jsx("div",{className:"text-sm",style:{color:"var(--text-muted)"},children:S.email})]},S.id))})]}),c.length>0&&u.jsxs("div",{className:"mb-6",children:[u.jsxs("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:["Selected Users (",c.length,")"]}),u.jsx("div",{className:"space-y-2",children:c.map(S=>u.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border rounded-md",style:{borderColor:"var(--border)",backgroundColor:"var(--bg)"},children:[u.jsxs("div",{children:[u.jsxs("div",{className:"font-medium",style:{color:"var(--text)"},children:[S.first_name," ",S.last_name]}),u.jsx("div",{className:"text-sm",style:{color:"var(--text-muted)"},children:S.email})]}),u.jsx("button",{onClick:()=>b(S.id),className:"text-red-500 hover:text-red-700",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},S.id))})]}),g&&u.jsx("div",{className:"mb-4 p-3 rounded-md",style:{backgroundColor:"var(--danger-light)",color:"var(--danger)"},children:g})]}),u.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t",style:{borderColor:"var(--border)"},children:[u.jsx("button",{onClick:t,className:"px-4 py-2 rounded-md border",style:{borderColor:"var(--border)",color:"var(--text)",backgroundColor:"var(--bg)"},children:"Cancel"}),u.jsx("button",{onClick:j,disabled:m||!r.trim(),className:"btn-primary px-4 py-2 rounded-md text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Creating...":"Create Group"})]})]})}):null},xU=()=>{const e=Wt(),{theme:t,toggleTheme:n}=qr();Ze();const[r,i]=v.useState([]),[a,o]=v.useState(""),[s,l]=v.useState(!0),[c,d]=v.useState("grid"),[f,h]=v.useState(""),[m,p]=v.useState(!1);v.useEffect(()=>{const _=yt();if(!_){e("/",{replace:!0});return}g(_.email),y()},[e]);const g=async _=>{try{const N=await EN(_);N&&h(`${N.first_name} ${N.last_name}`)}catch(N){console.error("Failed to load user data:",N)}},y=async()=>{l(!0);try{const _=yt();if(_){const N=await yU(_.userId);i(N)}}catch(_){console.error("Failed to load groups:",_)}finally{l(!1)}},x=()=>{na(),e("/",{replace:!0})},b=()=>{p(!0)},w=()=>{y()},j=_=>{const N=yt();return N?_.administrator===N.userId:!1},S=r.filter(_=>_.name.toLowerCase().includes(a.toLowerCase())),k=_=>new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return u.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"var(--bg)"},"data-theme":t,children:[u.jsx("header",{className:"border-b",style:{borderColor:"var(--border)",backgroundColor:"var(--card)"},children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex justify-between items-center h-16",children:[u.jsx("div",{className:"flex items-center space-x-4",children:u.jsx("span",{className:"text-lg font-semibold",style:{color:"var(--text)"},children:f||"Loading..."})}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("button",{onClick:n,className:"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Toggle theme",children:t==="light"?"🌙":"☀️"}),u.jsx("button",{onClick:x,className:"px-4 py-2 rounded-md text-sm font-medium",style:{backgroundColor:"var(--danger)",color:"white"},children:"Sign Out"})]})]})})}),u.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsx("div",{className:"mb-8",children:u.jsx("h1",{className:"text-3xl font-bold",style:{color:"var(--text)"},children:"Groups"})}),u.jsx("div",{className:"mb-8",children:u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsx("div",{className:"flex-1 max-w-md",children:u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx("svg",{className:"h-5 w-5",style:{color:"var(--text-muted)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),u.jsx("input",{type:"text",placeholder:"Search for a group",value:a,onChange:_=>o(_.target.value),className:"block w-full pl-10 pr-3 py-2 border rounded-md",style:{backgroundColor:"var(--card)",borderColor:"var(--border)",color:"var(--text)"}})]})}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("button",{className:"p-2 rounded-md border hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",style:{borderColor:"var(--border)",color:"var(--text)"},title:"Filter groups",children:u.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.707A1 1 0 013 7V4z"})})}),u.jsxs("div",{className:"flex rounded-md border",style:{borderColor:"var(--border)"},children:[u.jsx("button",{onClick:()=>d("grid"),className:`p-2 ${c==="grid"?"bg-gray-100 dark:bg-gray-700":""}`,style:{color:"var(--text)"},title:"Grid view",children:u.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),u.jsx("button",{onClick:()=>d("list"),className:`p-2 ${c==="list"?"bg-gray-100 dark:bg-gray-700":""}`,style:{color:"var(--text)"},title:"List view",children:u.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]}),u.jsx("button",{onClick:b,className:"btn-primary px-4 py-2 rounded-md text-sm font-medium",children:"+ New Group"})]})]})}),s?u.jsx("div",{className:"flex items-center justify-center py-12",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto mb-4",style:{borderColor:"var(--primary)"}}),u.jsx("p",{style:{color:"var(--text-muted)"},children:"Loading groups..."})]})}):S.length===0?u.jsx("div",{className:"text-center py-12",children:u.jsxs("div",{className:"max-w-md mx-auto",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--primary-light)"},children:u.jsx("svg",{className:"w-8 h-8",style:{color:"var(--primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),u.jsx("h3",{className:"text-lg font-medium mb-2",style:{color:"var(--text)"},children:"No groups yet"}),u.jsx("p",{className:"text-sm mb-6",style:{color:"var(--text-muted)"},children:"Get started by creating your first group to organize your projects and team members."}),u.jsx("button",{onClick:b,className:"btn-primary px-6 py-3 rounded-md text-sm font-medium",children:"Create Your First Group"})]})}):u.jsx("div",{className:c==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:S.map(_=>u.jsx("div",{className:"rounded-lg border p-6 hover:shadow-lg transition-shadow cursor-pointer",style:{backgroundColor:"var(--card)",borderColor:"var(--border)"},children:u.jsxs("div",{className:"flex items-start justify-between mb-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text)"},children:_.name}),u.jsx("div",{className:"mb-2",children:u.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${j(_)?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}`,children:j(_)?"Administrator":"User"})}),u.jsxs("div",{className:"flex items-center space-x-4 text-xs",style:{color:"var(--text-muted)"},children:[u.jsxs("span",{children:[_.users.length+1," members"]}),u.jsx("span",{children:"•"}),u.jsxs("span",{children:["Created ",k(_.created_at)]})]})]}),u.jsx("div",{className:"flex items-center space-x-2",children:u.jsx("svg",{className:"w-5 h-5",style:{color:"var(--text-muted)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},_.id))})]}),u.jsx(vU,{isOpen:m,onClose:()=>p(!1),onGroupCreated:w})]})},bU=()=>{const[e,t]=v.useState([]),[n,r]=v.useState(!0),[i,a]=v.useState(null),o=Wt(),s=async()=>{try{if(r(!0),a(null),await ei()){const p=await ju.list();t(p)}else{const p=JSON.parse(localStorage.getItem("axpro_sim_sessions")||"[]");t(p)}}catch(m){a(m instanceof Error?m.message:"Failed to fetch sessions")}finally{r(!1)}},l=async m=>{try{console.log("Creating new session...");const p=await ei();if(console.log("Backend available:",p),p){console.log("Using backend API for session creation");const{id:g}=await ju.create(m);return await s(),o(`/chat/${g}`),g}else{console.log("Using local storage for session creation");const g=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,y={id:g,title:m||"New Chat",status:"open",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},x=JSON.parse(localStorage.getItem("axpro_sim_sessions")||"[]");return x.push(y),localStorage.setItem("axpro_sim_sessions",JSON.stringify(x)),console.log("Session created successfully:",y),await s(),o(`/chat/${g}`),g}}catch(p){throw console.error("Failed to create session:",p),a(p instanceof Error?p.message:"Failed to create session"),p}},c=async(m,p)=>{try{if(await ei())await ju.update(m,p);else{const y=JSON.parse(localStorage.getItem("axpro_sim_sessions")||"[]"),x=y.findIndex(b=>b.id===m);x!==-1&&(y[x]={...y[x],...p,updatedAt:new Date().toISOString()},localStorage.setItem("axpro_sim_sessions",JSON.stringify(y)))}await s()}catch(g){throw a(g instanceof Error?g.message:"Failed to update session"),g}},d=async m=>{try{console.log("deleteSession called with id:",m);const p=await ei();if(console.log("Backend available:",p),p)console.log("Deleting via backend API"),await ju.delete(m);else{console.log("Deleting from localStorage");const y=JSON.parse(localStorage.getItem("axpro_sim_sessions")||"[]");console.log("Current sessions before delete:",y.length);const x=y.filter(b=>b.id!==m);console.log("Sessions after delete:",x.length),localStorage.setItem("axpro_sim_sessions",JSON.stringify(x)),localStorage.removeItem(`axpro_sim_messages_${m}`),console.log("Deleted associated messages for session:",m)}console.log("Refreshing sessions list"),await s();const g=e.filter(y=>y.id!==m);console.log("Remaining sessions:",g.length),g.length>0?o(`/chat/${g[0].id}`):o("/chat"),console.log("Delete session completed successfully")}catch(p){throw console.error("Error in deleteSession:",p),a(p instanceof Error?p.message:"Failed to delete session"),p}},f=async m=>{await c(m,{status:"closed"})},h=async m=>{await c(m,{status:"open"})};return v.useEffect(()=>{s()},[]),{sessions:e,loading:n,error:i,createSession:l,updateSession:c,deleteSession:d,closeSession:f,reopenSession:h,refresh:s}},wU=({session:e,isActive:t,onClick:n,updateSession:r,deleteSession:i,closeSession:a,reopenSession:o})=>{var j;const s=_c(),[l,c]=v.useState(!1),[d,f]=v.useState(!1),[h,m]=v.useState(e.title||""),p=v.useRef(null),g=S=>{S.preventDefault(),S.stopPropagation(),c(!l)},y=async()=>{if(h.trim()&&h!==e.title)try{await r(e.id,{title:h.trim()})}catch(S){console.error("Failed to rename session:",S)}f(!1),c(!1)},x=async()=>{try{e.status==="closed"?await o(e.id):await a(e.id)}catch(S){console.error("Failed to toggle session status:",S)}c(!1)},b=async()=>{const S=e.status==="closed"?s("context.confirmDeleteClosed"):s("context.confirmDelete");if(window.confirm(S))try{console.log("Deleting session:",e.id),await i(e.id),console.log("Session deleted successfully")}catch(k){console.error("Failed to permanently delete session:",k),alert(s("context.deleteFailed"))}c(!1)};v.useEffect(()=>{const S=k=>{p.current&&!p.current.contains(k.target)&&c(!1)};return l&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[l]);const w=S=>{const k=new Date(S),N=(new Date().getTime()-k.getTime())/(1e3*60*60);return N<1?s("ui.justNow"):N<24?`${Math.floor(N)}h ago`:N<168?`${Math.floor(N/24)}d ago`:k.toLocaleDateString()};return u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:`p-3 cursor-pointer transition-colors group ${t?"bg-gray-100 border-r-2 border-gray-400":"hover:bg-gray-50"}`,style:{backgroundColor:t?"var(--primary-light)":void 0,borderRightColor:t?"var(--text)":void 0},onClick:n,onContextMenu:g,children:d?u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{type:"text",value:h,onChange:S=>m(S.target.value),onKeyDown:S=>{S.key==="Enter"&&y(),S.key==="Escape"&&(f(!1),m(e.title||""))},className:"input w-full px-2 py-1 text-sm",autoFocus:!0}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("button",{onClick:y,className:"text-xs px-2 py-1 rounded bg-blue-500 text-white",children:"Save"}),u.jsx("button",{onClick:()=>{f(!1),m(e.title||"")},className:"text-xs px-2 py-1 rounded border",style:{borderColor:"var(--border)"},children:"Cancel"})]})]}):u.jsx(u.Fragment,{children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("h3",{className:`text-sm font-medium truncate ${e.status==="closed"?"opacity-60":""}`,style:{color:"var(--text)"},children:e.title||s("ui.newChatTitle")}),e.status==="closed"&&u.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-gray-100",style:{color:"var(--text-muted)"},children:"🔒"})]}),e.lastMessage&&u.jsxs("p",{className:"text-xs mt-1 truncate",style:{color:"var(--text-secondary)"},children:[e.lastMessage.role==="user"?"You: ":"Assistant: ",e.lastMessage.content]})]}),u.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[u.jsx("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:w(((j=e.lastMessage)==null?void 0:j.createdAt)||e.updatedAt)}),u.jsx("button",{onClick:g,className:"opacity-0 group-hover:opacity-100 text-xs px-1 py-1 rounded hover:bg-gray-200",style:{color:"var(--text-muted)"},children:"⋯"})]})]})})}),l&&!d&&u.jsx("div",{ref:p,className:"absolute right-0 top-0 z-20 w-48 card rounded-md shadow-lg border",style:{backgroundColor:"var(--card)",borderColor:"var(--border)"},onClick:S=>S.stopPropagation(),children:u.jsxs("div",{className:"py-1",children:[u.jsxs("button",{onClick:S=>{S.stopPropagation(),f(!0),c(!1)},className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100",style:{color:"var(--text)"},children:["✏️ ",s("context.rename")]}),u.jsx("button",{onClick:S=>{S.stopPropagation(),x()},className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100",style:{color:"var(--text)"},children:e.status==="closed"?`🔄 ${s("context.reopen")}`:`🔒 ${s("context.close")}`}),u.jsx("hr",{className:"my-1",style:{borderColor:"var(--border)"}}),u.jsxs("button",{onClick:S=>{S.stopPropagation(),b()},className:"w-full text-left px-4 py-2 text-sm hover:bg-red-50",style:{color:"var(--error)"},children:["🗑️ ",s("context.deletePermanently")]})]})})]})},kU=()=>{const e=Wt(),{sessionId:t}=Y2(),{sessions:n,loading:r,createSession:i,refresh:a,updateSession:o,deleteSession:s,closeSession:l,reopenSession:c}=bU(),d=_c(),[f,h]=v.useState(""),[m,p]=v.useState("all"),g=n.filter(x=>{var j,S;const b=!f||((j=x.title)==null?void 0:j.toLowerCase().includes(f.toLowerCase()))||((S=x.lastMessage)==null?void 0:S.content.toLowerCase().includes(f.toLowerCase())),w=m==="all"||x.status===m;return b&&w}),y=async()=>{try{await i()}catch(x){console.error("Failed to create new chat:",x)}};return v.useEffect(()=>{const x=b=>{(b.metaKey||b.ctrlKey)&&b.key==="n"&&(b.preventDefault(),y())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[]),v.useEffect(()=>{const x=()=>{a()};return window.addEventListener("sessionUpdated",x),()=>window.removeEventListener("sessionUpdated",x)},[a]),r?u.jsx("div",{className:"p-4",children:u.jsxs("div",{className:"animate-pulse space-y-3",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})}):u.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[u.jsxs("div",{className:"p-4 space-y-3 flex-shrink-0",children:[u.jsxs("button",{onClick:y,className:"w-full btn-primary py-2 px-4 rounded-md text-sm font-medium",title:"Create new chat (⌘N or Ctrl+N)",children:["+ ",d("ui.newChat")]}),u.jsx("input",{type:"text",placeholder:d("ui.searchConversations"),value:f,onChange:x=>h(x.target.value),className:"input w-full px-3 py-2 rounded-md text-sm"})]}),u.jsx("div",{className:"px-4 pb-2 flex-shrink-0",children:u.jsx("div",{className:"flex space-x-1",children:["all","open","closed"].map(x=>u.jsx("button",{onClick:()=>p(x),className:`px-3 py-1 text-xs rounded-md transition-colors ${m===x?"text-white":"text-gray-600 hover:text-gray-900"}`,style:{backgroundColor:m===x?"var(--text)":"transparent",color:m===x?"var(--bg)":"var(--text-secondary)"},children:d(x==="all"?"ui.all":x==="open"?"ui.open":"ui.closed")},x))})}),u.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:g.length===0?u.jsx("div",{className:"p-4 text-center",children:f?u.jsxs("div",{children:[u.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:d("ui.noConversations")}),u.jsx("p",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:"Try a different search term"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"text-4xl mb-2",children:"💬"}),u.jsx("h3",{className:"text-sm font-medium",style:{color:"var(--text)"},children:d("ui.noConversations")}),u.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:d("ui.startConversation")}),u.jsx("button",{onClick:y,className:"btn-primary px-4 py-2 text-sm rounded-md",children:d("ui.startNewChat")}),u.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:d("ui.backendNote")})]})}):u.jsx("div",{className:"space-y-1 p-2",children:g.map(x=>u.jsx(wU,{session:x,isActive:t===x.id,onClick:()=>e(`/chat/${x.id}`),updateSession:o,deleteSession:s,closeSession:l,reopenSession:c},x.id))})})]})},SU={n8nConfigs:[],activeN8nConfigId:"",supabaseConfig:{url:"",anonKey:""},apiConfigs:[],uiCustomization:{}},ik={n8nConfigs:[{id:"admin_default",name:"Admin Default Webhook",webhookUrl:"https://n8n.srv978041.hstgr.cloud/webhook/328757ba-62e6-465e-be1b-2fff0fd1d353",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],activeN8nConfigId:"admin_default",supabaseConfig:{url:"https://qpyteahuynkgkbmdasbv.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFweXRlYWh1eW5rZ2tibWRhc2J2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5NDk2NTcsImV4cCI6MjA3NTUyNTY1N30.qvp5ox6Xm0wYcZK89S2MYVu18fqyfYmT8nercIFMKOY"}},py="axpro_user_settings",$x=()=>{const e=yt();if(!e)return null;try{const n=JSON.parse(localStorage.getItem(py)||"{}")[e.userId];return n||ON(e.userId,e.email)}catch(t){return console.error("Failed to get user settings:",t),null}},dh=e=>{const t=yt();if(!t)return!1;try{const n=JSON.parse(localStorage.getItem(py)||"{}"),i={...n[t.userId]||ON(t.userId,t.email),...e,userId:t.userId,email:t.email,updatedAt:new Date().toISOString()};return n[t.userId]=i,localStorage.setItem(py,JSON.stringify(n)),!0}catch(n){return console.error("Failed to save user settings:",n),!1}},ON=(e,t)=>{const n=new Date().toISOString();return e==="409esj1923"||t==="chatbot-admin@tecace.com"?{userId:e,email:t,...ik,createdAt:n,updatedAt:n}:e==="user123456"||t==="chatbot-user@tecace.com"?{userId:e,email:t,...ik,createdAt:n,updatedAt:n}:{userId:e,email:t,...SU,createdAt:n,updatedAt:n}},jU=()=>{const e=$x();return(e==null?void 0:e.n8nConfigs)||[]},CU=e=>dh({n8nConfigs:e}),_U=()=>{const e=$x();return e&&(e.n8nConfigs.find(n=>n.id===e.activeN8nConfigId)||e.n8nConfigs[0])||null},EU=e=>dh({activeN8nConfigId:e}),AN=()=>{const e=$x();return(e==null?void 0:e.supabaseConfig)||{url:"",anonKey:""}},NU=e=>dh({supabaseConfig:e}),fh=()=>{try{const e=jU();return console.log("Loaded user-specific n8n configs:",e),e}catch(e){return console.error("Failed to get user n8n configs:",e),[]}},Fx=e=>{try{CU(e),console.log("Saved user-specific n8n configs:",e)}catch(t){console.error("Failed to save user n8n configs:",t)}},Ux=()=>{try{const e=_U();return console.log("Active user n8n config:",e),e}catch(e){return console.error("Failed to get active user n8n config:",e),null}},TN=e=>{try{EU(e),console.log("Set active user n8n config:",e)}catch(t){console.error("Failed to set active user n8n config:",t)}},PU=e=>{const t={...e,id:`n8n_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},n=fh();return n.push(t),Fx(n),t},OU=(e,t)=>{const n=fh(),r=n.findIndex(i=>i.id===e);return r===-1?null:(n[r]={...n[r],...t,updatedAt:new Date().toISOString()},Fx(n),n[r])},AU=e=>{const t=fh(),n=t.filter(i=>i.id!==e);if(n.length===t.length)return!1;Fx(n);const r=Ux();return(r==null?void 0:r.id)===e&&n.length>0&&TN(n[0].id),!0},TU=async e=>{const t=Ux();if(console.log("Sending to n8n with user config:",t),console.log("Request payload:",e),!t)throw new Error("No active n8n configuration found for current user");try{console.log("Making request to:",t.webhookUrl),console.log("Request payload:",JSON.stringify(e));const n=new AbortController,r=setTimeout(()=>{console.log("n8n webhook request timed out after 30 seconds"),n.abort()},3e4),i=await fetch(t.webhookUrl,{method:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Pragma:"no-cache"},body:JSON.stringify(e),signal:n.signal});clearTimeout(r),console.log("Response status:",i.status),console.log("Response headers:",i.headers);const a=await i.text();if(console.log("=== N8N WEBHOOK DEBUG ==="),console.log("Response status:",i.status),console.log("Response ok:",i.ok),console.log("Raw response text length:",a.length),console.log("Raw response text:",a),console.log("Response text trimmed:",a.trim()),console.log("Is empty?",!a||a.trim()===""),console.log("Response URL:",i.url),console.log("Response headers:",Object.fromEntries(i.headers.entries())),console.log("========================"),!i.ok)throw console.error("Response error:",a),new Error(`HTTP error! status: ${i.status}, message: ${a}`);if(!a||a.trim()==="")throw console.warn("Empty response from webhook"),new Error("Empty response from webhook. Please check your workflow configuration.");let o;try{o=JSON.parse(a)}catch(l){throw console.error("Failed to parse JSON response:",l),console.error("Response text was:",a),new Error(`Invalid JSON response from n8n: ${a.substring(0,100)}...`)}console.log("n8n response:",o);let s;if(Array.isArray(o))s=o[0];else if(o&&typeof o=="object")s=o;else throw new Error("Unexpected response format from n8n webhook");if(s&&s.answer&&s.answer.includes("No response from webhook"))throw console.error("Webhook returned error message:",s.answer),new Error("Webhook returned error: "+s.answer);return s}catch(n){throw console.error("Failed to send to n8n:",n),n.name==="AbortError"?new Error("Webhook request timed out after 30 seconds"):n.name==="TypeError"&&n.message.includes("fetch")?new Error("Network error: Unable to reach webhook"):n}},IU=async e=>{try{const t={sessionId:"test-session",chatId:"test-chat-"+Date.now(),userId:"test-user",action:"sendMessage",chatInput:"Test connection"};return(await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok}catch(t){return console.error("Failed to test n8n connection:",t),!1}};class DU{constructor(t){ru(this,"reader");this.reader=t.body.getReader()}async*read(){const t=new TextDecoder;let n="";try{for(;;){const{done:r,value:i}=await this.reader.read();if(r)break;n+=t.decode(i,{stream:!0});const a=n.split(`
`);n=a.pop()||"";for(const o of a)if(o.startsWith("data: ")){const s=o.slice(6);if(s==="[DONE]")return;try{yield JSON.parse(s)}catch{console.warn("Failed to parse SSE data:",s)}}}}finally{this.reader.releaseLock()}}}const ak={async sendMessage(e,t,n){const r=await ei();if(console.log("Backend available:",r),r)if(n){const i=await lp.send(e,t,!0),a=new DU(i);let o="",s=[];for await(const l of a.read())n(l),l.type==="final"&&(o=l.messageId||"",s=l.citations||[]);return{messageId:o,citations:s}}else{const i=await lp.send(e,t,!1);return{messageId:i.messageId||`backend_${Date.now()}`,citations:i.citations||[]}}else{console.log("Backend unavailable, trying n8n for chat...");const i=lU(),a=Ux();if(console.log("n8n webhook available:",i),console.log("Active n8n config:",a),i&&a&&a.webhookUrl){console.log("Using n8n webhook:",a.webhookUrl);try{const c=yt(),d=`chat_${e}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,f={sessionId:e,chatId:d,userId:(c==null?void 0:c.userId)||"unknown",action:"sendMessage",chatInput:t};console.log("=== CHAT SERVICE DEBUG ==="),console.log("Sending request to n8n:",f);let h,m=null;for(let p=1;p<=3;p++)try{console.log(`n8n request attempt ${p}/3`),h=await TU(f),console.log("n8n response received successfully:",h),console.log("Response type:",typeof h),console.log("Response has answer?",!!(h!=null&&h.answer)),console.log("Response answer:",h==null?void 0:h.answer);break}catch(g){if(m=g,console.warn(`n8n request attempt ${p} failed:`,g),p<3){const y=Math.pow(2,p)*1e3;console.log(`Retrying in ${y}ms...`),await new Promise(x=>setTimeout(x,y))}}if(!h||!h.answer)throw console.error("All n8n attempts failed, last error:",m),new Error(`n8n webhook failed after 3 attempts: ${(m==null?void 0:m.message)||"No response"}`);if(console.log("=========================="),n){const p=h.answer;console.log("Streaming answer text:",p);const g=p.split(" ");for(let y=0;y<g.length;y++)n({type:"delta",text:g[y]+(y<g.length-1?" ":"")}),await new Promise(x=>setTimeout(x,50));n({type:"final",messageId:d,citations:h.citationTitle?[{id:`citation_${Date.now()}`,messageId:d,sourceType:"document",title:h.citationTitle,snippet:h.citationContent||"",sourceId:`doc_${Date.now()}`,metadata:{}}]:[]})}return{messageId:d,citations:h.citationTitle?[{id:`citation_${Date.now()}`,messageId:d,sourceType:"document",title:h.citationTitle,snippet:h.citationContent||"",sourceId:`doc_${Date.now()}`,metadata:{}}]:[]}}catch(c){if(console.error("Failed to send to n8n:",c),console.log("n8n failed, checking simulation mode setting"),my())console.log("Simulation mode enabled, falling back to simulation");else throw console.log("Simulation mode disabled, throwing error"),new Error(`Chat service unavailable: ${c instanceof Error?c.message:"n8n webhook failed"}`)}}else if(console.log("No n8n config found or webhook URL missing"),console.log("n8n config was:",a),my())console.log("Simulation mode enabled, falling back to simulation");else throw console.log("Simulation mode disabled, throwing error"),new Error("Chat service unavailable: No n8n webhook configured");console.log("Falling back to simulation");const s=(await Hr(()=>import("./simulation-ee6eb0cb.js"),[])).generateSimulatedResponse(t),l=s.reply;if(n){const c=l.split(" ");for(let d=0;d<c.length;d++)n({type:"delta",text:c[d]+(d<c.length-1?" ":"")}),await new Promise(f=>setTimeout(f,50));n({type:"final",messageId:`sim_${Date.now()}`,citations:(s.citations||[]).map((d,f)=>({id:`sim_citation_${Date.now()}_${f}`,messageId:`sim_${Date.now()}`,sourceType:d.sourceType,title:d.title,snippet:d.snippet,sourceId:d.sourceId||`sim_${Date.now()}`,metadata:{}}))})}return{messageId:`sim_${Date.now()}`,citations:(s.citations||[]).map((c,d)=>({id:`sim_citation_${Date.now()}_${d}`,messageId:`sim_${Date.now()}`,sourceType:c.sourceType,title:c.title,snippet:c.snippet,sourceId:c.sourceId||`sim_${Date.now()}`,metadata:{}}))}}},async getMessages(e,t=50,n,r="older"){return await ei()?await lp.list(e,t,n,r):JSON.parse(localStorage.getItem(`axpro_sim_messages_${e}`)||"[]")}};let cp=null,ok=null;const Ie=()=>{const e=AN(),t=`${e.url}:${e.anonKey}`;if(!cp||ok!==t){if(!e.url||!e.anonKey)throw new Error("Supabase configuration not set for current user. Please configure in Settings > Database.");cp=Dx(e.url,e.anonKey),ok=t,console.log("✅ Supabase client initialized for current user")}return cp},RU=()=>AN(),MU=e=>{NU(e)},LU=async e=>{try{if(!e.url||!e.anonKey)return!1;const t=await fetch(`${e.url}/rest/v1/prompts?select=id&limit=1`,{method:"GET",headers:{"Content-Type":"application/json",apikey:e.anonKey,Authorization:`Bearer ${e.anonKey}`}});return console.log("Supabase connection test response:",t.status),t.ok}catch(t){return console.error("Supabase connection test failed:",t),!1}};async function zx(){try{const e=Ie();console.log("Fetching admin feedback from Supabase...");const{data:t,error:n}=await e.from("admin_feedback").select("*").order("created_at",{ascending:!1});if(n)throw console.error("Supabase error:",n),new Error(`Failed to fetch admin feedback: ${n.message}`);return console.log(`✅ Fetched ${(t==null?void 0:t.length)||0} admin feedback records`),t||[]}catch(e){throw console.error("Failed to fetch admin feedback:",e),e}}async function Ja(){try{const e=Ie();console.log("Fetching user feedback from Supabase...");const{data:t,error:n}=await e.from("user_feedback").select("*").order("created_at",{ascending:!1});if(n)throw console.error("Supabase error:",n),new Error(`Failed to fetch user feedback: ${n.message}`);return console.log(`✅ Fetched ${(t==null?void 0:t.length)||0} user feedback records`),t||[]}catch(e){throw console.error("Failed to fetch user feedback:",e),e}}async function $U(e,t){try{const n=Ie(),{data:r,error:i}=await n.from("user_feedback").select("*").gte("created_at",e).lte("created_at",t).order("created_at",{ascending:!1});if(i)throw console.error("Supabase error:",i),new Error(`Failed to fetch user feedback: ${i.message}`);return r||[]}catch(n){throw console.error("Failed to fetch user feedback by date range:",n),n}}async function FU(e){try{const t=Ie(),{data:n,error:r}=await t.from("admin_feedback").select("*").eq("chat_id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return n}catch(t){throw console.error("Error fetching admin feedback:",t),t}}async function Bx(e,t,n,r){try{const i=Ie();console.log("Submitting user feedback:",{chatId:e,userId:t,reaction:n,feedbackText:r});const a={chat_id:e,user_id:t,reaction:n,feedback_text:r||null},{data:o,error:s}=await i.from("user_feedback").insert([a]).select().single();if(s)throw console.error("Supabase error:",s),new Error(`Failed to submit user feedback: ${s.message}`);return console.log("✅ User feedback submitted:",o),o}catch(i){throw console.error("Failed to submit user feedback:",i),i}}async function Vd(e){try{const t=Ie(),{data:n,error:r}=await t.from("admin_feedback").select("*").eq("chat_id",e).maybeSingle();if(r)throw console.error("Error fetching admin feedback:",r),r;return n}catch(t){return console.error("Error fetching admin feedback by chat:",t),null}}async function IN(e,t,n,r){try{const i=Ie();console.log("Submitting admin feedback:",{chatId:e,verdict:t,feedbackText:n,correctedResponse:r});const a=await Vd(e);let o,s;if(a){const l={feedback_verdict:t,feedback_text:n||null,corrected_response:r||null,updated_at:new Date().toISOString()},c=await i.from("admin_feedback").update(l).eq("chat_id",e).select().maybeSingle();o=c.data,s=c.error}else{const l={chat_id:e,feedback_verdict:t,feedback_text:n||null,corrected_response:r||null},c=await i.from("admin_feedback").insert([l]).select().maybeSingle();o=c.data,s=c.error}if(s)throw console.error("Supabase error:",s),new Error(`Failed to submit admin feedback: ${s.message}`);return console.log("✅ Admin feedback submitted:",o),o}catch(i){throw console.error("Failed to submit admin feedback:",i),i}}async function UU(e,t,n,r){try{const i=Ie();console.log("Updating admin feedback:",{id:e,verdict:t,feedbackText:n,correctedResponse:r});const a={feedback_verdict:t,feedback_text:n||null,corrected_response:r||null,updated_at:new Date().toISOString()},{data:o,error:s}=await i.from("admin_feedback").update(a).eq("id",e).select().single();if(s)throw console.error("Supabase error:",s),new Error(`Failed to update admin feedback: ${s.message}`);return console.log("✅ Admin feedback updated:",o),o}catch(i){throw console.error("Failed to update admin feedback:",i),i}}async function zU(e,t){try{const n=Ie();console.log("Updating admin feedback field:",{id:e,updates:t});const{data:r,error:i}=await n.from("admin_feedback").update(t).eq("id",e).select().single();if(i)throw console.error("Supabase error:",i),new Error(`Failed to update admin feedback: ${i.message}`);return console.log("✅ Admin feedback field updated:",r),r}catch(n){throw console.error("Failed to update admin feedback field:",n),n}}async function DN(e){try{const t=Ie();console.log("Deleting admin feedback:",{id:e});const{error:n}=await t.from("admin_feedback").delete().eq("id",e);if(n)throw console.error("Supabase error:",n),new Error(`Failed to delete admin feedback: ${n.message}`);console.log("✅ Admin feedback deleted:",e)}catch(t){throw console.error("Failed to delete admin feedback:",t),t}}async function RN(e){try{const t=Ie();console.log("Deleting user feedback:",{id:e});const{error:n}=await t.from("user_feedback").delete().eq("id",e);if(n)throw console.error("Supabase error:",n),new Error(`Failed to delete user feedback: ${n.message}`);console.log("✅ User feedback deleted:",e)}catch(t){throw console.error("Failed to delete user feedback:",t),t}}const BU=Object.freeze(Object.defineProperty({__proto__:null,deleteAdminFeedback:DN,deleteUserFeedback:RN,fetchAllAdminFeedback:zx,fetchAllUserFeedback:Ja,fetchUserFeedbackByDateRange:$U,getAdminFeedback:FU,getAdminFeedbackByChat:Vd,submitAdminFeedback:IN,submitUserFeedback:Bx,updateAdminFeedback:UU,updateAdminFeedbackField:zU},Symbol.toStringTag,{value:"Module"})),WU=e=>{const[t,n]=v.useState([]),[r,i]=v.useState(!0),[a,o]=v.useState(!1),[s,l]=v.useState(null),c=v.useCallback(async()=>{try{if(i(!0),l(null),await ei()){const p=await ak.getMessages(e);n(p)}else{const p=JSON.parse(localStorage.getItem(`axpro_sim_messages_${e}`)||"[]");console.log("Loading local messages for session:",e,p),n(p)}}catch(m){l(m instanceof Error?m.message:"Failed to fetch messages")}finally{i(!1)}},[e]);v.useEffect(()=>{c()},[c]);const d=m=>{const p=m.split(`
`)[0];return(p.length>50?p.substring(0,50)+"...":p)||"New Chat"},f=v.useCallback(async m=>{if(!m.trim())return;console.log("=== SEND MESSAGE START ==="),console.log("Session ID:",e),console.log("Content:",m),o(!0),l(null);const p={id:`user-${Date.now()}`,sessionId:e,role:"user",content:m,meta:{},createdAt:new Date().toISOString()};n(w=>(console.log("Adding user message:",p),[...w,p]));const g=`assistant-${Date.now()}`;n(w=>{const j={id:g,sessionId:e,role:"assistant",content:"",createdAt:new Date().toISOString(),meta:{isStreaming:!0}};return console.log("Created new assistant message:",j),[...w,j]});let y="",x,b=[];try{console.log("Calling chatService.sendMessage...");const w=await ak.sendMessage(e,m,S=>{console.log("=== STREAM EVENT ==="),console.log("Event type:",S.type),console.log("Event text:",S.text),console.log("Event messageId:",S.messageId),console.log("==================="),S.type==="delta"&&S.text?(y+=S.text,n(k=>k.map(_=>{if(_.id===g){const N=(_.content||"")+S.text;return console.log("Updated assistant message content:",N),{..._,content:N}}return _}))):S.type==="final"&&(x=S.messageId,b=S.citations,console.log("Final event received - messageId:",S.messageId,"citations:",S.citations))});if(console.log("Chat service result:",w),n(S=>S.map(k=>{if(k.id===g){const N={...k,id:x||g,content:y||"No response received",citations:b,meta:{isStreaming:!1}};return console.log("Final assistant message:",N),N}return k})),!await ei()){const S=[...t.filter(N=>!N.id.startsWith("temp-")),p,{id:x||g,sessionId:e,role:"assistant",content:y||"No response received",meta:{isStreaming:!1},createdAt:new Date().toISOString(),citations:b}];console.log("Saving to localStorage:",S),localStorage.setItem(`axpro_sim_messages_${e}`,JSON.stringify(S));const k=JSON.parse(localStorage.getItem("axpro_sim_sessions")||"[]"),_=k.find(N=>N.id===e);if(_&&_.title==="New Chat"&&t.length===0){const N=d(m);_.title=N,_.updatedAt=new Date().toISOString(),localStorage.setItem("axpro_sim_sessions",JSON.stringify(k)),console.log("Auto-generated title:",N),window.dispatchEvent(new Event("sessionUpdated"))}}}catch(w){console.error("Error in sendMessage:",w),l(w instanceof Error?w.message:"Failed to send message"),n(S=>S.filter(k=>k.id!==g));const j={id:`error-${Date.now()}`,sessionId:e,role:"assistant",content:w instanceof Error?w.message:"Failed to send message",meta:{},createdAt:new Date().toISOString()};n(S=>[...S,j])}finally{o(!1),console.log("=== SEND MESSAGE END ===")}},[e,t]),h=v.useCallback(async(m,p,g)=>{try{const y=yt();if(!y||!y.userId)throw console.error("No user session found"),new Error("Please log in to submit feedback");if(!t.find(j=>j.id===m))throw console.error("Message not found:",m),new Error("Message not found");const b=m,w=p===1?"good":"bad";console.log("Submitting feedback:",{chatId:b,userId:y.userId,reaction:w,feedbackText:g}),await Bx(b,y.userId,w,g),console.log("✅ Feedback submitted successfully")}catch(y){throw console.error("Failed to submit feedback:",y),y}},[t]);return{messages:t,loading:r,sending:a,error:s,sendMessage:f,submitFeedback:h}};function qU(e,t){const n=t||{};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const HU=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,KU=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,VU={};function sk(e,t){return((t||VU).jsx?KU:HU).test(e)}const GU=/[ \t\n\f\r]/g;function YU(e){return typeof e=="object"?e.type==="text"?lk(e.value):!1:lk(e)}function lk(e){return e.replace(GU,"")===""}class Pc{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Pc.prototype.normal={};Pc.prototype.property={};Pc.prototype.space=void 0;function MN(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new Pc(n,r,t)}function gy(e){return e.toLowerCase()}class yn{constructor(t,n){this.attribute=n,this.property=t}}yn.prototype.attribute="";yn.prototype.booleanish=!1;yn.prototype.boolean=!1;yn.prototype.commaOrSpaceSeparated=!1;yn.prototype.commaSeparated=!1;yn.prototype.defined=!1;yn.prototype.mustUseProperty=!1;yn.prototype.number=!1;yn.prototype.overloadedBoolean=!1;yn.prototype.property="";yn.prototype.spaceSeparated=!1;yn.prototype.space=void 0;let JU=0;const xe=so(),ot=so(),yy=so(),te=so(),ze=so(),Go=so(),wn=so();function so(){return 2**++JU}const vy=Object.freeze(Object.defineProperty({__proto__:null,boolean:xe,booleanish:ot,commaOrSpaceSeparated:wn,commaSeparated:Go,number:te,overloadedBoolean:yy,spaceSeparated:ze},Symbol.toStringTag,{value:"Module"})),up=Object.keys(vy);class Wx extends yn{constructor(t,n,r,i){let a=-1;if(super(t,n),ck(this,"space",i),typeof r=="number")for(;++a<up.length;){const o=up[a];ck(this,up[a],(r&vy[o])===vy[o])}}}Wx.prototype.defined=!0;function ck(e,t,n){n&&(e[t]=n)}function Ps(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const a=new Wx(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[gy(r)]=r,n[gy(a.attribute)]=r}return new Pc(t,n,e.space)}const LN=Ps({properties:{ariaActiveDescendant:null,ariaAtomic:ot,ariaAutoComplete:null,ariaBusy:ot,ariaChecked:ot,ariaColCount:te,ariaColIndex:te,ariaColSpan:te,ariaControls:ze,ariaCurrent:null,ariaDescribedBy:ze,ariaDetails:null,ariaDisabled:ot,ariaDropEffect:ze,ariaErrorMessage:null,ariaExpanded:ot,ariaFlowTo:ze,ariaGrabbed:ot,ariaHasPopup:null,ariaHidden:ot,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ze,ariaLevel:te,ariaLive:null,ariaModal:ot,ariaMultiLine:ot,ariaMultiSelectable:ot,ariaOrientation:null,ariaOwns:ze,ariaPlaceholder:null,ariaPosInSet:te,ariaPressed:ot,ariaReadOnly:ot,ariaRelevant:null,ariaRequired:ot,ariaRoleDescription:ze,ariaRowCount:te,ariaRowIndex:te,ariaRowSpan:te,ariaSelected:ot,ariaSetSize:te,ariaSort:null,ariaValueMax:te,ariaValueMin:te,ariaValueNow:te,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function $N(e,t){return t in e?e[t]:t}function FN(e,t){return $N(e,t.toLowerCase())}const XU=Ps({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Go,acceptCharset:ze,accessKey:ze,action:null,allow:null,allowFullScreen:xe,allowPaymentRequest:xe,allowUserMedia:xe,alt:null,as:null,async:xe,autoCapitalize:null,autoComplete:ze,autoFocus:xe,autoPlay:xe,blocking:ze,capture:null,charSet:null,checked:xe,cite:null,className:ze,cols:te,colSpan:null,content:null,contentEditable:ot,controls:xe,controlsList:ze,coords:te|Go,crossOrigin:null,data:null,dateTime:null,decoding:null,default:xe,defer:xe,dir:null,dirName:null,disabled:xe,download:yy,draggable:ot,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:xe,formTarget:null,headers:ze,height:te,hidden:yy,high:te,href:null,hrefLang:null,htmlFor:ze,httpEquiv:ze,id:null,imageSizes:null,imageSrcSet:null,inert:xe,inputMode:null,integrity:null,is:null,isMap:xe,itemId:null,itemProp:ze,itemRef:ze,itemScope:xe,itemType:ze,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:xe,low:te,manifest:null,max:null,maxLength:te,media:null,method:null,min:null,minLength:te,multiple:xe,muted:xe,name:null,nonce:null,noModule:xe,noValidate:xe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:xe,optimum:te,pattern:null,ping:ze,placeholder:null,playsInline:xe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:xe,referrerPolicy:null,rel:ze,required:xe,reversed:xe,rows:te,rowSpan:te,sandbox:ze,scope:null,scoped:xe,seamless:xe,selected:xe,shadowRootClonable:xe,shadowRootDelegatesFocus:xe,shadowRootMode:null,shape:null,size:te,sizes:null,slot:null,span:te,spellCheck:ot,src:null,srcDoc:null,srcLang:null,srcSet:null,start:te,step:null,style:null,tabIndex:te,target:null,title:null,translate:null,type:null,typeMustMatch:xe,useMap:null,value:ot,width:te,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ze,axis:null,background:null,bgColor:null,border:te,borderColor:null,bottomMargin:te,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:xe,declare:xe,event:null,face:null,frame:null,frameBorder:null,hSpace:te,leftMargin:te,link:null,longDesc:null,lowSrc:null,marginHeight:te,marginWidth:te,noResize:xe,noHref:xe,noShade:xe,noWrap:xe,object:null,profile:null,prompt:null,rev:null,rightMargin:te,rules:null,scheme:null,scrolling:ot,standby:null,summary:null,text:null,topMargin:te,valueType:null,version:null,vAlign:null,vLink:null,vSpace:te,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:xe,disableRemotePlayback:xe,prefix:null,property:null,results:te,security:null,unselectable:null},space:"html",transform:FN}),QU=Ps({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:wn,accentHeight:te,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:te,amplitude:te,arabicForm:null,ascent:te,attributeName:null,attributeType:null,azimuth:te,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:te,by:null,calcMode:null,capHeight:te,className:ze,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:te,diffuseConstant:te,direction:null,display:null,dur:null,divisor:te,dominantBaseline:null,download:xe,dx:null,dy:null,edgeMode:null,editable:null,elevation:te,enableBackground:null,end:null,event:null,exponent:te,externalResourcesRequired:null,fill:null,fillOpacity:te,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Go,g2:Go,glyphName:Go,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:te,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:te,horizOriginX:te,horizOriginY:te,id:null,ideographic:te,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:te,k:te,k1:te,k2:te,k3:te,k4:te,kernelMatrix:wn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:te,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:te,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:te,overlineThickness:te,paintOrder:null,panose1:null,path:null,pathLength:te,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ze,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:te,pointsAtY:te,pointsAtZ:te,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:wn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:wn,rev:wn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:wn,requiredFeatures:wn,requiredFonts:wn,requiredFormats:wn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:te,specularExponent:te,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:te,strikethroughThickness:te,string:null,stroke:null,strokeDashArray:wn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:te,strokeOpacity:te,strokeWidth:null,style:null,surfaceScale:te,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:wn,tabIndex:te,tableValues:null,target:null,targetX:te,targetY:te,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:wn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:te,underlineThickness:te,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:te,values:null,vAlphabetic:te,vMathematical:te,vectorEffect:null,vHanging:te,vIdeographic:te,version:null,vertAdvY:te,vertOriginX:te,vertOriginY:te,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:te,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:$N}),UN=Ps({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),zN=Ps({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:FN}),BN=Ps({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),ZU={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},e5=/[A-Z]/g,uk=/-[a-z]/g,t5=/^data[-\w.:]+$/i;function n5(e,t){const n=gy(t);let r=t,i=yn;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&t5.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(uk,i5);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!uk.test(a)){let o=a.replace(e5,r5);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=Wx}return new i(r,t)}function r5(e){return"-"+e.toLowerCase()}function i5(e){return e.charAt(1).toUpperCase()}const a5=MN([LN,XU,UN,zN,BN],"html"),qx=MN([LN,QU,UN,zN,BN],"svg");function o5(e){return e.join(" ").trim()}var Hx={},dk=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,s5=/\n/g,l5=/^\s*/,c5=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,u5=/^:\s*/,d5=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,f5=/^[;\s]*/,h5=/^\s+|\s+$/g,m5=`
`,fk="/",hk="*",Pa="",p5="comment",g5="declaration",y5=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var g=p.match(s5);g&&(n+=g.length);var y=p.lastIndexOf(m5);r=~y?p.length-y:r+p.length}function a(){var p={line:n,column:r};return function(g){return g.position=new o(p),c(),g}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function s(p){var g=new Error(t.source+":"+n+":"+r+": "+p);if(g.reason=p,g.filename=t.source,g.line=n,g.column=r,g.source=e,!t.silent)throw g}function l(p){var g=p.exec(e);if(g){var y=g[0];return i(y),e=e.slice(y.length),g}}function c(){l(l5)}function d(p){var g;for(p=p||[];g=f();)g!==!1&&p.push(g);return p}function f(){var p=a();if(!(fk!=e.charAt(0)||hk!=e.charAt(1))){for(var g=2;Pa!=e.charAt(g)&&(hk!=e.charAt(g)||fk!=e.charAt(g+1));)++g;if(g+=2,Pa===e.charAt(g-1))return s("End of comment missing");var y=e.slice(2,g-2);return r+=2,i(y),e=e.slice(g),r+=2,p({type:p5,comment:y})}}function h(){var p=a(),g=l(c5);if(g){if(f(),!l(u5))return s("property missing ':'");var y=l(d5),x=p({type:g5,property:mk(g[0].replace(dk,Pa)),value:y?mk(y[0].replace(dk,Pa)):Pa});return l(f5),x}}function m(){var p=[];d(p);for(var g;g=h();)g!==!1&&(p.push(g),d(p));return p}return c(),m()};function mk(e){return e?e.replace(h5,Pa):Pa}var v5=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hx,"__esModule",{value:!0});Hx.default=b5;var x5=v5(y5);function b5(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,x5.default)(e),i=typeof t=="function";return r.forEach(function(a){if(a.type==="declaration"){var o=a.property,s=a.value;i?t(o,s,a):s&&(n=n||{},n[o]=s)}}),n}var hh={};Object.defineProperty(hh,"__esModule",{value:!0});hh.camelCase=void 0;var w5=/^--[a-zA-Z0-9_-]+$/,k5=/-([a-z])/g,S5=/^[^-]+$/,j5=/^-(webkit|moz|ms|o|khtml)-/,C5=/^-(ms)-/,_5=function(e){return!e||S5.test(e)||w5.test(e)},E5=function(e,t){return t.toUpperCase()},pk=function(e,t){return"".concat(t,"-")},N5=function(e,t){return t===void 0&&(t={}),_5(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(C5,pk):e=e.replace(j5,pk),e.replace(k5,E5))};hh.camelCase=N5;var P5=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},O5=P5(Hx),A5=hh;function xy(e,t){var n={};return!e||typeof e!="string"||(0,O5.default)(e,function(r,i){r&&i&&(n[(0,A5.camelCase)(r,t)]=i)}),n}xy.default=xy;var T5=xy;const I5=Ln(T5),WN=qN("end"),Kx=qN("start");function qN(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function D5(e){const t=Kx(e),n=WN(e);if(t&&n)return{start:t,end:n}}function Il(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?gk(e.position):"start"in e||"end"in e?gk(e):"line"in e||"column"in e?by(e):""}function by(e){return yk(e&&e.line)+":"+yk(e&&e.column)}function gk(e){return by(e&&e.start)+"-"+by(e&&e.end)}function yk(e){return e&&typeof e=="number"?e:1}class qt extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",a={},o=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof t=="string"?i=t:!a.cause&&t&&(o=!0,i=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?a.ruleId=r:(a.source=r.slice(0,l),a.ruleId=r.slice(l+1))}if(!a.place&&a.ancestors&&a.ancestors){const l=a.ancestors[a.ancestors.length-1];l&&(a.place=l.position)}const s=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=s?s.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=s?s.line:void 0,this.name=Il(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}qt.prototype.file="";qt.prototype.name="";qt.prototype.reason="";qt.prototype.message="";qt.prototype.stack="";qt.prototype.column=void 0;qt.prototype.line=void 0;qt.prototype.ancestors=void 0;qt.prototype.cause=void 0;qt.prototype.fatal=void 0;qt.prototype.place=void 0;qt.prototype.ruleId=void 0;qt.prototype.source=void 0;const Vx={}.hasOwnProperty,R5=new Map,M5=/[A-Z]/g,L5=new Set(["table","tbody","thead","tfoot","tr"]),$5=new Set(["td","th"]),HN="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function F5(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=V5(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=K5(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?qx:a5,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=KN(i,e,void 0);return a&&typeof a!="string"?a:i.create(e,i.Fragment,{children:a||void 0},void 0)}function KN(e,t,n){if(t.type==="element")return U5(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return z5(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return W5(e,t,n);if(t.type==="mdxjsEsm")return B5(e,t);if(t.type==="root")return q5(e,t,n);if(t.type==="text")return H5(e,t)}function U5(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=qx,e.schema=i),e.ancestors.push(t);const a=GN(e,t.tagName,!1),o=G5(e,t);let s=Yx(e,t);return L5.has(t.tagName)&&(s=s.filter(function(l){return typeof l=="string"?!YU(l):!0})),VN(e,o,a,t),Gx(o,s),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function z5(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}sc(e,t.position)}function B5(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);sc(e,t.position)}function W5(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=qx,e.schema=i),e.ancestors.push(t);const a=t.name===null?e.Fragment:GN(e,t.name,!0),o=Y5(e,t),s=Yx(e,t);return VN(e,o,a,t),Gx(o,s),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function q5(e,t,n){const r={};return Gx(r,Yx(e,t)),e.create(t,e.Fragment,r,n)}function H5(e,t){return t.value}function VN(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Gx(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function K5(e,t,n){return r;function r(i,a,o,s){const c=Array.isArray(o.children)?n:t;return s?c(a,o,s):c(a,o)}}function V5(e,t){return n;function n(r,i,a,o){const s=Array.isArray(a.children),l=Kx(r);return t(i,a,o,s,{columnNumber:l?l.column-1:void 0,fileName:e,lineNumber:l?l.line:void 0},void 0)}}function G5(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&Vx.call(t.properties,i)){const a=J5(e,i,t.properties[i]);if(a){const[o,s]=a;e.tableCellAlignToStyle&&o==="align"&&typeof s=="string"&&$5.has(t.tagName)?r=s:n[o]=s}}if(r){const a=n.style||(n.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Y5(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const a=r.data.estree.body[0];a.type;const o=a.expression;o.type;const s=o.properties[0];s.type,Object.assign(n,e.evaluater.evaluateExpression(s.argument))}else sc(e,t.position);else{const i=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const s=r.value.data.estree.body[0];s.type,a=e.evaluater.evaluateExpression(s.expression)}else sc(e,t.position);else a=r.value===null?!0:r.value;n[i]=a}return n}function Yx(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:R5;for(;++r<t.children.length;){const a=t.children[r];let o;if(e.passKeys){const l=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const s=KN(e,a,o);s!==void 0&&n.push(s)}return n}function J5(e,t,n){const r=n5(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?qU(n):o5(n)),r.property==="style"){let i=typeof n=="object"?n:X5(e,String(n));return e.stylePropertyNameCase==="css"&&(i=Q5(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?ZU[r.property]||r.property:r.attribute,n]}}function X5(e,t){try{return I5(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new qt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=HN+"#cannot-parse-style-attribute",i}}function GN(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let a=-1,o;for(;++a<i.length;){const s=sk(i[a])?{type:"Identifier",name:i[a]}:{type:"Literal",value:i[a]};o=o?{type:"MemberExpression",object:o,property:s,computed:!!(a&&s.type==="Literal"),optional:!1}:s}r=o}else r=sk(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return Vx.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);sc(e)}function sc(e,t){const n=new qt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=HN+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Q5(e){const t={};let n;for(n in e)Vx.call(e,n)&&(t[Z5(n)]=e[n]);return t}function Z5(e){let t=e.replace(M5,ez);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function ez(e){return"-"+e.toLowerCase()}const dp={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},tz={};function Jx(e,t){const n=t||tz,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return YN(e,r,i)}function YN(e,t,n){if(nz(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return vk(e.children,t,n)}return Array.isArray(e)?vk(e,t,n):""}function vk(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=YN(e[i],t,n);return r.join("")}function nz(e){return!!(e&&typeof e=="object")}const xk=document.createElement("i");function Xx(e){const t="&"+e+";";xk.innerHTML=t;const n=xk.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function An(e,t,n,r){const i=e.length;let a=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);a<r.length;)o=r.slice(a,a+1e4),o.unshift(t,0),e.splice(...o),a+=1e4,t+=1e4}function Yn(e,t){return e.length>0?(An(e,e.length,0,t),e):t}const bk={}.hasOwnProperty;function JN(e){const t={};let n=-1;for(;++n<e.length;)rz(t,e[n]);return t}function rz(e,t){let n;for(n in t){const i=(bk.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let o;if(a)for(o in a){bk.call(i,o)||(i[o]=[]);const s=a[o];iz(i[o],Array.isArray(s)?s:s?[s]:[])}}}function iz(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);An(e,0,0,r)}function XN(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function yr(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Gt=ca(/[A-Za-z]/),Ut=ca(/[\dA-Za-z]/),az=ca(/[#-'*+\--9=?A-Z^-~]/);function Gd(e){return e!==null&&(e<32||e===127)}const wy=ca(/\d/),oz=ca(/[\dA-Fa-f]/),sz=ca(/[!-/:-@[-`{-~]/);function fe(e){return e!==null&&e<-2}function Le(e){return e!==null&&(e<0||e===32)}function be(e){return e===-2||e===-1||e===32}const mh=ca(/\p{P}|\p{S}/u),Xa=ca(/\s/);function ca(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Os(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const a=e.charCodeAt(n);let o="";if(a===37&&Ut(e.charCodeAt(n+1))&&Ut(e.charCodeAt(n+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const s=e.charCodeAt(n+1);a<56320&&s>56319&&s<57344?(o=String.fromCharCode(a,s),i=1):o="�"}else o=String.fromCharCode(a);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Ce(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(l){return be(l)?(e.enter(n),s(l)):t(l)}function s(l){return be(l)&&a++<i?(e.consume(l),s):(e.exit(n),t(l))}}const lz={tokenize:cz};function cz(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),Ce(e,t,"linePrefix")}function i(s){return e.enter("paragraph"),a(s)}function a(s){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(s)}function o(s){if(s===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(s);return}return fe(s)?(e.consume(s),e.exit("chunkText"),a):(e.consume(s),o)}}const uz={tokenize:dz},wk={tokenize:fz};function dz(e){const t=this,n=[];let r=0,i,a,o;return s;function s(w){if(r<n.length){const j=n[r];return t.containerState=j[1],e.attempt(j[0].continuation,l,c)(w)}return c(w)}function l(w){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&b();const j=t.events.length;let S=j,k;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){k=t.events[S][1].end;break}x(r);let _=j;for(;_<t.events.length;)t.events[_][1].end={...k},_++;return An(t.events,S+1,0,t.events.slice(j)),t.events.length=_,c(w)}return s(w)}function c(w){if(r===n.length){if(!i)return h(w);if(i.currentConstruct&&i.currentConstruct.concrete)return p(w);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(wk,d,f)(w)}function d(w){return i&&b(),x(r),h(w)}function f(w){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(w)}function h(w){return t.containerState={},e.attempt(wk,m,p)(w)}function m(w){return r++,n.push([t.currentConstruct,t.containerState]),h(w)}function p(w){if(w===null){i&&b(),x(0),e.consume(w);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),g(w)}function g(w){if(w===null){y(e.exit("chunkFlow"),!0),x(0),e.consume(w);return}return fe(w)?(e.consume(w),y(e.exit("chunkFlow")),r=0,t.interrupt=void 0,s):(e.consume(w),g)}function y(w,j){const S=t.sliceStream(w);if(j&&S.push(null),w.previous=a,a&&(a.next=w),a=w,i.defineSkip(w.start),i.write(S),t.parser.lazy[w.start.line]){let k=i.events.length;for(;k--;)if(i.events[k][1].start.offset<o&&(!i.events[k][1].end||i.events[k][1].end.offset>o))return;const _=t.events.length;let N=_,P,E;for(;N--;)if(t.events[N][0]==="exit"&&t.events[N][1].type==="chunkFlow"){if(P){E=t.events[N][1].end;break}P=!0}for(x(r),k=_;k<t.events.length;)t.events[k][1].end={...E},k++;An(t.events,N+1,0,t.events.slice(_)),t.events.length=k}}function x(w){let j=n.length;for(;j-- >w;){const S=n[j];t.containerState=S[1],S[0].exit.call(t,e)}n.length=w}function b(){i.write([null]),a=void 0,i=void 0,t.containerState._closeFlow=void 0}}function fz(e,t,n){return Ce(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function os(e){if(e===null||Le(e)||Xa(e))return 1;if(mh(e))return 2}function ph(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const a=e[i].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const ky={name:"attention",resolveAll:hz,tokenize:mz};function hz(e,t){let n=-1,r,i,a,o,s,l,c,d;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f={...e[r][1].end},h={...e[n][1].start};kk(f,-l),kk(h,l),o={type:l>1?"strongSequence":"emphasisSequence",start:f,end:{...e[r][1].end}},s={type:l>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:h},a={type:l>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...s.end}},e[r][1].end={...o.start},e[n][1].start={...s.end},c=[],e[r][1].end.offset-e[r][1].start.offset&&(c=Yn(c,[["enter",e[r][1],t],["exit",e[r][1],t]])),c=Yn(c,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",a,t]]),c=Yn(c,ph(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),c=Yn(c,[["exit",a,t],["enter",s,t],["exit",s,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(d=2,c=Yn(c,[["enter",e[n][1],t],["exit",e[n][1],t]])):d=0,An(e,r-1,n-r+3,c),n=r+c.length-d-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function mz(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=os(r);let a;return o;function o(l){return a=l,e.enter("attentionSequence"),s(l)}function s(l){if(l===a)return e.consume(l),s;const c=e.exit("attentionSequence"),d=os(l),f=!d||d===2&&i||n.includes(l),h=!i||i===2&&d||n.includes(r);return c._open=!!(a===42?f:f&&(i||!h)),c._close=!!(a===42?h:h&&(d||!f)),t(l)}}function kk(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const pz={name:"autolink",tokenize:gz};function gz(e,t,n){let r=0;return i;function i(m){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(m){return Gt(m)?(e.consume(m),o):m===64?n(m):c(m)}function o(m){return m===43||m===45||m===46||Ut(m)?(r=1,s(m)):c(m)}function s(m){return m===58?(e.consume(m),r=0,l):(m===43||m===45||m===46||Ut(m))&&r++<32?(e.consume(m),s):(r=0,c(m))}function l(m){return m===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):m===null||m===32||m===60||Gd(m)?n(m):(e.consume(m),l)}function c(m){return m===64?(e.consume(m),d):az(m)?(e.consume(m),c):n(m)}function d(m){return Ut(m)?f(m):n(m)}function f(m){return m===46?(e.consume(m),r=0,d):m===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):h(m)}function h(m){if((m===45||Ut(m))&&r++<63){const p=m===45?h:f;return e.consume(m),p}return n(m)}}const Oc={partial:!0,tokenize:yz};function yz(e,t,n){return r;function r(a){return be(a)?Ce(e,i,"linePrefix")(a):i(a)}function i(a){return a===null||fe(a)?t(a):n(a)}}const QN={continuation:{tokenize:xz},exit:bz,name:"blockQuote",tokenize:vz};function vz(e,t,n){const r=this;return i;function i(o){if(o===62){const s=r.containerState;return s.open||(e.enter("blockQuote",{_container:!0}),s.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),a}return n(o)}function a(o){return be(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function xz(e,t,n){const r=this;return i;function i(o){return be(o)?Ce(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return e.attempt(QN,t,n)(o)}}function bz(e){e.exit("blockQuote")}const ZN={name:"characterEscape",tokenize:wz};function wz(e,t,n){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),i}function i(a){return sz(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const eP={name:"characterReference",tokenize:kz};function kz(e,t,n){const r=this;let i=0,a,o;return s;function s(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),l}function l(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),a=31,o=Ut,d(f))}function c(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,o=oz,d):(e.enter("characterReferenceValue"),a=7,o=wy,d(f))}function d(f){if(f===59&&i){const h=e.exit("characterReferenceValue");return o===Ut&&!Xx(r.sliceSerialize(h))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<a?(e.consume(f),d):n(f)}}const Sk={partial:!0,tokenize:jz},jk={concrete:!0,name:"codeFenced",tokenize:Sz};function Sz(e,t,n){const r=this,i={partial:!0,tokenize:S};let a=0,o=0,s;return l;function l(k){return c(k)}function c(k){const _=r.events[r.events.length-1];return a=_&&_[1].type==="linePrefix"?_[2].sliceSerialize(_[1],!0).length:0,s=k,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(k)}function d(k){return k===s?(o++,e.consume(k),d):o<3?n(k):(e.exit("codeFencedFenceSequence"),be(k)?Ce(e,f,"whitespace")(k):f(k))}function f(k){return k===null||fe(k)?(e.exit("codeFencedFence"),r.interrupt?t(k):e.check(Sk,g,j)(k)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(k))}function h(k){return k===null||fe(k)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(k)):be(k)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ce(e,m,"whitespace")(k)):k===96&&k===s?n(k):(e.consume(k),h)}function m(k){return k===null||fe(k)?f(k):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(k))}function p(k){return k===null||fe(k)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(k)):k===96&&k===s?n(k):(e.consume(k),p)}function g(k){return e.attempt(i,j,y)(k)}function y(k){return e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),x}function x(k){return a>0&&be(k)?Ce(e,b,"linePrefix",a+1)(k):b(k)}function b(k){return k===null||fe(k)?e.check(Sk,g,j)(k):(e.enter("codeFlowValue"),w(k))}function w(k){return k===null||fe(k)?(e.exit("codeFlowValue"),b(k)):(e.consume(k),w)}function j(k){return e.exit("codeFenced"),t(k)}function S(k,_,N){let P=0;return E;function E(D){return k.enter("lineEnding"),k.consume(D),k.exit("lineEnding"),T}function T(D){return k.enter("codeFencedFence"),be(D)?Ce(k,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):L(D)}function L(D){return D===s?(k.enter("codeFencedFenceSequence"),$(D)):N(D)}function $(D){return D===s?(P++,k.consume(D),$):P>=o?(k.exit("codeFencedFenceSequence"),be(D)?Ce(k,B,"whitespace")(D):B(D)):N(D)}function B(D){return D===null||fe(D)?(k.exit("codeFencedFence"),_(D)):N(D)}}}function jz(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const fp={name:"codeIndented",tokenize:_z},Cz={partial:!0,tokenize:Ez};function _z(e,t,n){const r=this;return i;function i(c){return e.enter("codeIndented"),Ce(e,a,"linePrefix",4+1)(c)}function a(c){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):fe(c)?e.attempt(Cz,o,l)(c):(e.enter("codeFlowValue"),s(c))}function s(c){return c===null||fe(c)?(e.exit("codeFlowValue"),o(c)):(e.consume(c),s)}function l(c){return e.exit("codeIndented"),t(c)}}function Ez(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):fe(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Ce(e,a,"linePrefix",4+1)(o)}function a(o){const s=r.events[r.events.length-1];return s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?t(o):fe(o)?i(o):n(o)}}const Nz={name:"codeText",previous:Oz,resolve:Pz,tokenize:Az};function Pz(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Oz(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Az(e,t,n){let r=0,i,a;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),s(f)}function s(f){return f===96?(e.consume(f),r++,s):(e.exit("codeTextSequence"),l(f))}function l(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),l):f===96?(a=e.enter("codeTextSequence"),i=0,d(f)):fe(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),l):(e.enter("codeTextData"),c(f))}function c(f){return f===null||f===32||f===96||fe(f)?(e.exit("codeTextData"),l(f)):(e.consume(f),c)}function d(f){return f===96?(e.consume(f),i++,d):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(a.type="codeTextData",c(f))}}class Tz{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&nl(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),nl(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),nl(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);nl(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);nl(this.left,n.reverse())}}}function nl(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function tP(e){const t={};let n=-1,r,i,a,o,s,l,c;const d=new Tz(e);for(;++n<d.length;){for(;n in t;)n=t[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,a=0,a<l.length&&l[a][1].type==="lineEndingBlank"&&(a+=2),a<l.length&&l[a][1].type==="content"))for(;++a<l.length&&l[a][1].type!=="content";)l[a][1].type==="chunkText"&&(l[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Iz(d,n)),n=t[n],c=!0);else if(r[1]._container){for(a=n,i=void 0;a--;)if(o=d.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(d.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...d.get(i)[1].start},s=d.slice(i,n),s.unshift(r),d.splice(i,n-i+1,s))}}return An(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!c}function Iz(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const a=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const s=o.events,l=[],c={};let d,f,h=-1,m=n,p=0,g=0;const y=[g];for(;m;){for(;e.get(++i)[1]!==m;);a.push(i),m._tokenizer||(d=r.sliceStream(m),m.next||d.push(null),f&&o.defineSkip(m.start),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=m,m=m.next}for(m=n;++h<s.length;)s[h][0]==="exit"&&s[h-1][0]==="enter"&&s[h][1].type===s[h-1][1].type&&s[h][1].start.line!==s[h][1].end.line&&(g=h+1,y.push(g),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(o.events=[],m?(m._tokenizer=void 0,m.previous=void 0):y.pop(),h=y.length;h--;){const x=s.slice(y[h],y[h+1]),b=a.pop();l.push([b,b+x.length-1]),e.splice(b,2,x)}for(l.reverse(),h=-1;++h<l.length;)c[p+l[h][0]]=p+l[h][1],p+=l[h][1]-l[h][0]-1;return c}const Dz={resolve:Mz,tokenize:Lz},Rz={partial:!0,tokenize:$z};function Mz(e){return tP(e),e}function Lz(e,t){let n;return r;function r(s){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(s)}function i(s){return s===null?a(s):fe(s)?e.check(Rz,o,a)(s):(e.consume(s),i)}function a(s){return e.exit("chunkContent"),e.exit("content"),t(s)}function o(s){return e.consume(s),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function $z(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Ce(e,a,"linePrefix")}function a(o){if(o===null||fe(o))return n(o);const s=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function nP(e,t,n,r,i,a,o,s,l){const c=l||Number.POSITIVE_INFINITY;let d=0;return f;function f(x){return x===60?(e.enter(r),e.enter(i),e.enter(a),e.consume(x),e.exit(a),h):x===null||x===32||x===41||Gd(x)?n(x):(e.enter(r),e.enter(o),e.enter(s),e.enter("chunkString",{contentType:"string"}),g(x))}function h(x){return x===62?(e.enter(a),e.consume(x),e.exit(a),e.exit(i),e.exit(r),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),m(x))}function m(x){return x===62?(e.exit("chunkString"),e.exit(s),h(x)):x===null||x===60||fe(x)?n(x):(e.consume(x),x===92?p:m)}function p(x){return x===60||x===62||x===92?(e.consume(x),m):m(x)}function g(x){return!d&&(x===null||x===41||Le(x))?(e.exit("chunkString"),e.exit(s),e.exit(o),e.exit(r),t(x)):d<c&&x===40?(e.consume(x),d++,g):x===41?(e.consume(x),d--,g):x===null||x===32||x===40||Gd(x)?n(x):(e.consume(x),x===92?y:g)}function y(x){return x===40||x===41||x===92?(e.consume(x),g):g(x)}}function rP(e,t,n,r,i,a){const o=this;let s=0,l;return c;function c(m){return e.enter(r),e.enter(i),e.consume(m),e.exit(i),e.enter(a),d}function d(m){return s>999||m===null||m===91||m===93&&!l||m===94&&!s&&"_hiddenFootnoteSupport"in o.parser.constructs?n(m):m===93?(e.exit(a),e.enter(i),e.consume(m),e.exit(i),e.exit(r),t):fe(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),f(m))}function f(m){return m===null||m===91||m===93||fe(m)||s++>999?(e.exit("chunkString"),d(m)):(e.consume(m),l||(l=!be(m)),m===92?h:f)}function h(m){return m===91||m===92||m===93?(e.consume(m),s++,f):f(m)}}function iP(e,t,n,r,i,a){let o;return s;function s(h){return h===34||h===39||h===40?(e.enter(r),e.enter(i),e.consume(h),e.exit(i),o=h===40?41:h,l):n(h)}function l(h){return h===o?(e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):(e.enter(a),c(h))}function c(h){return h===o?(e.exit(a),l(o)):h===null?n(h):fe(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),Ce(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===o||h===null||fe(h)?(e.exit("chunkString"),c(h)):(e.consume(h),h===92?f:d)}function f(h){return h===o||h===92?(e.consume(h),d):d(h)}}function Dl(e,t){let n;return r;function r(i){return fe(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):be(i)?Ce(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Fz={name:"definition",tokenize:zz},Uz={partial:!0,tokenize:Bz};function zz(e,t,n){const r=this;let i;return a;function a(m){return e.enter("definition"),o(m)}function o(m){return rP.call(r,e,s,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function s(m){return i=yr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),l):n(m)}function l(m){return Le(m)?Dl(e,c)(m):c(m)}function c(m){return nP(e,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function d(m){return e.attempt(Uz,f,f)(m)}function f(m){return be(m)?Ce(e,h,"whitespace")(m):h(m)}function h(m){return m===null||fe(m)?(e.exit("definition"),r.parser.defined.push(i),t(m)):n(m)}}function Bz(e,t,n){return r;function r(s){return Le(s)?Dl(e,i)(s):n(s)}function i(s){return iP(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(s)}function a(s){return be(s)?Ce(e,o,"whitespace")(s):o(s)}function o(s){return s===null||fe(s)?t(s):n(s)}}const Wz={name:"hardBreakEscape",tokenize:qz};function qz(e,t,n){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),i}function i(a){return fe(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const Hz={name:"headingAtx",resolve:Kz,tokenize:Vz};function Kz(e,t){let n=e.length-2,r=3,i,a;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},a={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},An(e,r,n-r+1,[["enter",i,t],["enter",a,t],["exit",a,t],["exit",i,t]])),e}function Vz(e,t,n){let r=0;return i;function i(d){return e.enter("atxHeading"),a(d)}function a(d){return e.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&r++<6?(e.consume(d),o):d===null||Le(d)?(e.exit("atxHeadingSequence"),s(d)):n(d)}function s(d){return d===35?(e.enter("atxHeadingSequence"),l(d)):d===null||fe(d)?(e.exit("atxHeading"),t(d)):be(d)?Ce(e,s,"whitespace")(d):(e.enter("atxHeadingText"),c(d))}function l(d){return d===35?(e.consume(d),l):(e.exit("atxHeadingSequence"),s(d))}function c(d){return d===null||d===35||Le(d)?(e.exit("atxHeadingText"),s(d)):(e.consume(d),c)}}const Gz=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Ck=["pre","script","style","textarea"],Yz={concrete:!0,name:"htmlFlow",resolveTo:Qz,tokenize:Zz},Jz={partial:!0,tokenize:tB},Xz={partial:!0,tokenize:eB};function Qz(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Zz(e,t,n){const r=this;let i,a,o,s,l;return c;function c(A){return d(A)}function d(A){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(A),f}function f(A){return A===33?(e.consume(A),h):A===47?(e.consume(A),a=!0,g):A===63?(e.consume(A),i=3,r.interrupt?t:C):Gt(A)?(e.consume(A),o=String.fromCharCode(A),y):n(A)}function h(A){return A===45?(e.consume(A),i=2,m):A===91?(e.consume(A),i=5,s=0,p):Gt(A)?(e.consume(A),i=4,r.interrupt?t:C):n(A)}function m(A){return A===45?(e.consume(A),r.interrupt?t:C):n(A)}function p(A){const le="CDATA[";return A===le.charCodeAt(s++)?(e.consume(A),s===le.length?r.interrupt?t:L:p):n(A)}function g(A){return Gt(A)?(e.consume(A),o=String.fromCharCode(A),y):n(A)}function y(A){if(A===null||A===47||A===62||Le(A)){const le=A===47,U=o.toLowerCase();return!le&&!a&&Ck.includes(U)?(i=1,r.interrupt?t(A):L(A)):Gz.includes(o.toLowerCase())?(i=6,le?(e.consume(A),x):r.interrupt?t(A):L(A)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(A):a?b(A):w(A))}return A===45||Ut(A)?(e.consume(A),o+=String.fromCharCode(A),y):n(A)}function x(A){return A===62?(e.consume(A),r.interrupt?t:L):n(A)}function b(A){return be(A)?(e.consume(A),b):E(A)}function w(A){return A===47?(e.consume(A),E):A===58||A===95||Gt(A)?(e.consume(A),j):be(A)?(e.consume(A),w):E(A)}function j(A){return A===45||A===46||A===58||A===95||Ut(A)?(e.consume(A),j):S(A)}function S(A){return A===61?(e.consume(A),k):be(A)?(e.consume(A),S):w(A)}function k(A){return A===null||A===60||A===61||A===62||A===96?n(A):A===34||A===39?(e.consume(A),l=A,_):be(A)?(e.consume(A),k):N(A)}function _(A){return A===l?(e.consume(A),l=null,P):A===null||fe(A)?n(A):(e.consume(A),_)}function N(A){return A===null||A===34||A===39||A===47||A===60||A===61||A===62||A===96||Le(A)?S(A):(e.consume(A),N)}function P(A){return A===47||A===62||be(A)?w(A):n(A)}function E(A){return A===62?(e.consume(A),T):n(A)}function T(A){return A===null||fe(A)?L(A):be(A)?(e.consume(A),T):n(A)}function L(A){return A===45&&i===2?(e.consume(A),z):A===60&&i===1?(e.consume(A),G):A===62&&i===4?(e.consume(A),Q):A===63&&i===3?(e.consume(A),C):A===93&&i===5?(e.consume(A),R):fe(A)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Jz,q,$)(A)):A===null||fe(A)?(e.exit("htmlFlowData"),$(A)):(e.consume(A),L)}function $(A){return e.check(Xz,B,q)(A)}function B(A){return e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),D}function D(A){return A===null||fe(A)?$(A):(e.enter("htmlFlowData"),L(A))}function z(A){return A===45?(e.consume(A),C):L(A)}function G(A){return A===47?(e.consume(A),o="",I):L(A)}function I(A){if(A===62){const le=o.toLowerCase();return Ck.includes(le)?(e.consume(A),Q):L(A)}return Gt(A)&&o.length<8?(e.consume(A),o+=String.fromCharCode(A),I):L(A)}function R(A){return A===93?(e.consume(A),C):L(A)}function C(A){return A===62?(e.consume(A),Q):A===45&&i===2?(e.consume(A),C):L(A)}function Q(A){return A===null||fe(A)?(e.exit("htmlFlowData"),q(A)):(e.consume(A),Q)}function q(A){return e.exit("htmlFlow"),t(A)}}function eB(e,t,n){const r=this;return i;function i(o){return fe(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):n(o)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function tB(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(Oc,t,n)}}const nB={name:"htmlText",tokenize:rB};function rB(e,t,n){const r=this;let i,a,o;return s;function s(C){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(C),l}function l(C){return C===33?(e.consume(C),c):C===47?(e.consume(C),S):C===63?(e.consume(C),w):Gt(C)?(e.consume(C),N):n(C)}function c(C){return C===45?(e.consume(C),d):C===91?(e.consume(C),a=0,p):Gt(C)?(e.consume(C),b):n(C)}function d(C){return C===45?(e.consume(C),m):n(C)}function f(C){return C===null?n(C):C===45?(e.consume(C),h):fe(C)?(o=f,G(C)):(e.consume(C),f)}function h(C){return C===45?(e.consume(C),m):f(C)}function m(C){return C===62?z(C):C===45?h(C):f(C)}function p(C){const Q="CDATA[";return C===Q.charCodeAt(a++)?(e.consume(C),a===Q.length?g:p):n(C)}function g(C){return C===null?n(C):C===93?(e.consume(C),y):fe(C)?(o=g,G(C)):(e.consume(C),g)}function y(C){return C===93?(e.consume(C),x):g(C)}function x(C){return C===62?z(C):C===93?(e.consume(C),x):g(C)}function b(C){return C===null||C===62?z(C):fe(C)?(o=b,G(C)):(e.consume(C),b)}function w(C){return C===null?n(C):C===63?(e.consume(C),j):fe(C)?(o=w,G(C)):(e.consume(C),w)}function j(C){return C===62?z(C):w(C)}function S(C){return Gt(C)?(e.consume(C),k):n(C)}function k(C){return C===45||Ut(C)?(e.consume(C),k):_(C)}function _(C){return fe(C)?(o=_,G(C)):be(C)?(e.consume(C),_):z(C)}function N(C){return C===45||Ut(C)?(e.consume(C),N):C===47||C===62||Le(C)?P(C):n(C)}function P(C){return C===47?(e.consume(C),z):C===58||C===95||Gt(C)?(e.consume(C),E):fe(C)?(o=P,G(C)):be(C)?(e.consume(C),P):z(C)}function E(C){return C===45||C===46||C===58||C===95||Ut(C)?(e.consume(C),E):T(C)}function T(C){return C===61?(e.consume(C),L):fe(C)?(o=T,G(C)):be(C)?(e.consume(C),T):P(C)}function L(C){return C===null||C===60||C===61||C===62||C===96?n(C):C===34||C===39?(e.consume(C),i=C,$):fe(C)?(o=L,G(C)):be(C)?(e.consume(C),L):(e.consume(C),B)}function $(C){return C===i?(e.consume(C),i=void 0,D):C===null?n(C):fe(C)?(o=$,G(C)):(e.consume(C),$)}function B(C){return C===null||C===34||C===39||C===60||C===61||C===96?n(C):C===47||C===62||Le(C)?P(C):(e.consume(C),B)}function D(C){return C===47||C===62||Le(C)?P(C):n(C)}function z(C){return C===62?(e.consume(C),e.exit("htmlTextData"),e.exit("htmlText"),t):n(C)}function G(C){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),I}function I(C){return be(C)?Ce(e,R,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(C):R(C)}function R(C){return e.enter("htmlTextData"),o(C)}}const Qx={name:"labelEnd",resolveAll:sB,resolveTo:lB,tokenize:cB},iB={tokenize:uB},aB={tokenize:dB},oB={tokenize:fB};function sB(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&An(e,0,e.length,n),e}function lB(e,t){let n=e.length,r=0,i,a,o,s;for(;n--;)if(i=e[n][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[a][1].start},end:{...e[o][1].end}},d={type:"labelText",start:{...e[a+r+2][1].end},end:{...e[o-2][1].start}};return s=[["enter",l,t],["enter",c,t]],s=Yn(s,e.slice(a+1,a+r+3)),s=Yn(s,[["enter",d,t]]),s=Yn(s,ph(t.parser.constructs.insideSpan.null,e.slice(a+r+4,o-3),t)),s=Yn(s,[["exit",d,t],e[o-2],e[o-1],["exit",c,t]]),s=Yn(s,e.slice(o+1)),s=Yn(s,[["exit",l,t]]),An(e,a,e.length,s),e}function cB(e,t,n){const r=this;let i=r.events.length,a,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return s;function s(h){return a?a._inactive?f(h):(o=r.parser.defined.includes(yr(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelEnd"),l):n(h)}function l(h){return h===40?e.attempt(iB,d,o?d:f)(h):h===91?e.attempt(aB,d,o?c:f)(h):o?d(h):f(h)}function c(h){return e.attempt(oB,d,f)(h)}function d(h){return t(h)}function f(h){return a._balanced=!0,n(h)}}function uB(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Le(f)?Dl(e,a)(f):a(f)}function a(f){return f===41?d(f):nP(e,o,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Le(f)?Dl(e,l)(f):d(f)}function s(f){return n(f)}function l(f){return f===34||f===39||f===40?iP(e,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):d(f)}function c(f){return Le(f)?Dl(e,d)(f):d(f)}function d(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function dB(e,t,n){const r=this;return i;function i(s){return rP.call(r,e,a,o,"reference","referenceMarker","referenceString")(s)}function a(s){return r.parser.defined.includes(yr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(s):n(s)}function o(s){return n(s)}}function fB(e,t,n){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),i}function i(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const hB={name:"labelStartImage",resolveAll:Qx.resolveAll,tokenize:mB};function mB(e,t,n){const r=this;return i;function i(s){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(s),e.exit("labelImageMarker"),a}function a(s){return s===91?(e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelImage"),o):n(s)}function o(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):t(s)}}const pB={name:"labelStartLink",resolveAll:Qx.resolveAll,tokenize:gB};function gB(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const hp={name:"lineEnding",tokenize:yB};function yB(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Ce(e,t,"linePrefix")}}const od={name:"thematicBreak",tokenize:vB};function vB(e,t,n){let r=0,i;return a;function a(c){return e.enter("thematicBreak"),o(c)}function o(c){return i=c,s(c)}function s(c){return c===i?(e.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||fe(c))?(e.exit("thematicBreak"),t(c)):n(c)}function l(c){return c===i?(e.consume(c),r++,l):(e.exit("thematicBreakSequence"),be(c)?Ce(e,s,"whitespace")(c):s(c))}}const an={continuation:{tokenize:kB},exit:jB,name:"list",tokenize:wB},xB={partial:!0,tokenize:CB},bB={partial:!0,tokenize:SB};function wB(e,t,n){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return s;function s(m){const p=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:wy(m)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),m===42||m===45?e.check(od,n,c)(m):c(m);if(!r.interrupt||m===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(m)}return n(m)}function l(m){return wy(m)&&++o<10?(e.consume(m),l):(!r.interrupt||o<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(e.exit("listItemValue"),c(m)):n(m)}function c(m){return e.enter("listItemMarker"),e.consume(m),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,e.check(Oc,r.interrupt?n:d,e.attempt(xB,h,f))}function d(m){return r.containerState.initialBlankLine=!0,a++,h(m)}function f(m){return be(m)?(e.enter("listItemPrefixWhitespace"),e.consume(m),e.exit("listItemPrefixWhitespace"),h):n(m)}function h(m){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(m)}}function kB(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Oc,i,a);function i(s){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ce(e,t,"listItemIndent",r.containerState.size+1)(s)}function a(s){return r.containerState.furtherBlankLines||!be(s)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(s)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(bB,t,o)(s))}function o(s){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ce(e,e.attempt(an,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}function SB(e,t,n){const r=this;return Ce(e,i,"listItemIndent",r.containerState.size+1);function i(a){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(a):n(a)}}function jB(e){e.exit(this.containerState.type)}function CB(e,t,n){const r=this;return Ce(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function i(a){const o=r.events[r.events.length-1];return!be(a)&&o&&o[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const _k={name:"setextUnderline",resolveTo:_B,tokenize:EB};function _B(e,t){let n=e.length,r,i,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",a?(e.splice(i,0,["enter",o,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end={...e[a][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function EB(e,t,n){const r=this;let i;return a;function a(c){let d=r.events.length,f;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){f=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return e.enter("setextHeadingLineSequence"),s(c)}function s(c){return c===i?(e.consume(c),s):(e.exit("setextHeadingLineSequence"),be(c)?Ce(e,l,"lineSuffix")(c):l(c))}function l(c){return c===null||fe(c)?(e.exit("setextHeadingLine"),t(c)):n(c)}}const NB={tokenize:PB};function PB(e){const t=this,n=e.attempt(Oc,r,e.attempt(this.parser.constructs.flowInitial,i,Ce(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Dz,i)),"linePrefix")));return n;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const OB={resolveAll:oP()},AB=aP("string"),TB=aP("text");function aP(e){return{resolveAll:oP(e==="text"?IB:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],a=n.attempt(i,o,s);return o;function o(d){return c(d)?a(d):s(d)}function s(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),l}function l(d){return c(d)?(n.exit("data"),a(d)):(n.consume(d),l)}function c(d){if(d===null)return!0;const f=i[d];let h=-1;if(f)for(;++h<f.length;){const m=f[h];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function oP(e){return t;function t(n,r){let i=-1,a;for(;++i<=n.length;)a===void 0?n[i]&&n[i][1].type==="data"&&(a=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==a+2&&(n[a][1].end=n[i-1][1].end,n.splice(a+2,i-a-2),i=a+2),a=void 0);return e?e(n,r):n}}function IB(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let a=i.length,o=-1,s=0,l;for(;a--;){const c=i[a];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)s++,o--;if(o)break;o=-1}else if(c===-2)l=!0,s++;else if(c!==-1){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(s=0),s){const c={type:n===e.length||l||s<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-s,offset:r.end.offset-s},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(e.splice(n,0,["enter",c,t],["exit",c,t]),n+=2)}n++}return e}const DB={42:an,43:an,45:an,48:an,49:an,50:an,51:an,52:an,53:an,54:an,55:an,56:an,57:an,62:QN},RB={91:Fz},MB={[-2]:fp,[-1]:fp,32:fp},LB={35:Hz,42:od,45:[_k,od],60:Yz,61:_k,95:od,96:jk,126:jk},$B={38:eP,92:ZN},FB={[-5]:hp,[-4]:hp,[-3]:hp,33:hB,38:eP,42:ky,60:[pz,nB],91:pB,92:[Wz,ZN],93:Qx,95:ky,96:Nz},UB={null:[ky,OB]},zB={null:[42,95]},BB={null:[]},WB=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:zB,contentInitial:RB,disable:BB,document:DB,flow:LB,flowInitial:MB,insideSpan:UB,string:$B,text:FB},Symbol.toStringTag,{value:"Module"}));function qB(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},a=[];let o=[],s=[];const l={attempt:_(S),check:_(k),consume:b,enter:w,exit:j,interrupt:_(k,{interrupt:!0})},c={code:null,containerState:{},defineSkip:g,events:[],now:p,parser:e,previous:null,sliceSerialize:h,sliceStream:m,write:f};let d=t.tokenize.call(c,l);return t.resolveAll&&a.push(t),c;function f(T){return o=Yn(o,T),y(),o[o.length-1]!==null?[]:(N(t,0),c.events=ph(a,c.events,c),c.events)}function h(T,L){return KB(m(T),L)}function m(T){return HB(o,T)}function p(){const{_bufferIndex:T,_index:L,line:$,column:B,offset:D}=r;return{_bufferIndex:T,_index:L,line:$,column:B,offset:D}}function g(T){i[T.line]=T.column,E()}function y(){let T;for(;r._index<o.length;){const L=o[r._index];if(typeof L=="string")for(T=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===T&&r._bufferIndex<L.length;)x(L.charCodeAt(r._bufferIndex));else x(L)}}function x(T){d=d(T)}function b(T){fe(T)?(r.line++,r.column=1,r.offset+=T===-3?2:1,E()):T!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=T}function w(T,L){const $=L||{};return $.type=T,$.start=p(),c.events.push(["enter",$,c]),s.push($),$}function j(T){const L=s.pop();return L.end=p(),c.events.push(["exit",L,c]),L}function S(T,L){N(T,L.from)}function k(T,L){L.restore()}function _(T,L){return $;function $(B,D,z){let G,I,R,C;return Array.isArray(B)?q(B):"tokenize"in B?q([B]):Q(B);function Q(Z){return J;function J(ne){const X=ne!==null&&Z[ne],M=ne!==null&&Z.null,Y=[...Array.isArray(X)?X:X?[X]:[],...Array.isArray(M)?M:M?[M]:[]];return q(Y)(ne)}}function q(Z){return G=Z,I=0,Z.length===0?z:A(Z[I])}function A(Z){return J;function J(ne){return C=P(),R=Z,Z.partial||(c.currentConstruct=Z),Z.name&&c.parser.constructs.disable.null.includes(Z.name)?U():Z.tokenize.call(L?Object.assign(Object.create(c),L):c,l,le,U)(ne)}}function le(Z){return T(R,C),D}function U(Z){return C.restore(),++I<G.length?A(G[I]):z}}}function N(T,L){T.resolveAll&&!a.includes(T)&&a.push(T),T.resolve&&An(c.events,L,c.events.length-L,T.resolve(c.events.slice(L),c)),T.resolveTo&&(c.events=T.resolveTo(c.events,c))}function P(){const T=p(),L=c.previous,$=c.currentConstruct,B=c.events.length,D=Array.from(s);return{from:B,restore:z};function z(){r=T,c.previous=L,c.currentConstruct=$,c.events.length=B,s=D,E()}}function E(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function HB(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,a=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,a)];else{if(o=e.slice(n,i),r>-1){const s=o[0];typeof s=="string"?o[0]=s.slice(r):o.shift()}a>0&&o.push(e[i].slice(0,a))}return o}function KB(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const a=e[n];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(a)}i=a===-2,r.push(o)}return r.join("")}function VB(e){const r={constructs:JN([WB,...(e||{}).extensions||[]]),content:i(lz),defined:[],document:i(uz),flow:i(NB),lazy:{},string:i(AB),text:i(TB)};return r;function i(a){return o;function o(s){return qB(r,a,s)}}}function GB(e){for(;!tP(e););return e}const Ek=/[\0\t\n\r]/g;function YB(){let e=1,t="",n=!0,r;return i;function i(a,o,s){const l=[];let c,d,f,h,m;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),f=0,t="",n&&(a.charCodeAt(0)===65279&&f++,n=void 0);f<a.length;){if(Ek.lastIndex=f,c=Ek.exec(a),h=c&&c.index!==void 0?c.index:a.length,m=a.charCodeAt(h),!c){t=a.slice(f);break}if(m===10&&f===h&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),f<h&&(l.push(a.slice(f,h)),e+=h-f),m){case 0:{l.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,l.push(-2);e++<d;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:r=!0,e=1}f=h+1}return s&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}const JB=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function XB(e){return e.replace(JB,QB)}function QB(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),a=i===120||i===88;return XN(n.slice(a?2:1),a?16:10)}return Xx(n)||e}const sP={}.hasOwnProperty;function ZB(e,t,n){return typeof t!="string"&&(n=t,t=void 0),e6(n)(GB(VB(n).document().write(YB()(e,t,!0))))}function e6(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(en),autolinkProtocol:P,autolinkEmail:P,atxHeading:a(ke),blockQuote:a(M),characterEscape:P,characterReference:P,codeFenced:a(Y),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(Y,o),codeText:a(F,o),codeTextData:P,data:P,codeFlowValue:P,definition:a(he),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(ce),hardBreakEscape:a(Pe),hardBreakTrailing:a(Pe),htmlFlow:a(Ee,o),htmlFlowData:P,htmlText:a(Ee,o),htmlTextData:P,image:a(Re),label:o,link:a(en),listItem:a(Ei),listItemValue:h,listOrdered:a(Sr,f),listUnordered:a(Sr),paragraph:a(jr),reference:A,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(ke),strong:a(H),thematicBreak:a(me)},exit:{atxHeading:l(),atxHeadingSequence:S,autolink:l(),autolinkEmail:X,autolinkProtocol:ne,blockQuote:l(),characterEscapeValue:E,characterReferenceMarkerHexadecimal:U,characterReferenceMarkerNumeric:U,characterReferenceValue:Z,characterReference:J,codeFenced:l(y),codeFencedFence:g,codeFencedFenceInfo:m,codeFencedFenceMeta:p,codeFlowValue:E,codeIndented:l(x),codeText:l(D),codeTextData:E,data:E,definition:l(),definitionDestinationString:j,definitionLabelString:b,definitionTitleString:w,emphasis:l(),hardBreakEscape:l(L),hardBreakTrailing:l(L),htmlFlow:l($),htmlFlowData:E,htmlText:l(B),htmlTextData:E,image:l(G),label:R,labelText:I,lineEnding:T,link:l(z),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:le,resourceDestinationString:C,resourceTitleString:Q,resource:q,setextHeading:l(N),setextHeadingLineSequence:_,setextHeadingText:k,strong:l(),thematicBreak:l()}};lP(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(O){let V={type:"root",children:[]};const ie={stack:[V],tokenStack:[],config:t,enter:s,exit:c,buffer:o,resume:d,data:n},pe=[];let ge=-1;for(;++ge<O.length;)if(O[ge][1].type==="listOrdered"||O[ge][1].type==="listUnordered")if(O[ge][0]==="enter")pe.push(ge);else{const tn=pe.pop();ge=i(O,tn,ge)}for(ge=-1;++ge<O.length;){const tn=t[O[ge][0]];sP.call(tn,O[ge][1].type)&&tn[O[ge][1].type].call(Object.assign({sliceSerialize:O[ge][2].sliceSerialize},ie),O[ge][1])}if(ie.tokenStack.length>0){const tn=ie.tokenStack[ie.tokenStack.length-1];(tn[1]||Nk).call(ie,void 0,tn[0])}for(V.position={start:Oi(O.length>0?O[0][1].start:{line:1,column:1,offset:0}),end:Oi(O.length>0?O[O.length-2][1].end:{line:1,column:1,offset:0})},ge=-1;++ge<t.transforms.length;)V=t.transforms[ge](V)||V;return V}function i(O,V,ie){let pe=V-1,ge=-1,tn=!1,Cr,zn,pa,ga;for(;++pe<=ie;){const bn=O[pe];switch(bn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{bn[0]==="enter"?ge++:ge--,ga=void 0;break}case"lineEndingBlank":{bn[0]==="enter"&&(Cr&&!ga&&!ge&&!pa&&(pa=pe),ga=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ga=void 0}if(!ge&&bn[0]==="enter"&&bn[1].type==="listItemPrefix"||ge===-1&&bn[0]==="exit"&&(bn[1].type==="listUnordered"||bn[1].type==="listOrdered")){if(Cr){let ho=pe;for(zn=void 0;ho--;){const Vr=O[ho];if(Vr[1].type==="lineEnding"||Vr[1].type==="lineEndingBlank"){if(Vr[0]==="exit")continue;zn&&(O[zn][1].type="lineEndingBlank",tn=!0),Vr[1].type="lineEnding",zn=ho}else if(!(Vr[1].type==="linePrefix"||Vr[1].type==="blockQuotePrefix"||Vr[1].type==="blockQuotePrefixWhitespace"||Vr[1].type==="blockQuoteMarker"||Vr[1].type==="listItemIndent"))break}pa&&(!zn||pa<zn)&&(Cr._spread=!0),Cr.end=Object.assign({},zn?O[zn][1].start:bn[1].end),O.splice(zn||pe,0,["exit",Cr,bn[2]]),pe++,ie++}if(bn[1].type==="listItemPrefix"){const ho={type:"listItem",_spread:!1,start:Object.assign({},bn[1].start),end:void 0};Cr=ho,O.splice(pe,0,["enter",ho,bn[2]]),pe++,ie++,pa=void 0,ga=!0}}}return O[V][1]._spread=tn,ie}function a(O,V){return ie;function ie(pe){s.call(this,O(pe),pe),V&&V.call(this,pe)}}function o(){this.stack.push({type:"fragment",children:[]})}function s(O,V,ie){this.stack[this.stack.length-1].children.push(O),this.stack.push(O),this.tokenStack.push([V,ie||void 0]),O.position={start:Oi(V.start),end:void 0}}function l(O){return V;function V(ie){O&&O.call(this,ie),c.call(this,ie)}}function c(O,V){const ie=this.stack.pop(),pe=this.tokenStack.pop();if(pe)pe[0].type!==O.type&&(V?V.call(this,O,pe[0]):(pe[1]||Nk).call(this,O,pe[0]));else throw new Error("Cannot close `"+O.type+"` ("+Il({start:O.start,end:O.end})+"): it’s not open");ie.position.end=Oi(O.end)}function d(){return Jx(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function h(O){if(this.data.expectingFirstListItemValue){const V=this.stack[this.stack.length-2];V.start=Number.parseInt(this.sliceSerialize(O),10),this.data.expectingFirstListItemValue=void 0}}function m(){const O=this.resume(),V=this.stack[this.stack.length-1];V.lang=O}function p(){const O=this.resume(),V=this.stack[this.stack.length-1];V.meta=O}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const O=this.resume(),V=this.stack[this.stack.length-1];V.value=O.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const O=this.resume(),V=this.stack[this.stack.length-1];V.value=O.replace(/(\r?\n|\r)$/g,"")}function b(O){const V=this.resume(),ie=this.stack[this.stack.length-1];ie.label=V,ie.identifier=yr(this.sliceSerialize(O)).toLowerCase()}function w(){const O=this.resume(),V=this.stack[this.stack.length-1];V.title=O}function j(){const O=this.resume(),V=this.stack[this.stack.length-1];V.url=O}function S(O){const V=this.stack[this.stack.length-1];if(!V.depth){const ie=this.sliceSerialize(O).length;V.depth=ie}}function k(){this.data.setextHeadingSlurpLineEnding=!0}function _(O){const V=this.stack[this.stack.length-1];V.depth=this.sliceSerialize(O).codePointAt(0)===61?1:2}function N(){this.data.setextHeadingSlurpLineEnding=void 0}function P(O){const ie=this.stack[this.stack.length-1].children;let pe=ie[ie.length-1];(!pe||pe.type!=="text")&&(pe=se(),pe.position={start:Oi(O.start),end:void 0},ie.push(pe)),this.stack.push(pe)}function E(O){const V=this.stack.pop();V.value+=this.sliceSerialize(O),V.position.end=Oi(O.end)}function T(O){const V=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ie=V.children[V.children.length-1];ie.position.end=Oi(O.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(V.type)&&(P.call(this,O),E.call(this,O))}function L(){this.data.atHardBreak=!0}function $(){const O=this.resume(),V=this.stack[this.stack.length-1];V.value=O}function B(){const O=this.resume(),V=this.stack[this.stack.length-1];V.value=O}function D(){const O=this.resume(),V=this.stack[this.stack.length-1];V.value=O}function z(){const O=this.stack[this.stack.length-1];if(this.data.inReference){const V=this.data.referenceType||"shortcut";O.type+="Reference",O.referenceType=V,delete O.url,delete O.title}else delete O.identifier,delete O.label;this.data.referenceType=void 0}function G(){const O=this.stack[this.stack.length-1];if(this.data.inReference){const V=this.data.referenceType||"shortcut";O.type+="Reference",O.referenceType=V,delete O.url,delete O.title}else delete O.identifier,delete O.label;this.data.referenceType=void 0}function I(O){const V=this.sliceSerialize(O),ie=this.stack[this.stack.length-2];ie.label=XB(V),ie.identifier=yr(V).toLowerCase()}function R(){const O=this.stack[this.stack.length-1],V=this.resume(),ie=this.stack[this.stack.length-1];if(this.data.inReference=!0,ie.type==="link"){const pe=O.children;ie.children=pe}else ie.alt=V}function C(){const O=this.resume(),V=this.stack[this.stack.length-1];V.url=O}function Q(){const O=this.resume(),V=this.stack[this.stack.length-1];V.title=O}function q(){this.data.inReference=void 0}function A(){this.data.referenceType="collapsed"}function le(O){const V=this.resume(),ie=this.stack[this.stack.length-1];ie.label=V,ie.identifier=yr(this.sliceSerialize(O)).toLowerCase(),this.data.referenceType="full"}function U(O){this.data.characterReferenceType=O.type}function Z(O){const V=this.sliceSerialize(O),ie=this.data.characterReferenceType;let pe;ie?(pe=XN(V,ie==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):pe=Xx(V);const ge=this.stack[this.stack.length-1];ge.value+=pe}function J(O){const V=this.stack.pop();V.position.end=Oi(O.end)}function ne(O){E.call(this,O);const V=this.stack[this.stack.length-1];V.url=this.sliceSerialize(O)}function X(O){E.call(this,O);const V=this.stack[this.stack.length-1];V.url="mailto:"+this.sliceSerialize(O)}function M(){return{type:"blockquote",children:[]}}function Y(){return{type:"code",lang:null,meta:null,value:""}}function F(){return{type:"inlineCode",value:""}}function he(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ce(){return{type:"emphasis",children:[]}}function ke(){return{type:"heading",depth:0,children:[]}}function Pe(){return{type:"break"}}function Ee(){return{type:"html",value:""}}function Re(){return{type:"image",title:null,url:"",alt:null}}function en(){return{type:"link",title:null,url:"",children:[]}}function Sr(O){return{type:"list",ordered:O.type==="listOrdered",start:null,spread:O._spread,children:[]}}function Ei(O){return{type:"listItem",spread:O._spread,checked:null,children:[]}}function jr(){return{type:"paragraph",children:[]}}function H(){return{type:"strong",children:[]}}function se(){return{type:"text",value:""}}function me(){return{type:"thematicBreak"}}}function Oi(e){return{line:e.line,column:e.column,offset:e.offset}}function lP(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?lP(e,r):t6(e,r)}}function t6(e,t){let n;for(n in t)if(sP.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Nk(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Il({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Il({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Il({start:t.start,end:t.end})+") is still open")}function n6(e){const t=this;t.parser=n;function n(r){return ZB(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function r6(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function i6(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function a6(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function o6(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function s6(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function l6(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Os(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let o,s=e.footnoteCounts.get(r);s===void 0?(s=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=a+1,s+=1,e.footnoteCounts.set(r,s);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)}function c6(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function u6(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function cP(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function d6(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return cP(e,t);const i={src:Os(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,a),e.applyData(t,a)}function f6(e,t){const n={src:Os(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function h6(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function m6(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return cP(e,t);const i={href:Os(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function p6(e,t){const n={href:Os(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function g6(e,t,n){const r=e.all(t),i=n?y6(n):uP(t),a={},o=[];if(typeof t.checked=="boolean"){const d=r[0];let f;d&&d.type==="element"&&d.tagName==="p"?f=d:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let s=-1;for(;++s<r.length;){const d=r[s];(i||s!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!i?o.push(...d.children):o.push(d)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:a,children:o};return e.patch(t,c),e.applyData(t,c)}function y6(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=uP(n[r])}return t}function uP(e){const t=e.spread;return t??e.children.length>1}function v6(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)}function x6(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function b6(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function w6(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function k6(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},s=Kx(t.children[1]),l=WN(t.children[t.children.length-1]);s&&l&&(o.position={start:s,end:l}),i.push(o)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,a),e.applyData(t,a)}function S6(e,t,n){const r=n?n.children:void 0,a=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,s=o?o.length:t.children.length;let l=-1;const c=[];for(;++l<s;){const f=t.children[l],h={},m=o?o[l]:void 0;m&&(h.align=m);let p={type:"element",tagName:a,properties:h,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),c.push(p)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(c,!0)};return e.patch(t,d),e.applyData(t,d)}function j6(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Pk=9,Ok=32;function C6(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const a=[];for(;r;)a.push(Ak(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return a.push(Ak(t.slice(i),i>0,!1)),a.join("")}function Ak(e,t,n){let r=0,i=e.length;if(t){let a=e.codePointAt(r);for(;a===Pk||a===Ok;)r++,a=e.codePointAt(r)}if(n){let a=e.codePointAt(i-1);for(;a===Pk||a===Ok;)i--,a=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function _6(e,t){const n={type:"text",value:C6(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function E6(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const N6={blockquote:r6,break:i6,code:a6,delete:o6,emphasis:s6,footnoteReference:l6,heading:c6,html:u6,imageReference:d6,image:f6,inlineCode:h6,linkReference:m6,link:p6,listItem:g6,list:v6,paragraph:x6,root:b6,strong:w6,table:k6,tableCell:j6,tableRow:S6,text:_6,thematicBreak:E6,toml:Cu,yaml:Cu,definition:Cu,footnoteDefinition:Cu};function Cu(){}const dP=-1,gh=0,Rl=1,Yd=2,Zx=3,e0=4,t0=5,n0=6,fP=7,hP=8,Tk=typeof self=="object"?self:globalThis,P6=(e,t)=>{const n=(i,a)=>(e.set(a,i),i),r=i=>{if(e.has(i))return e.get(i);const[a,o]=t[i];switch(a){case gh:case dP:return n(o,i);case Rl:{const s=n([],i);for(const l of o)s.push(r(l));return s}case Yd:{const s=n({},i);for(const[l,c]of o)s[r(l)]=r(c);return s}case Zx:return n(new Date(o),i);case e0:{const{source:s,flags:l}=o;return n(new RegExp(s,l),i)}case t0:{const s=n(new Map,i);for(const[l,c]of o)s.set(r(l),r(c));return s}case n0:{const s=n(new Set,i);for(const l of o)s.add(r(l));return s}case fP:{const{name:s,message:l}=o;return n(new Tk[s](l),i)}case hP:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:s}=new Uint8Array(o);return n(new DataView(s),o)}}return n(new Tk[a](o),i)};return r},Ik=e=>P6(new Map,e)(0),wo="",{toString:O6}={},{keys:A6}=Object,rl=e=>{const t=typeof e;if(t!=="object"||!e)return[gh,t];const n=O6.call(e).slice(8,-1);switch(n){case"Array":return[Rl,wo];case"Object":return[Yd,wo];case"Date":return[Zx,wo];case"RegExp":return[e0,wo];case"Map":return[t0,wo];case"Set":return[n0,wo];case"DataView":return[Rl,n]}return n.includes("Array")?[Rl,n]:n.includes("Error")?[fP,n]:[Yd,n]},_u=([e,t])=>e===gh&&(t==="function"||t==="symbol"),T6=(e,t,n,r)=>{const i=(o,s)=>{const l=r.push(o)-1;return n.set(s,l),l},a=o=>{if(n.has(o))return n.get(o);let[s,l]=rl(o);switch(s){case gh:{let d=o;switch(l){case"bigint":s=hP,d=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);d=null;break;case"undefined":return i([dP],o)}return i([s,d],o)}case Rl:{if(l){let h=o;return l==="DataView"?h=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(h=new Uint8Array(o)),i([l,[...h]],o)}const d=[],f=i([s,d],o);for(const h of o)d.push(a(h));return f}case Yd:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(t&&"toJSON"in o)return a(o.toJSON());const d=[],f=i([s,d],o);for(const h of A6(o))(e||!_u(rl(o[h])))&&d.push([a(h),a(o[h])]);return f}case Zx:return i([s,o.toISOString()],o);case e0:{const{source:d,flags:f}=o;return i([s,{source:d,flags:f}],o)}case t0:{const d=[],f=i([s,d],o);for(const[h,m]of o)(e||!(_u(rl(h))||_u(rl(m))))&&d.push([a(h),a(m)]);return f}case n0:{const d=[],f=i([s,d],o);for(const h of o)(e||!_u(rl(h)))&&d.push(a(h));return f}}const{message:c}=o;return i([s,{name:l,message:c}],o)};return a},Dk=(e,{json:t,lossy:n}={})=>{const r=[];return T6(!(t||n),!!t,new Map,r)(e),r},Jd=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Ik(Dk(e,t)):structuredClone(e):(e,t)=>Ik(Dk(e,t));function I6(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function D6(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function R6(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||I6,r=e.options.footnoteBackLabel||D6,i=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},s=[];let l=-1;for(;++l<e.footnoteOrder.length;){const c=e.footnoteById.get(e.footnoteOrder[l]);if(!c)continue;const d=e.all(c),f=String(c.identifier).toUpperCase(),h=Os(f.toLowerCase());let m=0;const p=[],g=e.footnoteCounts.get(f);for(;g!==void 0&&++m<=g;){p.length>0&&p.push({type:"text",value:" "});let b=typeof n=="string"?n:n(l,m);typeof b=="string"&&(b={type:"text",value:b}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+h+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,m),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const y=d[d.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const b=y.children[y.children.length-1];b&&b.type==="text"?b.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...p)}else d.push(...p);const x={type:"element",tagName:"li",properties:{id:t+"fn-"+h},children:e.wrap(d,!0)};e.patch(c,x),s.push(x)}if(s.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Jd(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(s,!0)},{type:"text",value:`
`}]}}const yh=function(e){if(e==null)return F6;if(typeof e=="function")return vh(e);if(typeof e=="object")return Array.isArray(e)?M6(e):L6(e);if(typeof e=="string")return $6(e);throw new Error("Expected function, string, or object as test")};function M6(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=yh(e[n]);return vh(r);function r(...i){let a=-1;for(;++a<t.length;)if(t[a].apply(this,i))return!0;return!1}}function L6(e){const t=e;return vh(n);function n(r){const i=r;let a;for(a in e)if(i[a]!==t[a])return!1;return!0}}function $6(e){return vh(t);function t(n){return n&&n.type===e}}function vh(e){return t;function t(n,r,i){return!!(U6(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function F6(){return!0}function U6(e){return e!==null&&typeof e=="object"&&"type"in e}const mP=[],z6=!0,Sy=!1,B6="skip";function pP(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const a=yh(i),o=r?-1:1;s(e,void 0,[])();function s(l,c,d){const f=l&&typeof l=="object"?l:{};if(typeof f.type=="string"){const m=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(l.type+(m?"<"+m+">":""))+")"})}return h;function h(){let m=mP,p,g,y;if((!t||a(l,c,d[d.length-1]||void 0))&&(m=W6(n(l,d)),m[0]===Sy))return m;if("children"in l&&l.children){const x=l;if(x.children&&m[0]!==B6)for(g=(r?x.children.length:-1)+o,y=d.concat(x);g>-1&&g<x.children.length;){const b=x.children[g];if(p=s(b,g,y)(),p[0]===Sy)return p;g=typeof p[1]=="number"?p[1]:g+o}}return m}}}function W6(e){return Array.isArray(e)?e:typeof e=="number"?[z6,e]:e==null?mP:[e]}function r0(e,t,n,r){let i,a,o;typeof t=="function"&&typeof n!="function"?(a=void 0,o=t,i=n):(a=t,o=n,i=r),pP(e,a,s,i);function s(l,c){const d=c[c.length-1],f=d?d.children.indexOf(l):void 0;return o(l,f,d)}}const jy={}.hasOwnProperty,q6={};function H6(e,t){const n=t||q6,r=new Map,i=new Map,a=new Map,o={...N6,...n.handlers},s={all:c,applyData:V6,definitionById:r,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:o,one:l,options:n,patch:K6,wrap:Y6};return r0(e,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const f=d.type==="definition"?r:i,h=String(d.identifier).toUpperCase();f.has(h)||f.set(h,d)}}),s;function l(d,f){const h=d.type,m=s.handlers[h];if(jy.call(s.handlers,h)&&m)return m(s,d,f);if(s.options.passThrough&&s.options.passThrough.includes(h)){if("children"in d){const{children:g,...y}=d,x=Jd(y);return x.children=s.all(d),x}return Jd(d)}return(s.options.unknownHandler||G6)(s,d,f)}function c(d){const f=[];if("children"in d){const h=d.children;let m=-1;for(;++m<h.length;){const p=s.one(h[m],d);if(p){if(m&&h[m-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Rk(p.value)),!Array.isArray(p)&&p.type==="element")){const g=p.children[0];g&&g.type==="text"&&(g.value=Rk(g.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function K6(e,t){e.position&&(t.position=D5(e))}function V6(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,a=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&a&&Object.assign(n.properties,Jd(a)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function G6(e,t){const n=t.data||{},r="value"in t&&!(jy.call(n,"hProperties")||jy.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Y6(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Rk(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Mk(e,t){const n=H6(e,t),r=n.one(e,void 0),i=R6(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&a.children.push({type:"text",value:`
`},i),a}function J6(e,t){return e&&"run"in e?async function(n,r){const i=Mk(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Mk(n,{file:r,...e||t})}}function Lk(e){if(e)throw e}var sd=Object.prototype.hasOwnProperty,gP=Object.prototype.toString,$k=Object.defineProperty,Fk=Object.getOwnPropertyDescriptor,Uk=function(t){return typeof Array.isArray=="function"?Array.isArray(t):gP.call(t)==="[object Array]"},zk=function(t){if(!t||gP.call(t)!=="[object Object]")return!1;var n=sd.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&sd.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||sd.call(t,i)},Bk=function(t,n){$k&&n.name==="__proto__"?$k(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Wk=function(t,n){if(n==="__proto__")if(sd.call(t,n)){if(Fk)return Fk(t,n).value}else return;return t[n]},X6=function e(){var t,n,r,i,a,o,s=arguments[0],l=1,c=arguments.length,d=!1;for(typeof s=="boolean"&&(d=s,s=arguments[1]||{},l=2),(s==null||typeof s!="object"&&typeof s!="function")&&(s={});l<c;++l)if(t=arguments[l],t!=null)for(n in t)r=Wk(s,n),i=Wk(t,n),s!==i&&(d&&i&&(zk(i)||(a=Uk(i)))?(a?(a=!1,o=r&&Uk(r)?r:[]):o=r&&zk(r)?r:{},Bk(s,{name:n,newValue:e(d,o,i)})):typeof i<"u"&&Bk(s,{name:n,newValue:i}));return s};const mp=Ln(X6);function Cy(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Q6(){const e=[],t={run:n,use:r};return t;function n(...i){let a=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);s(null,...i);function s(l,...c){const d=e[++a];let f=-1;if(l){o(l);return}for(;++f<i.length;)(c[f]===null||c[f]===void 0)&&(c[f]=i[f]);i=c,d?Z6(d,s)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Z6(e,t){let n;return r;function r(...o){const s=e.length>o.length;let l;s&&o.push(i);try{l=e.apply(this,o)}catch(c){const d=c;if(s&&n)throw d;return i(d)}s||(l&&l.then&&typeof l.then=="function"?l.then(a,i):l instanceof Error?i(l):a(l))}function i(o,...s){n||(n=!0,t(o,...s))}function a(o){i(null,o)}}const Tr={basename:e8,dirname:t8,extname:n8,join:r8,sep:"/"};function e8(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Ac(e);let n=0,r=-1,i=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(a){n=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,s=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(a){n=i+1;break}}else o<0&&(a=!0,o=i+1),s>-1&&(e.codePointAt(i)===t.codePointAt(s--)?s<0&&(r=i):(s=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function t8(e){if(Ac(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function n8(e){Ac(e);let t=e.length,n=-1,r=0,i=-1,a=0,o;for(;t--;){const s=e.codePointAt(t);if(s===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),s===46?i<0?i=t:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||n<0||a===0||a===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function r8(...e){let t=-1,n;for(;++t<e.length;)Ac(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":i8(n)}function i8(e){Ac(e);const t=e.codePointAt(0)===47;let n=a8(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function a8(e,t){let n="",r=0,i=-1,a=0,o=-1,s,l;for(;++o<=e.length;){if(o<e.length)s=e.codePointAt(o);else{if(s===47)break;s=47}if(s===47){if(!(i===o-1||a===1))if(i!==o-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,a=0;continue}}else if(n.length>0){n="",r=0,i=o,a=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,a=0}else s===46&&a>-1?a++:a=-1}return n}function Ac(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const o8={cwd:s8};function s8(){return"/"}function _y(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function l8(e){if(typeof e=="string")e=new URL(e);else if(!_y(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return c8(e)}function c8(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const pp=["history","path","basename","stem","extname","dirname"];class yP{constructor(t){let n;t?_y(t)?n={path:t}:typeof t=="string"||u8(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":o8.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<pp.length;){const a=pp[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let i;for(i in n)pp.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Tr.basename(this.path):void 0}set basename(t){yp(t,"basename"),gp(t,"basename"),this.path=Tr.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Tr.dirname(this.path):void 0}set dirname(t){qk(this.basename,"dirname"),this.path=Tr.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Tr.extname(this.path):void 0}set extname(t){if(gp(t,"extname"),qk(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Tr.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){_y(t)&&(t=l8(t)),yp(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Tr.basename(this.path,this.extname):void 0}set stem(t){yp(t,"stem"),gp(t,"stem"),this.path=Tr.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new qt(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function gp(e,t){if(e&&e.includes(Tr.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Tr.sep+"`")}function yp(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function qk(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function u8(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const d8=function(e){const r=this.constructor.prototype,i=r[e],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,r),a},f8={}.hasOwnProperty;class i0 extends d8{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Q6()}copy(){const t=new i0;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(mp(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(bp("data",this.frozen),this.namespace[t]=n,this):f8.call(this.namespace,t)&&this.namespace[t]||void 0:t?(bp("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Eu(t),r=this.parser||this.Parser;return vp("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),vp("process",this.parser||this.Parser),xp("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(a,o){const s=Eu(t),l=r.parse(s);r.run(l,s,function(d,f,h){if(d||!f||!h)return c(d);const m=f,p=r.stringify(m,h);p8(p)?h.value=p:h.result=p,c(d,h)});function c(d,f){d||!f?o(d):a?a(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),vp("processSync",this.parser||this.Parser),xp("processSync",this.compiler||this.Compiler),this.process(t,i),Kk("processSync","process",n),r;function i(a,o){n=!0,Lk(a),r=o}}run(t,n,r){Hk(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(o,s){const l=Eu(n);i.run(t,l,c);function c(d,f,h){const m=f||t;d?s(d):o?o(m):r(void 0,m,h)}}}runSync(t,n){let r=!1,i;return this.run(t,n,a),Kk("runSync","run",r),i;function a(o,s){Lk(o),i=s,r=!0}}stringify(t,n){this.freeze();const r=Eu(n),i=this.compiler||this.Compiler;return xp("stringify",i),Hk(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(bp("use",this.frozen),t!=null)if(typeof t=="function")l(t,n);else if(typeof t=="object")Array.isArray(t)?s(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[d,...f]=c;l(d,f)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");s(c.plugins),c.settings&&(i.settings=mp(!0,i.settings,c.settings))}function s(c){let d=-1;if(c!=null)if(Array.isArray(c))for(;++d<c.length;){const f=c[d];a(f)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,d){let f=-1,h=-1;for(;++f<r.length;)if(r[f][0]===c){h=f;break}if(h===-1)r.push([c,...d]);else if(d.length>0){let[m,...p]=d;const g=r[h][1];Cy(g)&&Cy(m)&&(m=mp(!0,g,m)),r[h]=[c,m,...p]}}}}const h8=new i0().freeze();function vp(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function xp(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function bp(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Hk(e){if(!Cy(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Kk(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Eu(e){return m8(e)?e:new yP(e)}function m8(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function p8(e){return typeof e=="string"||g8(e)}function g8(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const y8="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Vk=[],Gk={allowDangerousHtml:!0},v8=/^(https?|ircs?|mailto|xmpp)$/i,x8=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function b8(e){const t=w8(e),n=k8(e);return S8(t.runSync(t.parse(n),n),e)}function w8(e){const t=e.rehypePlugins||Vk,n=e.remarkPlugins||Vk,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Gk}:Gk;return h8().use(n6).use(n).use(J6,r).use(t)}function k8(e){const t=e.children||"",n=new yP;return typeof t=="string"&&(n.value=t),n}function S8(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,a=t.disallowedElements,o=t.skipHtml,s=t.unwrapDisallowed,l=t.urlTransform||j8;for(const d of x8)Object.hasOwn(t,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+y8+d.id,void 0);return r0(e,c),F5(e,{Fragment:u.Fragment,components:i,ignoreInvalidStyle:!0,jsx:u.jsx,jsxs:u.jsxs,passKeys:!0,passNode:!0});function c(d,f,h){if(d.type==="raw"&&h&&typeof f=="number")return o?h.children.splice(f,1):h.children[f]={type:"text",value:d.value},f;if(d.type==="element"){let m;for(m in dp)if(Object.hasOwn(dp,m)&&Object.hasOwn(d.properties,m)){const p=d.properties[m],g=dp[m];(g===null||g.includes(d.tagName))&&(d.properties[m]=l(String(p||""),m,d))}}if(d.type==="element"){let m=n?!n.includes(d.tagName):a?a.includes(d.tagName):!1;if(!m&&r&&typeof f=="number"&&(m=!r(d,f,h)),m&&h&&typeof f=="number")return s&&d.children?h.children.splice(f,1,...d.children):h.children.splice(f,1),f}}}function j8(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||v8.test(e.slice(0,t))?e:""}function Yk(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function C8(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function _8(e,t,n){const i=yh((n||{}).ignore||[]),a=E8(t);let o=-1;for(;++o<a.length;)pP(e,"text",s);function s(c,d){let f=-1,h;for(;++f<d.length;){const m=d[f],p=h?h.children:void 0;if(i(m,p?p.indexOf(m):void 0,h))return;h=m}if(h)return l(c,d)}function l(c,d){const f=d[d.length-1],h=a[o][0],m=a[o][1];let p=0;const y=f.children.indexOf(c);let x=!1,b=[];h.lastIndex=0;let w=h.exec(c.value);for(;w;){const j=w.index,S={index:w.index,input:w.input,stack:[...d,c]};let k=m(...w,S);if(typeof k=="string"&&(k=k.length>0?{type:"text",value:k}:void 0),k===!1?h.lastIndex=j+1:(p!==j&&b.push({type:"text",value:c.value.slice(p,j)}),Array.isArray(k)?b.push(...k):k&&b.push(k),p=j+w[0].length,x=!0),!h.global)break;w=h.exec(c.value)}return x?(p<c.value.length&&b.push({type:"text",value:c.value.slice(p)}),f.children.splice(y,1,...b)):b=[c],y+b.length}}function E8(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([N8(i[0]),P8(i[1])])}return t}function N8(e){return typeof e=="string"?new RegExp(C8(e),"g"):e}function P8(e){return typeof e=="function"?e:function(){return e}}const wp="phrasing",kp=["autolink","link","image","label"];function O8(){return{transforms:[L8],enter:{literalAutolink:T8,literalAutolinkEmail:Sp,literalAutolinkHttp:Sp,literalAutolinkWww:Sp},exit:{literalAutolink:M8,literalAutolinkEmail:R8,literalAutolinkHttp:I8,literalAutolinkWww:D8}}}function A8(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:wp,notInConstruct:kp},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:wp,notInConstruct:kp},{character:":",before:"[ps]",after:"\\/",inConstruct:wp,notInConstruct:kp}]}}function T8(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Sp(e){this.config.enter.autolinkProtocol.call(this,e)}function I8(e){this.config.exit.autolinkProtocol.call(this,e)}function D8(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function R8(e){this.config.exit.autolinkEmail.call(this,e)}function M8(e){this.exit(e)}function L8(e){_8(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,$8],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),F8]],{ignore:["link","linkReference"]})}function $8(e,t,n,r,i){let a="";if(!vP(i)||(/^w/i.test(t)&&(n=t+n,t="",a="http://"),!U8(n)))return!1;const o=z8(n+r);if(!o[0])return!1;const s={type:"link",title:null,url:a+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[s,{type:"text",value:o[1]}]:s}function F8(e,t,n,r){return!vP(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function U8(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function z8(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=Yk(e,"(");let a=Yk(e,")");for(;r!==-1&&i>a;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[e,n]}function vP(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Xa(n)||mh(n))&&(!t||n!==47)}xP.peek=J8;function B8(){this.buffer()}function W8(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function q8(){this.buffer()}function H8(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function K8(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=yr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function V8(e){this.exit(e)}function G8(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=yr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Y8(e){this.exit(e)}function J8(){return"["}function xP(e,t,n,r){const i=n.createTracker(r);let a=i.move("[^");const o=n.enter("footnoteReference"),s=n.enter("reference");return a+=i.move(n.safe(n.associationId(e),{after:"]",before:a})),s(),o(),a+=i.move("]"),a}function X8(){return{enter:{gfmFootnoteCallString:B8,gfmFootnoteCall:W8,gfmFootnoteDefinitionLabelString:q8,gfmFootnoteDefinition:H8},exit:{gfmFootnoteCallString:K8,gfmFootnoteCall:V8,gfmFootnoteDefinitionLabelString:G8,gfmFootnoteDefinition:Y8}}}function Q8(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:xP},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,a,o){const s=a.createTracker(o);let l=s.move("[^");const c=a.enter("footnoteDefinition"),d=a.enter("label");return l+=s.move(a.safe(a.associationId(r),{before:l,after:"]"})),d(),l+=s.move("]:"),r.children&&r.children.length>0&&(s.shift(4),l+=s.move((t?`
`:" ")+a.indentLines(a.containerFlow(r,s.current()),t?bP:Z8))),c(),l}}function Z8(e,t,n){return t===0?e:bP(e,t,n)}function bP(e,t,n){return(n?"":"    ")+e}const e9=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];wP.peek=a9;function t9(){return{canContainEols:["delete"],enter:{strikethrough:r9},exit:{strikethrough:i9}}}function n9(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:e9}],handlers:{delete:wP}}}function r9(e){this.enter({type:"delete",children:[]},e)}function i9(e){this.exit(e)}function wP(e,t,n,r){const i=n.createTracker(r),a=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(e,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),a(),o}function a9(){return"~"}function o9(e){return e.length}function s9(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||o9,a=[],o=[],s=[],l=[];let c=0,d=-1;for(;++d<e.length;){const g=[],y=[];let x=-1;for(e[d].length>c&&(c=e[d].length);++x<e[d].length;){const b=l9(e[d][x]);if(n.alignDelimiters!==!1){const w=i(b);y[x]=w,(l[x]===void 0||w>l[x])&&(l[x]=w)}g.push(b)}o[d]=g,s[d]=y}let f=-1;if(typeof r=="object"&&"length"in r)for(;++f<c;)a[f]=Jk(r[f]);else{const g=Jk(r);for(;++f<c;)a[f]=g}f=-1;const h=[],m=[];for(;++f<c;){const g=a[f];let y="",x="";g===99?(y=":",x=":"):g===108?y=":":g===114&&(x=":");let b=n.alignDelimiters===!1?1:Math.max(1,l[f]-y.length-x.length);const w=y+"-".repeat(b)+x;n.alignDelimiters!==!1&&(b=y.length+b+x.length,b>l[f]&&(l[f]=b),m[f]=b),h[f]=w}o.splice(1,0,h),s.splice(1,0,m),d=-1;const p=[];for(;++d<o.length;){const g=o[d],y=s[d];f=-1;const x=[];for(;++f<c;){const b=g[f]||"";let w="",j="";if(n.alignDelimiters!==!1){const S=l[f]-(y[f]||0),k=a[f];k===114?w=" ".repeat(S):k===99?S%2?(w=" ".repeat(S/2+.5),j=" ".repeat(S/2-.5)):(w=" ".repeat(S/2),j=w):j=" ".repeat(S)}n.delimiterStart!==!1&&!f&&x.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&b==="")&&(n.delimiterStart!==!1||f)&&x.push(" "),n.alignDelimiters!==!1&&x.push(w),x.push(b),n.alignDelimiters!==!1&&x.push(j),n.padding!==!1&&x.push(" "),(n.delimiterEnd!==!1||f!==c-1)&&x.push("|")}p.push(n.delimiterEnd===!1?x.join("").replace(/ +$/,""):x.join(""))}return p.join(`
`)}function l9(e){return e==null?"":String(e)}function Jk(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function c9(e,t,n,r){const i=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const o=n.indentLines(n.containerFlow(e,a.current()),u9);return i(),o}function u9(e,t,n){return">"+(n?"":" ")+e}function d9(e,t){return Xk(e,t.inConstruct,!0)&&!Xk(e,t.notInConstruct,!1)}function Xk(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function Qk(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&d9(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function f9(e,t){const n=String(e);let r=n.indexOf(t),i=r,a=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++a>o&&(o=a):a=1,i=r+t.length,r=n.indexOf(t,i);return o}function h9(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function m9(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function p9(e,t,n,r){const i=m9(n),a=e.value||"",o=i==="`"?"GraveAccent":"Tilde";if(h9(e,n)){const f=n.enter("codeIndented"),h=n.indentLines(a,g9);return f(),h}const s=n.createTracker(r),l=i.repeat(Math.max(f9(a,i)+1,3)),c=n.enter("codeFenced");let d=s.move(l);if(e.lang){const f=n.enter(`codeFencedLang${o}`);d+=s.move(n.safe(e.lang,{before:d,after:" ",encode:["`"],...s.current()})),f()}if(e.lang&&e.meta){const f=n.enter(`codeFencedMeta${o}`);d+=s.move(" "),d+=s.move(n.safe(e.meta,{before:d,after:`
`,encode:["`"],...s.current()})),f()}return d+=s.move(`
`),a&&(d+=s.move(a+`
`)),d+=s.move(l),c(),d}function g9(e,t,n){return(n?"":"    ")+e}function a0(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function y9(e,t,n,r){const i=a0(n),a=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let s=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(e),{before:c,after:"]",...l.current()})),c+=l.move("]: "),s(),!e.url||/[\0- \u007F]/.test(e.url)?(s=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(s=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":`
`,...l.current()}))),s(),e.title&&(s=n.enter(`title${a}`),c+=l.move(" "+i),c+=l.move(n.safe(e.title,{before:c,after:i,...l.current()})),c+=l.move(i),s()),o(),c}function v9(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function lc(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Xd(e,t,n){const r=os(e),i=os(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}kP.peek=x9;function kP(e,t,n,r){const i=v9(n),a=n.enter("emphasis"),o=n.createTracker(r),s=o.move(i);let l=o.move(n.containerPhrasing(e,{after:i,before:s,...o.current()}));const c=l.charCodeAt(0),d=Xd(r.before.charCodeAt(r.before.length-1),c,i);d.inside&&(l=lc(c)+l.slice(1));const f=l.charCodeAt(l.length-1),h=Xd(r.after.charCodeAt(0),f,i);h.inside&&(l=l.slice(0,-1)+lc(f));const m=o.move(i);return a(),n.attentionEncodeSurroundingInfo={after:h.outside,before:d.outside},s+l+m}function x9(e,t,n){return n.options.emphasis||"*"}function b9(e,t){let n=!1;return r0(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Sy}),!!((!e.depth||e.depth<3)&&Jx(e)&&(t.options.setext||n))}function w9(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),a=n.createTracker(r);if(b9(e,n)){const d=n.enter("headingSetext"),f=n.enter("phrasing"),h=n.containerPhrasing(e,{...a.current(),before:`
`,after:`
`});return f(),d(),h+`
`+(i===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const o="#".repeat(i),s=n.enter("headingAtx"),l=n.enter("phrasing");a.move(o+" ");let c=n.containerPhrasing(e,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(c)&&(c=lc(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),l(),s(),c}SP.peek=k9;function SP(e){return e.value||""}function k9(){return"<"}jP.peek=S9;function jP(e,t,n,r){const i=a0(n),a=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let s=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(e.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),s(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(s=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(s=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":")",...l.current()}))),s(),e.title&&(s=n.enter(`title${a}`),c+=l.move(" "+i),c+=l.move(n.safe(e.title,{before:c,after:i,...l.current()})),c+=l.move(i),s()),c+=l.move(")"),o(),c}function S9(){return"!"}CP.peek=j9;function CP(e,t,n,r){const i=e.referenceType,a=n.enter("imageReference");let o=n.enter("label");const s=n.createTracker(r);let l=s.move("![");const c=n.safe(e.alt,{before:l,after:"]",...s.current()});l+=s.move(c+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const f=n.safe(n.associationId(e),{before:l,after:"]",...s.current()});return o(),n.stack=d,a(),i==="full"||!c||c!==f?l+=s.move(f+"]"):i==="shortcut"?l=l.slice(0,-1):l+=s.move("]"),l}function j9(){return"!"}_P.peek=C9;function _P(e,t,n){let r=e.value||"",i="`",a=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const o=n.unsafe[a],s=n.compilePattern(o);let l;if(o.atBreak)for(;l=s.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return i+r+i}function C9(){return"`"}function EP(e,t){const n=Jx(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}NP.peek=_9;function NP(e,t,n,r){const i=a0(n),a=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let s,l;if(EP(e,n)){const d=n.stack;n.stack=[],s=n.enter("autolink");let f=o.move("<");return f+=o.move(n.containerPhrasing(e,{before:f,after:">",...o.current()})),f+=o.move(">"),s(),n.stack=d,f}s=n.enter("link"),l=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(e,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(e.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=n.enter("destinationRaw"),c+=o.move(n.safe(e.url,{before:c,after:e.title?" ":")",...o.current()}))),l(),e.title&&(l=n.enter(`title${a}`),c+=o.move(" "+i),c+=o.move(n.safe(e.title,{before:c,after:i,...o.current()})),c+=o.move(i),l()),c+=o.move(")"),s(),c}function _9(e,t,n){return EP(e,n)?"<":"["}PP.peek=E9;function PP(e,t,n,r){const i=e.referenceType,a=n.enter("linkReference");let o=n.enter("label");const s=n.createTracker(r);let l=s.move("[");const c=n.containerPhrasing(e,{before:l,after:"]",...s.current()});l+=s.move(c+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const f=n.safe(n.associationId(e),{before:l,after:"]",...s.current()});return o(),n.stack=d,a(),i==="full"||!c||c!==f?l+=s.move(f+"]"):i==="shortcut"?l=l.slice(0,-1):l+=s.move("]"),l}function E9(){return"["}function o0(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function N9(e){const t=o0(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function P9(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function OP(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function O9(e,t,n,r){const i=n.enter("list"),a=n.bulletCurrent;let o=e.ordered?P9(n):o0(n);const s=e.ordered?o==="."?")":".":N9(n);let l=t&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!e.ordered){const d=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),OP(n)===o&&d){let f=-1;for(;++f<e.children.length;){const h=e.children[f];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=s),n.bulletCurrent=o;const c=n.containerFlow(e,r);return n.bulletLastUsed=o,n.bulletCurrent=a,i(),c}function A9(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function T9(e,t,n,r){const i=A9(n);let a=n.bulletCurrent||o0(n);t&&t.type==="list"&&t.ordered&&(a=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+a);let o=a.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const s=n.createTracker(r);s.move(a+" ".repeat(o-a.length)),s.shift(o);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,s.current()),d);return l(),c;function d(f,h,m){return h?(m?"":" ".repeat(o))+f:(m?a:a+" ".repeat(o-a.length))+f}}function I9(e,t,n,r){const i=n.enter("paragraph"),a=n.enter("phrasing"),o=n.containerPhrasing(e,r);return a(),i(),o}const D9=yh(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function R9(e,t,n,r){return(e.children.some(function(o){return D9(o)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function M9(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}AP.peek=L9;function AP(e,t,n,r){const i=M9(n),a=n.enter("strong"),o=n.createTracker(r),s=o.move(i+i);let l=o.move(n.containerPhrasing(e,{after:i,before:s,...o.current()}));const c=l.charCodeAt(0),d=Xd(r.before.charCodeAt(r.before.length-1),c,i);d.inside&&(l=lc(c)+l.slice(1));const f=l.charCodeAt(l.length-1),h=Xd(r.after.charCodeAt(0),f,i);h.inside&&(l=l.slice(0,-1)+lc(f));const m=o.move(i+i);return a(),n.attentionEncodeSurroundingInfo={after:h.outside,before:d.outside},s+l+m}function L9(e,t,n){return n.options.strong||"*"}function $9(e,t,n,r){return n.safe(e.value,r)}function F9(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function U9(e,t,n){const r=(OP(n)+(n.options.ruleSpaces?" ":"")).repeat(F9(n));return n.options.ruleSpaces?r.slice(0,-1):r}const TP={blockquote:c9,break:Qk,code:p9,definition:y9,emphasis:kP,hardBreak:Qk,heading:w9,html:SP,image:jP,imageReference:CP,inlineCode:_P,link:NP,linkReference:PP,list:O9,listItem:T9,paragraph:I9,root:R9,strong:AP,text:$9,thematicBreak:U9};function z9(){return{enter:{table:B9,tableData:Zk,tableHeader:Zk,tableRow:q9},exit:{codeText:H9,table:W9,tableData:jp,tableHeader:jp,tableRow:jp}}}function B9(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function W9(e){this.exit(e),this.data.inTable=void 0}function q9(e){this.enter({type:"tableRow",children:[]},e)}function jp(e){this.exit(e)}function Zk(e){this.enter({type:"tableCell",children:[]},e)}function H9(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,K9));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function K9(e,t){return t==="|"?t:e}function V9(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:o,tableCell:l,tableRow:s}};function o(m,p,g,y){return c(d(m,g,y),m.align)}function s(m,p,g,y){const x=f(m,g,y),b=c([x]);return b.slice(0,b.indexOf(`
`))}function l(m,p,g,y){const x=g.enter("tableCell"),b=g.enter("phrasing"),w=g.containerPhrasing(m,{...y,before:a,after:a});return b(),x(),w}function c(m,p){return s9(m,{align:p,alignDelimiters:r,padding:n,stringLength:i})}function d(m,p,g){const y=m.children;let x=-1;const b=[],w=p.enter("table");for(;++x<y.length;)b[x]=f(y[x],p,g);return w(),b}function f(m,p,g){const y=m.children;let x=-1;const b=[],w=p.enter("tableRow");for(;++x<y.length;)b[x]=l(y[x],m,p,g);return w(),b}function h(m,p,g){let y=TP.inlineCode(m,p,g);return g.stack.includes("tableCell")&&(y=y.replace(/\|/g,"\\$&")),y}}function G9(){return{exit:{taskListCheckValueChecked:eS,taskListCheckValueUnchecked:eS,paragraph:J9}}}function Y9(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:X9}}}function eS(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function J9(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let a=-1,o;for(;++a<i.length;){const s=i[a];if(s.type==="paragraph"){o=s;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function X9(e,t,n,r){const i=e.children[0],a=typeof e.checked=="boolean"&&i&&i.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",s=n.createTracker(r);a&&s.move(o);let l=TP.listItem(e,t,n,{...r,...s.current()});return a&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(d){return d+o}}function Q9(){return[O8(),X8(),t9(),z9(),G9()]}function Z9(e){return{extensions:[A8(),Q8(e),n9(),V9(e),Y9()]}}const eW={tokenize:oW,partial:!0},IP={tokenize:sW,partial:!0},DP={tokenize:lW,partial:!0},RP={tokenize:cW,partial:!0},tW={tokenize:uW,partial:!0},MP={name:"wwwAutolink",tokenize:iW,previous:$P},LP={name:"protocolAutolink",tokenize:aW,previous:FP},bi={name:"emailAutolink",tokenize:rW,previous:UP},Kr={};function nW(){return{text:Kr}}let xa=48;for(;xa<123;)Kr[xa]=bi,xa++,xa===58?xa=65:xa===91&&(xa=97);Kr[43]=bi;Kr[45]=bi;Kr[46]=bi;Kr[95]=bi;Kr[72]=[bi,LP];Kr[104]=[bi,LP];Kr[87]=[bi,MP];Kr[119]=[bi,MP];function rW(e,t,n){const r=this;let i,a;return o;function o(f){return!Ey(f)||!UP.call(r,r.previous)||s0(r.events)?n(f):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),s(f))}function s(f){return Ey(f)?(e.consume(f),s):f===64?(e.consume(f),l):n(f)}function l(f){return f===46?e.check(tW,d,c)(f):f===45||f===95||Ut(f)?(a=!0,e.consume(f),l):d(f)}function c(f){return e.consume(f),i=!0,l}function d(f){return a&&i&&Gt(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(f)):n(f)}}function iW(e,t,n){const r=this;return i;function i(o){return o!==87&&o!==119||!$P.call(r,r.previous)||s0(r.events)?n(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(eW,e.attempt(IP,e.attempt(DP,a),n),n)(o))}function a(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function aW(e,t,n){const r=this;let i="",a=!1;return o;function o(f){return(f===72||f===104)&&FP.call(r,r.previous)&&!s0(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(f),e.consume(f),s):n(f)}function s(f){if(Gt(f)&&i.length<5)return i+=String.fromCodePoint(f),e.consume(f),s;if(f===58){const h=i.toLowerCase();if(h==="http"||h==="https")return e.consume(f),l}return n(f)}function l(f){return f===47?(e.consume(f),a?c:(a=!0,l)):n(f)}function c(f){return f===null||Gd(f)||Le(f)||Xa(f)||mh(f)?n(f):e.attempt(IP,e.attempt(DP,d),n)(f)}function d(f){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(f)}}function oW(e,t,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,e.consume(o),i):o===46&&r===3?(e.consume(o),a):n(o)}function a(o){return o===null?n(o):t(o)}}function sW(e,t,n){let r,i,a;return o;function o(c){return c===46||c===95?e.check(RP,l,s)(c):c===null||Le(c)||Xa(c)||c!==45&&mh(c)?l(c):(a=!0,e.consume(c),o)}function s(c){return c===95?r=!0:(i=r,r=void 0),e.consume(c),o}function l(c){return i||r||!a?n(c):t(c)}}function lW(e,t){let n=0,r=0;return i;function i(o){return o===40?(n++,e.consume(o),i):o===41&&r<n?a(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(RP,t,a)(o):o===null||Le(o)||Xa(o)?t(o):(e.consume(o),i)}function a(o){return o===41&&r++,e.consume(o),i}}function cW(e,t,n){return r;function r(s){return s===33||s===34||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===63||s===95||s===126?(e.consume(s),r):s===38?(e.consume(s),a):s===93?(e.consume(s),i):s===60||s===null||Le(s)||Xa(s)?t(s):n(s)}function i(s){return s===null||s===40||s===91||Le(s)||Xa(s)?t(s):r(s)}function a(s){return Gt(s)?o(s):n(s)}function o(s){return s===59?(e.consume(s),r):Gt(s)?(e.consume(s),o):n(s)}}function uW(e,t,n){return r;function r(a){return e.consume(a),i}function i(a){return Ut(a)?n(a):t(a)}}function $P(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Le(e)}function FP(e){return!Gt(e)}function UP(e){return!(e===47||Ey(e))}function Ey(e){return e===43||e===45||e===46||e===95||Ut(e)}function s0(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const dW={tokenize:xW,partial:!0};function fW(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:gW,continuation:{tokenize:yW},exit:vW}},text:{91:{name:"gfmFootnoteCall",tokenize:pW},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:hW,resolveTo:mW}}}}function hW(e,t,n){const r=this;let i=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return s;function s(l){if(!o||!o._balanced)return n(l);const c=yr(r.sliceSerialize({start:o.end,end:r.now()}));return c.codePointAt(0)!==94||!a.includes(c.slice(1))?n(l):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),t(l))}}function mW(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},s=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",a,t],["enter",o,t],["exit",o,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...s),e}function pW(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,o;return s;function s(f){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),l}function l(f){return f!==94?n(f):(e.enter("gfmFootnoteCallMarker"),e.consume(f),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",c)}function c(f){if(a>999||f===93&&!o||f===null||f===91||Le(f))return n(f);if(f===93){e.exit("chunkString");const h=e.exit("gfmFootnoteCallString");return i.includes(yr(r.sliceSerialize(h)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(f)}return Le(f)||(o=!0),a++,e.consume(f),f===92?d:c}function d(f){return f===91||f===92||f===93?(e.consume(f),a++,c):c(f)}}function gW(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,o=0,s;return l;function l(p){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(p){return p===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",d):n(p)}function d(p){if(o>999||p===93&&!s||p===null||p===91||Le(p))return n(p);if(p===93){e.exit("chunkString");const g=e.exit("gfmFootnoteDefinitionLabelString");return a=yr(r.sliceSerialize(g)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),h}return Le(p)||(s=!0),o++,e.consume(p),p===92?f:d}function f(p){return p===91||p===92||p===93?(e.consume(p),o++,d):d(p)}function h(p){return p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),i.includes(a)||i.push(a),Ce(e,m,"gfmFootnoteDefinitionWhitespace")):n(p)}function m(p){return t(p)}}function yW(e,t,n){return e.check(Oc,t,e.attempt(dW,t,n))}function vW(e){e.exit("gfmFootnoteDefinition")}function xW(e,t,n){const r=this;return Ce(e,i,"gfmFootnoteDefinitionIndent",4+1);function i(a){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(a):n(a)}}function bW(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,s){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},f={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},h=[["enter",d,s],["enter",o[c][1],s],["exit",o[c][1],s],["enter",f,s]],m=s.parser.constructs.insideSpan.null;m&&An(h,h.length,0,ph(m,o.slice(c+1,l),s)),An(h,h.length,0,[["exit",f,s],["enter",o[l][1],s],["exit",o[l][1],s],["exit",d,s]]),An(o,c-1,l-c+3,h),l=c+h.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function a(o,s,l){const c=this.previous,d=this.events;let f=0;return h;function h(p){return c===126&&d[d.length-1][1].type!=="characterEscape"?l(p):(o.enter("strikethroughSequenceTemporary"),m(p))}function m(p){const g=os(c);if(p===126)return f>1?l(p):(o.consume(p),f++,m);if(f<2&&!n)return l(p);const y=o.exit("strikethroughSequenceTemporary"),x=os(p);return y._open=!x||x===2&&!!g,y._close=!g||g===2&&!!x,s(p)}}}class wW{constructor(){this.map=[]}add(t,n,r){kW(this,t,n,r)}consume(t){if(this.map.sort(function(a,o){return a[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const a of i)t.push(a);i=r.pop()}this.map.length=0}}function kW(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function SW(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function jW(){return{flow:{null:{name:"table",tokenize:CW,resolveAll:_W}}}}function CW(e,t,n){const r=this;let i=0,a=0,o;return s;function s(E){let T=r.events.length-1;for(;T>-1;){const B=r.events[T][1].type;if(B==="lineEnding"||B==="linePrefix")T--;else break}const L=T>-1?r.events[T][1].type:null,$=L==="tableHead"||L==="tableRow"?k:l;return $===k&&r.parser.lazy[r.now().line]?n(E):$(E)}function l(E){return e.enter("tableHead"),e.enter("tableRow"),c(E)}function c(E){return E===124||(o=!0,a+=1),d(E)}function d(E){return E===null?n(E):fe(E)?a>1?(a=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(E),e.exit("lineEnding"),m):n(E):be(E)?Ce(e,d,"whitespace")(E):(a+=1,o&&(o=!1,i+=1),E===124?(e.enter("tableCellDivider"),e.consume(E),e.exit("tableCellDivider"),o=!0,d):(e.enter("data"),f(E)))}function f(E){return E===null||E===124||Le(E)?(e.exit("data"),d(E)):(e.consume(E),E===92?h:f)}function h(E){return E===92||E===124?(e.consume(E),f):f(E)}function m(E){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(E):(e.enter("tableDelimiterRow"),o=!1,be(E)?Ce(e,p,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(E):p(E))}function p(E){return E===45||E===58?y(E):E===124?(o=!0,e.enter("tableCellDivider"),e.consume(E),e.exit("tableCellDivider"),g):S(E)}function g(E){return be(E)?Ce(e,y,"whitespace")(E):y(E)}function y(E){return E===58?(a+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(E),e.exit("tableDelimiterMarker"),x):E===45?(a+=1,x(E)):E===null||fe(E)?j(E):S(E)}function x(E){return E===45?(e.enter("tableDelimiterFiller"),b(E)):S(E)}function b(E){return E===45?(e.consume(E),b):E===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(E),e.exit("tableDelimiterMarker"),w):(e.exit("tableDelimiterFiller"),w(E))}function w(E){return be(E)?Ce(e,j,"whitespace")(E):j(E)}function j(E){return E===124?p(E):E===null||fe(E)?!o||i!==a?S(E):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(E)):S(E)}function S(E){return n(E)}function k(E){return e.enter("tableRow"),_(E)}function _(E){return E===124?(e.enter("tableCellDivider"),e.consume(E),e.exit("tableCellDivider"),_):E===null||fe(E)?(e.exit("tableRow"),t(E)):be(E)?Ce(e,_,"whitespace")(E):(e.enter("data"),N(E))}function N(E){return E===null||E===124||Le(E)?(e.exit("data"),_(E)):(e.consume(E),E===92?P:N)}function P(E){return E===92||E===124?(e.consume(E),N):N(E)}}function _W(e,t){let n=-1,r=!0,i=0,a=[0,0,0,0],o=[0,0,0,0],s=!1,l=0,c,d,f;const h=new wW;for(;++n<e.length;){const m=e[n],p=m[1];m[0]==="enter"?p.type==="tableHead"?(s=!1,l!==0&&(tS(h,t,l,c,d),d=void 0,l=0),c={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},h.add(n,0,[["enter",c,t]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(r=!0,f=void 0,a=[0,0,0,0],o=[0,n+1,0,0],s&&(s=!1,d={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},h.add(n,0,[["enter",d,t]])),i=p.type==="tableDelimiterRow"?2:d?3:1):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(a[1]!==0&&(o[0]=o[1],f=Nu(h,t,a,i,void 0,f),a=[0,0,0,0]),o[2]=n)):p.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(o[0]=o[1],f=Nu(h,t,a,i,void 0,f)),a=o,o=[a[1],n,0,0])):p.type==="tableHead"?(s=!0,l=n):p.type==="tableRow"||p.type==="tableDelimiterRow"?(l=n,a[1]!==0?(o[0]=o[1],f=Nu(h,t,a,i,n,f)):o[1]!==0&&(f=Nu(h,t,o,i,n,f)),i=0):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&tS(h,t,l,c,d),h.consume(t.events),n=-1;++n<t.events.length;){const m=t.events[n];m[0]==="enter"&&m[1].type==="table"&&(m[1]._align=SW(t.events,n))}return e}function Nu(e,t,n,r,i,a){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",s="tableContent";n[0]!==0&&(a.end=Object.assign({},Co(t.events,n[0])),e.add(n[0],0,[["exit",a,t]]));const l=Co(t.events,n[1]);if(a={type:o,start:Object.assign({},l),end:Object.assign({},l)},e.add(n[1],0,[["enter",a,t]]),n[2]!==0){const c=Co(t.events,n[2]),d=Co(t.events,n[3]),f={type:s,start:Object.assign({},c),end:Object.assign({},d)};if(e.add(n[2],0,[["enter",f,t]]),r!==2){const h=t.events[n[2]],m=t.events[n[3]];if(h[1].end=Object.assign({},m[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const p=n[2]+1,g=n[3]-n[2]-1;e.add(p,g,[])}}e.add(n[3]+1,0,[["exit",f,t]])}return i!==void 0&&(a.end=Object.assign({},Co(t.events,i)),e.add(i,0,[["exit",a,t]]),a=void 0),a}function tS(e,t,n,r,i){const a=[],o=Co(t.events,n);i&&(i.end=Object.assign({},o),a.push(["exit",i,t])),r.end=Object.assign({},o),a.push(["exit",r,t]),e.add(n+1,0,a)}function Co(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const EW={name:"tasklistCheck",tokenize:PW};function NW(){return{text:{91:EW}}}function PW(e,t,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),a)}function a(l){return Le(l)?(e.enter("taskListCheckValueUnchecked"),e.consume(l),e.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(e.enter("taskListCheckValueChecked"),e.consume(l),e.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),s):n(l)}function s(l){return fe(l)?t(l):be(l)?e.check({tokenize:OW},t,n)(l):n(l)}}function OW(e,t,n){return Ce(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function AW(e){return JN([nW(),fW(),bW(e),jW(),NW()])}const TW={};function IW(e){const t=this,n=e||TW,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(AW(n)),a.push(Q9()),o.push(Z9(n))}const DW=({citations:e})=>{const t=r=>{switch(r){case"web":return"🌐";case"document":return"📄";case"kb":return"📚";case"blob":return"💾";default:return"📎"}},n=r=>{r.sourceId&&r.sourceId.startsWith("http")&&window.open(r.sourceId,"_blank","noopener,noreferrer")};return u.jsxs("div",{className:"card p-3 rounded-md border",style:{backgroundColor:"var(--bg-secondary)"},children:[u.jsx("h4",{className:"text-sm font-medium mb-2",style:{color:"var(--text)"},children:"References"}),u.jsx("div",{className:"space-y-2",children:e.map(r=>u.jsx("div",{className:`p-2 rounded border cursor-pointer transition-colors ${r.sourceId&&r.sourceId.startsWith("http")?"hover:bg-gray-50":"cursor-default"}`,style:{borderColor:"var(--border)",backgroundColor:"var(--card)"},onClick:()=>n(r),children:u.jsxs("div",{className:"flex items-start space-x-2",children:[u.jsx("span",{className:"text-sm",children:t(r.sourceType)}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h5",{className:"text-sm font-medium truncate",style:{color:"var(--text)"},children:r.title||"Untitled Source"}),r.snippet&&u.jsx("p",{className:"text-xs mt-1 line-clamp-2",style:{color:"var(--text-secondary)"},children:r.snippet}),r.sourceId&&u.jsx("p",{className:"text-xs mt-1 truncate",style:{color:"var(--text-muted)"},children:r.sourceId})]})]})},r.id))})]})},RW=({messageId:e})=>{const[t,n]=v.useState(null),[r,i]=v.useState(!1),[a,o]=v.useState(null),[s,l]=v.useState(""),[c,d]=v.useState(null),f=m=>{o(m),i(!0),l("")},h=async()=>{if(a!==null)try{const m=yt();if(!m||!m.userId){console.error("No user session found"),alert("Please log in to submit feedback");return}const p=e,g=a===1?"good":"bad";console.log("Submitting feedback:",{chatId:p,userId:m.userId,reaction:g,feedbackText:s}),await Bx(p,m.userId,g,s||void 0),console.log("✅ Feedback submitted successfully"),n(a),i(!1),l(""),d("success"),setTimeout(()=>d(null),3e3)}catch(m){console.error("Failed to submit feedback:",m),i(!1),d("error"),setTimeout(()=>d(null),3e3)}};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{onClick:()=>f(1),className:`p-1 rounded transition-colors ${t===1?"bg-green-100 text-green-600":"hover:bg-gray-100"}`,style:{backgroundColor:t===1?"var(--success-light)":"transparent",color:t===1?"var(--success)":"var(--text-muted)"},title:"Thumbs up",children:u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"})})}),u.jsx("button",{onClick:()=>f(-1),className:`p-1 rounded transition-colors ${t===-1?"bg-red-100 text-red-600":"hover:bg-gray-100"}`,style:{backgroundColor:t===-1?"var(--error-light)":"transparent",color:t===-1?"var(--error)":"var(--text-muted)"},title:"Thumbs down",children:u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"})})})]}),r&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"card p-6 rounded-lg max-w-md w-full mx-4",style:{backgroundColor:"var(--card)"},children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--text)"},children:"Submit feedback to HR Ax Pro"}),u.jsx("button",{onClick:()=>i(!1),className:"p-1 hover:bg-gray-100 rounded",style:{color:"var(--text-secondary)"},children:u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),u.jsx("p",{className:"text-sm mb-3",style:{color:"var(--text)"},children:"What did you like?"}),u.jsx("textarea",{value:s,onChange:m=>l(m.target.value),placeholder:"Give as much detail as you can, but don't include any private or sensitive information.",className:"input w-full h-24 resize-none text-sm",style:{backgroundColor:"var(--bg)",color:"var(--text)",borderColor:"var(--border)",padding:"12px"},autoFocus:!0}),u.jsx("p",{className:"text-xs mt-2 mb-4",style:{color:"var(--text-secondary)"},children:"We'll also share the content you're providing feedback on to help improve future responses."}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{onClick:h,className:"px-6 py-2 text-sm font-medium rounded-md",style:{backgroundColor:"var(--primary)",color:"white"},children:"Submit"})})]})}),c&&u.jsx("div",{className:"fixed bottom-4 right-4 px-4 py-3 rounded-lg shadow-lg z-50 flex items-center space-x-2",style:{backgroundColor:c==="success"?"var(--success, #10b981)":"var(--error, #ef4444)",color:"white"},children:c==="success"?u.jsxs(u.Fragment,{children:[u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),u.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),u.jsx("span",{children:"Feedback submitted successfully!"})]}):u.jsxs(u.Fragment,{children:[u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),u.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),u.jsx("span",{children:"Failed to submit feedback. Please try again."})]})})]})},nS=e=>btoa(e),MW=e=>{try{return atob(e)}catch{return""}},il="axpro_api_configs",Cp="axpro_ui_customization",Kn={getConfigs(){try{const e=localStorage.getItem(il);return e?JSON.parse(e).map(n=>({...n,apiKey:MW(n.apiKey)})):[]}catch{return[]}},saveConfig(e){const t=this.getConfigs(),n=new Date().toISOString(),r={...e,id:`config_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,apiKey:e.apiKey,createdAt:n,updatedAt:n},i={...r,apiKey:nS(r.apiKey)},a=[...t.filter(o=>o.id!==e.id),i];return localStorage.setItem(il,JSON.stringify(a)),r},updateConfig(e,t){const n=this.getConfigs(),r=n.findIndex(o=>o.id===e);if(r===-1)return null;const i={...n[r],...t,updatedAt:new Date().toISOString()},a={...i,apiKey:nS(i.apiKey)};return n[r]=a,localStorage.setItem(il,JSON.stringify(n)),i},deleteConfig(e){const t=this.getConfigs(),n=t.filter(r=>r.id!==e);return n.length===t.length?!1:(localStorage.setItem(il,JSON.stringify(n)),!0)},getActiveConfig(){return this.getConfigs().find(t=>t.isActive)||null},setActiveConfig(e){const t=this.getConfigs();if(!t.find(i=>i.id===e))return!1;const r=t.map(i=>({...i,isActive:i.id===e}));return localStorage.setItem(il,JSON.stringify(r)),!0},getUICustomization(){const e={chatTitle:"Chat Interface",chatSubtitle:"Select a conversation from the sidebar or start a new chat",avatarUrl:"/default-profile-avatar.png",suggestedQuestions:{question1:"What is artificial intelligence?",question2:"How does machine learning work?",question3:"Explain quantum computing",question4:"What are the benefits of cloud computing?"}};try{const t=localStorage.getItem(Cp);if(!t)return e;const n=JSON.parse(t);return{...e,...n}}catch{return e}},saveUICustomization(e){localStorage.setItem(Cp,JSON.stringify(e))},resetUICustomization(){localStorage.removeItem(Cp)}},Er={chatTitle:"TecAce Ax Pro",chatSubtitle:"Select a conversation from the sidebar or start a new chat",avatarUrl:"/default-profile-avatar.png",suggestedQuestions:{question1:"What is artificial intelligence?",question2:"How does machine learning work?",question3:"Explain quantum computing",question4:"What are the benefits of cloud computing?"}};async function LW(){try{const e=Ie(),{data:t,error:n}=await e.from("ui_settings").select("*").eq("id","global").maybeSingle();return n?(console.error("Error fetching UI customization:",n),Er):t?{chatTitle:t.chat_title||Er.chatTitle,chatSubtitle:t.chat_subtitle||Er.chatSubtitle,avatarUrl:t.avatar_url||Er.avatarUrl,suggestedQuestions:{question1:t.question_1||Er.suggestedQuestions.question1,question2:t.question_2||Er.suggestedQuestions.question2,question3:t.question_3||Er.suggestedQuestions.question3,question4:t.question_4||Er.suggestedQuestions.question4}}:(console.log("No UI customization found in database, using defaults"),Er)}catch(e){return console.error("Failed to fetch UI customization:",e),Er}}async function $W(e){try{const t=Ie(),{error:n}=await t.from("ui_settings").upsert({id:"global",chat_title:e.chatTitle,chat_subtitle:e.chatSubtitle,avatar_url:e.avatarUrl,question_1:e.suggestedQuestions.question1,question_2:e.suggestedQuestions.question2,question_3:e.suggestedQuestions.question3,question_4:e.suggestedQuestions.question4,updated_at:new Date().toISOString()},{onConflict:"id"});return n?(console.error("Error saving UI customization:",n),!1):(console.log("✅ UI customization saved to Supabase"),!0)}catch(t){return console.error("Failed to save UI customization:",t),!1}}const Tc=()=>{const[e,t]=v.useState(()=>Kn.getUICustomization()),[n,r]=v.useState(!0);v.useEffect(()=>{i()},[]);const i=async()=>{r(!0);try{const l=await LW();t(l),Kn.saveUICustomization(l)}catch(l){console.error("Failed to load UI customization:",l);const c=Kn.getUICustomization();t(c)}finally{r(!1)}},a=async l=>{r(!0);try{const c={...e,...l};await $W(c)?(t(c),Kn.saveUICustomization(c),console.log("✅ UI customization updated successfully")):(console.error("Failed to save to Supabase, falling back to localStorage"),Kn.saveUICustomization(c),t(c))}catch(c){console.error("Failed to update UI customization:",c)}finally{r(!1)}};return{customization:e,loading:n,updateCustomization:a,updateQuestion:(l,c)=>{a({suggestedQuestions:{...e.suggestedQuestions,[l]:c}})},resetCustomization:()=>{r(!0);try{Kn.resetUICustomization();const l=Kn.getUICustomization();t(l)}catch(l){console.error("Failed to reset UI customization:",l)}finally{r(!1)}}}},FW=({message:e})=>{const[t,n]=v.useState(!1),{customization:r}=Tc(),i=e.role==="user",a=e.role==="assistant",o=e.id.startsWith("sim_"),s=l=>new Date(l).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return u.jsxs("div",{className:`flex ${i?"justify-end":"justify-start"} gap-3`,children:[a&&u.jsx("div",{className:"flex-shrink-0",children:u.jsx("img",{src:r.avatarUrl,alt:"Assistant",className:"w-8 h-8 rounded-full",style:{objectFit:"cover"}})}),u.jsxs("div",{className:`max-w-xs lg:max-w-md xl:max-w-lg ${i?"order-2":"order-1"}`,children:[u.jsx("div",{className:`p-3 rounded-lg ${i?"message-user":"message-assistant"}`,children:u.jsx("div",{className:"prose prose-sm max-w-none",style:{fontSize:"14px",lineHeight:"1.5",color:i?"#ffffff":"var(--text)"},children:e.content&&e.content.trim()?u.jsx(b8,{remarkPlugins:[IW],components:{p:({children:l})=>u.jsx("p",{style:{margin:"0 0 8px 0"},children:l}),code:({children:l,className:c})=>!c?u.jsx("code",{style:{backgroundColor:i?"rgba(255,255,255,0.2)":"var(--bg-secondary)",color:i?"#ffffff":"var(--text)",padding:"2px 4px",borderRadius:"3px",fontSize:"0.9em"},children:l}):u.jsx("pre",{style:{backgroundColor:i?"rgba(255,255,255,0.2)":"var(--bg-secondary)",color:i?"#ffffff":"var(--text)",padding:"8px",borderRadius:"4px",overflow:"auto",margin:"8px 0"},children:u.jsx("code",{children:l})}),ul:({children:l})=>u.jsx("ul",{style:{margin:"8px 0",paddingLeft:"20px"},children:l}),ol:({children:l})=>u.jsx("ol",{style:{margin:"8px 0",paddingLeft:"20px"},children:l}),li:({children:l})=>u.jsx("li",{style:{margin:"4px 0"},children:l}),blockquote:({children:l})=>u.jsx("blockquote",{style:{borderLeft:`3px solid ${i?"rgba(255,255,255,0.3)":"var(--border)"}`,paddingLeft:"12px",margin:"8px 0",fontStyle:"italic",color:i?"#ffffff":"var(--text)"},children:l}),h1:({children:l})=>u.jsx("h1",{style:{fontSize:"1.2em",fontWeight:"bold",margin:"8px 0",color:i?"#ffffff":"var(--text)"},children:l}),h2:({children:l})=>u.jsx("h2",{style:{fontSize:"1.1em",fontWeight:"bold",margin:"8px 0",color:i?"#ffffff":"var(--text)"},children:l}),h3:({children:l})=>u.jsx("h3",{style:{fontSize:"1em",fontWeight:"bold",margin:"8px 0",color:i?"#ffffff":"var(--text)"},children:l})},children:e.content}):u.jsx("span",{style:{color:i?"rgba(255,255,255,0.7)":"var(--text-muted)",fontStyle:"italic"},children:e.role==="assistant"?"Thinking...":"No content available"})})}),u.jsxs("div",{className:`flex items-center gap-2 mt-1 ${i?"justify-end":"justify-start"}`,children:[u.jsx("div",{className:"text-xs",style:{color:"var(--text-muted)"},children:s(e.createdAt)}),o&&a&&u.jsx("div",{className:"text-xs px-2 py-0.5 rounded",style:{backgroundColor:"var(--warning-bg, rgba(255, 193, 7, 0.1))",color:"var(--warning-text, #ff9800)",border:"1px solid var(--warning-border, rgba(255, 152, 0, 0.3))",fontSize:"10px",fontWeight:"500"},children:"SIMULATION MODE"})]}),a&&u.jsxs("div",{className:"mt-2 space-y-2",children:[e.citations&&e.citations.length>0&&u.jsxs("button",{onClick:()=>n(!t),className:"text-xs link flex items-center space-x-2",children:[u.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),u.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),u.jsxs("span",{children:[t?"Hide":"Show"," References (",e.citations.length,")"]})]}),t&&e.citations&&u.jsx(DW,{citations:e.citations}),!o&&u.jsx(RW,{messageId:e.id})]})]})]})},UW=({onSend:e,disabled:t=!1})=>{const[n,r]=v.useState(""),i=v.useRef(null),a=_c(),o=c=>{c.preventDefault(),n.trim()&&!t&&(e(n.trim()),r(""))},s=c=>{c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),o(c))},l=()=>{const c=i.current;c&&(c.style.height="auto",c.style.height=`${Math.min(c.scrollHeight,120)}px`)};return v.useEffect(()=>{l()},[n]),u.jsx("form",{onSubmit:o,className:"relative",children:u.jsxs("div",{className:"relative",children:[u.jsx("textarea",{ref:i,value:n,onChange:c=>r(c.target.value),onKeyDown:s,placeholder:a("ui.typeMessage"),className:"w-full resize-none rounded-2xl px-4 py-3 pr-12 min-h-[52px] max-h-[200px] border focus:outline-none focus:ring-0 focus:border-transparent transition-all",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border)",color:"var(--text)",fontSize:"16px",boxShadow:"0 0 0 1px var(--border)"},disabled:t,rows:1}),u.jsx("button",{type:"submit",disabled:!n.trim()||t,className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-2 rounded-lg transition-all disabled:opacity-30 disabled:cursor-not-allowed",style:{backgroundColor:n.trim()&&!t?"var(--primary)":"transparent",color:n.trim()&&!t?"white":"var(--text-muted)"},children:u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"m22 2-7 20-4-9-9-4Z"}),u.jsx("path",{d:"M22 2 11 13"})]})})]})})},zW=({sessionId:e,isClosed:t=!1})=>{const{messages:n,loading:r,sending:i,error:a,sendMessage:o}=WU(e),s=v.useRef(null);_c();const{customization:l}=Tc();si.useEffect(()=>{console.log("ThreadView messages for sessionId:",e,n)},[n,e]);const c=()=>{var d;(d=s.current)==null||d.scrollIntoView({behavior:"smooth"})};return v.useEffect(()=>{c()},[n]),r?u.jsx("div",{className:"flex-1 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto mb-4",style:{borderColor:"var(--primary)"}}),u.jsx("p",{style:{color:"var(--text-secondary)"},children:"Loading conversation..."})]})}):u.jsxs("div",{className:"flex-1 flex flex-col h-full",children:[u.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:n.length===0?u.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-8",children:u.jsxs("div",{className:"max-w-2xl w-full text-center",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-4xl font-light mb-4",style:{color:"var(--text)"},children:l.chatTitle}),u.jsx("p",{className:"text-lg",style:{color:"var(--text-secondary)"},children:l.chatSubtitle})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-w-3xl mx-auto",children:[u.jsx("button",{onClick:()=>o(l.suggestedQuestions.question1),className:"p-4 text-left rounded-lg border hover:bg-gray-50 transition-colors",style:{borderColor:"var(--border)",backgroundColor:"var(--card)",color:"var(--text)"},children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--bg-secondary)"},children:u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),u.jsx("circle",{cx:"12",cy:"5",r:"2"}),u.jsx("path",{d:"M12 7v4"})]})}),u.jsx("span",{className:"text-sm",children:l.suggestedQuestions.question1})]})}),u.jsx("button",{onClick:()=>o(l.suggestedQuestions.question2),className:"p-4 text-left rounded-lg border hover:bg-gray-50 transition-colors",style:{borderColor:"var(--border)",backgroundColor:"var(--card)",color:"var(--text)"},children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--bg-secondary)"},children:u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1 .34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"}),u.jsx("path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0-.34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"})]})}),u.jsx("span",{className:"text-sm",children:l.suggestedQuestions.question2})]})}),u.jsx("button",{onClick:()=>o(l.suggestedQuestions.question3),className:"p-4 text-left rounded-lg border hover:bg-gray-50 transition-colors",style:{borderColor:"var(--border)",backgroundColor:"var(--card)",color:"var(--text)"},children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--bg-secondary)"},children:u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M8 12h8"}),u.jsx("path",{d:"M12 8v8"})]})}),u.jsx("span",{className:"text-sm",children:l.suggestedQuestions.question3})]})}),u.jsx("button",{onClick:()=>o(l.suggestedQuestions.question4),className:"p-4 text-left rounded-lg border hover:bg-gray-50 transition-colors",style:{borderColor:"var(--border)",backgroundColor:"var(--card)",color:"var(--text)"},children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--bg-secondary)"},children:u.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"})})}),u.jsx("span",{className:"text-sm",children:l.suggestedQuestions.question4})]})})]})]})}):u.jsxs("div",{className:"p-4 space-y-4",children:[n.map(d=>(console.log("Rendering message:",d),u.jsx(FW,{message:d},d.id))),u.jsx("div",{ref:s})]})}),a&&u.jsx("div",{className:"px-4 py-2 flex-shrink-0",children:u.jsx("div",{className:"error p-3 rounded-md",children:u.jsx("p",{className:"text-sm",children:a})})}),u.jsx("div",{className:"border-t p-4 flex-shrink-0",style:{borderColor:"var(--border)"},children:t?u.jsx("div",{className:"flex items-center justify-center p-4 rounded-lg",style:{backgroundColor:"var(--muted)"},children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl mb-2",children:"🔒"}),u.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text)"},children:"This chat is closed"}),u.jsx("p",{className:"text-xs mt-1",style:{color:"var(--text-secondary)"},children:"Reopen the chat to continue the conversation"})]})}):u.jsx(UW,{onSend:d=>o(d),disabled:i})})]})},rS=()=>{const{sessionId:e}=Y2(),t=Wt(),{theme:n,toggleTheme:r}=qr(),{language:i,setLanguage:a,t:o}=Ze(),{customization:s}=Tc(),[l,c]=v.useState(null),[d,f]=v.useState(!0),[h,m]=v.useState(null);v.useEffect(()=>{(async()=>{try{const y=await hy.getMe();c({...y,userId:y.email}),f(!0)}catch(y){console.log("Backend auth failed, trying local auth:",y),f(!1);const x=yt();x?c({email:x.email,userId:x.email,role:x.role}):(console.log("No local session found, redirecting to login"),t("/"))}})()},[t]),v.useEffect(()=>{if(e){const y=JSON.parse(localStorage.getItem("axpro_sim_sessions")||"[]").find(x=>x.id===e);m(y)}},[e]);const p=async()=>{try{await hy.logout()}catch(g){console.log("Backend logout failed, using local logout:",g)}na(),t("/")};return l?u.jsxs("div",{className:"h-screen flex overflow-hidden",style:{backgroundColor:"var(--bg)"},children:[u.jsxs("div",{className:"w-80 border-r flex flex-col h-full",style:{borderColor:"var(--border)"},children:[u.jsxs("div",{className:"p-4 border-b flex-shrink-0 sticky top-0 z-10",style:{borderColor:"var(--border)",backgroundColor:"var(--bg)"},children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h1",{className:"text-lg font-semibold",style:{color:"var(--text)"},children:s.chatTitle}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{onClick:r,className:"text-sm px-2 py-1 rounded border",style:{backgroundColor:"var(--card)",borderColor:"var(--border)",color:"var(--text)"},title:o(n==="light"?"ui.theme.dark":"ui.theme.light"),children:n==="light"?u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}):u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"12",cy:"12",r:"5"}),u.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),u.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),u.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),u.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),u.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),u.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),u.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),u.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]})}),u.jsxs("select",{value:i,onChange:g=>a(g.target.value),className:"text-sm px-2 py-1 rounded border bg-transparent",style:{borderColor:"var(--border)",color:"var(--text)"},children:[u.jsx("option",{value:"en",children:"EN"}),u.jsx("option",{value:"ko",children:"KO"})]})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text)"},children:l.email}),u.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:l.role==="admin"?"Administrator":o("ui.user")})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[l.role==="admin"&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>t("/admin/dashboard"),className:"p-2 rounded-md border transition-colors",style:{borderColor:"var(--border)",color:"var(--text)"},title:o("ui.dashboard"),children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),u.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),u.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),u.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]})}),u.jsx("button",{onClick:()=>t("/settings"),className:"p-2 rounded-md border transition-colors",style:{borderColor:"var(--border)",color:"var(--text)"},title:o("ui.settings"),children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"12",cy:"12",r:"3"}),u.jsx("path",{d:"M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"})]})})]}),u.jsx("button",{onClick:p,className:"text-sm link",children:o("ui.signOut")})]})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto",children:u.jsx(kU,{})})]}),u.jsx("div",{className:"flex-1 flex flex-col h-full",children:e?u.jsxs("div",{className:"flex-1 flex flex-col h-full",children:[u.jsx("div",{className:"flex items-center justify-between p-4 border-b flex-shrink-0 sticky top-0 z-10",style:{borderColor:"var(--border)",backgroundColor:"var(--bg)"},children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("img",{src:s.avatarUrl,alt:"Chatbot Avatar",className:"w-10 h-10 rounded-full flex-shrink-0",style:{objectFit:"cover"},onError:g=>{g.currentTarget.src="/default-profile-avatar.png"}}),u.jsx("h2",{className:"text-lg font-medium",style:{color:"var(--text)"},children:(h==null?void 0:h.title)||o("ui.newChatTitle")}),(h==null?void 0:h.status)==="closed"&&u.jsx("span",{className:"text-xs px-2 py-1 rounded bg-gray-100",style:{color:"var(--text-muted)"},children:"🔒 Closed"}),u.jsx("button",{onClick:()=>{if((h==null?void 0:h.status)==="closed"){const y=JSON.parse(localStorage.getItem("axpro_sim_sessions")||"[]").map(x=>x.id===e?{...x,status:"open"}:x);localStorage.setItem("axpro_sim_sessions",JSON.stringify(y)),m({...h,status:"open"}),window.dispatchEvent(new CustomEvent("sessionUpdated"))}else{const y=JSON.parse(localStorage.getItem("axpro_sim_sessions")||"[]").map(x=>x.id===e?{...x,status:"closed"}:x);localStorage.setItem("axpro_sim_sessions",JSON.stringify(y)),m({...h,status:"closed"}),window.dispatchEvent(new CustomEvent("sessionUpdated"))}},className:"text-sm px-3 py-1 rounded border hover:bg-gray-50",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:(h==null?void 0:h.status)==="closed"?u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),u.jsx("path",{d:"M21 3v5h-5"}),u.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),u.jsx("path",{d:"M3 21v-5h5"})]}),u.jsxs("span",{children:[o("context.reopen")," ",o("ui.newChatTitle")]})]}):u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),u.jsx("path",{d:"M9 9h6v6H9z"})]}),u.jsx("span",{children:o("ui.closeChat")})]})})]})}),u.jsx(zW,{sessionId:e,isClosed:(h==null?void 0:h.status)==="closed"})]}):u.jsx("div",{className:"flex-1 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text)"},children:o("chat.welcome")}),u.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:o("ui.selectConversation")})]})})})]}):u.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"var(--bg)"},children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto mb-4",style:{borderColor:"var(--primary)"}}),u.jsx("p",{style:{color:"var(--text-secondary)"},children:"Loading..."})]})})},BW=()=>{const e=Wt(),t=yt(),n=_c(),r=()=>{na(),e("/")};return u.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"var(--bg)"},children:[u.jsx("header",{className:"card border-b",style:{borderColor:"var(--border)"},children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex justify-between items-center h-16",children:[u.jsx("div",{className:"flex items-center",children:u.jsx("h1",{className:"text-xl font-semibold",style:{color:"var(--text)"},children:n("dashboard.title")})}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Admin: ",t==null?void 0:t.email]}),u.jsx("button",{onClick:r,className:"link text-sm",children:"Sign Out"})]})]})})}),u.jsxs("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"card p-6 rounded-lg",children:[u.jsx("h3",{className:"text-lg font-medium mb-2",style:{color:"var(--text)"},children:"Total Users"}),u.jsx("p",{className:"text-3xl font-light",style:{color:"var(--primary)"},children:"1,234"}),u.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-muted)"},children:"+12% from last month"})]}),u.jsxs("div",{className:"card p-6 rounded-lg",children:[u.jsx("h3",{className:"text-lg font-medium mb-2",style:{color:"var(--text)"},children:"Active Sessions"}),u.jsx("p",{className:"text-3xl font-light",style:{color:"var(--success)"},children:"89"}),u.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-muted)"},children:"Currently online"})]}),u.jsxs("div",{className:"card p-6 rounded-lg",children:[u.jsx("h3",{className:"text-lg font-medium mb-2",style:{color:"var(--text)"},children:"System Status"}),u.jsx("p",{className:"text-3xl font-light",style:{color:"var(--success)"},children:"Healthy"}),u.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-muted)"},children:"All systems operational"})]})]}),u.jsxs("div",{className:"mt-8 card p-8 rounded-lg",children:[u.jsx("h2",{className:"text-xl font-semibold mb-6",style:{color:"var(--text)"},children:"Admin Panel"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"border rounded-lg p-4",style:{borderColor:"var(--border)"},children:[u.jsx("h3",{className:"text-lg font-medium mb-2",style:{color:"var(--text)"},children:"User Management"}),u.jsx("p",{className:"mb-4",style:{color:"var(--text-secondary)"},children:"Manage user accounts and permissions"}),u.jsx("button",{className:"btn-primary px-4 py-2 rounded-md text-sm",children:"Manage Users"})]}),u.jsxs("div",{className:"border rounded-lg p-4",style:{borderColor:"var(--border)"},children:[u.jsx("h3",{className:"text-lg font-medium mb-2",style:{color:"var(--text)"},children:"System Settings"}),u.jsx("p",{className:"mb-4",style:{color:"var(--text-secondary)"},children:"Configure platform settings"}),u.jsx("button",{className:"btn-primary px-4 py-2 rounded-md text-sm",children:"Settings"})]})]}),u.jsx("div",{className:"mt-6 card rounded-md p-4",style:{backgroundColor:"var(--primary-light)"},children:u.jsxs("p",{className:"text-sm",style:{color:"var(--primary)"},children:[u.jsx("strong",{children:"Demo Mode:"})," You are logged in as an administrator. Admin features will be implemented here."]})})]})]})]})},WW=()=>{const e=Wt(),{theme:t,toggleTheme:n}=qr(),{language:r,setLanguage:i}=Ze(),[a,o]=v.useState([]),[s,l]=v.useState([]),[c,d]=v.useState("ui"),[f,h]=v.useState("supabase"),[m,p]=v.useState(!1),[g,y]=v.useState(null),[x,b]=v.useState(null),[w,j]=v.useState(!1),{customization:S,updateCustomization:k,updateQuestion:_,resetCustomization:N}=Tc();v.useEffect(()=>{const V=new URLSearchParams(window.location.search).get("tab");(V==="ui"||V==="photo")&&d("ui")},[]);const[P,E]=v.useState({name:"",baseUrl:"",apiKey:"",model:"gpt-3.5-turbo",temperature:.7,maxTokens:1e3}),[T,L]=v.useState({name:"",webhookUrl:""}),[$,B]=v.useState({url:"",anonKey:""}),[D,z]=v.useState(!1),[G,I]=v.useState(null),[R,C]=v.useState(!1),[Q,q]=v.useState(!1),[A,le]=v.useState(""),[U,Z]=v.useState({x:50,y:50}),[J,ne]=v.useState(100),[X,M]=v.useState("");v.useEffect(()=>{he(),ce(),Y(),F()},[]);const Y=()=>{const O=RU();B(O)},F=()=>{const O=my();C(O)},he=()=>{const O=Kn.getConfigs();o(O)},ce=()=>{const O=fh();l(O)},ke=O=>{O.preventDefault(),g?Kn.updateConfig(g.id,P):Kn.saveConfig({...P,isActive:a.length===0}),he(),Pe()},Pe=()=>{E({name:"",baseUrl:"",apiKey:"",model:"gpt-3.5-turbo",temperature:.7,maxTokens:1e3}),p(!1),y(null)},Ee=O=>{E({name:O.name,baseUrl:O.baseUrl,apiKey:O.apiKey,model:O.model||"gpt-3.5-turbo",temperature:O.temperature||.7,maxTokens:O.maxTokens||1e3}),y(O),p(!0)},Re=O=>{window.confirm("Are you sure you want to delete this configuration?")&&(Kn.deleteConfig(O),he())},en=O=>{Kn.setActiveConfig(O),he()},Sr=O=>{O.preventDefault(),x?OU(x.id,T):PU({...T,isActive:s.length===0}),ce(),Ei()},Ei=()=>{L({name:"",webhookUrl:""}),p(!1),b(null)},jr=O=>{L({name:O.name,webhookUrl:O.webhookUrl}),b(O),p(!0)},H=O=>{window.confirm("Are you sure you want to delete this n8n configuration?")&&(AU(O),ce())},se=O=>{TN(O),ce()},me=async O=>{j(!0);try{const V=await IU(O);alert(V?"✅ Connection successful!":"❌ Connection failed. Please check your webhook URL.")}catch{alert("❌ Connection failed. Please check your webhook URL.")}finally{j(!1)}};return u.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"var(--bg)"},children:[u.jsxs("div",{className:"flex justify-between items-center p-4 border-b",style:{borderColor:"var(--border)"},children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("button",{onClick:()=>e("/chat"),className:"text-sm link",children:"← Back to Chat"}),u.jsx("h1",{className:"text-xl font-semibold",style:{color:"var(--text)"},children:"Settings"})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("button",{onClick:n,className:"text-sm px-3 py-1 rounded border",style:{backgroundColor:"var(--card)",borderColor:"var(--border)",color:"var(--text)"},children:t==="light"?"🌙":"☀️"}),u.jsxs("select",{value:r,onChange:O=>i(O.target.value),className:"text-sm px-3 py-1 rounded border bg-transparent",style:{borderColor:"var(--border)",color:"var(--text)"},children:[u.jsx("option",{value:"en",children:"EN"}),u.jsx("option",{value:"ko",children:"KO"})]})]})]}),u.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[u.jsx("div",{className:"border-b mb-6",style:{borderColor:"var(--border)"},children:u.jsxs("nav",{className:"-mb-px flex space-x-8",children:[u.jsx("button",{onClick:()=>d("ui"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${c==="ui"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,style:{color:c==="ui"?"var(--primary)":"var(--text-secondary)",borderBottomColor:c==="ui"?"var(--primary)":"transparent"},children:"UI Customization"}),u.jsx("button",{onClick:()=>d("api"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${c==="api"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,style:{color:c==="api"?"var(--primary)":"var(--text-secondary)",borderBottomColor:c==="api"?"var(--primary)":"transparent"},children:"API Configurations"}),u.jsx("button",{onClick:()=>d("webhook"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${c==="webhook"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,style:{color:c==="webhook"?"var(--primary)":"var(--text-secondary)",borderBottomColor:c==="webhook"?"var(--primary)":"transparent"},children:"Webhooks"}),u.jsx("button",{onClick:()=>d("database"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${c==="database"?"border-gray-800 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,style:{color:c==="database"?"var(--primary)":"var(--text-secondary)",borderBottomColor:c==="database"?"var(--primary)":"transparent"},children:"Database"})]})}),c==="api"&&u.jsxs(u.Fragment,{children:[m&&u.jsxs("div",{className:"card p-6 rounded-lg mb-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",style:{color:"var(--text)"},children:g?"Edit Configuration":"Add New Configuration"}),u.jsxs("form",{onSubmit:ke,className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text)"},children:"Configuration Name"}),u.jsx("input",{type:"text",value:P.name,onChange:O=>E(V=>({...V,name:O.target.value})),className:"input w-full px-3 py-2 rounded-md",placeholder:"e.g., OpenAI GPT-4",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text)"},children:"Base URL"}),u.jsx("input",{type:"url",value:P.baseUrl,onChange:O=>E(V=>({...V,baseUrl:O.target.value})),className:"input w-full px-3 py-2 rounded-md",placeholder:"https://api.openai.com/v1",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text)"},children:"API Key"}),u.jsx("input",{type:"password",value:P.apiKey,onChange:O=>E(V=>({...V,apiKey:O.target.value})),className:"input w-full px-3 py-2 rounded-md",placeholder:"sk-...",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text)"},children:"Model"}),u.jsx("input",{type:"text",value:P.model,onChange:O=>E(V=>({...V,model:O.target.value})),className:"input w-full px-3 py-2 rounded-md",placeholder:"gpt-3.5-turbo"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text)"},children:["Temperature: ",P.temperature]}),u.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:P.temperature,onChange:O=>E(V=>({...V,temperature:parseFloat(O.target.value)})),className:"w-full"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text)"},children:"Max Tokens"}),u.jsx("input",{type:"number",value:P.maxTokens,onChange:O=>E(V=>({...V,maxTokens:parseInt(O.target.value)})),className:"input w-full px-3 py-2 rounded-md",min:"1",max:"4000"})]})]}),u.jsxs("div",{className:"flex justify-end space-x-3",children:[u.jsx("button",{type:"button",onClick:Pe,className:"px-4 py-2 text-sm border rounded-md",style:{borderColor:"var(--border)"},children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary px-4 py-2 text-sm",children:[g?"Update":"Add"," Configuration"]})]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text)"},children:"API Configurations"}),u.jsx("button",{onClick:()=>p(!0),className:"btn-primary px-4 py-2 text-sm",children:"+ Add Configuration"})]}),a.length===0?u.jsx("div",{className:"card p-8 rounded-lg text-center",children:u.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"No API configurations found. Add your first configuration to get started."})}):u.jsx("div",{className:"space-y-3",children:a.map(O=>u.jsx("div",{className:`card p-4 rounded-lg ${O.isActive?"border-2":"border"}`,style:{borderColor:O.isActive?"var(--primary)":"var(--border)",backgroundColor:O.isActive?"var(--primary-light)":"var(--card)"},children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("h3",{className:"font-medium",style:{color:"var(--text)"},children:O.name}),O.isActive&&u.jsx("span",{className:"text-xs px-2 py-1 rounded bg-green-100 text-green-800",children:"Active"})]}),u.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-secondary)"},children:O.baseUrl}),u.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:["Model: ",O.model," • Temperature: ",O.temperature," • Max Tokens: ",O.maxTokens]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[!O.isActive&&u.jsx("button",{onClick:()=>en(O.id),className:"text-xs px-3 py-1 rounded border",style:{borderColor:"var(--border)"},children:"Set Active"}),u.jsx("button",{onClick:()=>Ee(O),className:"text-xs px-3 py-1 rounded border",style:{borderColor:"var(--border)"},children:"Edit"}),u.jsx("button",{onClick:()=>Re(O.id),className:"text-xs px-3 py-1 rounded border",style:{borderColor:"var(--error)",color:"var(--error)"},children:"Delete"})]})]})},O.id))})]}),u.jsx("div",{className:"mt-8 card p-4 rounded-lg",style:{backgroundColor:"var(--warning-light)"},children:u.jsxs("div",{className:"flex items-start space-x-2",children:[u.jsx("span",{children:"ℹ️"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium",style:{color:"var(--warning)"},children:"Development Mode"}),u.jsx("p",{className:"text-xs mt-1",style:{color:"var(--text-secondary)"},children:"When backend is unavailable, the system uses intelligent simulation based on your chat input. Configure your API settings above for full functionality when backend is running."})]})]})})]}),c==="webhook"&&u.jsxs(u.Fragment,{children:[m&&u.jsxs("div",{className:"card p-6 rounded-lg mb-6",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",style:{color:"var(--text)"},children:x?"Edit Webhook Configuration":"Add New Webhook Configuration"}),u.jsxs("form",{onSubmit:Sr,className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text)"},children:"Configuration Name"}),u.jsx("input",{type:"text",value:T.name,onChange:O=>L(V=>({...V,name:O.target.value})),className:"input w-full px-3 py-2 rounded-md",placeholder:"e.g., Production n8n Webhook",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text)"},children:"Webhook URL"}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("input",{type:"url",value:T.webhookUrl,onChange:O=>L(V=>({...V,webhookUrl:O.target.value})),className:"input flex-1 px-3 py-2 rounded-md",placeholder:"https://n8n.srv978041.hstgr.cloud/webhook/...",required:!0}),u.jsx("button",{type:"button",onClick:()=>me(T.webhookUrl),disabled:w||!T.webhookUrl,className:"px-3 py-2 text-sm border rounded-md disabled:opacity-50",style:{borderColor:"var(--border)"},children:w?"Testing...":"Test"})]})]})]}),u.jsxs("div",{className:"flex justify-end space-x-3",children:[u.jsx("button",{type:"button",onClick:Ei,className:"px-4 py-2 text-sm border rounded-md",style:{borderColor:"var(--border)"},children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary px-4 py-2 text-sm",children:[x?"Update":"Add"," Configuration"]})]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text)"},children:"Webhook Configurations"}),u.jsx("button",{onClick:()=>{d("webhook"),p(!0)},className:"btn-primary px-4 py-2 text-sm",children:"+ Add Webhook Configuration"})]}),s.length===0?u.jsx("div",{className:"card p-8 rounded-lg text-center",children:u.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"No webhook configurations found. Add your first webhook to get started."})}):u.jsx("div",{className:"space-y-3",children:s.map(O=>u.jsx("div",{className:`card p-4 rounded-lg ${O.isActive?"border-2":"border"}`,style:{borderColor:O.isActive?"var(--primary)":"var(--border)",backgroundColor:O.isActive?"var(--primary-light)":"var(--card)"},children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("h3",{className:"font-medium",style:{color:"var(--text)"},children:O.name}),O.isActive&&u.jsx("span",{className:"text-xs px-2 py-1 rounded bg-green-100 text-green-800",children:"Active"})]}),u.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-secondary)"},children:O.webhookUrl}),u.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:["Created: ",new Date(O.createdAt).toLocaleString()]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{onClick:()=>me(O.webhookUrl),disabled:w,className:"text-xs px-3 py-1 rounded border disabled:opacity-50",style:{borderColor:"var(--border)"},children:w?"Testing...":"Test"}),!O.isActive&&u.jsx("button",{onClick:()=>se(O.id),className:"text-xs px-3 py-1 rounded border",style:{borderColor:"var(--border)"},children:"Set Active"}),u.jsx("button",{onClick:()=>jr(O),className:"text-xs px-3 py-1 rounded border",style:{borderColor:"var(--border)"},children:"Edit"}),u.jsx("button",{onClick:()=>H(O.id),className:"text-xs px-3 py-1 rounded border",style:{borderColor:"var(--error)",color:"var(--error)"},children:"Delete"})]})]})},O.id))})]}),u.jsx("div",{className:"mt-8 card p-4 rounded-lg",style:{backgroundColor:"var(--primary-light)"},children:u.jsxs("div",{className:"flex items-start space-x-2",children:[u.jsx("span",{children:"🔗"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium",style:{color:"var(--primary)"},children:"Webhook Integration"}),u.jsx("p",{className:"text-xs mt-1",style:{color:"var(--text-secondary)"},children:"Configure webhooks to connect your chat interface with external workflows (e.g., n8n). The system will send chat messages to your webhook and receive AI responses."})]})]})})]}),c==="ui"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"card p-6 rounded-lg",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",style:{color:"var(--text)"},children:"Chat Interface Customization"}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:"Chat Interface Title"}),u.jsx("input",{type:"text",value:S.chatTitle,onChange:O=>k({chatTitle:O.target.value}),className:"input w-full px-3 py-2 rounded-md",placeholder:"e.g., Chat Interface, AI Assistant, etc."}),u.jsx("p",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:"This title appears at the top of the empty chat screen"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:"Chat Interface Subtitle"}),u.jsx("input",{type:"text",value:S.chatSubtitle,onChange:O=>k({chatSubtitle:O.target.value}),className:"input w-full px-3 py-2 rounded-md",placeholder:"e.g., Select a conversation from the sidebar or start a new chat"}),u.jsx("p",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:"This subtitle appears below the title on the empty chat screen"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:r==="ko"?"챗봇 아바타":"Chatbot Avatar"}),u.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[u.jsx("div",{className:"flex-shrink-0",style:{width:"80px",height:"80px"},children:u.jsx("img",{src:S.avatarUrl,alt:"Avatar Preview",style:{width:"80px",height:"80px",borderRadius:"50%",border:"2px solid var(--border)",objectFit:"cover",objectPosition:"center"},onError:O=>{O.currentTarget.src="/default-profile-avatar.png"}})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"block text-xs font-medium mb-1",style:{color:"var(--text)"},children:r==="ko"?"기본 아바타 선택":"Select Default Avatar"}),u.jsxs("select",{value:S.avatarUrl.startsWith("/")?S.avatarUrl:"custom",onChange:O=>{O.target.value!=="custom"&&k({avatarUrl:O.target.value})},className:"w-full px-3 py-2 rounded-md",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border)",color:"var(--text)"},children:[u.jsx("option",{value:"custom",children:r==="ko"?"커스텀 (업로드된 이미지)":"Custom (Uploaded)"}),u.jsx("option",{value:"/default-profile-avatar.png",children:r==="ko"?"기본 아바타 1":"Default Avatar 1"}),u.jsx("option",{value:"/chatbot-avatar-2.png",children:r==="ko"?"챗봇 아바타 2":"Chatbot Avatar 2"}),u.jsx("option",{value:"/professor-avatar.png",children:r==="ko"?"교수 아바타":"Professor Avatar"})]})]})]}),u.jsxs("div",{className:"flex gap-2 mb-2",children:[u.jsxs("label",{className:"px-4 py-2 rounded-md cursor-pointer transition-colors",style:{backgroundColor:"var(--primary)",color:"white",display:"inline-flex",alignItems:"center",gap:"8px"},children:[u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"})}),r==="ko"?"사진 업로드":"Upload Photo",u.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:O=>{var ie;const V=(ie=O.target.files)==null?void 0:ie[0];if(V){const pe=new FileReader;pe.onloadend=()=>{const ge=pe.result;M(ge),le(ge),Z({x:50,y:50}),ne(100),q(!0)},pe.readAsDataURL(V)}}})]}),S.avatarUrl!=="/default-profile-avatar.png"&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>{const O=document.createElement("a");O.href=S.avatarUrl,O.download="chatbot-avatar.png",O.click()},className:"px-4 py-2 rounded-md transition-colors",style:{backgroundColor:"var(--primary)",color:"white"},children:r==="ko"?"다운로드":"Download"}),u.jsx("button",{onClick:()=>k({avatarUrl:"/default-profile-avatar.png"}),className:"px-4 py-2 rounded-md transition-colors",style:{backgroundColor:"var(--danger)",color:"white"},children:r==="ko"?"리셋":"Reset"})]})]}),u.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:r==="ko"?"기본 아바타를 선택하거나 새 이미지를 업로드하세요. 다운로드한 이미지를 apps/professor/public/ 폴더에 저장하면 드롭다운에 추가할 수 있습니다.":"Select a default avatar or upload a new image. Save downloaded images to apps/professor/public/ to add them to the dropdown."})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-md font-medium mb-4",style:{color:"var(--text)"},children:"Suggested Questions"}),u.jsx("p",{className:"text-sm mb-4",style:{color:"var(--text-secondary)"},children:"Customize the suggested questions that appear on the empty chat screen"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:"Question 1"}),u.jsx("input",{type:"text",value:S.suggestedQuestions.question1,onChange:O=>_("question1",O.target.value),className:"input w-full px-3 py-2 rounded-md",placeholder:"What is artificial intelligence?"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:"Question 2"}),u.jsx("input",{type:"text",value:S.suggestedQuestions.question2,onChange:O=>_("question2",O.target.value),className:"input w-full px-3 py-2 rounded-md",placeholder:"How does machine learning work?"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:"Question 3"}),u.jsx("input",{type:"text",value:S.suggestedQuestions.question3,onChange:O=>_("question3",O.target.value),className:"input w-full px-3 py-2 rounded-md",placeholder:"Explain quantum computing"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:"Question 4"}),u.jsx("input",{type:"text",value:S.suggestedQuestions.question4,onChange:O=>_("question4",O.target.value),className:"input w-full px-3 py-2 rounded-md",placeholder:"What are the benefits of cloud computing?"})]})]})]}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to reset all UI customizations to default values?")&&N()},className:"px-4 py-2 text-sm border rounded-md",style:{borderColor:"var(--error)",color:"var(--error)"},children:"Reset to Defaults"})})]})]}),u.jsxs("div",{className:"card p-6 rounded-lg",children:[u.jsx("h3",{className:"text-md font-medium mb-4",style:{color:"var(--text)"},children:"Preview"}),u.jsx("div",{className:"border rounded-lg p-6",style:{borderColor:"var(--border)",backgroundColor:"var(--bg)"},children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-4xl font-light mb-4",style:{color:"var(--text)"},children:S.chatTitle}),u.jsx("p",{className:"text-lg mb-8",style:{color:"var(--text-secondary)"},children:S.chatSubtitle}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-w-3xl mx-auto",children:[u.jsx("div",{className:"p-4 text-left rounded-lg border",style:{borderColor:"var(--border)",backgroundColor:"var(--card)",color:"var(--text)"},children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--bg-secondary)"},children:u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),u.jsx("circle",{cx:"12",cy:"5",r:"2"}),u.jsx("path",{d:"M12 7v4"})]})}),u.jsx("span",{className:"text-sm",children:S.suggestedQuestions.question1})]})}),u.jsx("div",{className:"p-4 text-left rounded-lg border",style:{borderColor:"var(--border)",backgroundColor:"var(--card)",color:"var(--text)"},children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--bg-secondary)"},children:u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1 .34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"}),u.jsx("path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0-.34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"})]})}),u.jsx("span",{className:"text-sm",children:S.suggestedQuestions.question2})]})}),u.jsx("div",{className:"p-4 text-left rounded-lg border",style:{borderColor:"var(--border)",backgroundColor:"var(--card)",color:"var(--text)"},children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--bg-secondary)"},children:u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M8 12h8"}),u.jsx("path",{d:"M12 8v8"})]})}),u.jsx("span",{className:"text-sm",children:S.suggestedQuestions.question3})]})}),u.jsx("div",{className:"p-4 text-left rounded-lg border",style:{borderColor:"var(--border)",backgroundColor:"var(--card)",color:"var(--text)"},children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--bg-secondary)"},children:u.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"})})}),u.jsx("span",{className:"text-sm",children:S.suggestedQuestions.question4})]})})]})]})})]})]}),c==="database"&&u.jsxs("div",{className:"card p-6 rounded-lg",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",style:{color:"var(--text)"},children:"Database Configuration"}),u.jsx("p",{className:"text-sm mb-6",style:{color:"var(--text-secondary)"},children:"Configure your database connection for prompt management and data storage."}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:"Database Type"}),u.jsxs("select",{value:f,onChange:O=>h(O.target.value),className:"input w-full px-3 py-2 rounded-md",style:{backgroundColor:"var(--card)",color:"var(--text)",borderColor:"var(--border)"},children:[u.jsx("option",{value:"supabase",children:"Supabase"}),u.jsx("option",{value:"other",children:"Other (Coming Soon)"})]})]}),f==="supabase"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text)"},children:"Supabase URL"}),u.jsx("input",{type:"text",value:$.url,onChange:O=>B({...$,url:O.target.value}),className:"input w-full px-3 py-2 rounded-md",placeholder:"https://your-project.supabase.co"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text)"},children:"Supabase Anon Key"}),u.jsx("input",{type:"password",value:$.anonKey,onChange:O=>B({...$,anonKey:O.target.value}),className:"input w-full px-3 py-2 rounded-md",placeholder:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."})]})]}),f==="supabase"&&G&&u.jsx("div",{className:"p-3 rounded-md",style:{backgroundColor:G.success?"var(--success-light)":"var(--danger-light)",color:G.success?"var(--success)":"var(--danger)"},children:G.message}),f==="supabase"&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{type:"button",onClick:async()=>{z(!0),I(null);try{const O=await LU($);I({success:O,message:O?"Connection successful!":"Connection failed. Please check your credentials."})}catch(O){I({success:!1,message:"Connection test failed: "+(O instanceof Error?O.message:"Unknown error")})}finally{z(!1)}},disabled:D||!$.url||!$.anonKey,className:"btn-ghost px-4 py-2 rounded-md",children:D?"Testing...":"Test Connection"}),u.jsx("button",{type:"button",onClick:()=>{MU($),I({success:!0,message:"Configuration saved successfully!"})},disabled:!$.url||!$.anonKey,className:"btn-primary px-4 py-2 rounded-md",children:"Save Configuration"})]}),u.jsxs("div",{className:"border-t pt-4 mt-6",style:{borderColor:"var(--border)"},children:[u.jsx("h3",{className:"text-md font-medium mb-4",style:{color:"var(--text)"},children:"Chat Behavior"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text)"},children:"Enable Simulation Mode"}),u.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"When enabled, chat will fall back to simulated responses if the chatbot server is unavailable. When disabled, chat will show an error instead of simulation."})]}),u.jsx("label",{className:"flex items-center",children:u.jsx("input",{type:"checkbox",checked:R,onChange:O=>{C(O.target.checked),cU(O.target.checked)},className:"w-4 h-4 rounded",style:{accentColor:"var(--primary)"}})})]})]}),f==="other"&&u.jsx("div",{className:"p-4 rounded-md",style:{backgroundColor:"var(--warning-light)"},children:u.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Additional database types will be available in future updates."})})]})]})]}),Q&&u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:()=>q(!1),children:u.jsxs("div",{onClick:O=>O.stopPropagation(),style:{backgroundColor:"var(--card, #1e1e1e)",borderRadius:"12px",padding:"24px",maxWidth:"600px",width:"90%",maxHeight:"90vh",overflow:"auto",border:"1px solid var(--border)"},children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"#ffffff"},children:r==="ko"?"이미지 조정":"Adjust Image"}),u.jsx("div",{style:{width:"200px",height:"200px",margin:"0 auto 24px",borderRadius:"50%",overflow:"hidden",position:"relative",border:"2px solid var(--border)",backgroundColor:"var(--bg-secondary)"},children:u.jsx("div",{style:{width:"100%",height:"100%",backgroundImage:`url(${A})`,backgroundSize:`${J}%`,backgroundPosition:`${U.x}% ${U.y}%`,backgroundRepeat:"no-repeat"}})}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium mb-2",style:{color:"#e5e5e5"},children:[r==="ko"?"확대/축소":"Zoom",": ",J,"%"]}),u.jsx("input",{type:"range",min:"50",max:"200",value:J,onChange:O=>ne(Number(O.target.value)),className:"w-full",style:{accentColor:"var(--primary)"}})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#e5e5e5"},children:r==="ko"?"가로 위치":"Horizontal Position"}),u.jsx("input",{type:"range",min:"0",max:"100",value:U.x,onChange:O=>Z({...U,x:Number(O.target.value)}),className:"w-full",style:{accentColor:"var(--primary)"}})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#e5e5e5"},children:r==="ko"?"세로 위치":"Vertical Position"}),u.jsx("input",{type:"range",min:"0",max:"100",value:U.y,onChange:O=>Z({...U,y:Number(O.target.value)}),className:"w-full",style:{accentColor:"var(--primary)"}})]})]}),u.jsxs("div",{className:"space-y-3 mt-6",children:[u.jsx("button",{onClick:()=>{k({avatarUrl:X}),q(!1)},className:"w-full px-4 py-2 rounded-md font-medium transition-colors",style:{backgroundColor:"var(--primary)",color:"#ffffff"},children:r==="ko"?"원본 사용":"Use Original"}),u.jsx("button",{onClick:()=>{const O=document.createElement("canvas"),V=O.getContext("2d"),ie=new Image;ie.onload=()=>{if(O.width=300,O.height=300,V){const ge=J/100;let tn=Math.min(ie.width,ie.height);const Cr=tn/ge,zn=tn/ge,pa=U.x/100*(ie.width-Cr),ga=U.y/100*(ie.height-zn);V.drawImage(ie,pa,ga,Cr,zn,0,0,300,300),k({avatarUrl:O.toDataURL("image/png",.95)})}q(!1)},ie.src=X},className:"w-full px-4 py-2 rounded-md font-medium transition-colors",style:{backgroundColor:"rgba(59, 130, 246, 0.8)",color:"#ffffff"},children:r==="ko"?"조정된 이미지 사용":"Use Adjusted"}),u.jsx("button",{onClick:()=>q(!1),className:"w-full px-4 py-2 rounded-md font-medium transition-colors",style:{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#ffffff",border:"1px solid rgba(255, 255, 255, 0.2)"},children:r==="ko"?"취소":"Cancel"})]})]})})]})};function zP(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=zP(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Se(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=zP(e))&&(r&&(r+=" "),r+=t);return r}var xh={},BP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(BP);var l0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(l0);var bh={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}e.toKey=t})(bh);var wh={},WP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}e.toString=t})(WP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WP,n=bh;function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const a=[],o=i.length;if(o===0)return a;let s=0,l="",c="",d=!1;for(i.charCodeAt(0)===46&&(a.push(""),s++);s<o;){const f=i[s];c?f==="\\"&&s+1<o?(s++,l+=i[s]):f===c?c="":l+=f:d?f==='"'||f==="'"?c=f:f==="]"?(d=!1,a.push(l),l=""):l+=f:f==="["?(d=!0,l&&(a.push(l),l="")):f==="."?l&&(a.push(l),l=""):l+=f,s++}return l&&a.push(l),a}e.toPath=r})(wh);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BP,n=l0,r=bh,i=wh;function a(s,l,c){if(s==null)return c;switch(typeof l){case"string":{if(t.isUnsafeProperty(l))return c;const d=s[l];return d===void 0?n.isDeepKey(l)?a(s,i.toPath(l),c):c:d}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const d=s[l];return d===void 0?c:d}default:{if(Array.isArray(l))return o(s,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),t.isUnsafeProperty(l))return c;const d=s[l];return d===void 0?c:d}}}function o(s,l,c){if(l.length===0)return c;let d=s;for(let f=0;f<l.length;f++){if(d==null||t.isUnsafeProperty(l[f]))return c;d=d[l[f]]}return d===void 0?c:d}e.get=a})(xh);var qW=xh.get;const ss=Ln(qW);var qP={exports:{}},$e={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c0=Symbol.for("react.transitional.element"),u0=Symbol.for("react.portal"),kh=Symbol.for("react.fragment"),Sh=Symbol.for("react.strict_mode"),jh=Symbol.for("react.profiler"),Ch=Symbol.for("react.consumer"),_h=Symbol.for("react.context"),Eh=Symbol.for("react.forward_ref"),Nh=Symbol.for("react.suspense"),Ph=Symbol.for("react.suspense_list"),Oh=Symbol.for("react.memo"),Ah=Symbol.for("react.lazy"),HW=Symbol.for("react.view_transition"),KW=Symbol.for("react.client.reference");function ir(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case c0:switch(e=e.type,e){case kh:case jh:case Sh:case Nh:case Ph:case HW:return e;default:switch(e=e&&e.$$typeof,e){case _h:case Eh:case Ah:case Oh:return e;case Ch:return e;default:return t}}case u0:return t}}}$e.ContextConsumer=Ch;$e.ContextProvider=_h;$e.Element=c0;$e.ForwardRef=Eh;$e.Fragment=kh;$e.Lazy=Ah;$e.Memo=Oh;$e.Portal=u0;$e.Profiler=jh;$e.StrictMode=Sh;$e.Suspense=Nh;$e.SuspenseList=Ph;$e.isContextConsumer=function(e){return ir(e)===Ch};$e.isContextProvider=function(e){return ir(e)===_h};$e.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===c0};$e.isForwardRef=function(e){return ir(e)===Eh};$e.isFragment=function(e){return ir(e)===kh};$e.isLazy=function(e){return ir(e)===Ah};$e.isMemo=function(e){return ir(e)===Oh};$e.isPortal=function(e){return ir(e)===u0};$e.isProfiler=function(e){return ir(e)===jh};$e.isStrictMode=function(e){return ir(e)===Sh};$e.isSuspense=function(e){return ir(e)===Nh};$e.isSuspenseList=function(e){return ir(e)===Ph};$e.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===kh||e===jh||e===Sh||e===Nh||e===Ph||typeof e=="object"&&e!==null&&(e.$$typeof===Ah||e.$$typeof===Oh||e.$$typeof===_h||e.$$typeof===Ch||e.$$typeof===Eh||e.$$typeof===KW||e.getModuleId!==void 0)};$e.typeOf=ir;qP.exports=$e;var VW=qP.exports,dn=e=>e===0?0:e>0?1:-1,Dn=e=>typeof e=="number"&&e!=+e,Da=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ue=e=>(typeof e=="number"||e instanceof Number)&&!Dn(e),Br=e=>ue(e)||typeof e=="string",GW=0,cc=e=>{var t=++GW;return"".concat(e||"").concat(t)},br=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ue(t)&&typeof t!="string")return r;var a;if(Da(t)){if(n==null)return r;var o=t.indexOf("%");a=n*parseFloat(t.slice(0,o))/100}else a=+t;return Dn(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},HP=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function pt(e,t,n){return ue(e)&&ue(t)?e+n*(t-e):t}function YW(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):ss(r,t))===n)}var it=e=>e===null||typeof e>"u",Ic=e=>it(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),JW=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function d0(e){if(typeof e!="string")return!1;var t=JW;return t.includes(e)}var XW=["viewBox","children"],iS=["points","pathLength"],_p={svg:XW,polygon:iS,polyline:iS},f0=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(v.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{d0(i)&&(r[i]=t||(a=>n[i](n,a)))}),r},QW=(e,t,n)=>r=>(e(t,n,r),null),As=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var a=e[i];d0(i)&&typeof a=="function"&&(r||(r={}),r[i]=QW(a,t,n))}),r},ZW=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function KP(e){if(typeof e!="string")return!1;var t=ZW;return t.includes(e)}function Zt(e){var t=Object.entries(e).filter(n=>{var[r]=n;return KP(r)});return Object.fromEntries(t)}var aS=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",oS=null,Ep=null,VP=e=>{if(e===oS&&Array.isArray(Ep))return Ep;var t=[];return v.Children.forEach(e,n=>{it(n)||(VW.isFragment(n)?t=t.concat(VP(n.props.children)):t.push(n))}),Ep=t,oS=e,t};function eq(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>aS(i)):r=[aS(t)],VP(e).forEach(i=>{var a=ss(i,"type.displayName")||ss(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}var tq=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var a=(i=r&&(_p==null?void 0:_p[r]))!==null&&i!==void 0?i:[],o=t.startsWith("data-"),s=typeof e!="function"&&(!!r&&a.includes(t)||KP(t)),l=!!n&&d0(t);return o||s||l},Ae=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(v.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(a=>{var o;tq((o=r)===null||o===void 0?void 0:o[a],a,t,n)&&(i[a]=r[a])}),i},nq=["children","width","height","viewBox","className","style","title","desc"];function Ny(){return Ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ny.apply(null,arguments)}function rq(e,t){if(e==null)return{};var n,r,i=iq(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function iq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var h0=v.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:a,className:o,style:s,title:l,desc:c}=e,d=rq(e,nq),f=a||{width:r,height:i,x:0,y:0},h=Se("recharts-surface",o);return v.createElement("svg",Ny({},Ae(d,!0,"svg"),{className:h,width:r,height:i,style:s,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),v.createElement("title",null,l),v.createElement("desc",null,c),n)}),aq=["children","className"];function Py(){return Py=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Py.apply(null,arguments)}function oq(e,t){if(e==null)return{};var n,r,i=sq(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function sq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var jt=v.forwardRef((e,t)=>{var{children:n,className:r}=e,i=oq(e,aq),a=Se("recharts-layer",r);return v.createElement("g",Py({className:a},Ae(i,!0),{ref:t}),n)}),GP=v.createContext(null),lq=()=>v.useContext(GP);function Be(e){return function(){return e}}const YP=Math.cos,Qd=Math.sin,wr=Math.sqrt,Zd=Math.PI,Th=2*Zd,Oy=Math.PI,Ay=2*Oy,ja=1e-6,cq=Ay-ja;function JP(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function uq(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return JP;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class dq{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?JP:uq(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=r-t,c=i-n,d=o-t,f=s-n,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>ja)if(!(Math.abs(f*l-c*d)>ja)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let m=r-o,p=i-s,g=l*l+c*c,y=m*m+p*p,x=Math.sqrt(g),b=Math.sqrt(h),w=a*Math.tan((Oy-Math.acos((g+h-y)/(2*x*b)))/2),j=w/b,S=w/x;Math.abs(j-1)>ja&&this._append`L${t+j*d},${n+j*f}`,this._append`A${a},${a},0,0,${+(f*m>d*p)},${this._x1=t+S*l},${this._y1=n+S*c}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),c=t+s,d=n+l,f=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>ja||Math.abs(this._y1-d)>ja)&&this._append`L${c},${d}`,r&&(h<0&&(h=h%Ay+Ay),h>cq?this._append`A${r},${r},0,1,${f},${t-s},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=d}`:h>ja&&this._append`A${r},${r},0,${+(h>=Oy)},${f},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function m0(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new dq(t)}function p0(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function XP(e){this._context=e}XP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ih(e){return new XP(e)}function QP(e){return e[0]}function ZP(e){return e[1]}function eO(e,t){var n=Be(!0),r=null,i=Ih,a=null,o=m0(s);e=typeof e=="function"?e:e===void 0?QP:Be(e),t=typeof t=="function"?t:t===void 0?ZP:Be(t);function s(l){var c,d=(l=p0(l)).length,f,h=!1,m;for(r==null&&(a=i(m=o())),c=0;c<=d;++c)!(c<d&&n(f=l[c],c,l))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(f,c,l),+t(f,c,l));if(m)return a=null,m+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:Be(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:Be(+l),s):t},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Be(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),s):r},s}function Pu(e,t,n){var r=null,i=Be(!0),a=null,o=Ih,s=null,l=m0(c);e=typeof e=="function"?e:e===void 0?QP:Be(+e),t=typeof t=="function"?t:Be(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?ZP:Be(+n);function c(f){var h,m,p,g=(f=p0(f)).length,y,x=!1,b,w=new Array(g),j=new Array(g);for(a==null&&(s=o(b=l())),h=0;h<=g;++h){if(!(h<g&&i(y=f[h],h,f))===x)if(x=!x)m=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),p=h-1;p>=m;--p)s.point(w[p],j[p]);s.lineEnd(),s.areaEnd()}x&&(w[h]=+e(y,h,f),j[h]=+t(y,h,f),s.point(r?+r(y,h,f):w[h],n?+n(y,h,f):j[h]))}if(b)return s=null,b+""||null}function d(){return eO().defined(i).curve(o).context(a)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:Be(+f),r=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Be(+f),c):e},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Be(+f),c):r},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:Be(+f),n=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Be(+f),c):t},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Be(+f),c):n},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(n)},c.lineX1=function(){return d().x(r).y(t)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Be(!!f),c):i},c.curve=function(f){return arguments.length?(o=f,a!=null&&(s=o(a)),c):o},c.context=function(f){return arguments.length?(f==null?a=s=null:s=o(a=f),c):a},c}class tO{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function fq(e){return new tO(e,!0)}function hq(e){return new tO(e,!1)}const g0={draw(e,t){const n=wr(t/Zd);e.moveTo(n,0),e.arc(0,0,n,0,Th)}},mq={draw(e,t){const n=wr(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},nO=wr(1/3),pq=nO*2,gq={draw(e,t){const n=wr(t/pq),r=n*nO;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},yq={draw(e,t){const n=wr(t),r=-n/2;e.rect(r,r,n,n)}},vq=.8908130915292852,rO=Qd(Zd/10)/Qd(7*Zd/10),xq=Qd(Th/10)*rO,bq=-YP(Th/10)*rO,wq={draw(e,t){const n=wr(t*vq),r=xq*n,i=bq*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const o=Th*a/5,s=YP(o),l=Qd(o);e.lineTo(l*n,-s*n),e.lineTo(s*r-l*i,l*r+s*i)}e.closePath()}},Np=wr(3),kq={draw(e,t){const n=-wr(t/(Np*3));e.moveTo(0,n*2),e.lineTo(-Np*n,-n),e.lineTo(Np*n,-n),e.closePath()}},Bn=-.5,Wn=wr(3)/2,Ty=1/wr(12),Sq=(Ty/2+1)*3,jq={draw(e,t){const n=wr(t/Sq),r=n/2,i=n*Ty,a=r,o=n*Ty+n,s=-a,l=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(s,l),e.lineTo(Bn*r-Wn*i,Wn*r+Bn*i),e.lineTo(Bn*a-Wn*o,Wn*a+Bn*o),e.lineTo(Bn*s-Wn*l,Wn*s+Bn*l),e.lineTo(Bn*r+Wn*i,Bn*i-Wn*r),e.lineTo(Bn*a+Wn*o,Bn*o-Wn*a),e.lineTo(Bn*s+Wn*l,Bn*l-Wn*s),e.closePath()}};function Cq(e,t){let n=null,r=m0(i);e=typeof e=="function"?e:Be(e||g0),t=typeof t=="function"?t:Be(t===void 0?64:+t);function i(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:Be(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:Be(+a),i):t},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function ef(){}function tf(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function iO(e){this._context=e}iO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:tf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:tf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _q(e){return new iO(e)}function aO(e){this._context=e}aO.prototype={areaStart:ef,areaEnd:ef,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:tf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Eq(e){return new aO(e)}function oO(e){this._context=e}oO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:tf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Nq(e){return new oO(e)}function sO(e){this._context=e}sO.prototype={areaStart:ef,areaEnd:ef,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Pq(e){return new sO(e)}function sS(e){return e<0?-1:1}function lS(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(sS(a)+sS(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function cS(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Pp(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,i+s*t,a-s,o-s*n,a,o)}function nf(e){this._context=e}nf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Pp(this,this._t0,cS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Pp(this,cS(this,n=lS(this,e,t)),n);break;default:Pp(this,this._t0,n=lS(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function lO(e){this._context=new cO(e)}(lO.prototype=Object.create(nf.prototype)).point=function(e,t){nf.prototype.point.call(this,t,e)};function cO(e){this._context=e}cO.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function Oq(e){return new nf(e)}function Aq(e){return new lO(e)}function uO(e){this._context=e}uO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=uS(e),i=uS(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function uS(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function Tq(e){return new uO(e)}function Dh(e,t){this._context=e,this._t=t}Dh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Iq(e){return new Dh(e,.5)}function Dq(e){return new Dh(e,0)}function Rq(e){return new Dh(e,1)}function ls(e,t){if((o=e.length)>1)for(var n=1,r,i,a=e[t[0]],o,s=a.length;n<o;++n)for(i=a,a=e[t[n]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Iy(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Mq(e,t){return e[t]}function Lq(e){const t=[];return t.key=e,t}function $q(){var e=Be([]),t=Iy,n=ls,r=Mq;function i(a){var o=Array.from(e.apply(this,arguments),Lq),s,l=o.length,c=-1,d;for(const f of a)for(s=0,++c;s<l;++s)(o[s][c]=[0,+r(f,o[s].key,c,a)]).data=f;for(s=0,d=p0(t(o));s<l;++s)o[d[s]].index=s;return n(o,d),o}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Be(Array.from(a)),i):e},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Be(+a),i):r},i.order=function(a){return arguments.length?(t=a==null?Iy:typeof a=="function"?a:Be(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(n=a??ls,i):n},i}function Fq(e,t){if((r=e.length)>0){for(var n,r,i=0,a=e[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=e[n][i][1]||0;if(o)for(n=0;n<r;++n)e[n][i][1]/=o}ls(e,t)}}function Uq(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,a=r.length;n<a;++n){for(var o=0,s=0;o<i;++o)s+=e[o][n][1]||0;r[n][1]+=r[n][0]=-s/2}ls(e,t)}}function zq(e,t){if(!(!((o=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var s=0,l=0,c=0;s<o;++s){for(var d=e[t[s]],f=d[r][1]||0,h=d[r-1][1]||0,m=(f-h)/2,p=0;p<s;++p){var g=e[t[p]],y=g[r][1]||0,x=g[r-1][1]||0;m+=y-x}l+=f,c+=m*f}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,ls(e,t)}}var Bq=["type","size","sizeType"];function Dy(){return Dy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dy.apply(null,arguments)}function dS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dS(Object(n),!0).forEach(function(r){Wq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wq(e,t,n){return(t=qq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qq(e){var t=Hq(e,"string");return typeof t=="symbol"?t:t+""}function Hq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kq(e,t){if(e==null)return{};var n,r,i=Vq(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Vq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var dO={symbolCircle:g0,symbolCross:mq,symbolDiamond:gq,symbolSquare:yq,symbolStar:wq,symbolTriangle:kq,symbolWye:jq},Gq=Math.PI/180,Yq=e=>{var t="symbol".concat(Ic(e));return dO[t]||g0},Jq=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*Gq;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Xq=(e,t)=>{dO["symbol".concat(Ic(e))]=t},y0=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=Kq(e,Bq),a=fS(fS({},i),{},{type:t,size:n,sizeType:r}),o="circle";typeof t=="string"&&(o=t);var s=()=>{var h=Yq(o),m=Cq().type(h).size(Jq(n,r,o));return m()},{className:l,cx:c,cy:d}=a,f=Ae(a,!0);return c===+c&&d===+d&&n===+n?v.createElement("path",Dy({},f,{className:Se("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(d,")"),d:s()})):null};y0.registerSymbol=Xq;function Ry(){return Ry=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ry.apply(null,arguments)}function hS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Qq(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hS(Object(n),!0).forEach(function(r){v0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function v0(e,t,n){return(t=Zq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zq(e){var t=eH(e,"string");return typeof t=="symbol"?t:t+""}function eH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qn=32;class x0 extends v.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=qn/2,a=qn/6,o=qn/3,s=t.inactive?r:t.color,l=n??t.type;if(l==="none")return null;if(l==="plainline")return v.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:qn,y2:i,className:"recharts-legend-icon"});if(l==="line")return v.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(qn,"M").concat(2*o,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(l==="rect")return v.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(qn/8,"h").concat(qn,"v").concat(qn*3/4,"h").concat(-qn,"z"),className:"recharts-legend-icon"});if(v.isValidElement(t.legendIcon)){var c=Qq({},t);return delete c.legendIcon,v.cloneElement(t.legendIcon,c)}return v.createElement(y0,{fill:s,cx:i,cy:i,size:qn,sizeType:"diameter",type:l})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:a,iconType:o}=this.props,s={x:0,y:0,width:qn,height:qn},l={display:r==="horizontal"?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var h=d.formatter||i,m=Se({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var p=d.inactive?a:d.color,g=h?h(d.value,d,f):d.value;return v.createElement("li",Ry({className:m,style:l,key:"legend-item-".concat(f)},As(this.props,d,f)),v.createElement(h0,{width:n,height:n,viewBox:s,style:c,"aria-label":"".concat(g," legend icon")},this.renderIcon(d,o)),v.createElement("span",{className:"recharts-legend-item-text",style:{color:p}},g))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return v.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}v0(x0,"displayName","Legend");v0(x0,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var fO={},hO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let a=0;a<n.length;a++){const o=n[a],s=r(o);i.has(s)||i.set(s,o)}return Array.from(i.values())}e.uniqBy=t})(hO);var Dc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(Dc);var mO={},Rh={},pO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(pO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pO;function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(Rh);var gO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(gO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rh,n=gO;function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(mO);var Mh={},yO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xh;function n(r){return function(i){return t.get(i,r)}}e.property=n})(yO);var vO={},Op={},Ap={},b0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(b0);var w0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(w0);var k0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(k0);var mS;function tH(){return mS||(mS=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S0(),n=b0,r=w0,i=k0;function a(f,h,m){return typeof m!="function"?t.isMatch(f,h):o(f,h,function p(g,y,x,b,w,j){const S=m(g,y,x,b,w,j);return S!==void 0?!!S:o(g,y,p,j)},new Map)}function o(f,h,m,p){if(h===f)return!0;switch(typeof h){case"object":return s(f,h,m,p);case"function":return Object.keys(h).length>0?o(f,{...h},m,p):i.eq(f,h);default:return n.isObject(f)?typeof h=="string"?h==="":!0:i.eq(f,h)}}function s(f,h,m,p){if(h==null)return!0;if(Array.isArray(h))return c(f,h,m,p);if(h instanceof Map)return l(f,h,m,p);if(h instanceof Set)return d(f,h,m,p);const g=Object.keys(h);if(f==null)return g.length===0;if(g.length===0)return!0;if(p&&p.has(h))return p.get(h)===f;p&&p.set(h,f);try{for(let y=0;y<g.length;y++){const x=g[y];if(!r.isPrimitive(f)&&!(x in f)||h[x]===void 0&&f[x]!==void 0||h[x]===null&&f[x]!==null||!m(f[x],h[x],x,f,h,p))return!1}return!0}finally{p&&p.delete(h)}}function l(f,h,m,p){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[g,y]of h.entries()){const x=f.get(g);if(m(x,y,g,f,h,p)===!1)return!1}return!0}function c(f,h,m,p){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const g=new Set;for(let y=0;y<h.length;y++){const x=h[y];let b=!1;for(let w=0;w<f.length;w++){if(g.has(w))continue;const j=f[w];let S=!1;if(m(j,x,y,f,h,p)&&(S=!0),S){g.add(w),b=!0;break}}if(!b)return!1}return!0}function d(f,h,m,p){return h.size===0?!0:f instanceof Set?c([...f],[...h],m,p):!1}e.isMatchWith=a,e.isSetMatch=d}(Ap)),Ap}var pS;function S0(){return pS||(pS=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tH();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n}(Op)),Op}var xO={},j0={},bO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(bO);var C0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(C0);var _0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",o="[object Symbol]",s="[object Date]",l="[object Map]",c="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",m="[object Object]",p="[object Error]",g="[object DataView]",y="[object Uint8Array]",x="[object Uint8ClampedArray]",b="[object Uint16Array]",w="[object Uint32Array]",j="[object BigUint64Array]",S="[object Int8Array]",k="[object Int16Array]",_="[object Int32Array]",N="[object BigInt64Array]",P="[object Float32Array]",E="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=N,e.bigUint64ArrayTag=j,e.booleanTag=i,e.dataViewTag=g,e.dateTag=s,e.errorTag=p,e.float32ArrayTag=P,e.float64ArrayTag=E,e.functionTag=f,e.int16ArrayTag=k,e.int32ArrayTag=_,e.int8ArrayTag=S,e.mapTag=l,e.numberTag=r,e.objectTag=m,e.regexpTag=t,e.setTag=c,e.stringTag=n,e.symbolTag=o,e.uint16ArrayTag=b,e.uint32ArrayTag=w,e.uint8ArrayTag=y,e.uint8ClampedArrayTag=x})(_0);var wO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(wO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bO,n=C0,r=_0,i=w0,a=wO;function o(d,f){return s(d,void 0,d,new Map,f)}function s(d,f,h,m=new Map,p=void 0){const g=p==null?void 0:p(d,f,h,m);if(g!==void 0)return g;if(i.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const y=new Array(d.length);m.set(d,y);for(let x=0;x<d.length;x++)y[x]=s(d[x],x,h,m,p);return Object.hasOwn(d,"index")&&(y.index=d.index),Object.hasOwn(d,"input")&&(y.input=d.input),y}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const y=new RegExp(d.source,d.flags);return y.lastIndex=d.lastIndex,y}if(d instanceof Map){const y=new Map;m.set(d,y);for(const[x,b]of d)y.set(x,s(b,x,h,m,p));return y}if(d instanceof Set){const y=new Set;m.set(d,y);for(const x of d)y.add(s(x,void 0,h,m,p));return y}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const y=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,y);for(let x=0;x<d.length;x++)y[x]=s(d[x],x,h,m,p);return y}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const y=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,y),l(y,d,h,m,p),y}if(typeof File<"u"&&d instanceof File){const y=new File([d],d.name,{type:d.type});return m.set(d,y),l(y,d,h,m,p),y}if(typeof Blob<"u"&&d instanceof Blob){const y=new Blob([d],{type:d.type});return m.set(d,y),l(y,d,h,m,p),y}if(d instanceof Error){const y=new d.constructor;return m.set(d,y),y.message=d.message,y.name=d.name,y.stack=d.stack,y.cause=d.cause,l(y,d,h,m,p),y}if(d instanceof Boolean){const y=new Boolean(d.valueOf());return m.set(d,y),l(y,d,h,m,p),y}if(d instanceof Number){const y=new Number(d.valueOf());return m.set(d,y),l(y,d,h,m,p),y}if(d instanceof String){const y=new String(d.valueOf());return m.set(d,y),l(y,d,h,m,p),y}if(typeof d=="object"&&c(d)){const y=Object.create(Object.getPrototypeOf(d));return m.set(d,y),l(y,d,h,m,p),y}return d}function l(d,f,h=d,m,p){const g=[...Object.keys(f),...t.getSymbols(f)];for(let y=0;y<g.length;y++){const x=g[y],b=Object.getOwnPropertyDescriptor(d,x);(b==null||b.writable)&&(d[x]=s(f[x],x,h,m,p))}}function c(d){switch(n.getTag(d)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=s,e.copyProperties=l})(j0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j0;function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(xO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S0(),n=xO;function r(i){return i=n.cloneDeep(i),a=>t.isMatch(a,i)}e.matches=r})(vO);var kO={},SO={},jO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j0,n=_0;function r(i,a){return t.cloneDeepWith(i,(o,s,l,c)=>{const d=a==null?void 0:a(o,s,l,c);if(d!==void 0)return d;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const f=new i.constructor(i==null?void 0:i.valueOf());return t.copyProperties(f,i),f}case n.argumentsTag:{const f={};return t.copyProperties(f,i),f.length=i.length,f[Symbol.iterator]=i[Symbol.iterator],f}default:return}})}e.cloneDeepWith=r})(jO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jO;function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(SO);var CO={},E0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(E0);var _O={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C0;function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(_O);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=l0,n=E0,r=_O,i=wh;function a(o,s){let l;if(Array.isArray(s)?l=s:typeof s=="string"&&t.isDeepKey(s)&&(o==null?void 0:o[s])==null?l=i.toPath(s):l=[s],l.length===0)return!1;let c=o;for(let d=0;d<l.length;d++){const f=l[d];if((c==null||!Object.hasOwn(c,f))&&!((Array.isArray(c)||r.isArguments(c))&&n.isIndex(f)&&f<c.length))return!1;c=c[f]}return!0}e.has=a})(CO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S0(),n=bh,r=SO,i=xh,a=CO;function o(s,l){switch(typeof s){case"object":{Object.is(s==null?void 0:s.valueOf(),-0)&&(s="-0");break}case"number":{s=n.toKey(s);break}}return l=r.cloneDeep(l),function(c){const d=i.get(c,s);return d===void 0?a.has(c,s):l===void 0?d===void 0:t.isMatch(d,l)}}e.matchesProperty=o})(kO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dc,n=yO,r=vO,i=kO;function a(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}e.iteratee=a})(Mh);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hO,n=Dc,r=mO,i=Mh;function a(o,s=n.identity){return r.isArrayLikeObject(o)?t.uniqBy(Array.from(o),i.iteratee(s)):[]}e.uniqBy=a})(fO);var nH=fO.uniqBy;const gS=Ln(nH);function EO(e,t,n){return t===!0?gS(e,n):typeof t=="function"?gS(e,t):e}var NO={exports:{}},PO={},OO={exports:{}},AO={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cs=v;function rH(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var iH=typeof Object.is=="function"?Object.is:rH,aH=cs.useState,oH=cs.useEffect,sH=cs.useLayoutEffect,lH=cs.useDebugValue;function cH(e,t){var n=t(),r=aH({inst:{value:n,getSnapshot:t}}),i=r[0].inst,a=r[1];return sH(function(){i.value=n,i.getSnapshot=t,Tp(i)&&a({inst:i})},[e,n,t]),oH(function(){return Tp(i)&&a({inst:i}),e(function(){Tp(i)&&a({inst:i})})},[e]),lH(n),n}function Tp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!iH(e,n)}catch{return!0}}function uH(e,t){return t()}var dH=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?uH:cH;AO.useSyncExternalStore=cs.useSyncExternalStore!==void 0?cs.useSyncExternalStore:dH;OO.exports=AO;var fH=OO.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lh=v,hH=fH;function mH(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pH=typeof Object.is=="function"?Object.is:mH,gH=hH.useSyncExternalStore,yH=Lh.useRef,vH=Lh.useEffect,xH=Lh.useMemo,bH=Lh.useDebugValue;PO.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var a=yH(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=xH(function(){function l(m){if(!c){if(c=!0,d=m,m=r(m),i!==void 0&&o.hasValue){var p=o.value;if(i(p,m))return f=p}return f=m}if(p=f,pH(d,m))return p;var g=r(m);return i!==void 0&&i(p,g)?(d=m,p):(d=m,f=g)}var c=!1,d,f,h=n===void 0?null:n;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,n,r,i]);var s=gH(e,a[0],a[1]);return vH(function(){o.hasValue=!0,o.value=s},[s]),bH(s),s};NO.exports=PO;var wH=NO.exports,N0=v.createContext(null),kH=e=>e,Ve=()=>{var e=v.useContext(N0);return e?e.store.dispatch:kH},ld=()=>{},SH=()=>ld,jH=(e,t)=>e===t;function re(e){var t=v.useContext(N0);return wH.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:SH,t?t.store.getState:ld,t?t.store.getState:ld,t?e:ld,jH)}function CH(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function _H(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function EH(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var yS=e=>Array.isArray(e)?e:[e];function NH(e){const t=Array.isArray(e[0])?e[0]:e;return EH(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function PH(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var OH=class{constructor(e){this.value=e}deref(){return this.value}},AH=typeof WeakRef<"u"?WeakRef:OH,TH=0,vS=1;function Ou(){return{s:TH,v:void 0,o:null,p:null}}function TO(e,t={}){let n=Ou();const{resultEqualityCheck:r}=t;let i,a=0;function o(){var f;let s=n;const{length:l}=arguments;for(let h=0,m=l;h<m;h++){const p=arguments[h];if(typeof p=="function"||typeof p=="object"&&p!==null){let g=s.o;g===null&&(s.o=g=new WeakMap);const y=g.get(p);y===void 0?(s=Ou(),g.set(p,s)):s=y}else{let g=s.p;g===null&&(s.p=g=new Map);const y=g.get(p);y===void 0?(s=Ou(),g.set(p,s)):s=y}}const c=s;let d;if(s.s===vS)d=s.v;else if(d=e.apply(null,arguments),a++,r){const h=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;h!=null&&r(h,d)&&(d=h,a!==0&&a--),i=typeof d=="object"&&d!==null||typeof d=="function"?new AH(d):d}return c.s=vS,c.v=d,d}return o.clearCache=()=>{n=Ou(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function IH(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let a=0,o=0,s,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),CH(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const d={...n,...l},{memoize:f,memoizeOptions:h=[],argsMemoize:m=TO,argsMemoizeOptions:p=[],devModeChecks:g={}}=d,y=yS(h),x=yS(p),b=NH(i),w=f(function(){return a++,c.apply(null,arguments)},...y),j=m(function(){o++;const k=PH(b,arguments);return s=w.apply(null,k),s},...x);return Object.assign(j,{resultFunc:c,memoizedResultFunc:w,dependencies:b,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>s,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:m})};return Object.assign(r,{withTypes:()=>r}),r}var W=IH(TO),DH=Object.assign((e,t=W)=>{_H(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(a=>e[a]);return t(r,(...a)=>a.reduce((o,s,l)=>(o[n[l]]=s,o),{}))},{withTypes:()=>DH}),IO={},DO={},RO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const o=t(r),s=t(i);if(o===s&&o===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?s-o:o-s}return 0};e.compareValues=n})(RO);var MO={},P0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(P0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P0,n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,o){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||o!=null&&Object.hasOwn(o,a)}e.isKey=i})(MO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RO,n=MO,r=wh;function i(a,o,s,l){if(a==null)return[];s=l?void 0:s,Array.isArray(a)||(a=Object.values(a)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(s)||(s=s==null?[]:[s]),s=s.map(m=>String(m));const c=(m,p)=>{let g=m;for(let y=0;y<p.length&&g!=null;++y)g=g[p[y]];return g},d=(m,p)=>p==null||m==null?p:typeof m=="object"&&"key"in m?Object.hasOwn(p,m.key)?p[m.key]:c(p,m.path):typeof m=="function"?m(p):Array.isArray(m)?c(p,m):typeof p=="object"?p[m]:p,f=o.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||n.isKey(m)?m:{key:m,path:r.toPath(m)}));return a.map(m=>({original:m,criteria:f.map(p=>d(p,m))})).slice().sort((m,p)=>{for(let g=0;g<f.length;g++){const y=t.compareValues(m.criteria[g],p.criteria[g],s[g]);if(y!==0)return y}return 0}).map(m=>m.original)}e.orderBy=i})(DO);var LO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],a=Math.floor(r),o=(s,l)=>{for(let c=0;c<s.length;c++){const d=s[c];Array.isArray(d)&&l<a?o(d,l+1):i.push(d)}};return o(n,0),i}e.flatten=t})(LO);var O0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E0,n=Rh,r=b0,i=k0;function a(o,s,l){return r.isObject(l)&&(typeof s=="number"&&n.isArrayLike(l)&&t.isIndex(s)&&s<l.length||typeof s=="string"&&s in l)?i.eq(l[s],o):!1}e.isIterateeCall=a})(O0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DO,n=LO,r=O0;function i(a,...o){const s=o.length;return s>1&&r.isIterateeCall(a,o[0],o[1])?o=[]:s>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(a,n.flatten(o),["asc"])}e.sortBy=i})(IO);var RH=IO.sortBy;const $h=Ln(RH);var $O=e=>e.legend.settings,MH=e=>e.legend.size,LH=e=>e.legend.payload,$H=W([LH,$O],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?$h(r,n):r});function FH(){return re($H)}var Au=1;function FO(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=v.useState({height:0,left:0,top:0,width:0}),r=v.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),o={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(o.height-t.height)>Au||Math.abs(o.left-t.left)>Au||Math.abs(o.top-t.top)>Au||Math.abs(o.width-t.width)>Au)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function Nt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var UH=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")(),xS=UH,Ip=()=>Math.random().toString(36).substring(7).split("").join("."),zH={INIT:`@@redux/INIT${Ip()}`,REPLACE:`@@redux/REPLACE${Ip()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Ip()}`},rf=zH;function A0(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function UO(e,t,n){if(typeof e!="function")throw new Error(Nt(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Nt(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Nt(1));return n(UO)(e,t)}let r=e,i=t,a=new Map,o=a,s=0,l=!1;function c(){o===a&&(o=new Map,a.forEach((y,x)=>{o.set(x,y)}))}function d(){if(l)throw new Error(Nt(3));return i}function f(y){if(typeof y!="function")throw new Error(Nt(4));if(l)throw new Error(Nt(5));let x=!0;c();const b=s++;return o.set(b,y),function(){if(x){if(l)throw new Error(Nt(6));x=!1,c(),o.delete(b),a=null}}}function h(y){if(!A0(y))throw new Error(Nt(7));if(typeof y.type>"u")throw new Error(Nt(8));if(typeof y.type!="string")throw new Error(Nt(17));if(l)throw new Error(Nt(9));try{l=!0,i=r(i,y)}finally{l=!1}return(a=o).forEach(b=>{b()}),y}function m(y){if(typeof y!="function")throw new Error(Nt(10));r=y,h({type:rf.REPLACE})}function p(){const y=f;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(Nt(11));function b(){const j=x;j.next&&j.next(d())}return b(),{unsubscribe:y(b)}},[xS](){return this}}}return h({type:rf.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:m,[xS]:p}}function BH(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:rf.INIT})>"u")throw new Error(Nt(12));if(typeof n(void 0,{type:rf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Nt(13))})}function zO(e){const t=Object.keys(e),n={};for(let a=0;a<t.length;a++){const o=t[a];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{BH(n)}catch(a){i=a}return function(o={},s){if(i)throw i;let l=!1;const c={};for(let d=0;d<r.length;d++){const f=r[d],h=n[f],m=o[f],p=h(m,s);if(typeof p>"u")throw s&&s.type,new Error(Nt(14));c[f]=p,l=l||p!==m}return l=l||r.length!==Object.keys(o).length,l?c:o}}function af(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function WH(...e){return t=>(n,r)=>{const i=t(n,r);let a=()=>{throw new Error(Nt(15))};const o={getState:i.getState,dispatch:(l,...c)=>a(l,...c)},s=e.map(l=>l(o));return a=af(...s)(i.dispatch),{...i,dispatch:a}}}function BO(e){return A0(e)&&"type"in e&&typeof e.type=="string"}var WO=Symbol.for("immer-nothing"),bS=Symbol.for("immer-draftable"),Rn=Symbol.for("immer-state");function fr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var us=Object.getPrototypeOf;function Qa(e){return!!e&&!!e[Rn]}function fi(e){var t;return e?qO(e)||Array.isArray(e)||!!e[bS]||!!((t=e.constructor)!=null&&t[bS])||Rc(e)||Uh(e):!1}var qH=Object.prototype.constructor.toString();function qO(e){if(!e||typeof e!="object")return!1;const t=us(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===qH}function of(e,t){Fh(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Fh(e){const t=e[Rn];return t?t.type_:Array.isArray(e)?1:Rc(e)?2:Uh(e)?3:0}function My(e,t){return Fh(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function HO(e,t,n){const r=Fh(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function HH(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Rc(e){return e instanceof Map}function Uh(e){return e instanceof Set}function Ca(e){return e.copy_||e.base_}function Ly(e,t){if(Rc(e))return new Map(e);if(Uh(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=qO(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Rn];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const o=i[a],s=r[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[o]})}return Object.create(us(e),r)}else{const r=us(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function T0(e,t=!1){return zh(e)||Qa(e)||!fi(e)||(Fh(e)>1&&Object.defineProperties(e,{set:{value:Tu},add:{value:Tu},clear:{value:Tu},delete:{value:Tu}}),Object.freeze(e),t&&Object.values(e).forEach(n=>T0(n,!0))),e}function Tu(){fr(2)}function zh(e){return Object.isFrozen(e)}var KH={};function Za(e){const t=KH[e];return t||fr(0,e),t}var uc;function KO(){return uc}function VH(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function wS(e,t){t&&(Za("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function $y(e){Fy(e),e.drafts_.forEach(GH),e.drafts_=null}function Fy(e){e===uc&&(uc=e.parent_)}function kS(e){return uc=VH(uc,e)}function GH(e){const t=e[Rn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function SS(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Rn].modified_&&($y(t),fr(4)),fi(e)&&(e=sf(t,e),t.parent_||lf(t,e)),t.patches_&&Za("Patches").generateReplacementPatches_(n[Rn].base_,e,t.patches_,t.inversePatches_)):e=sf(t,n,[]),$y(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==WO?e:void 0}function sf(e,t,n){if(zh(t))return t;const r=t[Rn];if(!r)return of(t,(i,a)=>jS(e,r,t,i,a,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return lf(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let a=i,o=!1;r.type_===3&&(a=new Set(i),i.clear(),o=!0),of(a,(s,l)=>jS(e,r,i,s,l,n,o)),lf(e,i,!1),n&&e.patches_&&Za("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function jS(e,t,n,r,i,a,o){if(Qa(i)){const s=a&&t&&t.type_!==3&&!My(t.assigned_,r)?a.concat(r):void 0,l=sf(e,i,s);if(HO(n,r,l),Qa(l))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(fi(i)&&!zh(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;sf(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(Rc(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&lf(e,i)}}function lf(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&T0(t,n)}function YH(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:KO(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=I0;n&&(i=[r],a=dc);const{revoke:o,proxy:s}=Proxy.revocable(i,a);return r.draft_=s,r.revoke_=o,s}var I0={get(e,t){if(t===Rn)return e;const n=Ca(e);if(!My(n,t))return JH(e,n,t);const r=n[t];return e.finalized_||!fi(r)?r:r===Dp(e.base_,t)?(Rp(e),e.copy_[t]=zy(r,e)):r},has(e,t){return t in Ca(e)},ownKeys(e){return Reflect.ownKeys(Ca(e))},set(e,t,n){const r=VO(Ca(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Dp(Ca(e),t),a=i==null?void 0:i[Rn];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(HH(n,i)&&(n!==void 0||My(e.base_,t)))return!0;Rp(e),Uy(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Dp(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Rp(e),Uy(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Ca(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){fr(11)},getPrototypeOf(e){return us(e.base_)},setPrototypeOf(){fr(12)}},dc={};of(I0,(e,t)=>{dc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});dc.deleteProperty=function(e,t){return dc.set.call(this,e,t,void 0)};dc.set=function(e,t,n){return I0.set.call(this,e[0],t,n,e[0])};function Dp(e,t){const n=e[Rn];return(n?Ca(n):e)[t]}function JH(e,t,n){var i;const r=VO(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function VO(e,t){if(!(t in e))return;let n=us(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=us(n)}}function Uy(e){e.modified_||(e.modified_=!0,e.parent_&&Uy(e.parent_))}function Rp(e){e.copy_||(e.copy_=Ly(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var XH=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const a=n;n=t;const o=this;return function(l=a,...c){return o.produce(l,d=>n.call(this,d,...c))}}typeof n!="function"&&fr(6),r!==void 0&&typeof r!="function"&&fr(7);let i;if(fi(t)){const a=kS(this),o=zy(t,void 0);let s=!0;try{i=n(o),s=!1}finally{s?$y(a):Fy(a)}return wS(a,r),SS(i,a)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===WO&&(i=void 0),this.autoFreeze_&&T0(i,!0),r){const a=[],o=[];Za("Patches").generateReplacementPatches_(t,i,a,o),r(a,o)}return i}else fr(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...s)=>this.produceWithPatches(o,l=>t(l,...s));let r,i;return[this.produce(t,n,(o,s)=>{r=o,i=s}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){fi(e)||fr(8),Qa(e)&&(e=ai(e));const t=kS(this),n=zy(e,void 0);return n[Rn].isManual_=!0,Fy(t),n}finishDraft(e,t){const n=e&&e[Rn];(!n||!n.isManual_)&&fr(9);const{scope_:r}=n;return wS(r,t),SS(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Za("Patches").applyPatches_;return Qa(e)?r(e,t):this.produce(e,i=>r(i,t))}};function zy(e,t){const n=Rc(e)?Za("MapSet").proxyMap_(e,t):Uh(e)?Za("MapSet").proxySet_(e,t):YH(e,t);return(t?t.scope_:KO()).drafts_.push(n),n}function ai(e){return Qa(e)||fr(10,e),GO(e)}function GO(e){if(!fi(e)||zh(e))return e;const t=e[Rn];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Ly(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Ly(e,!0);return of(n,(r,i)=>{HO(n,r,GO(i))}),t&&(t.finalized_=!1),n}var QH=new XH,YO=QH.produce;function JO(e){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,e):i(a)}var ZH=JO(),eK=JO,tK=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?af:af.apply(null,arguments)};function nr(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Tn(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>BO(r)&&r.type===e,n}var XO=class xl extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,xl.prototype)}static get[Symbol.species](){return xl}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new xl(...t[0].concat(this)):new xl(...t.concat(this))}};function CS(e){return fi(e)?YO(e,()=>{}):e}function Iu(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function nK(e){return typeof e=="boolean"}var rK=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=t??{};let o=new XO;return n&&(nK(n)?o.push(ZH):o.push(eK(n.extraArgument))),o},iK="RTK_autoBatch",_S=e=>t=>{setTimeout(t,e)},aK=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,a=!1,o=!1;const s=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:_S(10):e.type==="callback"?e.queueNotification:_S(e.timeout),c=()=>{o=!1,a&&(a=!1,s.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const f=()=>i&&d(),h=r.subscribe(f);return s.add(d),()=>{h(),s.delete(d)}},dispatch(d){var f;try{return i=!((f=d==null?void 0:d.meta)!=null&&f[iK]),a=!i,a&&(o||(o=!0,l(c))),r.dispatch(d)}finally{i=!0}}})},oK=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new XO(e);return r&&i.push(aK(typeof r=="object"?r:void 0)),i};function sK(e){const t=rK(),{reducer:n=void 0,middleware:r,devTools:i=!0,duplicateMiddlewareCheck:a=!0,preloadedState:o=void 0,enhancers:s=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(A0(n))l=zO(n);else throw new Error(Tn(1));let c;typeof r=="function"?c=r(t):c=t();let d=af;i&&(d=tK({trace:!1,...typeof i=="object"&&i}));const f=WH(...c),h=oK(f);let m=typeof s=="function"?s(h):h();const p=d(...m);return UO(l,o,p)}function QO(e){const t={},n=[];let r;const i={addCase(a,o){const s=typeof a=="string"?a:a.type;if(!s)throw new Error(Tn(28));if(s in t)throw new Error(Tn(29));return t[s]=o,i},addAsyncThunk(a,o){return o.pending&&(t[a.pending.type]=o.pending),o.rejected&&(t[a.rejected.type]=o.rejected),o.fulfilled&&(t[a.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:a.settled,reducer:o.settled}),i},addMatcher(a,o){return n.push({matcher:a,reducer:o}),i},addDefaultCase(a){return r=a,i}};return e(i),[t,n,r]}function lK(e){return typeof e=="function"}function cK(e,t){let[n,r,i]=QO(t),a;if(lK(e))a=()=>CS(e());else{const s=CS(e);a=()=>s}function o(s=a(),l){let c=[n[l.type],...r.filter(({matcher:d})=>d(l)).map(({reducer:d})=>d)];return c.filter(d=>!!d).length===0&&(c=[i]),c.reduce((d,f)=>{if(f)if(Qa(d)){const m=f(d,l);return m===void 0?d:m}else{if(fi(d))return YO(d,h=>f(h,l));{const h=f(d,l);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},s)}return o.getInitialState=a,o}var uK="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",dK=(e=21)=>{let t="",n=e;for(;n--;)t+=uK[Math.random()*64|0];return t},fK=Symbol.for("rtk-slice-createasyncthunk");function hK(e,t){return`${e}/${t}`}function mK({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[fK];return function(i){const{name:a,reducerPath:o=a}=i;if(!a)throw new Error(Tn(11));typeof process<"u";const s=(typeof i.reducers=="function"?i.reducers(gK()):i.reducers)||{},l=Object.keys(s),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(j,S){const k=typeof j=="string"?j:j.type;if(!k)throw new Error(Tn(12));if(k in c.sliceCaseReducersByType)throw new Error(Tn(13));return c.sliceCaseReducersByType[k]=S,d},addMatcher(j,S){return c.sliceMatchers.push({matcher:j,reducer:S}),d},exposeAction(j,S){return c.actionCreators[j]=S,d},exposeCaseReducer(j,S){return c.sliceCaseReducersByName[j]=S,d}};l.forEach(j=>{const S=s[j],k={reducerName:j,type:hK(a,j),createNotation:typeof i.reducers=="function"};vK(S)?bK(k,S,d,t):yK(k,S,d)});function f(){const[j={},S=[],k=void 0]=typeof i.extraReducers=="function"?QO(i.extraReducers):[i.extraReducers],_={...j,...c.sliceCaseReducersByType};return cK(i.initialState,N=>{for(let P in _)N.addCase(P,_[P]);for(let P of c.sliceMatchers)N.addMatcher(P.matcher,P.reducer);for(let P of S)N.addMatcher(P.matcher,P.reducer);k&&N.addDefaultCase(k)})}const h=j=>j,m=new Map,p=new WeakMap;let g;function y(j,S){return g||(g=f()),g(j,S)}function x(){return g||(g=f()),g.getInitialState()}function b(j,S=!1){function k(N){let P=N[j];return typeof P>"u"&&S&&(P=Iu(p,k,x)),P}function _(N=h){const P=Iu(m,S,()=>new WeakMap);return Iu(P,N,()=>{const E={};for(const[T,L]of Object.entries(i.selectors??{}))E[T]=pK(L,N,()=>Iu(p,N,x),S);return E})}return{reducerPath:j,getSelectors:_,get selectors(){return _(k)},selectSlice:k}}const w={name:a,reducer:y,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:x,...b(o),injectInto(j,{reducerPath:S,...k}={}){const _=S??o;return j.inject({reducerPath:_,reducer:y},k),{...w,...b(_,!0)}}};return w}}function pK(e,t,n,r){function i(a,...o){let s=t(a);return typeof s>"u"&&r&&(s=n()),e(s,...o)}return i.unwrapped=e,i}var Un=mK();function gK(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function yK({type:e,reducerName:t,createNotation:n},r,i){let a,o;if("reducer"in r){if(n&&!xK(r))throw new Error(Tn(17));a=r.reducer,o=r.prepare}else a=r;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,o?nr(e,o):nr(e))}function vK(e){return e._reducerDefinitionType==="asyncThunk"}function xK(e){return e._reducerDefinitionType==="reducerWithPrepare"}function bK({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Tn(18));const{payloadCreator:a,fulfilled:o,pending:s,rejected:l,settled:c,options:d}=n,f=i(e,a,d);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),s&&r.addCase(f.pending,s),l&&r.addCase(f.rejected,l),c&&r.addMatcher(f.settled,c),r.exposeCaseReducer(t,{fulfilled:o||Du,pending:s||Du,rejected:l||Du,settled:c||Du})}function Du(){}var wK="task",ZO="listener",eA="completed",D0="cancelled",kK=`task-${D0}`,SK=`task-${eA}`,By=`${ZO}-${D0}`,jK=`${ZO}-${eA}`,Bh=class{constructor(e){ru(this,"name","TaskAbortError");ru(this,"message");this.code=e,this.message=`${wK} ${D0} (reason: ${e})`}},R0=(e,t)=>{if(typeof e!="function")throw new TypeError(Tn(32))},cf=()=>{},tA=(e,t=cf)=>(e.catch(t),e),nA=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),za=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Ba=e=>{if(e.aborted){const{reason:t}=e;throw new Bh(t)}};function rA(e,t){let n=cf;return new Promise((r,i)=>{const a=()=>i(new Bh(e.reason));if(e.aborted){a();return}n=nA(e,a),t.finally(()=>n()).then(r,i)}).finally(()=>{n=cf})}var CK=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Bh?"cancelled":"rejected",error:n}}finally{t==null||t()}},uf=e=>t=>tA(rA(e,t).then(n=>(Ba(e),n))),iA=e=>{const t=uf(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:Yo}=Object,ES={},Wh="listenerMiddleware",_K=(e,t)=>{const n=r=>nA(e,()=>za(r,e.reason));return(r,i)=>{R0(r);const a=new AbortController;n(a);const o=CK(async()=>{Ba(e),Ba(a.signal);const s=await r({pause:uf(a.signal),delay:iA(a.signal),signal:a.signal});return Ba(a.signal),s},()=>za(a,SK));return i!=null&&i.autoJoin&&t.push(o.catch(cf)),{result:uf(e)(o),cancel(){za(a,kK)}}}},EK=(e,t)=>{const n=async(r,i)=>{Ba(t);let a=()=>{};const s=[new Promise((l,c)=>{let d=e({predicate:r,effect:(f,h)=>{h.unsubscribe(),l([f,h.getState(),h.getOriginalState()])}});a=()=>{d(),c()}})];i!=null&&s.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await rA(t,Promise.race(s));return Ba(t),l}finally{a()}};return(r,i)=>tA(n(r,i))},aA=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:a}=e;if(t)i=nr(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Tn(21));return R0(a),{predicate:i,type:t,effect:a}},oA=Yo(e=>{const{type:t,predicate:n,effect:r}=aA(e);return{id:dK(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Tn(22))}}},{withTypes:()=>oA}),NS=(e,t)=>{const{type:n,effect:r,predicate:i}=aA(t);return Array.from(e.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},Wy=e=>{e.pending.forEach(t=>{za(t,By)})},NK=e=>()=>{e.forEach(Wy),e.clear()},PS=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},sA=Yo(nr(`${Wh}/add`),{withTypes:()=>sA}),PK=nr(`${Wh}/removeAll`),lA=Yo(nr(`${Wh}/remove`),{withTypes:()=>lA}),OK=(...e)=>{console.error(`${Wh}/error`,...e)},Mc=(e={})=>{const t=new Map,{extra:n,onError:r=OK}=e;R0(r);const i=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&Wy(d)}),a=d=>{const f=NS(t,d)??oA(d);return i(f)};Yo(a,{withTypes:()=>a});const o=d=>{const f=NS(t,d);return f&&(f.unsubscribe(),d.cancelActive&&Wy(f)),!!f};Yo(o,{withTypes:()=>o});const s=async(d,f,h,m)=>{const p=new AbortController,g=EK(a,p.signal),y=[];try{d.pending.add(p),await Promise.resolve(d.effect(f,Yo({},h,{getOriginalState:m,condition:(x,b)=>g(x,b).then(Boolean),take:g,delay:iA(p.signal),pause:uf(p.signal),extra:n,signal:p.signal,fork:_K(p.signal,y),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((x,b,w)=>{x!==p&&(za(x,By),w.delete(x))})},cancel:()=>{za(p,By),d.pending.delete(p)},throwIfCancelled:()=>{Ba(p.signal)}})))}catch(x){x instanceof Bh||PS(r,x,{raisedBy:"effect"})}finally{await Promise.all(y),za(p,jK),d.pending.delete(p)}},l=NK(t);return{middleware:d=>f=>h=>{if(!BO(h))return f(h);if(sA.match(h))return a(h.payload);if(PK.match(h)){l();return}if(lA.match(h))return o(h.payload);let m=d.getState();const p=()=>{if(m===ES)throw new Error(Tn(23));return m};let g;try{if(g=f(h),t.size>0){const y=d.getState(),x=Array.from(t.values());for(const b of x){let w=!1;try{w=b.predicate(h,y,m)}catch(j){w=!1,PS(r,j,{raisedBy:"predicate"})}w&&s(b,h,d,p)}}}finally{m=ES}return g},startListening:a,stopListening:o,clearListeners:l}};function Tn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var AK={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},cA=Un({name:"chartLayout",initialState:AK,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,a;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:TK,setLayout:IK,setChartSize:DK,setScale:RK}=cA.actions,MK=cA.reducer;function OS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function AS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OS(Object(n),!0).forEach(function(r){LK(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function LK(e,t,n){return(t=$K(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $K(e){var t=FK(e,"string");return typeof t=="symbol"?t:t+""}function FK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var df=Math.PI/180,ff=e=>e*Math.PI/180,UK=e=>e*180/Math.PI,De=(e,t,n,r)=>({x:e+Math.cos(-df*r)*n,y:t+Math.sin(-df*r)*n}),zK=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},BK=(e,t)=>{var{x:n,y:r}=e,{x:i,y:a}=t;return Math.sqrt((n-i)**2+(r-a)**2)},WK=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:a}=t,o=BK({x:n,y:r},{x:i,y:a});if(o<=0)return{radius:o,angle:0};var s=(n-i)/o,l=Math.acos(s);return r>a&&(l=2*Math.PI-l),{radius:o,angle:UK(l),angleInRadian:l}},qK=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:t-a*360,endAngle:n-a*360}},HK=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),a=Math.floor(r/360),o=Math.min(i,a);return e+o*360},KK=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:a}=WK({x:n,y:r},t),{innerRadius:o,outerRadius:s}=t;if(i<o||i>s||i===0)return null;var{startAngle:l,endAngle:c}=qK(t),d=a,f;if(l<=c){for(;d>c;)d-=360;for(;d<l;)d+=360;f=d>=l&&d<=c}else{for(;d>l;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=l}return f?AS(AS({},t),{},{radius:i,angle:HK(d,t)}):null},uA=e=>!v.isValidElement(e)&&typeof e!="function"&&typeof e!="boolean"&&e!=null?e.className:"";function dA(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function TS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Jn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TS(Object(n),!0).forEach(function(r){VK(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VK(e,t,n){return(t=GK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GK(e){var t=YK(e,"string");return typeof t=="symbol"?t:t+""}function YK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vt(e,t,n){return it(e)||it(t)?n:Br(t)?ss(e,t,n):typeof t=="function"?t(e):n}var JK=(e,t,n,r,i)=>{var a,o=-1,s=(a=t==null?void 0:t.length)!==null&&a!==void 0?a:0;if(s<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<s;l++){var c=l>0?n[l-1].coordinate:n[s-1].coordinate,d=n[l].coordinate,f=l>=s-1?n[0].coordinate:n[l+1].coordinate,h=void 0;if(dn(d-c)!==dn(f-d)){var m=[];if(dn(f-d)===dn(i[1]-i[0])){h=f;var p=d+i[1]-i[0];m[0]=Math.min(p,(p+c)/2),m[1]=Math.max(p,(p+c)/2)}else{h=c;var g=f+i[1]-i[0];m[0]=Math.min(d,(g+d)/2),m[1]=Math.max(d,(g+d)/2)}var y=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>y[0]&&e<=y[1]||e>=m[0]&&e<=m[1]){({index:o}=n[l]);break}}else{var x=Math.min(c,f),b=Math.max(c,f);if(e>(x+d)/2&&e<=(b+d)/2){({index:o}=n[l]);break}}}else if(t){for(var w=0;w<s;w++)if(w===0&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w>0&&w<s-1&&e>(t[w].coordinate+t[w-1].coordinate)/2&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w===s-1&&e>(t[w].coordinate+t[w-1].coordinate)/2){({index:o}=t[w]);break}}return o},XK=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:a,verticalAlign:o,layout:s}=t;if((s==="vertical"||s==="horizontal"&&o==="middle")&&a!=="center"&&ue(e[a]))return Jn(Jn({},e),{},{[a]:e[a]+(r||0)});if((s==="horizontal"||s==="vertical"&&a==="center")&&o!=="middle"&&ue(e[o]))return Jn(Jn({},e),{},{[o]:e[o]+(i||0)})}return e},ua=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",fA=(e,t,n,r)=>{if(r)return e.map(s=>s.coordinate);var i,a,o=e.map(s=>(s.coordinate===t&&(i=!0),s.coordinate===n&&(a=!0),s.coordinate));return i||o.push(t),a||o.push(n),o},hA=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:a,scale:o,realScaleType:s,isCategorical:l,categoricalDomain:c,tickCount:d,ticks:f,niceTicks:h,axisType:m}=e;if(!o)return null;var p=s==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,g=(t||n)&&i==="category"&&o.bandwidth?o.bandwidth()/p:0;if(g=m==="angleAxis"&&a&&a.length>=2?dn(a[0]-a[1])*2*g:g,t&&(f||h)){var y=(f||h||[]).map((x,b)=>{var w=r?r.indexOf(x):x;return{coordinate:o(w)+g,value:x,offset:g,index:b}});return y.filter(x=>!Dn(x.coordinate))}return l&&c?c.map((x,b)=>({coordinate:o(x)+g,value:x,index:b,offset:g})):o.ticks&&!n&&d!=null?o.ticks(d).map((x,b)=>({coordinate:o(x)+g,value:x,offset:g,index:b})):o.domain().map((x,b)=>({coordinate:o(x)+g,value:r?r[x]:x,index:b,offset:g}))},IS=1e-4,QK=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-IS,a=Math.max(r[0],r[1])+IS,o=e(t[0]),s=e(t[n-1]);(o<i||o>a||s<i||s>a)&&e.domain([t[0],t[n-1]])}},ZK=(e,t)=>{if(!t||t.length!==2||!ue(t[0])||!ue(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!ue(e[0])||e[0]<n)&&(i[0]=n),(!ue(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},eV=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0,o=0;o<t;++o){var s=Dn(e[o][n][1])?e[o][n][0]:e[o][n][1];s>=0?(e[o][n][0]=i,e[o][n][1]=i+s,i=e[o][n][1]):(e[o][n][0]=a,e[o][n][1]=a+s,a=e[o][n][1])}},tV=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0;a<t;++a){var o=Dn(e[a][n][1])?e[a][n][0]:e[a][n][1];o>=0?(e[a][n][0]=i,e[a][n][1]=i+o,i=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}},nV={sign:eV,expand:Fq,none:ls,silhouette:Uq,wiggle:zq,positive:tV},rV=(e,t,n)=>{var r=nV[n],i=$q().keys(t).value((a,o)=>+vt(a,o,0)).order(Iy).offset(r);return i(e)};function iV(e){return e==null?void 0:String(e)}var DS=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:a,index:o}=e;if(t.type==="category")return n[o]?n[o].coordinate+r:null;var s=vt(a,t.dataKey,t.scale.domain()[o]);return it(s)?null:t.scale(s)-i/2+r},aV=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},oV=e=>{var t=e.flat(2).filter(ue);return[Math.min(...t),Math.max(...t)]},sV=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],lV=(e,t,n)=>{if(e!=null)return sV(Object.keys(e).reduce((r,i)=>{var a=e[i],{stackedData:o}=a,s=o.reduce((l,c)=>{var d=dA(c,t,n),f=oV(d);return[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(s[0],r[0]),Math.max(s[1],r[1])]},[1/0,-1/0]))},RS=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,MS=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fc=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=$h(t,d=>d.coordinate),a=1/0,o=1,s=i.length;o<s;o++){var l=i[o],c=i[o-1];a=Math.min((l.coordinate||0)-(c.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function LS(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:a}=e;return Jn(Jn({},t),{},{dataKey:n,payload:r,value:i,name:a})}function qh(e,t){if(e)return String(e);if(typeof t=="string")return t}function cV(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var a=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return a?{x:e,y:t}:null}return r?KK({x:e,y:t},r):null}var uV=(e,t,n,r)=>{var i=t.find(c=>c&&c.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var a=i.coordinate,{radius:o}=r;return Jn(Jn(Jn({},r),De(r.cx,r.cy,o,a)),{},{angle:a,radius:o})}var s=i.coordinate,{angle:l}=r;return Jn(Jn(Jn({},r),De(r.cx,r.cy,s,l)),{},{angle:l,radius:s})}return{x:0,y:0}},dV=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,wi=e=>e.layout.width,ki=e=>e.layout.height,fV=e=>e.layout.scale,mA=e=>e.layout.margin,Hh=W(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Kh=W(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),hV="data-recharts-item-index",mV="data-recharts-item-data-key",Lc=60;function $S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ru(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$S(Object(n),!0).forEach(function(r){pV(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$S(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pV(e,t,n){return(t=gV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gV(e){var t=yV(e,"string");return typeof t=="symbol"?t:t+""}function yV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vV=e=>e.brush.height;function xV(e){var t=Kh(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Lc;return n+i}return n},0)}function bV(e){var t=Kh(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Lc;return n+i}return n},0)}function wV(e){var t=Hh(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function kV(e){var t=Hh(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Ct=W([wi,ki,mA,vV,xV,bV,wV,kV,$O,MH],(e,t,n,r,i,a,o,s,l,c)=>{var d={left:(n.left||0)+i,right:(n.right||0)+a},f={top:(n.top||0)+o,bottom:(n.bottom||0)+s},h=Ru(Ru({},f),d),m=h.bottom;h.bottom+=r,h=XK(h,l,c);var p=e-h.left-h.right,g=t-h.top-h.bottom;return Ru(Ru({brushBottom:m},h),{},{width:Math.max(p,0),height:Math.max(g,0)})}),SV=W(Ct,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),M0=W(wi,ki,(e,t)=>({x:0,y:0,width:e,height:t})),jV=v.createContext(null),vn=()=>v.useContext(jV)!=null,Vh=e=>e.brush,Gh=W([Vh,Ct,mA],(e,t,n)=>({height:e.height,x:ue(e.x)?e.x:t.left,y:ue(e.y)?e.y:t.top+t.height+t.brushBottom-((n==null?void 0:n.bottom)||0),width:ue(e.width)?e.width:t.width})),L0=()=>{var e,t=vn(),n=re(SV),r=re(Gh),i=(e=re(Vh))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},CV={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},pA=()=>{var e;return(e=re(Ct))!==null&&e!==void 0?e:CV},$0=()=>re(wi),F0=()=>re(ki),_V=()=>re(e=>e.layout.margin),je=e=>e.layout.layoutType,U0=()=>re(je),EV={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},gA=Un({name:"legend",initialState:EV,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=ai(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:FS,setLegendSettings:NV,addLegendPayload:yA,removeLegendPayload:vA}=gA.actions,PV=gA.reducer,OV=["contextPayload"];function qy(){return qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qy.apply(null,arguments)}function US(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ds(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?US(Object(n),!0).forEach(function(r){z0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):US(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function z0(e,t,n){return(t=AV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AV(e){var t=TV(e,"string");return typeof t=="symbol"?t:t+""}function TV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IV(e,t){if(e==null)return{};var n,r,i=DV(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function DV(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function RV(e){return e.value}function MV(e){var{contextPayload:t}=e,n=IV(e,OV),r=EO(t,e.payloadUniqBy,RV),i=ds(ds({},n),{},{payload:r});return v.isValidElement(e.content)?v.cloneElement(e.content,i):typeof e.content=="function"?v.createElement(e.content,i):v.createElement(x0,i)}function LV(e,t,n,r,i,a){var{layout:o,align:s,verticalAlign:l}=t,c,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(s==="center"&&o==="vertical"?c={left:((r||0)-a.width)/2}:c=s==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(l==="middle"?d={top:((i||0)-a.height)/2}:d=l==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),ds(ds({},c),d)}function $V(e){var t=Ve();return v.useEffect(()=>{t(NV(e))},[t,e]),null}function FV(e){var t=Ve();return v.useEffect(()=>(t(FS(e)),()=>{t(FS({width:0,height:0}))}),[t,e]),null}function UV(e){var t=FH(),n=lq(),r=_V(),{width:i,height:a,wrapperStyle:o,portal:s}=e,[l,c]=FO([t]),d=$0(),f=F0();if(d==null||f==null)return null;var h=d-(r.left||0)-(r.right||0),m=Yh.getWidthOrHeight(e.layout,a,i,h),p=s?o:ds(ds({position:"absolute",width:(m==null?void 0:m.width)||i||"auto",height:(m==null?void 0:m.height)||a||"auto"},LV(o,e,r,d,f,l)),o),g=s??n;if(g==null)return null;var y=v.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:c},v.createElement($V,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),v.createElement(FV,{width:l.width,height:l.height}),v.createElement(MV,qy({},e,m,{margin:r,chartWidth:d,chartHeight:f,contextPayload:t})));return jx.createPortal(y,g)}class Yh extends v.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&ue(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return v.createElement(UV,this.props)}}z0(Yh,"displayName","Legend");z0(Yh,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function Hy(){return Hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hy.apply(null,arguments)}function zS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zS(Object(n),!0).forEach(function(r){zV(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zV(e,t,n){return(t=BV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BV(e){var t=WV(e,"string");return typeof t=="symbol"?t:t+""}function WV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qV(e){return Array.isArray(e)&&Br(e[0])&&Br(e[1])?e.join(" ~ "):e}var HV=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:o,itemSorter:s,wrapperClassName:l,labelClassName:c,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,m=()=>{if(a&&a.length){var S={padding:0,margin:0},k=(s?$h(a,s):a).map((_,N)=>{if(_.type==="none")return null;var P=_.formatter||o||qV,{value:E,name:T}=_,L=E,$=T;if(P){var B=P(E,T,_,N,a);if(Array.isArray(B))[L,$]=B;else if(B!=null)L=B;else return null}var D=Mp({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},r);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(N),style:D},Br($)?v.createElement("span",{className:"recharts-tooltip-item-name"},$):null,Br($)?v.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,v.createElement("span",{className:"recharts-tooltip-item-value"},L),v.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:S},k)}return null},p=Mp({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),g=Mp({margin:0},i),y=!it(d),x=y?d:"",b=Se("recharts-default-tooltip",l),w=Se("recharts-tooltip-label",c);y&&f&&a!==void 0&&a!==null&&(x=f(d,a));var j=h?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",Hy({className:b,style:p},j),v.createElement("p",{className:w,style:g},v.isValidElement(x)?x:"".concat(x)),m())},al="recharts-tooltip-wrapper",KV={visibility:"hidden"};function VV(e){var{coordinate:t,translateX:n,translateY:r}=e;return Se(al,{["".concat(al,"-right")]:ue(n)&&t&&ue(t.x)&&n>=t.x,["".concat(al,"-left")]:ue(n)&&t&&ue(t.x)&&n<t.x,["".concat(al,"-bottom")]:ue(r)&&t&&ue(t.y)&&r>=t.y,["".concat(al,"-top")]:ue(r)&&t&&ue(t.y)&&r<t.y})}function BS(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:o,tooltipDimension:s,viewBox:l,viewBoxDimension:c}=e;if(a&&ue(a[r]))return a[r];var d=n[r]-s-(i>0?i:0),f=n[r]+i;if(t[r])return o[r]?d:f;var h=l[r];if(h==null)return 0;if(o[r]){var m=d,p=h;return m<p?Math.max(f,h):Math.max(d,h)}if(c==null)return 0;var g=f+s,y=h+c;return g>y?Math.max(d,h):Math.max(f,h)}function GV(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function YV(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:o,useTranslate3d:s,viewBox:l}=e,c,d,f;return o.height>0&&o.width>0&&n?(d=BS({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),f=BS({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=GV({translateX:d,translateY:f,useTranslate3d:s})):c=KV,{cssProperties:c,cssClasses:VV({translateX:d,translateY:f,coordinate:n})}}function WS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WS(Object(n),!0).forEach(function(r){Ky(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ky(e,t,n){return(t=JV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JV(e){var t=XV(e,"string");return typeof t=="symbol"?t:t+""}function XV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class QV extends v.PureComponent{constructor(){super(...arguments),Ky(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Ky(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:o,hasPayload:s,isAnimationActive:l,offset:c,position:d,reverseDirection:f,useTranslate3d:h,viewBox:m,wrapperStyle:p,lastBoundingBox:g,innerRef:y,hasPortalFromProps:x}=this.props,{cssClasses:b,cssProperties:w}=YV({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:c,position:d,reverseDirection:f,tooltipBox:{height:g.height,width:g.width},useTranslate3d:h,viewBox:m}),j=x?{}:Mu(Mu({transition:l&&t?"transform ".concat(r,"ms ").concat(i):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&s?"visible":"hidden",position:"absolute",top:0,left:0}),S=Mu(Mu({},j),{},{visibility:!this.state.dismissed&&t&&s?"visible":"hidden"},p);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:b,style:S,ref:y},a)}}var ZV=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),lo={devToolsEnabled:!1,isSsr:ZV()},xA=()=>re(e=>e.rootProps.accessibilityLayer);function Mn(e){return Number.isFinite(e)}function fs(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Vy(){return Vy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vy.apply(null,arguments)}function qS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function HS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qS(Object(n),!0).forEach(function(r){e7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function e7(e,t,n){return(t=t7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t7(e){var t=n7(e,"string");return typeof t=="symbol"?t:t+""}function n7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KS={curveBasisClosed:Eq,curveBasisOpen:Nq,curveBasis:_q,curveBumpX:fq,curveBumpY:hq,curveLinearClosed:Pq,curveLinear:Ih,curveMonotoneX:Oq,curveMonotoneY:Aq,curveNatural:Tq,curveStep:Iq,curveStepAfter:Rq,curveStepBefore:Dq},Lu=e=>Mn(e.x)&&Mn(e.y),ol=e=>e.x,sl=e=>e.y,r7=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Ic(e));return(n==="curveMonotone"||n==="curveBump")&&t?KS["".concat(n).concat(t==="vertical"?"Y":"X")]:KS[n]||Ih},i7=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=e,o=r7(t,i),s=a?n.filter(Lu):n,l;if(Array.isArray(r)){var c=a?r.filter(f=>Lu(f)):r,d=s.map((f,h)=>HS(HS({},f),{},{base:c[h]}));return i==="vertical"?l=Pu().y(sl).x1(ol).x0(f=>f.base.x):l=Pu().x(ol).y1(sl).y0(f=>f.base.y),l.defined(Lu).curve(o),l(d)}return i==="vertical"&&ue(r)?l=Pu().y(sl).x1(ol).x0(r):ue(r)?l=Pu().x(ol).y1(sl).y0(r):l=eO().x(ol).y(sl),l.defined(Lu).curve(o),l(s)},a7=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var a=n&&n.length?i7(e):r;return v.createElement("path",Vy({},Zt(e),f0(e),{className:Se("recharts-curve",t),d:a===null?void 0:a,ref:i}))},o7=["x","y","top","left","width","height","className"];function Gy(){return Gy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gy.apply(null,arguments)}function VS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function s7(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VS(Object(n),!0).forEach(function(r){l7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function l7(e,t,n){return(t=c7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c7(e){var t=u7(e,"string");return typeof t=="symbol"?t:t+""}function u7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d7(e,t){if(e==null)return{};var n,r,i=f7(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function f7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var h7=(e,t,n,r,i,a)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(a,",").concat(t,"h").concat(n),m7=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:a=0,height:o=0,className:s}=e,l=d7(e,o7),c=s7({x:t,y:n,top:r,left:i,width:a,height:o},l);return!ue(t)||!ue(n)||!ue(a)||!ue(o)||!ue(r)||!ue(i)?null:v.createElement("path",Gy({},Ae(c,!0),{className:Se("recharts-cross",s),d:h7(t,n,a,o,r,i)}))};function p7(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function GS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function g7(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GS(Object(n),!0).forEach(function(r){y7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function y7(e,t,n){return(t=v7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v7(e){var t=x7(e,"string");return typeof t=="symbol"?t:t+""}function x7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xn(e,t){var n=g7({},e),r=t,i=Object.keys(t),a=i.reduce((o,s)=>(o[s]===void 0&&r[s]!==void 0&&(o[s]=r[s]),o),n);return a}function b7(){}function YS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function JS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YS(Object(n),!0).forEach(function(r){w7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function w7(e,t,n){return(t=k7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k7(e){var t=S7(e,"string");return typeof t=="symbol"?t:t+""}function S7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var j7=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),bA=(e,t,n)=>e.map(r=>"".concat(j7(r)," ").concat(t,"ms ").concat(n)).join(","),C7=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),hc=(e,t)=>Object.keys(t).reduce((n,r)=>JS(JS({},n),{},{[r]:e(r,t[r])}),{});function XS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XS(Object(n),!0).forEach(function(r){_7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _7(e,t,n){return(t=E7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E7(e){var t=N7(e,"string");return typeof t=="symbol"?t:t+""}function N7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hf=(e,t,n)=>e+(t-e)*n,Yy=e=>{var{from:t,to:n}=e;return t!==n},wA=(e,t,n)=>{var r=hc((i,a)=>{if(Yy(a)){var[o,s]=e(a.from,a.to,a.velocity);return Ot(Ot({},a),{},{from:o,velocity:s})}return a},t);return n<1?hc((i,a)=>Yy(a)?Ot(Ot({},a),{},{velocity:hf(a.velocity,r[i].velocity,n),from:hf(a.from,r[i].from,n)}):a,t):wA(e,r,n-1)};function P7(e,t,n,r,i,a){var o,s=r.reduce((h,m)=>Ot(Ot({},h),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),l=()=>hc((h,m)=>m.from,s),c=()=>!Object.values(s).filter(Yy).length,d=null,f=h=>{o||(o=h);var m=h-o,p=m/n.dt;s=wA(n,s,p),i(Ot(Ot(Ot({},e),t),l())),o=h,c()||(d=a.setTimeout(f))};return()=>(d=a.setTimeout(f),()=>{d()})}function O7(e,t,n,r,i,a,o){var s=null,l=i.reduce((f,h)=>Ot(Ot({},f),{},{[h]:[e[h],t[h]]}),{}),c,d=f=>{c||(c=f);var h=(f-c)/r,m=hc((g,y)=>hf(...y,n(h)),l);if(a(Ot(Ot(Ot({},e),t),m)),h<1)s=o.setTimeout(d);else{var p=hc((g,y)=>hf(...y,n(1)),l);a(Ot(Ot(Ot({},e),t),p))}};return()=>(s=o.setTimeout(d),()=>{s()})}const A7=(e,t,n,r,i,a)=>{var o=C7(e,t);return n.isStepper===!0?P7(e,t,n,o,i,a):O7(e,t,n,r,o,i,a)};var mf=1e-4,kA=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],SA=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),QS=(e,t)=>n=>{var r=kA(e,t);return SA(r,n)},T7=(e,t)=>n=>{var r=kA(e,t),i=[...r.map((a,o)=>a*o).slice(1),0];return SA(i,n)},ZS=function(){for(var t,n,r,i,a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];if(o.length===1)switch(o[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var l=o[0].split("(");l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4&&([t,r,n,i]=l[1].split(")")[0].split(",").map(p=>parseFloat(p)))}}else o.length===4&&([t,r,n,i]=o);var c=QS(t,n),d=QS(r,i),f=T7(t,n),h=p=>p>1?1:p<0?0:p,m=p=>{for(var g=p>1?1:p,y=g,x=0;x<8;++x){var b=c(y)-g,w=f(y);if(Math.abs(b-g)<mf||w<mf)return d(y);y=h(y-b/w)}return d(y)};return m.isStepper=!1,m},I7=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,a=(o,s,l)=>{var c=-(o-s)*n,d=l*r,f=l+(c-d)*i/1e3,h=l*i/1e3+o;return Math.abs(h-s)<mf&&Math.abs(f)<mf?[s,0]:[h,f]};return a.isStepper=!0,a.dt=i,a},D7=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return ZS(e);case"spring":return I7();default:if(e.split("(")[0]==="cubic-bezier")return ZS(e)}return typeof e=="function"?e:null};function R7(e){var t,n=()=>null,r=!1,i=null,a=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var s=o,[l,...c]=s;if(typeof l=="number"){i=e.setTimeout(a.bind(null,c),l);return}a(l),i=e.setTimeout(a.bind(null,c));return}typeof o=="string"&&(t=o,n(t)),typeof o=="object"&&(t=o,n(t)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,i&&(i(),i=null),a(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>e}}class M7{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=o=>{o-r>=n?t(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{cancelAnimationFrame(i)}}}function L7(){return R7(new M7)}var $7=v.createContext(L7);function F7(e,t){var n=v.useContext($7);return v.useMemo(()=>t??n(e),[e,t,n])}var U7={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},ej={t:0},Lp={t:1};function Jh(e){var t=xn(e,U7),{isActive:n,canBegin:r,duration:i,easing:a,begin:o,onAnimationEnd:s,onAnimationStart:l,children:c}=t,d=F7(t.animationId,t.animationManager),[f,h]=v.useState(n?ej:Lp),m=v.useRef(null);return v.useEffect(()=>{n||h(Lp)},[n]),v.useEffect(()=>{if(!n||!r)return b7;var p=A7(ej,Lp,D7(a),i,h,d.getTimeoutController()),g=()=>{m.current=p()};return d.start([l,o,g,i,s]),()=>{d.stop(),m.current&&m.current(),s()}},[n,r,i,a,o,l,s,d]),c(f.t)}function Xh(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=v.useRef(cc(t)),r=v.useRef(e);return r.current!==e&&(n.current=cc(t),r.current=e),n.current}function tj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tj(Object(n),!0).forEach(function(r){z7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function z7(e,t,n){return(t=B7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B7(e){var t=W7(e,"string");return typeof t=="symbol"?t:t+""}function W7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pf(){return pf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pf.apply(null,arguments)}var rj=(e,t,n,r,i)=>{var a=Math.min(Math.abs(n)/2,Math.abs(r)/2),o=r>=0?1:-1,s=n>=0?1:-1,l=r>=0&&n>=0||r<0&&n<0?1:0,c;if(a>0&&i instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=i[f]>a?a:i[f];c="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(c+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(l,",").concat(e+s*d[0],",").concat(t)),c+="L ".concat(e+n-s*d[1],",").concat(t),d[1]>0&&(c+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(l,`,
        `).concat(e+n,",").concat(t+o*d[1])),c+="L ".concat(e+n,",").concat(t+r-o*d[2]),d[2]>0&&(c+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(l,`,
        `).concat(e+n-s*d[2],",").concat(t+r)),c+="L ".concat(e+s*d[3],",").concat(t+r),d[3]>0&&(c+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(t+r-o*d[3])),c+="Z"}else if(a>0&&i===+i&&i>0){var m=Math.min(a,i);c="M ".concat(e,",").concat(t+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e+s*m,",").concat(t,`
            L `).concat(e+n-s*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e+n,",").concat(t+o*m,`
            L `).concat(e+n,",").concat(t+r-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e+n-s*m,",").concat(t+r,`
            L `).concat(e+s*m,",").concat(t+r,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e,",").concat(t+r-o*m," Z")}else c="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return c},q7={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},jA=e=>{var t=xn(e,q7),n=v.useRef(null),[r,i]=v.useState(-1);v.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var B=n.current.getTotalLength();B&&i(B)}catch{}},[]);var{x:a,y:o,width:s,height:l,radius:c,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isAnimationActive:p,isUpdateAnimationActive:g}=t,y=v.useRef(s),x=v.useRef(l),b=v.useRef(a),w=v.useRef(o),j=v.useMemo(()=>({x:a,y:o,width:s,height:l,radius:c}),[a,o,s,l,c]),S=Xh(j,"rectangle-");if(a!==+a||o!==+o||s!==+s||l!==+l||s===0||l===0)return null;var k=Se("recharts-rectangle",d);if(!g)return v.createElement("path",pf({},Ae(t,!0),{className:k,d:rj(a,o,s,l,c)}));var _=y.current,N=x.current,P=b.current,E=w.current,T="0px ".concat(r===-1?1:r,"px"),L="".concat(r,"px 0px"),$=bA(["strokeDasharray"],h,typeof f=="string"?f:void 0);return v.createElement(Jh,{animationId:S,key:S,canBegin:r>0,duration:h,easing:f,isActive:g,begin:m},B=>{var D=pt(_,s,B),z=pt(N,l,B),G=pt(P,a,B),I=pt(E,o,B);n.current&&(y.current=D,x.current=z,b.current=G,w.current=I);var R;return p?B>0?R={transition:$,strokeDasharray:L}:R={strokeDasharray:T}:R={strokeDasharray:L},v.createElement("path",pf({},Ae(t,!0),{className:k,d:rj(G,I,D,z,c),ref:n,style:nj(nj({},R),t.style)}))})};function CA(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:a}=e,o=De(t,n,r,i),s=De(t,n,r,a);return{points:[o,s],cx:t,cy:n,radius:r,startAngle:i,endAngle:a}}function Jy(){return Jy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jy.apply(null,arguments)}var H7=(e,t)=>{var n=dn(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},$u=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:a,isExternal:o,cornerRadius:s,cornerIsExternal:l}=e,c=s*(o?1:-1)+r,d=Math.asin(s/c)/df,f=l?i:i+a*d,h=De(t,n,c,f),m=De(t,n,r,f),p=l?i-a*d:i,g=De(t,n,c*Math.cos(d*df),p);return{center:h,circleTangency:m,lineTangency:g,theta:d}},_A=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:o}=e,s=H7(a,o),l=a+s,c=De(t,n,i,a),d=De(t,n,i,l),f="M ".concat(c.x,",").concat(c.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(s)>180),",").concat(+(a>l),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(r>0){var h=De(t,n,r,a),m=De(t,n,r,l);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(s)>180),",").concat(+(a<=l),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(n," Z");return f},K7=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:s,startAngle:l,endAngle:c}=e,d=dn(c-l),{circleTangency:f,lineTangency:h,theta:m}=$u({cx:t,cy:n,radius:i,angle:l,sign:d,cornerRadius:a,cornerIsExternal:s}),{circleTangency:p,lineTangency:g,theta:y}=$u({cx:t,cy:n,radius:i,angle:c,sign:-d,cornerRadius:a,cornerIsExternal:s}),x=s?Math.abs(l-c):Math.abs(l-c)-m-y;if(x<0)return o?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):_A({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var b="M ".concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(x>180),",").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
  `);if(r>0){var{circleTangency:w,lineTangency:j,theta:S}=$u({cx:t,cy:n,radius:r,angle:l,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),{circleTangency:k,lineTangency:_,theta:N}=$u({cx:t,cy:n,radius:r,angle:c,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),P=s?Math.abs(l-c):Math.abs(l-c)-S-N;if(P<0&&a===0)return"".concat(b,"L").concat(t,",").concat(n,"Z");b+="L".concat(_.x,",").concat(_.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(P>180),",").concat(+(d>0),",").concat(w.x,",").concat(w.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(j.x,",").concat(j.y,"Z")}else b+="L".concat(t,",").concat(n,"Z");return b},V7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},EA=e=>{var t=xn(e,V7),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:l,startAngle:c,endAngle:d,className:f}=t;if(a<i||c===d)return null;var h=Se("recharts-sector",f),m=a-i,p=br(o,m,0,!0),g;return p>0&&Math.abs(c-d)<360?g=K7({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(p,m/2),forceCornerRadius:s,cornerIsExternal:l,startAngle:c,endAngle:d}):g=_A({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:c,endAngle:d}),v.createElement("path",Jy({},Ae(t,!0),{className:h,d:g}))};function G7(e,t,n){var r,i,a,o;if(e==="horizontal")r=t.x,a=r,i=n.top,o=n.top+n.height;else if(e==="vertical")i=t.y,o=i,r=n.left,a=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:s,cy:l,innerRadius:c,outerRadius:d,angle:f}=t,h=De(s,l,c,f),m=De(s,l,d,f);r=h.x,i=h.y,a=m.x,o=m.y}else return CA(t);return[{x:r,y:i},{x:a,y:o}]}var NA={},PA={},OA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P0;function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(OA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OA;function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(PA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O0,n=PA;function r(i,a,o){o&&typeof o!="number"&&t.isIterateeCall(i,a,o)&&(a=o=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),o=o===void 0?i<a?1:-1:n.toFinite(o);const s=Math.max(Math.ceil((a-i)/(o||1)),0),l=new Array(s);for(let c=0;c<s;c++)l[c]=i,i+=o;return l}e.range=r})(NA);var Y7=NA.range;const AA=Ln(Y7);function Qi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function J7(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function B0(e){let t,n,r;e.length!==2?(t=Qi,n=(s,l)=>Qi(e(s),l),r=(s,l)=>e(s)-l):(t=e===Qi||e===J7?e:X7,n=e,r=e);function i(s,l,c=0,d=s.length){if(c<d){if(t(l,l)!==0)return d;do{const f=c+d>>>1;n(s[f],l)<0?c=f+1:d=f}while(c<d)}return c}function a(s,l,c=0,d=s.length){if(c<d){if(t(l,l)!==0)return d;do{const f=c+d>>>1;n(s[f],l)<=0?c=f+1:d=f}while(c<d)}return c}function o(s,l,c=0,d=s.length){const f=i(s,l,c,d-1);return f>c&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:i,center:o,right:a}}function X7(){return 0}function TA(e){return e===null?NaN:+e}function*Q7(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const Z7=B0(Qi),eG=Z7.right;B0(TA).center;const $c=eG;class ij extends Map{constructor(t,n=rG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(aj(this,t))}has(t){return super.has(aj(this,t))}set(t,n){return super.set(tG(this,t),n)}delete(t){return super.delete(nG(this,t))}}function aj({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function tG({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function nG({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function rG(e){return e!==null&&typeof e=="object"?e.valueOf():e}function iG(e=Qi){if(e===Qi)return IA;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function IA(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const aG=Math.sqrt(50),oG=Math.sqrt(10),sG=Math.sqrt(2);function gf(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=aG?10:a>=oG?5:a>=sG?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/o,s=Math.round(e*c),l=Math.round(t*c),s/c<e&&++s,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*o,s=Math.round(e/c),l=Math.round(t/c),s*c<e&&++s,l*c>t&&--l),l<s&&.5<=n&&n<2?gf(e,t,n*2):[s,l,c]}function Xy(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?gf(t,e,n):gf(e,t,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let c=0;c<s;++c)l[c]=(a-c)/-o;else for(let c=0;c<s;++c)l[c]=(a-c)*o;else if(o<0)for(let c=0;c<s;++c)l[c]=(i+c)/-o;else for(let c=0;c<s;++c)l[c]=(i+c)*o;return l}function Qy(e,t,n){return t=+t,e=+e,n=+n,gf(e,t,n)[2]}function Zy(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Qy(t,e,n):Qy(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function oj(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function sj(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function DA(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?IA:iG(i);r>n;){if(r-n>600){const l=r-n+1,c=t-n+1,d=Math.log(l),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(l-f)/l)*(c-l/2<0?-1:1),m=Math.max(n,Math.floor(t-c*f/l+h)),p=Math.min(r,Math.floor(t+(l-c)*f/l+h));DA(e,t,m,p,i)}const a=e[t];let o=n,s=r;for(ll(e,n,t),i(e[r],a)>0&&ll(e,n,r);o<s;){for(ll(e,o,s),++o,--s;i(e[o],a)<0;)++o;for(;i(e[s],a)>0;)--s}i(e[n],a)===0?ll(e,n,s):(++s,ll(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function ll(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function lG(e,t,n){if(e=Float64Array.from(Q7(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return sj(e);if(t>=1)return oj(e);var r,i=(r-1)*t,a=Math.floor(i),o=oj(DA(e,a).subarray(0,a+1)),s=sj(e.subarray(a+1));return o+(s-o)*(i-a)}}function cG(e,t,n=TA){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),s=+n(e[a+1],a+1,e);return o+(s-o)*(i-a)}}function uG(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function ar(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Si(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const ev=Symbol("implicit");function W0(){var e=new ij,t=[],n=[],r=ev;function i(a){let o=e.get(a);if(o===void 0){if(r!==ev)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new ij;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return W0(t,n).unknown(r)},ar.apply(i,arguments),i}function q0(){var e=W0().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,s=!1,l=0,c=0,d=.5;delete e.unknown;function f(){var h=t().length,m=i<r,p=m?i:r,g=m?r:i;a=(g-p)/Math.max(1,h-l+c*2),s&&(a=Math.floor(a)),p+=(g-p-a*(h-l))*d,o=a*(1-l),s&&(p=Math.round(p),o=Math.round(o));var y=uG(h).map(function(x){return p+a*x});return n(m?y.reverse():y)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,f()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(h){return arguments.length?(s=!!h,f()):s},e.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),f()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},e.paddingOuter=function(h){return arguments.length?(c=+h,f()):c},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return q0(t(),[r,i]).round(s).paddingInner(l).paddingOuter(c).align(d)},ar.apply(f(),arguments)}function RA(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return RA(t())},e}function dG(){return RA(q0.apply(null,arguments).paddingInner(1))}function H0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function MA(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Fc(){}var mc=.7,yf=1/mc,Jo="\\s*([+-]?\\d+)\\s*",pc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fG=/^#([0-9a-f]{3,8})$/,hG=new RegExp(`^rgb\\(${Jo},${Jo},${Jo}\\)$`),mG=new RegExp(`^rgb\\(${zr},${zr},${zr}\\)$`),pG=new RegExp(`^rgba\\(${Jo},${Jo},${Jo},${pc}\\)$`),gG=new RegExp(`^rgba\\(${zr},${zr},${zr},${pc}\\)$`),yG=new RegExp(`^hsl\\(${pc},${zr},${zr}\\)$`),vG=new RegExp(`^hsla\\(${pc},${zr},${zr},${pc}\\)$`),lj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};H0(Fc,gc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:cj,formatHex:cj,formatHex8:xG,formatHsl:bG,formatRgb:uj,toString:uj});function cj(){return this.rgb().formatHex()}function xG(){return this.rgb().formatHex8()}function bG(){return LA(this).formatHsl()}function uj(){return this.rgb().formatRgb()}function gc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=fG.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?dj(t):n===3?new fn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Fu(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Fu(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hG.exec(e))?new fn(t[1],t[2],t[3],1):(t=mG.exec(e))?new fn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pG.exec(e))?Fu(t[1],t[2],t[3],t[4]):(t=gG.exec(e))?Fu(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=yG.exec(e))?mj(t[1],t[2]/100,t[3]/100,1):(t=vG.exec(e))?mj(t[1],t[2]/100,t[3]/100,t[4]):lj.hasOwnProperty(e)?dj(lj[e]):e==="transparent"?new fn(NaN,NaN,NaN,0):null}function dj(e){return new fn(e>>16&255,e>>8&255,e&255,1)}function Fu(e,t,n,r){return r<=0&&(e=t=n=NaN),new fn(e,t,n,r)}function wG(e){return e instanceof Fc||(e=gc(e)),e?(e=e.rgb(),new fn(e.r,e.g,e.b,e.opacity)):new fn}function tv(e,t,n,r){return arguments.length===1?wG(e):new fn(e,t,n,r??1)}function fn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}H0(fn,tv,MA(Fc,{brighter(e){return e=e==null?yf:Math.pow(yf,e),new fn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?mc:Math.pow(mc,e),new fn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fn(Wa(this.r),Wa(this.g),Wa(this.b),vf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fj,formatHex:fj,formatHex8:kG,formatRgb:hj,toString:hj}));function fj(){return`#${Ra(this.r)}${Ra(this.g)}${Ra(this.b)}`}function kG(){return`#${Ra(this.r)}${Ra(this.g)}${Ra(this.b)}${Ra((isNaN(this.opacity)?1:this.opacity)*255)}`}function hj(){const e=vf(this.opacity);return`${e===1?"rgb(":"rgba("}${Wa(this.r)}, ${Wa(this.g)}, ${Wa(this.b)}${e===1?")":`, ${e})`}`}function vf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Wa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ra(e){return e=Wa(e),(e<16?"0":"")+e.toString(16)}function mj(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new hr(e,t,n,r)}function LA(e){if(e instanceof hr)return new hr(e.h,e.s,e.l,e.opacity);if(e instanceof Fc||(e=gc(e)),!e)return new hr;if(e instanceof hr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(t===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-t)/s+2:o=(t-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new hr(o,s,l,e.opacity)}function SG(e,t,n,r){return arguments.length===1?LA(e):new hr(e,t,n,r??1)}function hr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}H0(hr,SG,MA(Fc,{brighter(e){return e=e==null?yf:Math.pow(yf,e),new hr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?mc:Math.pow(mc,e),new hr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new fn($p(e>=240?e-240:e+120,i,r),$p(e,i,r),$p(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new hr(pj(this.h),Uu(this.s),Uu(this.l),vf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=vf(this.opacity);return`${e===1?"hsl(":"hsla("}${pj(this.h)}, ${Uu(this.s)*100}%, ${Uu(this.l)*100}%${e===1?")":`, ${e})`}`}}));function pj(e){return e=(e||0)%360,e<0?e+360:e}function Uu(e){return Math.max(0,Math.min(1,e||0))}function $p(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const K0=e=>()=>e;function jG(e,t){return function(n){return e+n*t}}function CG(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function _G(e){return(e=+e)==1?$A:function(t,n){return n-t?CG(t,n,e):K0(isNaN(t)?n:t)}}function $A(e,t){var n=t-e;return n?jG(e,n):K0(isNaN(e)?t:e)}const gj=function e(t){var n=_G(t);function r(i,a){var o=n((i=tv(i)).r,(a=tv(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),c=$A(i.opacity,a.opacity);return function(d){return i.r=o(d),i.g=s(d),i.b=l(d),i.opacity=c(d),i+""}}return r.gamma=e,r}(1);function EG(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function NG(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function PG(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Ts(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function OG(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function xf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function AG(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Ts(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var nv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fp=new RegExp(nv.source,"g");function TG(e){return function(){return e}}function IG(e){return function(t){return e(t)+""}}function DG(e,t){var n=nv.lastIndex=Fp.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(e=e+"",t=t+"";(r=nv.exec(e))&&(i=Fp.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:xf(r,i)})),n=Fp.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?IG(l[0].x):TG(t):(t=l.length,function(c){for(var d=0,f;d<t;++d)s[(f=l[d]).i]=f.x(c);return s.join("")})}function Ts(e,t){var n=typeof t,r;return t==null||n==="boolean"?K0(t):(n==="number"?xf:n==="string"?(r=gc(t))?(t=r,gj):DG:t instanceof gc?gj:t instanceof Date?OG:NG(t)?EG:Array.isArray(t)?PG:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?AG:xf)(e,t)}function V0(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function RG(e,t){t===void 0&&(t=e,e=Ts);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[s](o-s)}}function MG(e){return function(){return e}}function bf(e){return+e}var yj=[0,1];function Yt(e){return e}function rv(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:MG(isNaN(t)?NaN:.5)}function LG(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function $G(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=rv(i,r),a=n(o,a)):(r=rv(r,i),a=n(a,o)),function(s){return a(r(s))}}function FG(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=rv(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(s){var l=$c(e,s,1,r)-1;return a[l](i[l](s))}}function Uc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Qh(){var e=yj,t=yj,n=Ts,r,i,a,o=Yt,s,l,c;function d(){var h=Math.min(e.length,t.length);return o!==Yt&&(o=LG(e[0],e[h-1])),s=h>2?FG:$G,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?a:(l||(l=s(e.map(r),t,n)))(r(o(h)))}return f.invert=function(h){return o(i((c||(c=s(t,e.map(r),xf)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,bf),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=V0,d()},f.clamp=function(h){return arguments.length?(o=h?!0:Yt,d()):o!==Yt},f.interpolate=function(h){return arguments.length?(n=h,d()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,m){return r=h,i=m,d()}}function G0(){return Qh()(Yt,Yt)}function UG(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function wf(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function hs(e){return e=wf(Math.abs(e)),e?e[1]:NaN}function zG(e,t){return function(n,r){for(var i=n.length,a=[],o=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function BG(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var WG=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function yc(e){if(!(t=WG.exec(e)))throw new Error("invalid format: "+e);var t;return new Y0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}yc.prototype=Y0.prototype;function Y0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Y0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function qG(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var FA;function HG(e,t){var n=wf(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(FA=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+wf(e,Math.max(0,t+a-1))[0]}function vj(e,t){var n=wf(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const xj={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:UG,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>vj(e*100,t),r:vj,s:HG,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function bj(e){return e}var wj=Array.prototype.map,kj=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function KG(e){var t=e.grouping===void 0||e.thousands===void 0?bj:zG(wj.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?bj:BG(wj.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f){f=yc(f);var h=f.fill,m=f.align,p=f.sign,g=f.symbol,y=f.zero,x=f.width,b=f.comma,w=f.precision,j=f.trim,S=f.type;S==="n"?(b=!0,S="g"):xj[S]||(w===void 0&&(w=12),j=!0,S="g"),(y||h==="0"&&m==="=")&&(y=!0,h="0",m="=");var k=g==="$"?n:g==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",_=g==="$"?r:/[%p]/.test(S)?o:"",N=xj[S],P=/[defgprs%]/.test(S);w=w===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function E(T){var L=k,$=_,B,D,z;if(S==="c")$=N(T)+$,T="";else{T=+T;var G=T<0||1/T<0;if(T=isNaN(T)?l:N(Math.abs(T),w),j&&(T=qG(T)),G&&+T==0&&p!=="+"&&(G=!1),L=(G?p==="("?p:s:p==="-"||p==="("?"":p)+L,$=(S==="s"?kj[8+FA/3]:"")+$+(G&&p==="("?")":""),P){for(B=-1,D=T.length;++B<D;)if(z=T.charCodeAt(B),48>z||z>57){$=(z===46?i+T.slice(B+1):T.slice(B))+$,T=T.slice(0,B);break}}}b&&!y&&(T=t(T,1/0));var I=L.length+T.length+$.length,R=I<x?new Array(x-I+1).join(h):"";switch(b&&y&&(T=t(R+T,R.length?x-$.length:1/0),R=""),m){case"<":T=L+T+$+R;break;case"=":T=L+R+T+$;break;case"^":T=R.slice(0,I=R.length>>1)+L+T+$+R.slice(I);break;default:T=R+L+T+$;break}return a(T)}return E.toString=function(){return f+""},E}function d(f,h){var m=c((f=yc(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(hs(h)/3)))*3,g=Math.pow(10,-p),y=kj[8+p/3];return function(x){return m(g*x)+y}}return{format:c,formatPrefix:d}}var zu,J0,UA;VG({thousands:",",grouping:[3],currency:["$",""]});function VG(e){return zu=KG(e),J0=zu.format,UA=zu.formatPrefix,zu}function GG(e){return Math.max(0,-hs(Math.abs(e)))}function YG(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(hs(t)/3)))*3-hs(Math.abs(e)))}function JG(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,hs(t)-hs(e))+1}function zA(e,t,n,r){var i=Zy(e,t,n),a;switch(r=yc(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=YG(i,o))&&(r.precision=a),UA(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=JG(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=GG(i))&&(r.precision=a-(r.type==="%")*2);break}}return J0(r)}function da(e){var t=e.domain;return e.ticks=function(n){var r=t();return Xy(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return zA(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],s=r[a],l,c,d=10;for(s<o&&(c=o,o=s,s=c,c=i,i=a,a=c);d-- >0;){if(c=Qy(o,s,n),c===l)return r[i]=o,r[a]=s,t(r);if(c>0)o=Math.floor(o/c)*c,s=Math.ceil(s/c)*c;else if(c<0)o=Math.ceil(o*c)/c,s=Math.floor(s*c)/c;else break;l=c}return e},e}function BA(){var e=G0();return e.copy=function(){return Uc(e,BA())},ar.apply(e,arguments),da(e)}function WA(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,bf),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return WA(e).unknown(t)},e=arguments.length?Array.from(e,bf):[0,1],da(n)}function qA(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function Sj(e){return Math.log(e)}function jj(e){return Math.exp(e)}function XG(e){return-Math.log(-e)}function QG(e){return-Math.exp(-e)}function ZG(e){return isFinite(e)?+("1e"+e):e<0?0:e}function eY(e){return e===10?ZG:e===Math.E?Math.exp:t=>Math.pow(e,t)}function tY(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Cj(e){return(t,n)=>-e(-t,n)}function X0(e){const t=e(Sj,jj),n=t.domain;let r=10,i,a;function o(){return i=tY(r),a=eY(r),n()[0]<0?(i=Cj(i),a=Cj(a),e(XG,QG)):e(Sj,jj),t}return t.base=function(s){return arguments.length?(r=+s,o()):r},t.domain=function(s){return arguments.length?(n(s),o()):n()},t.ticks=s=>{const l=n();let c=l[0],d=l[l.length-1];const f=d<c;f&&([c,d]=[d,c]);let h=i(c),m=i(d),p,g;const y=s==null?10:+s;let x=[];if(!(r%1)&&m-h<y){if(h=Math.floor(h),m=Math.ceil(m),c>0){for(;h<=m;++h)for(p=1;p<r;++p)if(g=h<0?p/a(-h):p*a(h),!(g<c)){if(g>d)break;x.push(g)}}else for(;h<=m;++h)for(p=r-1;p>=1;--p)if(g=h>0?p/a(-h):p*a(h),!(g<c)){if(g>d)break;x.push(g)}x.length*2<y&&(x=Xy(c,d,y))}else x=Xy(h,m,Math.min(m-h,y)).map(a);return f?x.reverse():x},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=yc(l)).precision==null&&(l.trim=!0),l=J0(l)),s===1/0)return l;const c=Math.max(1,r*s/t.ticks().length);return d=>{let f=d/a(Math.round(i(d)));return f*r<r-.5&&(f*=r),f<=c?l(d):""}},t.nice=()=>n(qA(n(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),t}function HA(){const e=X0(Qh()).domain([1,10]);return e.copy=()=>Uc(e,HA()).base(e.base()),ar.apply(e,arguments),e}function _j(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Ej(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Q0(e){var t=1,n=e(_j(t),Ej(t));return n.constant=function(r){return arguments.length?e(_j(t=+r),Ej(t)):t},da(n)}function KA(){var e=Q0(Qh());return e.copy=function(){return Uc(e,KA()).constant(e.constant())},ar.apply(e,arguments)}function Nj(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function nY(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function rY(e){return e<0?-e*e:e*e}function Z0(e){var t=e(Yt,Yt),n=1;function r(){return n===1?e(Yt,Yt):n===.5?e(nY,rY):e(Nj(n),Nj(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},da(t)}function eb(){var e=Z0(Qh());return e.copy=function(){return Uc(e,eb()).exponent(e.exponent())},ar.apply(e,arguments),e}function iY(){return eb.apply(null,arguments).exponent(.5)}function Pj(e){return Math.sign(e)*e*e}function aY(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function VA(){var e=G0(),t=[0,1],n=!1,r;function i(a){var o=aY(e(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return e.invert(Pj(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,bf)).map(Pj)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return VA(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},ar.apply(i,arguments),da(i)}function GA(){var e=[],t=[],n=[],r;function i(){var o=0,s=Math.max(1,t.length);for(n=new Array(s-1);++o<s;)n[o-1]=cG(e,o/s);return a}function a(o){return o==null||isNaN(o=+o)?r:t[$c(n,o)]}return a.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Qi),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return GA().domain(e).range(t).unknown(r)},ar.apply(a,arguments)}function YA(){var e=0,t=1,n=1,r=[.5],i=[0,1],a;function o(l){return l!=null&&l<=l?i[$c(r,l,0,n)]:a}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,s()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,r[0]]:c>=n?[r[n-1],t]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(a=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return YA().domain([e,t]).range(i).unknown(a)},ar.apply(da(o),arguments)}function JA(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[$c(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return JA().domain(e).range(t).unknown(n)},ar.apply(i,arguments)}const Up=new Date,zp=new Date;function xt(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const l=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;let c;do l.push(c=new Date(+a)),t(a,s),e(a);while(c<a&&a<o);return l},i.filter=a=>xt(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!a(o););else for(;--s>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(Up.setTime(+a),zp.setTime(+o),e(Up),e(zp),Math.floor(n(Up,zp))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const kf=xt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);kf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?xt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):kf);kf.range;const ti=1e3,Qn=ti*60,ni=Qn*60,hi=ni*24,tb=hi*7,Oj=hi*30,Bp=hi*365,Ma=xt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ti)},(e,t)=>(t-e)/ti,e=>e.getUTCSeconds());Ma.range;const nb=xt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ti)},(e,t)=>{e.setTime(+e+t*Qn)},(e,t)=>(t-e)/Qn,e=>e.getMinutes());nb.range;const rb=xt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Qn)},(e,t)=>(t-e)/Qn,e=>e.getUTCMinutes());rb.range;const ib=xt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ti-e.getMinutes()*Qn)},(e,t)=>{e.setTime(+e+t*ni)},(e,t)=>(t-e)/ni,e=>e.getHours());ib.range;const ab=xt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ni)},(e,t)=>(t-e)/ni,e=>e.getUTCHours());ab.range;const zc=xt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Qn)/hi,e=>e.getDate()-1);zc.range;const Zh=xt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/hi,e=>e.getUTCDate()-1);Zh.range;const XA=xt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/hi,e=>Math.floor(e/hi));XA.range;function co(e){return xt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Qn)/tb)}const em=co(0),Sf=co(1),oY=co(2),sY=co(3),ms=co(4),lY=co(5),cY=co(6);em.range;Sf.range;oY.range;sY.range;ms.range;lY.range;cY.range;function uo(e){return xt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/tb)}const tm=uo(0),jf=uo(1),uY=uo(2),dY=uo(3),ps=uo(4),fY=uo(5),hY=uo(6);tm.range;jf.range;uY.range;dY.range;ps.range;fY.range;hY.range;const ob=xt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());ob.range;const sb=xt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());sb.range;const mi=xt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());mi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});mi.range;const pi=xt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());pi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});pi.range;function QA(e,t,n,r,i,a){const o=[[Ma,1,ti],[Ma,5,5*ti],[Ma,15,15*ti],[Ma,30,30*ti],[a,1,Qn],[a,5,5*Qn],[a,15,15*Qn],[a,30,30*Qn],[i,1,ni],[i,3,3*ni],[i,6,6*ni],[i,12,12*ni],[r,1,hi],[r,2,2*hi],[n,1,tb],[t,1,Oj],[t,3,3*Oj],[e,1,Bp]];function s(c,d,f){const h=d<c;h&&([c,d]=[d,c]);const m=f&&typeof f.range=="function"?f:l(c,d,f),p=m?m.range(c,+d+1):[];return h?p.reverse():p}function l(c,d,f){const h=Math.abs(d-c)/f,m=B0(([,,y])=>y).right(o,h);if(m===o.length)return e.every(Zy(c/Bp,d/Bp,f));if(m===0)return kf.every(Math.max(Zy(c,d,f),1));const[p,g]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return p.every(g)}return[s,l]}const[mY,pY]=QA(pi,sb,tm,XA,ab,rb),[gY,yY]=QA(mi,ob,em,zc,ib,nb);function Wp(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function qp(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function cl(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function vY(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,c=ul(i),d=dl(i),f=ul(a),h=dl(a),m=ul(o),p=dl(o),g=ul(s),y=dl(s),x=ul(l),b=dl(l),w={a:G,A:I,b:R,B:C,c:null,d:Mj,e:Mj,f:zY,g:XY,G:ZY,H:$Y,I:FY,j:UY,L:ZA,m:BY,M:WY,p:Q,q,Q:Fj,s:Uj,S:qY,u:HY,U:KY,V:VY,w:GY,W:YY,x:null,X:null,y:JY,Y:QY,Z:eJ,"%":$j},j={a:A,A:le,b:U,B:Z,c:null,d:Lj,e:Lj,f:iJ,g:mJ,G:gJ,H:tJ,I:nJ,j:rJ,L:tT,m:aJ,M:oJ,p:J,q:ne,Q:Fj,s:Uj,S:sJ,u:lJ,U:cJ,V:uJ,w:dJ,W:fJ,x:null,X:null,y:hJ,Y:pJ,Z:yJ,"%":$j},S={a:E,A:T,b:L,B:$,c:B,d:Dj,e:Dj,f:DY,g:Ij,G:Tj,H:Rj,I:Rj,j:OY,L:IY,m:PY,M:AY,p:P,q:NY,Q:MY,s:LY,S:TY,u:SY,U:jY,V:CY,w:kY,W:_Y,x:D,X:z,y:Ij,Y:Tj,Z:EY,"%":RY};w.x=k(n,w),w.X=k(r,w),w.c=k(t,w),j.x=k(n,j),j.X=k(r,j),j.c=k(t,j);function k(X,M){return function(Y){var F=[],he=-1,ce=0,ke=X.length,Pe,Ee,Re;for(Y instanceof Date||(Y=new Date(+Y));++he<ke;)X.charCodeAt(he)===37&&(F.push(X.slice(ce,he)),(Ee=Aj[Pe=X.charAt(++he)])!=null?Pe=X.charAt(++he):Ee=Pe==="e"?" ":"0",(Re=M[Pe])&&(Pe=Re(Y,Ee)),F.push(Pe),ce=he+1);return F.push(X.slice(ce,he)),F.join("")}}function _(X,M){return function(Y){var F=cl(1900,void 0,1),he=N(F,X,Y+="",0),ce,ke;if(he!=Y.length)return null;if("Q"in F)return new Date(F.Q);if("s"in F)return new Date(F.s*1e3+("L"in F?F.L:0));if(M&&!("Z"in F)&&(F.Z=0),"p"in F&&(F.H=F.H%12+F.p*12),F.m===void 0&&(F.m="q"in F?F.q:0),"V"in F){if(F.V<1||F.V>53)return null;"w"in F||(F.w=1),"Z"in F?(ce=qp(cl(F.y,0,1)),ke=ce.getUTCDay(),ce=ke>4||ke===0?jf.ceil(ce):jf(ce),ce=Zh.offset(ce,(F.V-1)*7),F.y=ce.getUTCFullYear(),F.m=ce.getUTCMonth(),F.d=ce.getUTCDate()+(F.w+6)%7):(ce=Wp(cl(F.y,0,1)),ke=ce.getDay(),ce=ke>4||ke===0?Sf.ceil(ce):Sf(ce),ce=zc.offset(ce,(F.V-1)*7),F.y=ce.getFullYear(),F.m=ce.getMonth(),F.d=ce.getDate()+(F.w+6)%7)}else("W"in F||"U"in F)&&("w"in F||(F.w="u"in F?F.u%7:"W"in F?1:0),ke="Z"in F?qp(cl(F.y,0,1)).getUTCDay():Wp(cl(F.y,0,1)).getDay(),F.m=0,F.d="W"in F?(F.w+6)%7+F.W*7-(ke+5)%7:F.w+F.U*7-(ke+6)%7);return"Z"in F?(F.H+=F.Z/100|0,F.M+=F.Z%100,qp(F)):Wp(F)}}function N(X,M,Y,F){for(var he=0,ce=M.length,ke=Y.length,Pe,Ee;he<ce;){if(F>=ke)return-1;if(Pe=M.charCodeAt(he++),Pe===37){if(Pe=M.charAt(he++),Ee=S[Pe in Aj?M.charAt(he++):Pe],!Ee||(F=Ee(X,Y,F))<0)return-1}else if(Pe!=Y.charCodeAt(F++))return-1}return F}function P(X,M,Y){var F=c.exec(M.slice(Y));return F?(X.p=d.get(F[0].toLowerCase()),Y+F[0].length):-1}function E(X,M,Y){var F=m.exec(M.slice(Y));return F?(X.w=p.get(F[0].toLowerCase()),Y+F[0].length):-1}function T(X,M,Y){var F=f.exec(M.slice(Y));return F?(X.w=h.get(F[0].toLowerCase()),Y+F[0].length):-1}function L(X,M,Y){var F=x.exec(M.slice(Y));return F?(X.m=b.get(F[0].toLowerCase()),Y+F[0].length):-1}function $(X,M,Y){var F=g.exec(M.slice(Y));return F?(X.m=y.get(F[0].toLowerCase()),Y+F[0].length):-1}function B(X,M,Y){return N(X,t,M,Y)}function D(X,M,Y){return N(X,n,M,Y)}function z(X,M,Y){return N(X,r,M,Y)}function G(X){return o[X.getDay()]}function I(X){return a[X.getDay()]}function R(X){return l[X.getMonth()]}function C(X){return s[X.getMonth()]}function Q(X){return i[+(X.getHours()>=12)]}function q(X){return 1+~~(X.getMonth()/3)}function A(X){return o[X.getUTCDay()]}function le(X){return a[X.getUTCDay()]}function U(X){return l[X.getUTCMonth()]}function Z(X){return s[X.getUTCMonth()]}function J(X){return i[+(X.getUTCHours()>=12)]}function ne(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var M=k(X+="",w);return M.toString=function(){return X},M},parse:function(X){var M=_(X+="",!1);return M.toString=function(){return X},M},utcFormat:function(X){var M=k(X+="",j);return M.toString=function(){return X},M},utcParse:function(X){var M=_(X+="",!0);return M.toString=function(){return X},M}}}var Aj={"-":"",_:" ",0:"0"},_t=/^\s*\d+/,xY=/^%/,bY=/[\\^$*+?|[\]().{}]/g;function Ne(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function wY(e){return e.replace(bY,"\\$&")}function ul(e){return new RegExp("^(?:"+e.map(wY).join("|")+")","i")}function dl(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function kY(e,t,n){var r=_t.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function SY(e,t,n){var r=_t.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function jY(e,t,n){var r=_t.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function CY(e,t,n){var r=_t.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function _Y(e,t,n){var r=_t.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Tj(e,t,n){var r=_t.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Ij(e,t,n){var r=_t.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function EY(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function NY(e,t,n){var r=_t.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function PY(e,t,n){var r=_t.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Dj(e,t,n){var r=_t.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function OY(e,t,n){var r=_t.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Rj(e,t,n){var r=_t.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function AY(e,t,n){var r=_t.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function TY(e,t,n){var r=_t.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function IY(e,t,n){var r=_t.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function DY(e,t,n){var r=_t.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function RY(e,t,n){var r=xY.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function MY(e,t,n){var r=_t.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function LY(e,t,n){var r=_t.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Mj(e,t){return Ne(e.getDate(),t,2)}function $Y(e,t){return Ne(e.getHours(),t,2)}function FY(e,t){return Ne(e.getHours()%12||12,t,2)}function UY(e,t){return Ne(1+zc.count(mi(e),e),t,3)}function ZA(e,t){return Ne(e.getMilliseconds(),t,3)}function zY(e,t){return ZA(e,t)+"000"}function BY(e,t){return Ne(e.getMonth()+1,t,2)}function WY(e,t){return Ne(e.getMinutes(),t,2)}function qY(e,t){return Ne(e.getSeconds(),t,2)}function HY(e){var t=e.getDay();return t===0?7:t}function KY(e,t){return Ne(em.count(mi(e)-1,e),t,2)}function eT(e){var t=e.getDay();return t>=4||t===0?ms(e):ms.ceil(e)}function VY(e,t){return e=eT(e),Ne(ms.count(mi(e),e)+(mi(e).getDay()===4),t,2)}function GY(e){return e.getDay()}function YY(e,t){return Ne(Sf.count(mi(e)-1,e),t,2)}function JY(e,t){return Ne(e.getFullYear()%100,t,2)}function XY(e,t){return e=eT(e),Ne(e.getFullYear()%100,t,2)}function QY(e,t){return Ne(e.getFullYear()%1e4,t,4)}function ZY(e,t){var n=e.getDay();return e=n>=4||n===0?ms(e):ms.ceil(e),Ne(e.getFullYear()%1e4,t,4)}function eJ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ne(t/60|0,"0",2)+Ne(t%60,"0",2)}function Lj(e,t){return Ne(e.getUTCDate(),t,2)}function tJ(e,t){return Ne(e.getUTCHours(),t,2)}function nJ(e,t){return Ne(e.getUTCHours()%12||12,t,2)}function rJ(e,t){return Ne(1+Zh.count(pi(e),e),t,3)}function tT(e,t){return Ne(e.getUTCMilliseconds(),t,3)}function iJ(e,t){return tT(e,t)+"000"}function aJ(e,t){return Ne(e.getUTCMonth()+1,t,2)}function oJ(e,t){return Ne(e.getUTCMinutes(),t,2)}function sJ(e,t){return Ne(e.getUTCSeconds(),t,2)}function lJ(e){var t=e.getUTCDay();return t===0?7:t}function cJ(e,t){return Ne(tm.count(pi(e)-1,e),t,2)}function nT(e){var t=e.getUTCDay();return t>=4||t===0?ps(e):ps.ceil(e)}function uJ(e,t){return e=nT(e),Ne(ps.count(pi(e),e)+(pi(e).getUTCDay()===4),t,2)}function dJ(e){return e.getUTCDay()}function fJ(e,t){return Ne(jf.count(pi(e)-1,e),t,2)}function hJ(e,t){return Ne(e.getUTCFullYear()%100,t,2)}function mJ(e,t){return e=nT(e),Ne(e.getUTCFullYear()%100,t,2)}function pJ(e,t){return Ne(e.getUTCFullYear()%1e4,t,4)}function gJ(e,t){var n=e.getUTCDay();return e=n>=4||n===0?ps(e):ps.ceil(e),Ne(e.getUTCFullYear()%1e4,t,4)}function yJ(){return"+0000"}function $j(){return"%"}function Fj(e){return+e}function Uj(e){return Math.floor(+e/1e3)}var ko,rT,iT;vJ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function vJ(e){return ko=vY(e),rT=ko.format,ko.parse,iT=ko.utcFormat,ko.utcParse,ko}function xJ(e){return new Date(e)}function bJ(e){return e instanceof Date?+e:+new Date(+e)}function lb(e,t,n,r,i,a,o,s,l,c){var d=G0(),f=d.invert,h=d.domain,m=c(".%L"),p=c(":%S"),g=c("%I:%M"),y=c("%I %p"),x=c("%a %d"),b=c("%b %d"),w=c("%B"),j=c("%Y");function S(k){return(l(k)<k?m:s(k)<k?p:o(k)<k?g:a(k)<k?y:r(k)<k?i(k)<k?x:b:n(k)<k?w:j)(k)}return d.invert=function(k){return new Date(f(k))},d.domain=function(k){return arguments.length?h(Array.from(k,bJ)):h().map(xJ)},d.ticks=function(k){var _=h();return e(_[0],_[_.length-1],k??10)},d.tickFormat=function(k,_){return _==null?S:c(_)},d.nice=function(k){var _=h();return(!k||typeof k.range!="function")&&(k=t(_[0],_[_.length-1],k??10)),k?h(qA(_,k)):d},d.copy=function(){return Uc(d,lb(e,t,n,r,i,a,o,s,l,c))},d}function wJ(){return ar.apply(lb(gY,yY,mi,ob,em,zc,ib,nb,Ma,rT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function kJ(){return ar.apply(lb(mY,pY,pi,sb,tm,Zh,ab,rb,Ma,iT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function nm(){var e=0,t=1,n,r,i,a,o=Yt,s=!1,l;function c(f){return f==null||isNaN(f=+f)?l:o(i===0?.5:(f=(a(f)-n)*i,s?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([e,t]=f,n=a(e=+e),r=a(t=+t),i=n===r?0:1/(r-n),c):[e,t]},c.clamp=function(f){return arguments.length?(s=!!f,c):s},c.interpolator=function(f){return arguments.length?(o=f,c):o};function d(f){return function(h){var m,p;return arguments.length?([m,p]=h,o=f(m,p),c):[o(0),o(1)]}}return c.range=d(Ts),c.rangeRound=d(V0),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return a=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),c}}function fa(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function aT(){var e=da(nm()(Yt));return e.copy=function(){return fa(e,aT())},Si.apply(e,arguments)}function oT(){var e=X0(nm()).domain([1,10]);return e.copy=function(){return fa(e,oT()).base(e.base())},Si.apply(e,arguments)}function sT(){var e=Q0(nm());return e.copy=function(){return fa(e,sT()).constant(e.constant())},Si.apply(e,arguments)}function cb(){var e=Z0(nm());return e.copy=function(){return fa(e,cb()).exponent(e.exponent())},Si.apply(e,arguments)}function SJ(){return cb.apply(null,arguments).exponent(.5)}function lT(){var e=[],t=Yt;function n(r){if(r!=null&&!isNaN(r=+r))return t(($c(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Qi),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>lG(e,a/r))},n.copy=function(){return lT(t).domain(e)},Si.apply(n,arguments)}function rm(){var e=0,t=.5,n=1,r=1,i,a,o,s,l,c=Yt,d,f=!1,h;function m(g){return isNaN(g=+g)?h:(g=.5+((g=+d(g))-a)*(r*g<r*a?s:l),c(f?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([e,t,n]=g,i=d(e=+e),a=d(t=+t),o=d(n=+n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,m):[e,t,n]},m.clamp=function(g){return arguments.length?(f=!!g,m):f},m.interpolator=function(g){return arguments.length?(c=g,m):c};function p(g){return function(y){var x,b,w;return arguments.length?([x,b,w]=y,c=RG(g,[x,b,w]),m):[c(0),c(.5),c(1)]}}return m.range=p(Ts),m.rangeRound=p(V0),m.unknown=function(g){return arguments.length?(h=g,m):h},function(g){return d=g,i=g(e),a=g(t),o=g(n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,m}}function cT(){var e=da(rm()(Yt));return e.copy=function(){return fa(e,cT())},Si.apply(e,arguments)}function uT(){var e=X0(rm()).domain([.1,1,10]);return e.copy=function(){return fa(e,uT()).base(e.base())},Si.apply(e,arguments)}function dT(){var e=Q0(rm());return e.copy=function(){return fa(e,dT()).constant(e.constant())},Si.apply(e,arguments)}function ub(){var e=Z0(rm());return e.copy=function(){return fa(e,ub()).exponent(e.exponent())},Si.apply(e,arguments)}function jJ(){return ub.apply(null,arguments).exponent(.5)}const bl=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:q0,scaleDiverging:cT,scaleDivergingLog:uT,scaleDivergingPow:ub,scaleDivergingSqrt:jJ,scaleDivergingSymlog:dT,scaleIdentity:WA,scaleImplicit:ev,scaleLinear:BA,scaleLog:HA,scaleOrdinal:W0,scalePoint:dG,scalePow:eb,scaleQuantile:GA,scaleQuantize:YA,scaleRadial:VA,scaleSequential:aT,scaleSequentialLog:oT,scaleSequentialPow:cb,scaleSequentialQuantile:lT,scaleSequentialSqrt:SJ,scaleSequentialSymlog:sT,scaleSqrt:iY,scaleSymlog:KA,scaleThreshold:JA,scaleTime:wJ,scaleUtc:kJ,tickFormat:zA},Symbol.toStringTag,{value:"Module"}));var ha=e=>e.chartData,db=W([ha],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),fb=(e,t,n,r)=>r?db(e):ha(e);function gs(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(Mn(t)&&Mn(n))return!0}return!1}function zj(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function CJ(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,a;if(Mn(n))i=n;else if(typeof n=="function")return;if(Mn(r))a=r;else if(typeof r=="function")return;var o=[i,a];if(gs(o))return o}}function _J(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(gs(r))return zj(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,a]=e,o,s;if(i==="auto")t!=null&&(o=Math.min(...t));else if(ue(i))o=i;else if(typeof i=="function")try{t!=null&&(o=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&RS.test(i)){var l=RS.exec(i);if(l==null||t==null)o=void 0;else{var c=+l[1];o=t[0]-c}}else o=t==null?void 0:t[0];if(a==="auto")t!=null&&(s=Math.max(...t));else if(ue(a))s=a;else if(typeof a=="function")try{t!=null&&(s=a(t==null?void 0:t[1]))}catch{}else if(typeof a=="string"&&MS.test(a)){var d=MS.exec(a);if(d==null||t==null)s=void 0;else{var f=+d[1];s=t[1]+f}}else s=t==null?void 0:t[1];var h=[o,s];if(gs(h))return t==null?h:zj(h,t,n)}}}var Is=1e9,EJ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},mb,Ye=!0,rr="[DecimalError] ",qa=rr+"Invalid argument: ",hb=rr+"Exponent out of range: ",Ds=Math.floor,_a=Math.pow,NJ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Nn,wt=1e7,He=7,fT=9007199254740991,Cf=Ds(fT/He),oe={};oe.absoluteValue=oe.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};oe.comparedTo=oe.cmp=function(e){var t,n,r,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(r=a.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};oe.decimalPlaces=oe.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*He;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};oe.dividedBy=oe.div=function(e){return oi(this,new this.constructor(e))};oe.dividedToIntegerBy=oe.idiv=function(e){var t=this,n=t.constructor;return Me(oi(t,new n(e),0,1),n.precision)};oe.equals=oe.eq=function(e){return!this.cmp(e)};oe.exponent=function(){return ut(this)};oe.greaterThan=oe.gt=function(e){return this.cmp(e)>0};oe.greaterThanOrEqualTo=oe.gte=function(e){return this.cmp(e)>=0};oe.isInteger=oe.isint=function(){return this.e>this.d.length-2};oe.isNegative=oe.isneg=function(){return this.s<0};oe.isPositive=oe.ispos=function(){return this.s>0};oe.isZero=function(){return this.s===0};oe.lessThan=oe.lt=function(e){return this.cmp(e)<0};oe.lessThanOrEqualTo=oe.lte=function(e){return this.cmp(e)<1};oe.logarithm=oe.log=function(e){var t,n=this,r=n.constructor,i=r.precision,a=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Nn))throw Error(rr+"NaN");if(n.s<1)throw Error(rr+(n.s?"NaN":"-Infinity"));return n.eq(Nn)?new r(0):(Ye=!1,t=oi(vc(n,a),vc(e,a),a),Ye=!0,Me(t,i))};oe.minus=oe.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?pT(t,e):hT(t,(e.s=-e.s,e))};oe.modulo=oe.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(rr+"NaN");return n.s?(Ye=!1,t=oi(n,e,0,1).times(e),Ye=!0,n.minus(t)):Me(new r(n),i)};oe.naturalExponential=oe.exp=function(){return mT(this)};oe.naturalLogarithm=oe.ln=function(){return vc(this)};oe.negated=oe.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};oe.plus=oe.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?hT(t,e):pT(t,(e.s=-e.s,e))};oe.precision=oe.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(qa+e);if(t=ut(i)+1,r=i.d.length-1,n=r*He+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};oe.squareRoot=oe.sqrt=function(){var e,t,n,r,i,a,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(rr+"NaN")}for(e=ut(s),Ye=!1,i=Math.sqrt(+s),i==0||i==1/0?(t=Lr(s.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Ds((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new l(t)):r=new l(i.toString()),n=l.precision,i=o=n+3;;)if(a=r,r=a.plus(oi(s,a,o+2)).times(.5),Lr(a.d).slice(0,o)===(t=Lr(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&t=="4999"){if(Me(a,n+1,0),a.times(a).eq(s)){r=a;break}}else if(t!="9999")break;o+=4}return Ye=!0,Me(r,n)};oe.times=oe.mul=function(e){var t,n,r,i,a,o,s,l,c,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,n=d.e+e.e,l=h.length,c=m.length,l<c&&(a=h,h=m,m=a,o=l,l=c,c=o),a=[],o=l+c,r=o;r--;)a.push(0);for(r=c;--r>=0;){for(t=0,i=l+r;i>r;)s=a[i]+m[r]*h[i-r-1]+t,a[i--]=s%wt|0,t=s/wt|0;a[i]=(a[i]+t)%wt|0}for(;!a[--o];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,Ye?Me(e,f.precision):e};oe.toDecimalPlaces=oe.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Wr(e,0,Is),t===void 0?t=r.rounding:Wr(t,0,8),Me(n,e+ut(n)+1,t))};oe.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=eo(r,!0):(Wr(e,0,Is),t===void 0?t=i.rounding:Wr(t,0,8),r=Me(new i(r),e+1,t),n=eo(r,!0,e+1)),n};oe.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?eo(i):(Wr(e,0,Is),t===void 0?t=a.rounding:Wr(t,0,8),r=Me(new a(i),e+ut(i)+1,t),n=eo(r.abs(),!1,e+ut(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};oe.toInteger=oe.toint=function(){var e=this,t=e.constructor;return Me(new t(e),ut(e)+1,t.rounding)};oe.toNumber=function(){return+this};oe.toPower=oe.pow=function(e){var t,n,r,i,a,o,s=this,l=s.constructor,c=12,d=+(e=new l(e));if(!e.s)return new l(Nn);if(s=new l(s),!s.s){if(e.s<1)throw Error(rr+"Infinity");return s}if(s.eq(Nn))return s;if(r=l.precision,e.eq(Nn))return Me(s,r);if(t=e.e,n=e.d.length-1,o=t>=n,a=s.s,o){if((n=d<0?-d:d)<=fT){for(i=new l(Nn),t=Math.ceil(r/He+4),Ye=!1;n%2&&(i=i.times(s),Wj(i.d,t)),n=Ds(n/2),n!==0;)s=s.times(s),Wj(s.d,t);return Ye=!0,e.s<0?new l(Nn).div(i):Me(i,r)}}else if(a<0)throw Error(rr+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,s.s=1,Ye=!1,i=e.times(vc(s,r+c)),Ye=!0,i=mT(i),i.s=a,i};oe.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?(n=ut(i),r=eo(i,n<=a.toExpNeg||n>=a.toExpPos)):(Wr(e,1,Is),t===void 0?t=a.rounding:Wr(t,0,8),i=Me(new a(i),e,t),n=ut(i),r=eo(i,e<=n||n<=a.toExpNeg,e)),r};oe.toSignificantDigits=oe.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Wr(e,1,Is),t===void 0?t=r.rounding:Wr(t,0,8)),Me(new r(n),e,t)};oe.toString=oe.valueOf=oe.val=oe.toJSON=oe[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ut(e),n=e.constructor;return eo(e,t<=n.toExpNeg||t>=n.toExpPos)};function hT(e,t){var n,r,i,a,o,s,l,c,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Ye?Me(t,f):t;if(l=e.d,c=t.d,o=e.e,i=t.e,l=l.slice(),a=o-i,a){for(a<0?(r=l,a=-a,s=c.length):(r=c,i=o,s=l.length),o=Math.ceil(f/He),s=o>s?o+1:s+1,a>s&&(a=s,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(s=l.length,a=c.length,s-a<0&&(a=s,r=c,c=l,l=r),n=0;a;)n=(l[--a]=l[a]+c[a]+n)/wt|0,l[a]%=wt;for(n&&(l.unshift(n),++i),s=l.length;l[--s]==0;)l.pop();return t.d=l,t.e=i,Ye?Me(t,f):t}function Wr(e,t,n){if(e!==~~e||e<t||e>n)throw Error(qa+e)}function Lr(e){var t,n,r,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)r=e[t]+"",n=He-r.length,n&&(a+=Di(n)),a+=r;o=e[t],r=o+"",n=He-r.length,n&&(a+=Di(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var oi=function(){function e(r,i){var a,o=0,s=r.length;for(r=r.slice();s--;)a=r[s]*i+o,r[s]=a%wt|0,o=a/wt|0;return o&&r.unshift(o),r}function t(r,i,a,o){var s,l;if(a!=o)l=a>o?1:-1;else for(s=l=0;s<a;s++)if(r[s]!=i[s]){l=r[s]>i[s]?1:-1;break}return l}function n(r,i,a){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*wt+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o){var s,l,c,d,f,h,m,p,g,y,x,b,w,j,S,k,_,N,P=r.constructor,E=r.s==i.s?1:-1,T=r.d,L=i.d;if(!r.s)return new P(r);if(!i.s)throw Error(rr+"Division by zero");for(l=r.e-i.e,_=L.length,S=T.length,m=new P(E),p=m.d=[],c=0;L[c]==(T[c]||0);)++c;if(L[c]>(T[c]||0)&&--l,a==null?b=a=P.precision:o?b=a+(ut(r)-ut(i))+1:b=a,b<0)return new P(0);if(b=b/He+2|0,c=0,_==1)for(d=0,L=L[0],b++;(c<S||d)&&b--;c++)w=d*wt+(T[c]||0),p[c]=w/L|0,d=w%L|0;else{for(d=wt/(L[0]+1)|0,d>1&&(L=e(L,d),T=e(T,d),_=L.length,S=T.length),j=_,g=T.slice(0,_),y=g.length;y<_;)g[y++]=0;N=L.slice(),N.unshift(0),k=L[0],L[1]>=wt/2&&++k;do d=0,s=t(L,g,_,y),s<0?(x=g[0],_!=y&&(x=x*wt+(g[1]||0)),d=x/k|0,d>1?(d>=wt&&(d=wt-1),f=e(L,d),h=f.length,y=g.length,s=t(f,g,h,y),s==1&&(d--,n(f,_<h?N:L,h))):(d==0&&(s=d=1),f=L.slice()),h=f.length,h<y&&f.unshift(0),n(g,f,y),s==-1&&(y=g.length,s=t(L,g,_,y),s<1&&(d++,n(g,_<y?N:L,y))),y=g.length):s===0&&(d++,g=[0]),p[c++]=d,s&&g[0]?g[y++]=T[j]||0:(g=[T[j]],y=1);while((j++<S||g[0]!==void 0)&&b--)}return p[0]||p.shift(),m.e=l,Me(m,o?a+ut(m)+1:a)}}();function mT(e,t){var n,r,i,a,o,s,l=0,c=0,d=e.constructor,f=d.precision;if(ut(e)>16)throw Error(hb+ut(e));if(!e.s)return new d(Nn);for(t==null?(Ye=!1,s=f):s=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),c+=5;for(r=Math.log(_a(2,c))/Math.LN10*2+5|0,s+=r,n=i=a=new d(Nn),d.precision=s;;){if(i=Me(i.times(e),s),n=n.times(++l),o=a.plus(oi(i,n,s)),Lr(o.d).slice(0,s)===Lr(a.d).slice(0,s)){for(;c--;)a=Me(a.times(a),s);return d.precision=f,t==null?(Ye=!0,Me(a,f)):a}a=o}}function ut(e){for(var t=e.e*He,n=e.d[0];n>=10;n/=10)t++;return t}function Hp(e,t,n){if(t>e.LN10.sd())throw Ye=!0,n&&(e.precision=n),Error(rr+"LN10 precision limit exceeded");return Me(new e(e.LN10),t)}function Di(e){for(var t="";e--;)t+="0";return t}function vc(e,t){var n,r,i,a,o,s,l,c,d,f=1,h=10,m=e,p=m.d,g=m.constructor,y=g.precision;if(m.s<1)throw Error(rr+(m.s?"NaN":"-Infinity"));if(m.eq(Nn))return new g(0);if(t==null?(Ye=!1,c=y):c=t,m.eq(10))return t==null&&(Ye=!0),Hp(g,c);if(c+=h,g.precision=c,n=Lr(p),r=n.charAt(0),a=ut(m),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(e),n=Lr(m.d),r=n.charAt(0),f++;a=ut(m),r>1?(m=new g("0."+n),a++):m=new g(r+"."+n.slice(1))}else return l=Hp(g,c+2,y).times(a+""),m=vc(new g(r+"."+n.slice(1)),c-h).plus(l),g.precision=y,t==null?(Ye=!0,Me(m,y)):m;for(s=o=m=oi(m.minus(Nn),m.plus(Nn),c),d=Me(m.times(m),c),i=3;;){if(o=Me(o.times(d),c),l=s.plus(oi(o,new g(i),c)),Lr(l.d).slice(0,c)===Lr(s.d).slice(0,c))return s=s.times(2),a!==0&&(s=s.plus(Hp(g,c+2,y).times(a+""))),s=oi(s,new g(f),c),g.precision=y,t==null?(Ye=!0,Me(s,y)):s;s=l,i+=2}}function Bj(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=Ds(n/He),e.d=[],r=(n+1)%He,n<0&&(r+=He),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=He;r<i;)e.d.push(+t.slice(r,r+=He));t=t.slice(r),r=He-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),Ye&&(e.e>Cf||e.e<-Cf))throw Error(hb+n)}else e.s=0,e.e=0,e.d=[0];return e}function Me(e,t,n){var r,i,a,o,s,l,c,d,f=e.d;for(o=1,a=f[0];a>=10;a/=10)o++;if(r=t-o,r<0)r+=He,i=t,c=f[d=0];else{if(d=Math.ceil((r+1)/He),a=f.length,d>=a)return e;for(c=a=f[d],o=1;a>=10;a/=10)o++;r%=He,i=r-He+o}if(n!==void 0&&(a=_a(10,o-i-1),s=c/a%10|0,l=t<0||f[d+1]!==void 0||c%a,l=n<4?(s||l)&&(n==0||n==(e.s<0?3:2)):s>5||s==5&&(n==4||l||n==6&&(r>0?i>0?c/_a(10,o-i):0:f[d-1])%10&1||n==(e.s<0?8:7))),t<1||!f[0])return l?(a=ut(e),f.length=1,t=t-a-1,f[0]=_a(10,(He-t%He)%He),e.e=Ds(-t/He)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(r==0?(f.length=d,a=1,d--):(f.length=d+1,a=_a(10,He-r),f[d]=i>0?(c/_a(10,o-i)%_a(10,i)|0)*a:0),l)for(;;)if(d==0){(f[0]+=a)==wt&&(f[0]=1,++e.e);break}else{if(f[d]+=a,f[d]!=wt)break;f[d--]=0,a=1}for(r=f.length;f[--r]===0;)f.pop();if(Ye&&(e.e>Cf||e.e<-Cf))throw Error(hb+ut(e));return e}function pT(e,t){var n,r,i,a,o,s,l,c,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Ye?Me(t,m):t;if(l=e.d,f=t.d,r=t.e,c=e.e,l=l.slice(),o=c-r,o){for(d=o<0,d?(n=l,o=-o,s=f.length):(n=f,r=c,s=l.length),i=Math.max(Math.ceil(m/He),s)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=l.length,s=f.length,d=i<s,d&&(s=i),i=0;i<s;i++)if(l[i]!=f[i]){d=l[i]<f[i];break}o=0}for(d&&(n=l,l=f,f=n,t.s=-t.s),s=l.length,i=f.length-s;i>0;--i)l[s++]=0;for(i=f.length;i>o;){if(l[--i]<f[i]){for(a=i;a&&l[--a]===0;)l[a]=wt-1;--l[a],l[i]+=wt}l[i]-=f[i]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(t.d=l,t.e=r,Ye?Me(t,m):t):new h(0)}function eo(e,t,n){var r,i=ut(e),a=Lr(e.d),o=a.length;return t?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+Di(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Di(-i-1)+a,n&&(r=n-o)>0&&(a+=Di(r))):i>=o?(a+=Di(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+Di(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=Di(r))),e.s<0?"-"+a:a}function Wj(e,t){if(e.length>t)return e.length=t,!0}function gT(e){var t,n,r;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(qa+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return Bj(o,a.toString())}else if(typeof a!="string")throw Error(qa+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,NJ.test(a))Bj(o,a);else throw Error(qa+a)}if(i.prototype=oe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=gT,i.config=i.set=PJ,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function PJ(e){if(!e||typeof e!="object")throw Error(rr+"Object expected");var t,n,r,i=["precision",1,Is,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(Ds(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(qa+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(qa+n+": "+r);return this}var mb=gT(EJ);Nn=new mb(1);const Oe=mb;var OJ=e=>e,yT={"@@functional/placeholder":!0},vT=e=>e===yT,qj=e=>function t(){return arguments.length===0||arguments.length===1&&vT(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},xT=(e,t)=>e===1?t:qj(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(o=>o!==yT).length;return a>=e?t(...r):xT(e-a,qj(function(){for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];var c=r.map(d=>vT(d)?s.shift():d);return t(...c,...s)}))}),im=e=>xT(e.length,e),iv=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},AJ=im((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),TJ=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return OJ;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce((s,l)=>l(s),a(...arguments))}},av=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),bT=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t&&i.every((o,s)=>{var l;return o===((l=t)===null||l===void 0?void 0:l[s])})||(t=i,n=e(...i)),n}};function wT(e){var t;return e===0?t=1:t=Math.floor(new Oe(e).abs().log(10).toNumber())+1,t}function kT(e,t,n){for(var r=new Oe(e),i=0,a=[];r.lt(t)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}im((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});im((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});im((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var ST=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},jT=(e,t,n)=>{if(e.lte(0))return new Oe(0);var r=wT(e.toNumber()),i=new Oe(10).pow(r),a=e.div(i),o=r!==1?.05:.1,s=new Oe(Math.ceil(a.div(o).toNumber())).add(n).mul(o),l=s.mul(i);return t?new Oe(l.toNumber()):new Oe(Math.ceil(l.toNumber()))},IJ=(e,t,n)=>{var r=new Oe(1),i=new Oe(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(r=new Oe(10).pow(wT(e)-1),i=new Oe(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Oe(Math.floor(e)))}else e===0?i=new Oe(Math.floor((t-1)/2)):n||(i=new Oe(Math.floor(e)));var o=Math.floor((t-1)/2),s=TJ(AJ(l=>i.add(new Oe(l-o).mul(r)).toNumber()),iv);return s(0,t)},CT=function(t,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new Oe(0),tickMin:new Oe(0),tickMax:new Oe(0)};var o=jT(new Oe(n).sub(t).div(r-1),i,a),s;t<=0&&n>=0?s=new Oe(0):(s=new Oe(t).add(n).div(2),s=s.sub(new Oe(s).mod(o)));var l=Math.ceil(s.sub(t).div(o).toNumber()),c=Math.ceil(new Oe(n).sub(s).div(o).toNumber()),d=l+c+1;return d>r?CT(t,n,r,i,a+1):(d<r&&(c=n>0?c+(r-d):c,l=n>0?l:l+(r-d)),{step:o,tickMin:s.sub(new Oe(l).mul(o)),tickMax:s.add(new Oe(c).mul(o))})};function DJ(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(r,2),[o,s]=ST([t,n]);if(o===-1/0||s===1/0){var l=s===1/0?[o,...iv(0,r-1).map(()=>1/0)]:[...iv(0,r-1).map(()=>-1/0),s];return t>n?av(l):l}if(o===s)return IJ(o,r,i);var{step:c,tickMin:d,tickMax:f}=CT(o,s,a,i,0),h=kT(d,f.add(new Oe(.1).mul(c)),c);return t>n?av(h):h}function RJ(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,o]=ST([n,r]);if(a===-1/0||o===1/0)return[n,r];if(a===o)return[a];var s=Math.max(t,2),l=jT(new Oe(o).sub(a).div(s-1),i,0),c=[...kT(new Oe(a),new Oe(o),l),o];return i===!1&&(c=c.map(d=>Math.round(d))),n>r?av(c):c}var MJ=bT(DJ),LJ=bT(RJ),_T=e=>e.rootProps.maxBarSize,$J=e=>e.rootProps.barGap,ET=e=>e.rootProps.barCategoryGap,FJ=e=>e.rootProps.barSize,Bc=e=>e.rootProps.stackOffset,pb=e=>e.options.chartName,gb=e=>e.rootProps.syncId,NT=e=>e.rootProps.syncMethod,yb=e=>e.options.eventEmitter,Rr={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},sn={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},am=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},UJ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Rr.angleAxisId,includeHidden:!1,name:void 0,reversed:Rr.reversed,scale:Rr.scale,tick:Rr.tick,tickCount:void 0,ticks:void 0,type:Rr.type,unit:void 0},zJ={allowDataOverflow:sn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:sn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:sn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:sn.scale,tick:sn.tick,tickCount:sn.tickCount,ticks:void 0,type:sn.type,unit:void 0},BJ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Rr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Rr.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Rr.scale,tick:Rr.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},WJ={allowDataOverflow:sn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:sn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:sn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:sn.scale,tick:sn.tick,tickCount:sn.tickCount,ticks:void 0,type:"category",unit:void 0},Rs=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?BJ:UJ,Wc=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?WJ:zJ,om=e=>e.polarOptions,vb=W([wi,ki,Ct],zK),PT=W([om,vb],(e,t)=>{if(e!=null)return br(e.innerRadius,t,0)}),OT=W([om,vb],(e,t)=>{if(e!=null)return br(e.outerRadius,t,t*.8)}),qJ=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},AT=W([om],qJ),HJ=W([Rs,AT],am),TT=W([vb,PT,OT],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]}),KJ=W([Wc,TT],am),Ms=W([je,om,PT,OT,wi,ki],(e,t,n,r,i,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:o,cy:s,startAngle:l,endAngle:c}=t;return{cx:br(o,i,i/2),cy:br(s,a,a/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:c,clockWise:!1}}}),Fe=(e,t)=>t,qc=(e,t,n)=>n;function xb(e){return e==null?void 0:e.id}var bt=e=>{var t=je(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Ls=e=>e.tooltip.settings.axisId,Et=e=>{var t=bt(e),n=Ls(e);return $s(e,t,n)},IT=W([Et],e=>e==null?void 0:e.dataKey);function DT(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:a}=n,o=new Map;return e.forEach(s=>{var l,c=(l=s.data)!==null&&l!==void 0?l:r;if(!(c==null||c.length===0)){var d=xb(s);c.forEach((f,h)=>{var m=a==null||i?h:String(vt(f,a,null)),p=vt(f,s.dataKey,0),g;o.has(m)?g=o.get(m):g={},Object.assign(g,{[d]:p}),o.set(m,g)})}}),Array.from(o.values())}function sm(e){return e.stackId!=null&&e.dataKey!=null}function Hj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Hj(Object(n),!0).forEach(function(r){VJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VJ(e,t,n){return(t=GJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GJ(e){var t=YJ(e,"string");return typeof t=="symbol"?t:t+""}function YJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ov=[0,"auto"],Sn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},RT=(e,t)=>e.cartesianAxis.xAxis[t],ji=(e,t)=>{var n=RT(e,t);return n??Sn},jn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ov,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Lc},MT=(e,t)=>e.cartesianAxis.yAxis[t],Ci=(e,t)=>{var n=MT(e,t);return n??jn},JJ={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},bb=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??JJ},at=(e,t,n)=>{switch(t){case"xAxis":return ji(e,n);case"yAxis":return Ci(e,n);case"zAxis":return bb(e,n);case"angleAxis":return Rs(e,n);case"radiusAxis":return Wc(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},XJ=(e,t,n)=>{switch(t){case"xAxis":return ji(e,n);case"yAxis":return Ci(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},$s=(e,t,n)=>{switch(t){case"xAxis":return ji(e,n);case"yAxis":return Ci(e,n);case"angleAxis":return Rs(e,n);case"radiusAxis":return Wc(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},LT=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function wb(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var kb=e=>e.graphicalItems.cartesianItems,QJ=W([Fe,qc],wb),Sb=(e,t,n)=>e.filter(n).filter(r=>(t==null?void 0:t.includeHidden)===!0?!0:!r.hide),Hc=W([kb,at,QJ],Sb),$T=W([Hc],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(sm)),FT=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),UT=W([Hc],FT),jb=e=>e.map(t=>t.data).filter(Boolean).flat(1),ZJ=W([Hc],jb),Cb=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},_b=W([ZJ,fb],Cb),Eb=(e,t,n)=>(t==null?void 0:t.dataKey)!=null?e.map(r=>({value:vt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:vt(i,r)}))):e.map(r=>({value:r})),lm=W([_b,at,Hc],Eb);function zT(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function fo(e){return e.filter(t=>Br(t)||t instanceof Date).map(Number).filter(t=>Dn(t)===!1)}function eX(e,t,n){return!n||typeof t!="number"||Dn(t)?[]:n.length?fo(n.flatMap(r=>{var i=vt(e,r.dataKey),a,o;if(Array.isArray(i)?[a,o]=i:a=o=i,!(!Mn(a)||!Mn(o)))return[t-a,t+o]})):[]}var tX=W([$T,fb,Et],DT),BT=(e,t,n)=>{var r={},i=t.reduce((a,o)=>(o.stackId==null||(a[o.stackId]==null&&(a[o.stackId]=[]),a[o.stackId].push(o)),a),r);return Object.fromEntries(Object.entries(i).map(a=>{var[o,s]=a,l=s.map(xb);return[o,{stackedData:rV(e,l,n),graphicalItems:s}]}))},sv=W([tX,$T,Bc],BT),WT=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var a=lV(e,r,i);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},nX=W([sv,ha,Fe],WT),qT=(e,t,n,r,i)=>n.length>0?e.flatMap(a=>n.flatMap(o=>{var s,l,c=(s=r[o.id])===null||s===void 0?void 0:s.filter(f=>zT(i,f)),d=vt(a,(l=t.dataKey)!==null&&l!==void 0?l:o.dataKey);return{value:d,errorDomain:eX(a,d,c)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:vt(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})),cm=e=>e.errorBars,HT=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>zT(n,r));W([UT,cm,Fe],HT);var rX=W([_b,at,UT,cm,Fe],qT);function iX(e){var{value:t}=e;if(Br(t)||t instanceof Date)return t}var Kj=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=fo(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},aX=(e,t,n)=>{var r=e.map(iX).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&HP(r))?AA(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},Nb=e=>{var t;if(e==null||!("domain"in e))return ov;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=fo(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:ov},Ef=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),o=Math.min(...a),s=Math.max(...a);return[o,s]}},KT=e=>e.referenceElements.dots,Fs=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),oX=W([KT,Fe,qc],Fs),VT=e=>e.referenceElements.areas,sX=W([VT,Fe,qc],Fs),GT=e=>e.referenceElements.lines,lX=W([GT,Fe,qc],Fs),YT=(e,t)=>{var n=fo(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},cX=W(oX,Fe,YT),JT=(e,t)=>{var n=fo(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},uX=W([sX,Fe],JT),XT=(e,t)=>{var n=fo(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},dX=W(lX,Fe,XT),fX=W(cX,dX,uX,(e,t,n)=>Ef(e,n,t)),QT=W([at],Nb),Pb=(e,t,n,r,i,a,o)=>{var s=CJ(t,e.allowDataOverflow);if(s!=null)return s;var l=a==="vertical"&&o==="xAxis"||a==="horizontal"&&o==="yAxis",c=l?Ef(n,i,Kj(r)):Ef(i,Kj(r));return _J(t,c,e.allowDataOverflow)},hX=W([at,QT,nX,rX,fX,je,Fe],Pb),mX=[0,1],Ob=(e,t,n,r,i,a,o)=>{if(!((e==null||n==null||n.length===0)&&o===void 0)){var{dataKey:s,type:l}=e,c=ua(t,a);return c&&s==null?AA(0,n.length):l==="category"?aX(r,e,c):i==="expand"?mX:o}},Ab=W([at,je,_b,lm,Bc,Fe,hX],Ob),ZT=(e,t,n,r,i)=>{if(e!=null){var{scale:a,type:o}=e;if(a==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof a=="string"){var s="scale".concat(Ic(a));return s in bl?s:"point"}}},ma=W([at,je,LT,pb,Fe],ZT);function pX(e){if(e!=null){if(e in bl)return bl[e]();var t="scale".concat(Ic(e));if(t in bl)return bl[t]()}}function um(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=pX(t);if(i!=null){var a=i.domain(n).range(r);return QK(a),a}}}var Tb=(e,t,n)=>{var r=Nb(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&gs(e))return MJ(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&gs(e))return LJ(e,t.tickCount,t.allowDecimals)}},Ib=W([Ab,$s,ma],Tb),Db=(e,t,n,r)=>{if(r!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&gs(t)&&Array.isArray(n)&&n.length>0){var i=t[0],a=n[0],o=t[1],s=n[n.length-1];return[Math.min(i,a),Math.max(o,s)]}return t},gX=W([at,Ab,Ib,Fe],Db),yX=W(lm,at,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(fo(e.map(s=>s.value))).sort((s,l)=>s-l);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var a=0;a<r.length-1;a++){var o=r[a+1]-r[a];n=Math.min(n,o)}return n/i}}),eI=W(yX,je,ET,Ct,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!Mn(e))return 0;var a=t==="vertical"?r.height:r.width;if(i==="gap")return e*a/2;if(i==="no-gap"){var o=br(n,e*a),s=e*a/2;return s-o-(s-o)/a*o}return 0}),vX=(e,t)=>{var n=ji(e,t);return n==null||typeof n.padding!="string"?0:eI(e,"xAxis",t,n.padding)},xX=(e,t)=>{var n=Ci(e,t);return n==null||typeof n.padding!="string"?0:eI(e,"yAxis",t,n.padding)},bX=W(ji,vX,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),wX=W(Ci,xX,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),kX=W([Ct,bX,Gh,Vh,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),SX=W([Ct,je,wX,Gh,Vh,(e,t,n)=>n],(e,t,n,r,i,a)=>{var{padding:o}=i;return a?[r.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),Kc=(e,t,n,r)=>{var i;switch(t){case"xAxis":return kX(e,n,r);case"yAxis":return SX(e,n,r);case"zAxis":return(i=bb(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return AT(e);case"radiusAxis":return TT(e,n);default:return}},tI=W([at,Kc],am),Us=W([at,ma,gX,tI],um);W([Hc,cm,Fe],HT);function nI(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var dm=(e,t)=>t,fm=(e,t,n)=>n,jX=W(Hh,dm,fm,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(nI)),CX=W(Kh,dm,fm,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(nI)),rI=(e,t)=>({width:e.width,height:t.height}),_X=(e,t)=>{var n=typeof t.width=="number"?t.width:Lc;return{width:n,height:e.height}},iI=W(Ct,ji,rI),EX=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},NX=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},PX=W(ki,Ct,jX,dm,fm,(e,t,n,r,i)=>{var a={},o;return n.forEach(s=>{var l=rI(t,s);o==null&&(o=EX(t,r,e));var c=r==="top"&&!i||r==="bottom"&&i;a[s.id]=o-Number(c)*l.height,o+=(c?-1:1)*l.height}),a}),OX=W(wi,Ct,CX,dm,fm,(e,t,n,r,i)=>{var a={},o;return n.forEach(s=>{var l=_X(t,s);o==null&&(o=NX(t,r,e));var c=r==="left"&&!i||r==="right"&&i;a[s.id]=o-Number(c)*l.width,o+=(c?-1:1)*l.width}),a}),AX=(e,t)=>{var n=ji(e,t);if(n!=null)return PX(e,n.orientation,n.mirror)},TX=W([Ct,ji,AX,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n==null?void 0:n[r];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),IX=(e,t)=>{var n=Ci(e,t);if(n!=null)return OX(e,n.orientation,n.mirror)},DX=W([Ct,Ci,IX,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),aI=W(Ct,Ci,(e,t)=>{var n=typeof t.width=="number"?t.width:Lc;return{width:n,height:e.height}}),Vj=(e,t,n)=>{switch(t){case"xAxis":return iI(e,n).width;case"yAxis":return aI(e,n).height;default:return}},oI=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:o}=n,s=ua(e,r),l=t.map(c=>c.value);if(o&&s&&a==="category"&&i&&HP(l))return l}},Vc=W([je,lm,at,Fe],oI),Rb=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,o=ua(e,r);if(o&&(i==="number"||a!=="auto"))return t.map(s=>s.value)}},Mb=W([je,lm,$s,Fe],Rb),Gj=W([je,XJ,ma,Us,Vc,Mb,Kc,Ib,Fe],(e,t,n,r,i,a,o,s,l)=>{if(t==null)return null;var c=ua(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:a,duplicateDomain:i,isCategorical:c,niceTicks:s,range:o,realScaleType:n,scale:r}}),sI=(e,t,n,r,i,a,o,s,l)=>{if(!(t==null||r==null)){var c=ua(e,l),{type:d,ticks:f,tickCount:h}=t,m=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,p=d==="category"&&r.bandwidth?r.bandwidth()/m:0;p=l==="angleAxis"&&a!=null&&a.length>=2?dn(a[0]-a[1])*2*p:p;var g=f||i;if(g){var y=g.map((x,b)=>{var w=o?o.indexOf(x):x;return{index:b,coordinate:r(w)+p,value:x,offset:p}});return y.filter(x=>!Dn(x.coordinate))}return c&&s?s.map((x,b)=>({coordinate:r(x)+p,value:x,index:b,offset:p})):r.ticks?r.ticks(h).map(x=>({coordinate:r(x)+p,value:x,offset:p})):r.domain().map((x,b)=>({coordinate:r(x)+p,value:o?o[x]:x,index:b,offset:p}))}},lI=W([je,$s,ma,Us,Ib,Kc,Vc,Mb,Fe],sI),cI=(e,t,n,r,i,a,o)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var s=ua(e,o),{tickCount:l}=t,c=0;return c=o==="angleAxis"&&(r==null?void 0:r.length)>=2?dn(r[0]-r[1])*2*c:c,s&&a?a.map((d,f)=>({coordinate:n(d)+c,value:d,index:f,offset:c})):n.ticks?n.ticks(l).map(d=>({coordinate:n(d)+c,value:d,offset:c})):n.domain().map((d,f)=>({coordinate:n(d)+c,value:i?i[d]:d,index:f,offset:c}))}},ys=W([je,$s,Us,Kc,Vc,Mb,Fe],cI),vs=W(at,Us,(e,t)=>{if(!(e==null||t==null))return _f(_f({},e),{},{scale:t})}),RX=W([at,ma,Ab,tI],um);W((e,t,n)=>bb(e,n),RX,(e,t)=>{if(!(e==null||t==null))return _f(_f({},e),{},{scale:t})});var MX=W([je,Hh,Kh],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),uI=e=>e.options.defaultTooltipEventType,dI=e=>e.options.validateTooltipEventTypes;function fI(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function Lb(e,t){var n=uI(e),r=dI(e);return fI(t,n,r)}function LX(e){return re(t=>Lb(t,e))}var hI=(e,t)=>{var n,r=Number(t);if(!(Dn(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},$X=e=>e.tooltip.settings,Fi={active:!1,index:null,dataKey:void 0,coordinate:void 0},FX={itemInteraction:{click:Fi,hover:Fi},axisInteraction:{click:Fi,hover:Fi},keyboardInteraction:Fi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},mI=Un({name:"tooltip",initialState:FX,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=ai(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:UX,removeTooltipEntrySettings:zX,setTooltipSettingsState:BX,setActiveMouseOverItemIndex:pI,mouseLeaveItem:WX,mouseLeaveChart:gI,setActiveClickItemIndex:qX,setMouseOverAxisIndex:yI,setMouseClickAxisIndex:HX,setSyncInteraction:lv,setKeyboardInteraction:cv}=mI.actions,KX=mI.reducer;function Yj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Bu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Yj(Object(n),!0).forEach(function(r){VX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VX(e,t,n){return(t=GX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GX(e){var t=YX(e,"string");return typeof t=="symbol"?t:t+""}function YX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JX(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function XX(e){return e.index!=null}var vI=(e,t,n,r)=>{if(t==null)return Fi;var i=JX(e,t,n);if(i==null)return Fi;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(XX(i)){if(a)return Bu(Bu({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Bu(Bu({},Fi),{},{coordinate:i.coordinate})},$b=(e,t)=>{var n=e==null?void 0:e.index;if(n==null)return null;var r=Number(n);if(!Mn(r))return n;var i=0,a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(i,Math.min(r,a)))},xI=(e,t,n,r,i,a,o,s)=>{if(!(a==null||s==null)){var l=o[0],c=l==null?void 0:s(l.positions,a);if(c!=null)return c;var d=i==null?void 0:i[Number(a)];if(d)switch(n){case"horizontal":return{x:d.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:d.coordinate}}}},bI=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var o;return((o=a.settings)===null||o===void 0?void 0:o.dataKey)===i})},Gc=e=>e.options.tooltipPayloadSearcher,zs=e=>e.tooltip;function Jj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jj(Object(n),!0).forEach(function(r){QX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function QX(e,t,n){return(t=ZX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZX(e){var t=eQ(e,"string");return typeof t=="symbol"?t:t+""}function eQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tQ(e,t){return e??t}var wI=(e,t,n,r,i,a,o)=>{if(!(t==null||a==null)){var{chartData:s,computedData:l,dataStartIndex:c,dataEndIndex:d}=n,f=[];return e.reduce((h,m)=>{var p,{dataDefinedOnItem:g,settings:y}=m,x=tQ(g,s),b=Array.isArray(x)?dA(x,c,d):x,w=(p=y==null?void 0:y.dataKey)!==null&&p!==void 0?p:r,j=y==null?void 0:y.nameKey,S;if(r&&Array.isArray(b)&&!Array.isArray(b[0])&&o==="axis"?S=YW(b,r,i):S=a(b,t,l,j),Array.isArray(S))S.forEach(_=>{var N=Xj(Xj({},y),{},{name:_.name,unit:_.unit,color:void 0,fill:void 0});h.push(LS({tooltipEntrySettings:N,dataKey:_.dataKey,payload:_.payload,value:vt(_.payload,_.dataKey),name:_.name}))});else{var k;h.push(LS({tooltipEntrySettings:y,dataKey:w,payload:S,value:vt(S,w),name:(k=vt(S,j))!==null&&k!==void 0?k:y==null?void 0:y.name}))}return h},f)}},Fb=W([Et,je,LT,pb,bt],ZT),nQ=W([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),rQ=W([bt,Ls],wb),Yc=W([nQ,Et,rQ],Sb),iQ=W([Yc],e=>e.filter(sm)),aQ=W([Yc],jb),Bs=W([aQ,ha],Cb),oQ=W([iQ,ha,Et],DT),Ub=W([Bs,Et,Yc],Eb),sQ=W([Et],Nb),lQ=W([Yc],e=>e.filter(sm)),cQ=W([oQ,lQ,Bc],BT),uQ=W([cQ,ha,bt],WT),dQ=W([Yc],FT),fQ=W([Bs,Et,dQ,cm,bt],qT),hQ=W([KT,bt,Ls],Fs),mQ=W([hQ,bt],YT),pQ=W([VT,bt,Ls],Fs),gQ=W([pQ,bt],JT),yQ=W([GT,bt,Ls],Fs),vQ=W([yQ,bt],XT),xQ=W([mQ,vQ,gQ],Ef),bQ=W([Et,sQ,uQ,fQ,xQ,je,bt],Pb),kI=W([Et,je,Bs,Ub,Bc,bt,bQ],Ob),wQ=W([kI,Et,Fb],Tb),kQ=W([Et,kI,wQ,bt],Db),SI=e=>{var t=bt(e),n=Ls(e),r=!1;return Kc(e,t,n,r)},jI=W([Et,SI],am),CI=W([Et,Fb,kQ,jI],um),SQ=W([je,Ub,Et,bt],oI),jQ=W([je,Ub,Et,bt],Rb),CQ=(e,t,n,r,i,a,o,s)=>{if(t){var{type:l}=t,c=ua(e,s);if(r){var d=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,f=l==="category"&&r.bandwidth?r.bandwidth()/d:0;return f=s==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?dn(i[0]-i[1])*2*f:f,c&&o?o.map((h,m)=>({coordinate:r(h)+f,value:h,index:m,offset:f})):r.domain().map((h,m)=>({coordinate:r(h)+f,value:a?a[h]:h,index:m,offset:f}))}}},_i=W([je,Et,Fb,CI,SI,SQ,jQ,bt],CQ),zb=W([uI,dI,$X],(e,t,n)=>fI(n.shared,e,t)),_I=e=>e.tooltip.settings.trigger,Bb=e=>e.tooltip.settings.defaultIndex,hm=W([zs,zb,_I,Bb],vI),to=W([hm,Bs],$b),EI=W([_i,to],hI),NI=W([hm],e=>{if(e)return e.dataKey}),PI=W([zs,zb,_I,Bb],bI),_Q=W([wi,ki,je,Ct,_i,Bb,PI,Gc],xI),EQ=W([hm,_Q],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),NQ=W([hm],e=>e.active),PQ=W([PI,to,ha,IT,EI,Gc,zb],wI),OQ=W([PQ],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function Qj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Zj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qj(Object(n),!0).forEach(function(r){AQ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function AQ(e,t,n){return(t=TQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TQ(e){var t=IQ(e,"string");return typeof t=="symbol"?t:t+""}function IQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DQ=()=>re(Et),RQ=()=>{var e=DQ(),t=re(_i),n=re(CI);return fc(Zj(Zj({},e),{},{scale:n}),t)},MQ=()=>re(pb),Wb=(e,t)=>t,OI=(e,t,n)=>n,qb=(e,t,n,r)=>r,LQ=W(_i,e=>$h(e,t=>t.coordinate)),Hb=W([zs,Wb,OI,qb],vI),AI=W([Hb,Bs],$b),$Q=(e,t,n)=>{if(t!=null){var r=zs(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},TI=W([zs,Wb,OI,qb],bI),Nf=W([wi,ki,je,Ct,_i,qb,TI,Gc],xI),FQ=W([Hb,Nf],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),II=W(_i,AI,hI),UQ=W([TI,AI,ha,IT,II,Gc,Wb],wI),zQ=W([Hb],e=>({isActive:e.active,activeIndex:e.index})),BQ=(e,t,n,r,i,a,o,s)=>{if(!(!e||!t||!r||!i||!a)){var l=cV(e.chartX,e.chartY,t,n,s);if(l){var c=dV(l,t),d=JK(c,o,a,r,i),f=uV(t,a,d,l);return{activeIndex:String(d),activeCoordinate:f}}}};function uv(){return uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uv.apply(null,arguments)}function eC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Wu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eC(Object(n),!0).forEach(function(r){WQ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function WQ(e,t,n){return(t=qQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qQ(e){var t=HQ(e,"string");return typeof t=="symbol"?t:t+""}function HQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KQ(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:a,layout:o,cursor:s,tooltipEventType:l,chartName:c}=e,d=t,f=n,h=r;if(!s||!d||c!=="ScatterChart"&&l!=="axis")return null;var m,p;if(c==="ScatterChart")m=d,p=m7;else if(c==="BarChart")m=p7(o,d,i,a),p=jA;else if(o==="radial"){var{cx:g,cy:y,radius:x,startAngle:b,endAngle:w}=CA(d);m={cx:g,cy:y,startAngle:b,endAngle:w,innerRadius:x,outerRadius:x},p=EA}else m={points:G7(o,d,i)},p=a7;var j=typeof s=="object"&&"className"in s?s.className:void 0,S=Wu(Wu(Wu(Wu({stroke:"#ccc",pointerEvents:"none"},i),m),Ae(s,!1)),{},{payload:f,payloadIndex:h,className:Se("recharts-tooltip-cursor",j)});return v.isValidElement(s)?v.cloneElement(s,S):v.createElement(p,S)}function VQ(e){var t=RQ(),n=pA(),r=U0(),i=MQ();return v.createElement(KQ,uv({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var DI=v.createContext(null),GQ=()=>v.useContext(DI),RI={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function a(l,c,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new i(d,f||l,h),p=n?n+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],m]:l._events[p].push(m):(l._events[p]=m,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],d,f;if(this._eventsCount===0)return c;for(f in d=this._events)t.call(d,f)&&c.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},s.prototype.listeners=function(c){var d=n?n+c:c,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,p=new Array(m);h<m;h++)p[h]=f[h].fn;return p},s.prototype.listenerCount=function(c){var d=n?n+c:c,f=this._events[d];return f?f.fn?1:f.length:0},s.prototype.emit=function(c,d,f,h,m,p){var g=n?n+c:c;if(!this._events[g])return!1;var y=this._events[g],x=arguments.length,b,w;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),x){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,f),!0;case 4:return y.fn.call(y.context,d,f,h),!0;case 5:return y.fn.call(y.context,d,f,h,m),!0;case 6:return y.fn.call(y.context,d,f,h,m,p),!0}for(w=1,b=new Array(x-1);w<x;w++)b[w-1]=arguments[w];y.fn.apply(y.context,b)}else{var j=y.length,S;for(w=0;w<j;w++)switch(y[w].once&&this.removeListener(c,y[w].fn,void 0,!0),x){case 1:y[w].fn.call(y[w].context);break;case 2:y[w].fn.call(y[w].context,d);break;case 3:y[w].fn.call(y[w].context,d,f);break;case 4:y[w].fn.call(y[w].context,d,f,h);break;default:if(!b)for(S=1,b=new Array(x-1);S<x;S++)b[S-1]=arguments[S];y[w].fn.apply(y[w].context,b)}}return!0},s.prototype.on=function(c,d,f){return a(this,c,d,f,!1)},s.prototype.once=function(c,d,f){return a(this,c,d,f,!0)},s.prototype.removeListener=function(c,d,f,h){var m=n?n+c:c;if(!this._events[m])return this;if(!d)return o(this,m),this;var p=this._events[m];if(p.fn)p.fn===d&&(!h||p.once)&&(!f||p.context===f)&&o(this,m);else{for(var g=0,y=[],x=p.length;g<x;g++)(p[g].fn!==d||h&&!p[g].once||f&&p[g].context!==f)&&y.push(p[g]);y.length?this._events[m]=y.length===1?y[0]:y:o(this,m)}return this},s.prototype.removeAllListeners=function(c){var d;return c?(d=n?n+c:c,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s})(RI);var YQ=RI.exports;const JQ=Ln(YQ);var xc=new JQ,dv="recharts.syncEvent.tooltip",tC="recharts.syncEvent.brush";function MI(e,t){if(t){var n=Number.parseInt(t,10);if(!Dn(n))return e==null?void 0:e[n]}}var XQ={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},LI=Un({name:"options",initialState:XQ,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),QQ=LI.reducer,{createEventEmitter:ZQ}=LI.actions;function eZ(e){return e.tooltip.syncInteraction}var tZ={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},$I=Un({name:"chartData",initialState:tZ,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:nC,setDataStartEndIndexes:nZ,setComputedData:Sue}=$I.actions,rZ=$I.reducer,iZ=["x","y"];function rC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ba(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rC(Object(n),!0).forEach(function(r){aZ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aZ(e,t,n){return(t=oZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oZ(e){var t=sZ(e,"string");return typeof t=="symbol"?t:t+""}function sZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lZ(e,t){if(e==null)return{};var n,r,i=cZ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function cZ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var FI=()=>{};function uZ(){var e=re(gb),t=re(yb),n=Ve(),r=re(NT),i=re(_i),a=U0(),o=L0(),s=re(l=>l.rootProps.className);v.useEffect(()=>{if(e==null)return FI;var l=(c,d,f)=>{if(t!==f&&e===c){if(r==="index"){var h;if(o&&d!==null&&d!==void 0&&(h=d.payload)!==null&&h!==void 0&&h.coordinate){var m=d.payload.coordinate,{x:p,y:g}=m,y=lZ(m,iZ),x=ba(ba(ba({},y),typeof p=="number"&&{x:Math.max(o.x,Math.min(p,o.x+o.width))}),typeof g=="number"&&{y:Math.max(o.y,Math.min(g,o.y+o.height))}),b=ba(ba({},d),{},{payload:ba(ba({},d.payload),{},{coordinate:x})});n(b)}else n(d);return}if(i!=null){var w;if(typeof r=="function"){var j={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},S=r(i,j);w=i[S]}else r==="value"&&(w=i.find($=>String($.value)===d.payload.label));var{coordinate:k}=d.payload;if(w==null||d.payload.active===!1||k==null||o==null){n(lv({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:_,y:N}=k,P=Math.min(_,o.x+o.width),E=Math.min(N,o.y+o.height),T={x:a==="horizontal"?w.coordinate:P,y:a==="horizontal"?E:w.coordinate},L=lv({active:d.payload.active,coordinate:T,dataKey:d.payload.dataKey,index:String(w.index),label:d.payload.label});n(L)}}};return xc.on(dv,l),()=>{xc.off(dv,l)}},[s,n,t,e,r,i,a,o])}function dZ(){var e=re(gb),t=re(yb),n=Ve();v.useEffect(()=>{if(e==null)return FI;var r=(i,a,o)=>{t!==o&&e===i&&n(nZ(a))};return xc.on(tC,r),()=>{xc.off(tC,r)}},[n,t,e])}function fZ(){var e=Ve();v.useEffect(()=>{e(ZQ())},[e]),uZ(),dZ()}function hZ(e,t,n,r,i,a){var o=re(h=>$Q(h,e,t)),s=re(yb),l=re(gb),c=re(NT),d=re(eZ),f=d==null?void 0:d.active;v.useEffect(()=>{if(!f&&l!=null&&s!=null){var h=lv({active:a,coordinate:n,dataKey:o,index:i,label:typeof r=="number"?String(r):r});xc.emit(dv,l,h,s)}},[f,n,o,i,r,s,l,c,a])}function iC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function aC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iC(Object(n),!0).forEach(function(r){mZ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mZ(e,t,n){return(t=pZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pZ(e){var t=gZ(e,"string");return typeof t=="symbol"?t:t+""}function gZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yZ(e){return e.dataKey}function vZ(e,t){return v.isValidElement(e)?v.cloneElement(e,t):typeof e=="function"?v.createElement(e,t):v.createElement(HV,t)}var oC=[],xZ={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!lo.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function sC(e){var t=xn(e,xZ),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:a,content:o,filterNull:s,isAnimationActive:l,offset:c,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:m,wrapperStyle:p,cursor:g,shared:y,trigger:x,defaultIndex:b,portal:w,axisId:j}=t,S=Ve(),k=typeof b=="number"?String(b):b;v.useEffect(()=>{S(BX({shared:y,trigger:x,axisId:j,active:n,defaultIndex:k}))},[S,y,x,j,n,k]);var _=L0(),N=xA(),P=LX(y),{activeIndex:E,isActive:T}=re(U=>zQ(U,P,x,k)),L=re(U=>UQ(U,P,x,k)),$=re(U=>II(U,P,x,k)),B=re(U=>FQ(U,P,x,k)),D=L,z=GQ(),G=n??T,[I,R]=FO([D,G]),C=P==="axis"?$:void 0;hZ(P,x,B,C,E,G);var Q=w??z;if(Q==null)return null;var q=D??oC;G||(q=oC),s&&q.length&&(q=EO(D.filter(U=>U.value!=null&&(U.hide!==!0||t.includeHidden)),d,yZ));var A=q.length>0,le=v.createElement(QV,{allowEscapeViewBox:r,animationDuration:i,animationEasing:a,isAnimationActive:l,active:G,coordinate:B,hasPayload:A,offset:c,position:f,reverseDirection:h,useTranslate3d:m,viewBox:_,wrapperStyle:p,lastBoundingBox:I,innerRef:R,hasPortalFromProps:!!w},vZ(o,aC(aC({},t),{},{payload:q,label:C,active:G,coordinate:B,accessibilityLayer:N})));return v.createElement(v.Fragment,null,jx.createPortal(le,Q),G&&v.createElement(VQ,{cursor:g,tooltipEventType:P,coordinate:B,payload:D,index:E}))}var UI={},zI={},BI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:a}={}){let o,s=null;const l=a!=null&&a.includes("leading"),c=a==null||a.includes("trailing"),d=()=>{s!==null&&(n.apply(o,s),o=void 0,s=null)},f=()=>{c&&d(),g()};let h=null;const m=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},r)},p=()=>{h!==null&&(clearTimeout(h),h=null)},g=()=>{p(),o=void 0,s=null},y=()=>{d()},x=function(...b){if(i!=null&&i.aborted)return;o=this,s=b;const w=h==null;m(),l&&w&&d()};return x.schedule=m,x.cancel=g,x.flush=y,i==null||i.addEventListener("abort",g,{once:!0}),x}e.debounce=t})(BI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BI;function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:o=!1,trailing:s=!0,maxWait:l}=a,c=Array(2);o&&(c[0]="leading"),s&&(c[1]="trailing");let d,f=null;const h=t.debounce(function(...g){d=r.apply(this,g),f=null},i,{edges:c}),m=function(...g){return l!=null&&(f===null&&(f=Date.now()),Date.now()-f>=l)?(d=r.apply(this,g),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,g),d)},p=()=>(h.flush(),d);return m.cancel=h.cancel,m.flush=p,m}e.debounce=n})(zI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zI;function n(r,i=0,a={}){const{leading:o=!0,trailing:s=!0}=a;return t.debounce(r,i,{leading:o,maxWait:i,trailing:s})}e.throttle=n})(UI);var bZ=UI.throttle;const wZ=Ln(bZ);var Ml=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]};function lC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Kp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lC(Object(n),!0).forEach(function(r){kZ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kZ(e,t,n){return(t=SZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SZ(e){var t=jZ(e,"string");return typeof t=="symbol"?t:t+""}function jZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vp=v.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:a="100%",minWidth:o=0,minHeight:s,maxHeight:l,children:c,debounce:d=0,id:f,className:h,onResize:m,style:p={}}=e,g=v.useRef(null),y=v.useRef();y.current=m,v.useImperativeHandle(t,()=>g.current);var[x,b]=v.useState({containerWidth:r.width,containerHeight:r.height}),w=v.useCallback((S,k)=>{b(_=>{var N=Math.round(S),P=Math.round(k);return _.containerWidth===N&&_.containerHeight===P?_:{containerWidth:N,containerHeight:P}})},[]);v.useEffect(()=>{var S=P=>{var E,{width:T,height:L}=P[0].contentRect;w(T,L),(E=y.current)===null||E===void 0||E.call(y,T,L)};d>0&&(S=wZ(S,d,{trailing:!0,leading:!1}));var k=new ResizeObserver(S),{width:_,height:N}=g.current.getBoundingClientRect();return w(_,N),k.observe(g.current),()=>{k.disconnect()}},[w,d]);var j=v.useMemo(()=>{var{containerWidth:S,containerHeight:k}=x;if(S<0||k<0)return null;Ml(Da(i)||Da(a),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,a),Ml(!n||n>0,"The aspect(%s) must be greater than zero.",n);var _=Da(i)?S:i,N=Da(a)?k:a;return n&&n>0&&(_?N=_/n:N&&(_=N*n),l&&N>l&&(N=l)),Ml(_>0||N>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,_,N,i,a,o,s,n),v.Children.map(c,P=>v.cloneElement(P,{width:_,height:N,style:Kp({width:_,height:N},P.props.style)}))},[n,c,a,l,s,o,x,i]);return v.createElement("div",{id:f?"".concat(f):void 0,className:Se("recharts-responsive-container",h),style:Kp(Kp({},p),{},{width:i,height:a,minWidth:o,minHeight:s,maxHeight:l}),ref:g},v.createElement("div",{style:{width:0,height:0,overflow:"visible"}},j))}),WI=e=>null;WI.displayName="Cell";function CZ(e,t,n){return(t=_Z(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _Z(e){var t=EZ(e,"string");return typeof t=="symbol"?t:t+""}function EZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class NZ{constructor(t){CZ(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function cC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function PZ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cC(Object(n),!0).forEach(function(r){OZ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function OZ(e,t,n){return(t=AZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AZ(e){var t=TZ(e,"string");return typeof t=="symbol"?t:t+""}function TZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IZ={cacheSize:2e3,enableCache:!0},qI=PZ({},IZ),uC=new NZ(qI.cacheSize),DZ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},dC="recharts_measurement_span";function RZ(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",a=t.fontStyle||"",o=t.letterSpacing||"",s=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(o,"|").concat(s)}var fC=(e,t)=>{try{var n=document.getElementById(dC);n||(n=document.createElement("span"),n.setAttribute("id",dC),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,DZ,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Ll=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||lo.isSsr)return{width:0,height:0};if(!qI.enableCache)return fC(t,n);var r=RZ(t,n),i=uC.get(r);if(i)return i;var a=fC(t,n);return uC.set(r,a),a},hC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,mC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,MZ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,LZ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,HI={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},$Z=Object.keys(HI),Fo="NaN";function FZ(e,t){return e*HI[t]}class on{static parse(t){var n,[,r,i]=(n=LZ.exec(t))!==null&&n!==void 0?n:[];return new on(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,Dn(t)&&(this.unit=""),n!==""&&!MZ.test(n)&&(this.num=NaN,this.unit=""),$Z.includes(n)&&(this.num=FZ(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new on(NaN,""):new on(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new on(NaN,""):new on(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new on(NaN,""):new on(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new on(NaN,""):new on(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Dn(this.num)}}function KI(e){if(e.includes(Fo))return Fo;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,a]=(n=hC.exec(t))!==null&&n!==void 0?n:[],o=on.parse(r??""),s=on.parse(a??""),l=i==="*"?o.multiply(s):o.divide(s);if(l.isNaN())return Fo;t=t.replace(hC,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,d,f,h]=(c=mC.exec(t))!==null&&c!==void 0?c:[],m=on.parse(d??""),p=on.parse(h??""),g=f==="+"?m.add(p):m.subtract(p);if(g.isNaN())return Fo;t=t.replace(mC,g.toString())}return t}var pC=/\(([^()]*)\)/;function UZ(e){for(var t=e,n;(n=pC.exec(t))!=null;){var[,r]=n;t=t.replace(pC,KI(r))}return t}function zZ(e){var t=e.replace(/\s+/g,"");return t=UZ(t),t=KI(t),t}function BZ(e){try{return zZ(e)}catch{return Fo}}function Gp(e){var t=BZ(e.slice(5,-1));return t===Fo?"":t}var WZ=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],qZ=["dx","dy","angle","className","breakAll"];function fv(){return fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fv.apply(null,arguments)}function gC(e,t){if(e==null)return{};var n,r,i=HZ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function HZ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var VI=/[ \f\n\r\t\v\u2028\u2029]+/,GI=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];it(t)||(n?i=t.toString().split(""):i=t.toString().split(VI));var a=i.map(s=>({word:s,width:Ll(s,r).width})),o=n?0:Ll(" ",r).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}},KZ=(e,t,n,r,i)=>{var{maxLines:a,children:o,style:s,breakAll:l}=e,c=ue(a),d=o,f=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return T.reduce((L,$)=>{var{word:B,width:D}=$,z=L[L.length-1];if(z&&(r==null||i||z.width+D+n<Number(r)))z.words.push(B),z.width+=D+n;else{var G={words:[B],width:D};L.push(G)}return L},[])},h=f(t),m=E=>E.reduce((T,L)=>T.width>L.width?T:L);if(!c||i)return h;var p=h.length>a||m(h).width>Number(r);if(!p)return h;for(var g="…",y=E=>{var T=d.slice(0,E),L=GI({breakAll:l,style:s,children:T+g}).wordsWithComputedWidth,$=f(L),B=$.length>a||m($).width>Number(r);return[B,$]},x=0,b=d.length-1,w=0,j;x<=b&&w<=d.length-1;){var S=Math.floor((x+b)/2),k=S-1,[_,N]=y(k),[P]=y(S);if(!_&&!P&&(x=S+1),_&&P&&(b=S-1),!_&&P){j=N;break}w++}return j||h},yC=e=>{var t=it(e)?[]:e.toString().split(VI);return[{words:t}]},VZ=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:o}=e;if((t||n)&&!lo.isSsr){var s,l,c=GI({breakAll:a,children:r,style:i});if(c){var{wordsWithComputedWidth:d,spaceWidth:f}=c;s=d,l=f}else return yC(r);return KZ({breakAll:a,children:r,maxLines:o,style:i},s,l,t,n)}return yC(r)},vC="#808080",Jc=v.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:a="0.71em",scaleToFit:o=!1,textAnchor:s="start",verticalAnchor:l="end",fill:c=vC}=e,d=gC(e,WZ),f=v.useMemo(()=>VZ({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:h,dy:m,angle:p,className:g,breakAll:y}=d,x=gC(d,qZ);if(!Br(n)||!Br(r)||f.length===0)return null;var b=n+(ue(h)?h:0),w=r+(ue(m)?m:0),j;switch(l){case"start":j=Gp("calc(".concat(a,")"));break;case"middle":j=Gp("calc(".concat((f.length-1)/2," * -").concat(i," + (").concat(a," / 2))"));break;default:j=Gp("calc(".concat(f.length-1," * -").concat(i,")"));break}var S=[];if(o){var k=f[0].width,{width:_}=d;S.push("scale(".concat(ue(_)?_/k:1,")"))}return p&&S.push("rotate(".concat(p,", ").concat(b,", ").concat(w,")")),S.length&&(x.transform=S.join(" ")),v.createElement("text",fv({},Ae(x,!0),{ref:t,x:b,y:w,className:Se("recharts-text",g),textAnchor:s,fill:c.includes("url")?vC:c}),f.map((N,P)=>{var E=N.words.join(y?"":" ");return v.createElement("tspan",{x:b,dy:P===0?j:i,key:"".concat(E,"-").concat(P)},E)}))});Jc.displayName="Text";var GZ=["labelRef"];function YZ(e,t){if(e==null)return{};var n,r,i=JZ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function JZ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function xC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(n),!0).forEach(function(r){XZ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function XZ(e,t,n){return(t=QZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QZ(e){var t=ZZ(e,"string");return typeof t=="symbol"?t:t+""}function ZZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xr(){return Xr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xr.apply(null,arguments)}var YI=v.createContext(null),eee=e=>{var{x:t,y:n,width:r,height:i,children:a}=e,o=v.useMemo(()=>({x:t,y:n,width:r,height:i}),[t,n,r,i]);return v.createElement(YI.Provider,{value:o},a)},JI=()=>{var e=v.useContext(YI),t=L0();return e||t},XI=v.createContext(null),tee=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:o,clockWise:s,children:l}=e,c=v.useMemo(()=>({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:o,clockWise:s}),[t,n,r,i,a,o,s]);return v.createElement(XI.Provider,{value:c},l)},QI=()=>{var e=v.useContext(XI),t=re(Ms);return e||t},nee=e=>{var{value:t,formatter:n}=e,r=it(e.children)?t:e.children;return typeof n=="function"?n(r):r},Kb=e=>e!=null&&typeof e=="function",ree=(e,t)=>{var n=dn(t-e),r=Math.min(Math.abs(t-e),360);return n*r},iee=(e,t,n,r,i)=>{var{offset:a,className:o}=e,{cx:s,cy:l,innerRadius:c,outerRadius:d,startAngle:f,endAngle:h,clockWise:m}=i,p=(c+d)/2,g=ree(f,h),y=g>=0?1:-1,x,b;switch(t){case"insideStart":x=f+y*a,b=m;break;case"insideEnd":x=h-y*a,b=!m;break;case"end":x=h+y*a,b=m;break;default:throw new Error("Unsupported position ".concat(t))}b=g<=0?b:!b;var w=De(s,l,p,x),j=De(s,l,p,x+(b?1:-1)*359),S="M".concat(w.x,",").concat(w.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(b?0:1,`,
    `).concat(j.x,",").concat(j.y),k=it(e.id)?cc("recharts-radial-line-"):e.id;return v.createElement("text",Xr({},r,{dominantBaseline:"central",className:Se("recharts-radial-bar-label",o)}),v.createElement("defs",null,v.createElement("path",{id:k,d:S})),v.createElement("textPath",{xlinkHref:"#".concat(k)},n))},aee=(e,t,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:s,endAngle:l}=e,c=(s+l)/2;if(n==="outside"){var{x:d,y:f}=De(r,i,o+t,c);return{x:d,y:f,textAnchor:d>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=(a+o)/2,{x:m,y:p}=De(r,i,h,c);return{x:m,y:p,textAnchor:"middle",verticalAnchor:"middle"}},ZI=e=>"cx"in e&&ue(e.cx),oee=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,a;n!=null&&!ZI(n)&&(a=n);var{x:o,y:s,width:l,height:c}=t,d=c>=0?1:-1,f=d*r,h=d>0?"end":"start",m=d>0?"start":"end",p=l>=0?1:-1,g=p*r,y=p>0?"end":"start",x=p>0?"start":"end";if(i==="top"){var b={x:o+l/2,y:s-d*r,textAnchor:"middle",verticalAnchor:h};return tt(tt({},b),a?{height:Math.max(s-a.y,0),width:l}:{})}if(i==="bottom"){var w={x:o+l/2,y:s+c+f,textAnchor:"middle",verticalAnchor:m};return tt(tt({},w),a?{height:Math.max(a.y+a.height-(s+c),0),width:l}:{})}if(i==="left"){var j={x:o-g,y:s+c/2,textAnchor:y,verticalAnchor:"middle"};return tt(tt({},j),a?{width:Math.max(j.x-a.x,0),height:c}:{})}if(i==="right"){var S={x:o+l+g,y:s+c/2,textAnchor:x,verticalAnchor:"middle"};return tt(tt({},S),a?{width:Math.max(a.x+a.width-S.x,0),height:c}:{})}var k=a?{width:l,height:c}:{};return i==="insideLeft"?tt({x:o+g,y:s+c/2,textAnchor:x,verticalAnchor:"middle"},k):i==="insideRight"?tt({x:o+l-g,y:s+c/2,textAnchor:y,verticalAnchor:"middle"},k):i==="insideTop"?tt({x:o+l/2,y:s+f,textAnchor:"middle",verticalAnchor:m},k):i==="insideBottom"?tt({x:o+l/2,y:s+c-f,textAnchor:"middle",verticalAnchor:h},k):i==="insideTopLeft"?tt({x:o+g,y:s+f,textAnchor:x,verticalAnchor:m},k):i==="insideTopRight"?tt({x:o+l-g,y:s+f,textAnchor:y,verticalAnchor:m},k):i==="insideBottomLeft"?tt({x:o+g,y:s+c-f,textAnchor:x,verticalAnchor:h},k):i==="insideBottomRight"?tt({x:o+l-g,y:s+c-f,textAnchor:y,verticalAnchor:h},k):i&&typeof i=="object"&&(ue(i.x)||Da(i.x))&&(ue(i.y)||Da(i.y))?tt({x:o+br(i.x,l),y:s+br(i.y,c),textAnchor:"end",verticalAnchor:"end"},k):tt({x:o+l/2,y:s+c/2,textAnchor:"middle",verticalAnchor:"middle"},k)},see={offset:5};function Ri(e){var t=xn(e,see),{viewBox:n,position:r,value:i,children:a,content:o,className:s="",textBreakAll:l,labelRef:c}=t,d=QI(),f=JI(),h=r==="center"?f:d??f,m=n||h;if(!m||it(i)&&it(a)&&!v.isValidElement(o)&&typeof o!="function")return null;var p=tt(tt({},t),{},{viewBox:m});if(v.isValidElement(o)){var g=YZ(p,GZ);return v.cloneElement(o,g)}var y;if(typeof o=="function"){if(y=v.createElement(o,p),v.isValidElement(y))return y}else y=nee(t);var x=ZI(m),b=Ae(t,!0);if(x&&(r==="insideStart"||r==="insideEnd"||r==="end"))return iee(t,r,y,b,m);var w=x?aee(m,t.offset,t.position):oee(t,m);return v.createElement(Jc,Xr({ref:c,className:Se("recharts-label",s)},b,w,{breakAll:l}),y)}Ri.displayName="Label";var eD=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?v.createElement(Ri,Xr({key:"label-implicit"},r)):Br(e)?v.createElement(Ri,Xr({key:"label-implicit",value:e},r)):v.isValidElement(e)?e.type===Ri?v.cloneElement(e,tt({key:"label-implicit"},r)):v.createElement(Ri,Xr({key:"label-implicit",content:e},r)):Kb(e)?v.createElement(Ri,Xr({key:"label-implicit",content:e},r)):e&&typeof e=="object"?v.createElement(Ri,Xr({},e,{key:"label-implicit"},r)):null};function lee(e){var{label:t}=e,n=JI();return eD(t,n)||null}function cee(e){var{label:t}=e,n=QI();return eD(t,n)||null}var tD={},nD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(nD);var rD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(rD);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nD,n=rD,r=Rh;function i(a){if(r.isArrayLike(a))return t.last(n.toArray(a))}e.last=i})(tD);var uee=tD.last;const iD=Ln(uee);var dee=["valueAccessor"],fee=["dataKey","clockWise","id","textBreakAll"];function Pf(){return Pf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pf.apply(null,arguments)}function bC(e,t){if(e==null)return{};var n,r,i=hee(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function hee(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var mee=e=>Array.isArray(e.value)?iD(e.value):e.value,aD=v.createContext(void 0),oD=aD.Provider,sD=v.createContext(void 0);sD.Provider;function pee(){return v.useContext(aD)}function gee(){return v.useContext(sD)}function cd(e){var{valueAccessor:t=mee}=e,n=bC(e,dee),{dataKey:r,clockWise:i,id:a,textBreakAll:o}=n,s=bC(n,fee),l=pee(),c=gee(),d=l||c;return!d||!d.length?null:v.createElement(jt,{className:"recharts-label-list"},d.map((f,h)=>{var m,p=it(r)?t(f,h):vt(f&&f.payload,r),g=it(a)?{}:{id:"".concat(a,"-").concat(h)};return v.createElement(Ri,Pf({},Ae(f,!0),s,g,{fill:(m=n.fill)!==null&&m!==void 0?m:f.fill,parentViewBox:f.parentViewBox,value:p,textBreakAll:o,viewBox:f.viewBox,key:"label-".concat(h),index:h}))}))}cd.displayName="LabelList";function lD(e){var{label:t}=e;return t?t===!0?v.createElement(cd,{key:"labelList-implicit"}):v.isValidElement(t)||Kb(t)?v.createElement(cd,{key:"labelList-implicit",content:t}):typeof t=="object"?v.createElement(cd,Pf({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var yee=["points","className","baseLinePoints","connectNulls"];function Uo(){return Uo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uo.apply(null,arguments)}function vee(e,t){if(e==null)return{};var n,r,i=xee(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function xee(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var wC=e=>e&&e.x===+e.x&&e.y===+e.y,bee=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(r=>{wC(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),wC(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},$l=(e,t)=>{var n=bee(e);t&&(n=[n.reduce((i,a)=>[...i,...a],[])]);var r=n.map(i=>i.reduce((a,o,s)=>"".concat(a).concat(s===0?"M":"L").concat(o.x,",").concat(o.y),"")).join("");return n.length===1?"".concat(r,"Z"):r},wee=(e,t,n)=>{var r=$l(e,n);return"".concat(r.slice(-1)==="Z"?r.slice(0,-1):r,"L").concat($l(Array.from(t).reverse(),n).slice(1))},cD=e=>{var{points:t,className:n,baseLinePoints:r,connectNulls:i}=e,a=vee(e,yee);if(!t||!t.length)return null;var o=Se("recharts-polygon",n);if(r&&r.length){var s=a.stroke&&a.stroke!=="none",l=wee(t,r,i);return v.createElement("g",{className:o},v.createElement("path",Uo({},Ae(a,!0),{fill:l.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:l})),s?v.createElement("path",Uo({},Ae(a,!0),{fill:"none",d:$l(t,i)})):null,s?v.createElement("path",Uo({},Ae(a,!0),{fill:"none",d:$l(r,i)})):null)}var c=$l(t,i);return v.createElement("path",Uo({},Ae(a,!0),{fill:c.slice(-1)==="Z"?a.fill:"none",className:o,d:c}))};function hv(){return hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hv.apply(null,arguments)}var Vb=e=>{var{cx:t,cy:n,r,className:i}=e,a=Se("recharts-dot",i);return t===+t&&n===+n&&r===+r?v.createElement("circle",hv({},Zt(e),f0(e),{className:a,cx:t,cy:n,r})):null},uD=e=>e.graphicalItems.polarItems,kee=W([Fe,qc],wb),Gb=W([uD,at,kee],Sb),See=W([Gb],jb),Yb=W([See,db],Cb),dD=W([Yb,at,Gb],Eb),jee=W([Yb,at,Gb],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var a,o=vt(r,(a=t.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(r=>({value:vt(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]}))),kC=()=>{},Cee=W([at,QT,kC,jee,kC,je,Fe],Pb),fD=W([at,je,Yb,dD,Bc,Fe,Cee],Ob),hD=W([fD,at,ma],Tb),_ee=W([at,fD,hD,Fe],Db),Jb=(e,t,n)=>{switch(t){case"angleAxis":return Rs(e,n);case"radiusAxis":return Wc(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Xb=(e,t,n)=>{switch(t){case"angleAxis":return HJ(e,n);case"radiusAxis":return KJ(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Ws=W([Jb,ma,_ee,Xb],um),mD=W([je,dD,$s,Fe],Rb),qs=W([je,Jb,ma,Ws,hD,Xb,Vc,mD,Fe],sI);W([je,Jb,Ws,Xb,Vc,mD,Fe],cI);var Eee=(e,t)=>qs(e,"angleAxis",t,!1),Nee=W([Eee],e=>{if(e)return e.map(t=>t.coordinate)}),Pee=(e,t)=>qs(e,"radiusAxis",t,!1),Oee=W([Pee],e=>{if(e)return e.map(t=>t.coordinate)}),Aee=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function Tee(e,t){if(e==null)return{};var n,r,i=Iee(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Iee(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function mr(){return mr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mr.apply(null,arguments)}function SC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SC(Object(n),!0).forEach(function(r){Dee(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Dee(e,t,n){return(t=Ree(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ree(e){var t=Mee(e,"string");return typeof t=="symbol"?t:t+""}function Mee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lee=(e,t,n,r)=>{var i="";return r.forEach((a,o)=>{var s=De(t,n,e,a);o?i+="L ".concat(s.x,",").concat(s.y):i+="M ".concat(s.x,",").concat(s.y)}),i+="Z",i},$ee=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,polarAngles:a,radialLines:o}=e;if(!a||!a.length||!o)return null;var s=mm({stroke:"#ccc"},Zt(e));return v.createElement("g",{className:"recharts-polar-grid-angle"},a.map(l=>{var c=De(t,n,r,l),d=De(t,n,i,l);return v.createElement("line",mr({},s,{key:"line-".concat(l),x1:c.x,y1:c.y,x2:d.x,y2:d.y}))}))},jC=e=>{var{cx:t,cy:n,radius:r}=e,i=mm({stroke:"#ccc",fill:"none"},Zt(e));return v.createElement("circle",mr({},i,{className:Se("recharts-polar-grid-concentric-circle",e.className),cx:t,cy:n,r}))},CC=e=>{var{radius:t}=e,n=mm({stroke:"#ccc",fill:"none"},Zt(e));return v.createElement("path",mr({},n,{className:Se("recharts-polar-grid-concentric-polygon",e.className),d:Lee(t,e.cx,e.cy,e.polarAngles)}))},Fee=e=>{var{polarRadius:t,gridType:n}=e;if(!t||!t.length)return null;var r=Math.max(...t),i=e.fill&&e.fill!=="none";return v.createElement("g",{className:"recharts-polar-grid-concentric"},i&&n==="circle"&&v.createElement(jC,mr({},e,{radius:r})),i&&n!=="circle"&&v.createElement(CC,mr({},e,{radius:r})),t.map((a,o)=>{var s=o;return n==="circle"?v.createElement(jC,mr({key:s},e,{fill:"none",radius:a})):v.createElement(CC,mr({key:s},e,{fill:"none",radius:a}))}))},pD=e=>{var t,n,r,i,a,o,s,l,{gridType:c="polygon",radialLines:d=!0,angleAxisId:f=0,radiusAxisId:h=0,cx:m,cy:p,innerRadius:g,outerRadius:y}=e,x=Tee(e,Aee),b=re(Ms),w=mm({cx:(t=(n=b==null?void 0:b.cx)!==null&&n!==void 0?n:m)!==null&&t!==void 0?t:0,cy:(r=(i=b==null?void 0:b.cy)!==null&&i!==void 0?i:p)!==null&&r!==void 0?r:0,innerRadius:(a=(o=b==null?void 0:b.innerRadius)!==null&&o!==void 0?o:g)!==null&&a!==void 0?a:0,outerRadius:(s=(l=b==null?void 0:b.outerRadius)!==null&&l!==void 0?l:y)!==null&&s!==void 0?s:0},x),{polarAngles:j,polarRadius:S,outerRadius:k}=w,_=re(T=>Nee(T,f)),N=re(T=>Oee(T,h)),P=Array.isArray(j)?j:_,E=Array.isArray(S)?S:N;return k<=0||P==null||E==null?null:v.createElement("g",{className:"recharts-polar-grid"},v.createElement(Fee,mr({gridType:c,radialLines:d},w,{polarAngles:P,polarRadius:E})),v.createElement($ee,mr({gridType:c,radialLines:d},w,{polarAngles:P,polarRadius:E})))};pD.displayName="PolarGrid";var gD={},yD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){if(n.length===0)return;let i=n[0],a=r(i);for(let o=1;o<n.length;o++){const s=n[o],l=r(s);l>a&&(a=l,i=s)}return i}e.maxBy=t})(yD);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yD,n=Dc,r=Mh;function i(a,o){if(a!=null)return t.maxBy(Array.from(a),r.iteratee(o??n.identity))}e.maxBy=i})(gD);var Uee=gD.maxBy;const zee=Ln(Uee);var vD={},xD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){if(n.length===0)return;let i=n[0],a=r(i);for(let o=1;o<n.length;o++){const s=n[o],l=r(s);l<a&&(a=l,i=s)}return i}e.minBy=t})(xD);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xD,n=Dc,r=Mh;function i(a,o){if(a!=null)return t.minBy(Array.from(a),r.iteratee(o??n.identity))}e.minBy=i})(vD);var Bee=vD.minBy;const Wee=Ln(Bee);var qee={radiusAxis:{},angleAxis:{}},bD=Un({name:"polarAxis",initialState:qee,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Hee,removeRadiusAxis:Kee,addAngleAxis:Vee,removeAngleAxis:Gee}=bD.actions,Yee=bD.reducer,Jee=["cx","cy","angle","axisLine"],Xee=["angle","tickFormatter","stroke","tick"];function bc(){return bc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bc.apply(null,arguments)}function _C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_C(Object(n),!0).forEach(function(r){pm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_C(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pm(e,t,n){return(t=Qee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qee(e){var t=Zee(e,"string");return typeof t=="symbol"?t:t+""}function Zee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wD(e,t){if(e==null)return{};var n,r,i=ete(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ete(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var kD="radiusAxis";function tte(e){var t=Ve();return v.useEffect(()=>(t(Hee(e)),()=>{t(Kee(e))})),null}var nte=(e,t,n,r)=>{var{coordinate:i}=e;return De(n,r,i,t)},rte=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},ite=(e,t,n,r)=>{var i=zee(r,o=>o.coordinate||0),a=Wee(r,o=>o.coordinate||0);return{cx:t,cy:n,startAngle:e,endAngle:e,innerRadius:a.coordinate||0,outerRadius:i.coordinate||0,clockWise:!1}},ate=(e,t)=>{var{cx:n,cy:r,angle:i,axisLine:a}=e,o=wD(e,Jee),s=t.reduce((f,h)=>[Math.min(f[0],h.coordinate),Math.max(f[1],h.coordinate)],[1/0,-1/0]),l=De(n,r,s[0],i),c=De(n,r,s[1],i),d=$r($r($r({},Zt(o)),{},{fill:"none"},Ae(a,!1)),{},{x1:l.x,y1:l.y,x2:c.x,y2:c.y});return v.createElement("line",bc({className:"recharts-polar-radius-axis-line"},d))},ote=(e,t,n)=>{var r;return v.isValidElement(e)?r=v.cloneElement(e,t):typeof e=="function"?r=e(t):r=v.createElement(Jc,bc({},t,{className:"recharts-polar-radius-axis-tick-value"}),n),r},ste=(e,t)=>{var{angle:n,tickFormatter:r,stroke:i,tick:a}=e,o=wD(e,Xee),s=rte(e.orientation),l=Zt(o),c=Ae(a,!1),d=t.map((f,h)=>{var m=nte(f,e.angle,e.cx,e.cy),p=$r($r($r($r({textAnchor:s,transform:"rotate(".concat(90-n,", ").concat(m.x,", ").concat(m.y,")")},l),{},{stroke:"none",fill:i},c),{},{index:h},m),{},{payload:f});return v.createElement(jt,bc({className:Se("recharts-polar-radius-axis-tick",uA(a)),key:"tick-".concat(f.coordinate)},As(e,f,h)),ote(a,p,r?r(f.value,h):f.value))});return v.createElement(jt,{className:"recharts-polar-radius-axis-ticks"},d)},lte=e=>{var{radiusAxisId:t}=e,n=re(Ms),r=re(l=>Ws(l,"radiusAxis",t)),i=re(l=>qs(l,"radiusAxis",t,!1));if(n==null||!i||!i.length)return null;var a=$r($r($r({},e),{},{scale:r},n),{},{radius:n.outerRadius}),{tick:o,axisLine:s}=a;return v.createElement(jt,{className:Se("recharts-polar-radius-axis",kD,a.className)},s&&ate(a,i),o&&ste(a,i),v.createElement(tee,ite(a.angle,a.cx,a.cy,i),v.createElement(cee,{label:a.label}),a.children))};class gm extends v.PureComponent{render(){return v.createElement(v.Fragment,null,v.createElement(tte,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),v.createElement(lte,this.props))}}pm(gm,"displayName","PolarRadiusAxis");pm(gm,"axisType",kD);pm(gm,"defaultProps",sn);var cte=["children"];function gi(){return gi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gi.apply(null,arguments)}function EC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EC(Object(n),!0).forEach(function(r){ym(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ym(e,t,n){return(t=ute(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ute(e){var t=dte(e,"string");return typeof t=="symbol"?t:t+""}function dte(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fte(e,t){if(e==null)return{};var n,r,i=hte(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function hte(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var NC=1e-5,mte=Math.cos(ff(45)),SD="angleAxis";function pte(e){var t=Ve(),n=v.useMemo(()=>{var a=fte(e,cte);return a},[e]),r=re(a=>Rs(a,n.id)),i=n===r;return v.useEffect(()=>(t(Vee(n)),()=>{t(Gee(n))}),[t,n]),i?e.children:null}var gte=(e,t)=>{var{cx:n,cy:r,radius:i,orientation:a,tickSize:o}=t,s=o||8,l=De(n,r,i,e.coordinate),c=De(n,r,i+(a==="inner"?-1:1)*s,e.coordinate);return{x1:l.x,y1:l.y,x2:c.x,y2:c.y}},yte=(e,t)=>{var n=Math.cos(ff(-e.coordinate));return n>NC?t==="outer"?"start":"end":n<-NC?t==="outer"?"end":"start":"middle"},vte=e=>{var t=Math.cos(ff(-e.coordinate)),n=Math.sin(ff(-e.coordinate));return Math.abs(t)<=mte?n>0?"start":"end":"middle"},xte=e=>{var{cx:t,cy:n,radius:r,axisLineType:i,axisLine:a,ticks:o}=e;if(!a)return null;var s=Mr(Mr({},Zt(e)),{},{fill:"none"},Ae(a,!1));if(i==="circle")return v.createElement(Vb,gi({className:"recharts-polar-angle-axis-line"},s,{cx:t,cy:n,r}));var l=o.map(c=>De(t,n,r,c.coordinate));return v.createElement(cD,gi({className:"recharts-polar-angle-axis-line"},s,{points:l}))},bte=e=>{var{tick:t,tickProps:n,value:r}=e;return t?v.isValidElement(t)?v.cloneElement(t,n):typeof t=="function"?t(n):v.createElement(Jc,gi({},n,{className:"recharts-polar-angle-axis-tick-value"}),r):null},wte=e=>{var{tick:t,tickLine:n,tickFormatter:r,stroke:i,ticks:a}=e,o=Zt(e),s=Ae(t,!1),l=Mr(Mr({},o),{},{fill:"none"},Ae(n,!1)),c=a.map((d,f)=>{var h=gte(d,e),m=yte(d,e.orientation),p=vte(d),g=Mr(Mr(Mr({},o),{},{textAnchor:m,verticalAnchor:p,stroke:"none",fill:i},s),{},{index:f,payload:d,x:h.x2,y:h.y2});return v.createElement(jt,gi({className:Se("recharts-polar-angle-axis-tick",uA(t)),key:"tick-".concat(d.coordinate)},As(e,d,f)),n&&v.createElement("line",gi({className:"recharts-polar-angle-axis-tick-line"},l,h)),v.createElement(bte,{tick:t,tickProps:g,value:r?r(d.value,f):d.value}))});return v.createElement(jt,{className:"recharts-polar-angle-axis-ticks"},c)},kte=e=>{var{angleAxisId:t}=e,n=re(Ms),r=re(s=>Ws(s,"angleAxis",t)),i=vn(),a=re(s=>qs(s,"angleAxis",t,i));if(n==null||!a||!a.length)return null;var o=Mr(Mr(Mr({},e),{},{scale:r},n),{},{radius:n.outerRadius});return v.createElement(jt,{className:Se("recharts-polar-angle-axis",SD,o.className)},v.createElement(xte,gi({},o,{ticks:a})),v.createElement(wte,gi({},o,{ticks:a})))};class vm extends v.PureComponent{render(){return this.props.radius<=0?null:v.createElement(pte,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},v.createElement(kte,this.props))}}ym(vm,"displayName","PolarAngleAxis");ym(vm,"axisType",SD);ym(vm,"defaultProps",Rr);var jD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const a=n[Symbol.toStringTag];return a==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${a}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(jD);var Ste=jD.isPlainObject;const jte=Ln(Ste);function PC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function OC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PC(Object(n),!0).forEach(function(r){Cte(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Cte(e,t,n){return(t=_te(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _te(e){var t=Ete(e,"string");return typeof t=="symbol"?t:t+""}function Ete(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Of(){return Of=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Of.apply(null,arguments)}var AC=(e,t,n,r,i)=>{var a=n-r,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+n,",").concat(t),o+="L ".concat(e+n-a/2,",").concat(t+i),o+="L ".concat(e+n-a/2-r,",").concat(t+i),o+="L ".concat(e,",").concat(t," Z"),o},Nte={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Pte=e=>{var t=xn(e,Nte),{x:n,y:r,upperWidth:i,lowerWidth:a,height:o,className:s}=t,{animationEasing:l,animationDuration:c,animationBegin:d,isUpdateAnimationActive:f}=t,h=v.useRef(),[m,p]=v.useState(-1),g=v.useRef(i),y=v.useRef(a),x=v.useRef(o),b=v.useRef(n),w=v.useRef(r),j=Xh(e,"trapezoid-");if(v.useEffect(()=>{if(h.current&&h.current.getTotalLength)try{var B=h.current.getTotalLength();B&&p(B)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||o!==+o||i===0&&a===0||o===0)return null;var S=Se("recharts-trapezoid",s);if(!f)return v.createElement("g",null,v.createElement("path",Of({},Ae(t,!0),{className:S,d:AC(n,r,i,a,o)})));var k=g.current,_=y.current,N=x.current,P=b.current,E=w.current,T="0px ".concat(m===-1?1:m,"px"),L="".concat(m,"px 0px"),$=bA(["strokeDasharray"],c,l);return v.createElement(Jh,{animationId:j,key:j,canBegin:m>0,duration:c,easing:l,isActive:f,begin:d},B=>{var D=pt(k,i,B),z=pt(_,a,B),G=pt(N,o,B),I=pt(P,n,B),R=pt(E,r,B);h.current&&(g.current=D,y.current=z,x.current=G,b.current=I,w.current=R);var C=B>0?{transition:$,strokeDasharray:L}:{strokeDasharray:T};return v.createElement("path",Of({},Ae(t,!0),{className:S,d:AC(I,R,D,z,G),ref:h,style:OC(OC({},C),t.style)}))})},Ote=["option","shapeType","propTransformer","activeClassName","isActive"];function Ate(e,t){if(e==null)return{};var n,r,i=Tte(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Tte(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function TC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Af(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TC(Object(n),!0).forEach(function(r){Ite(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ite(e,t,n){return(t=Dte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dte(e){var t=Rte(e,"string");return typeof t=="symbol"?t:t+""}function Rte(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mte(e,t){return Af(Af({},t),e)}function Lte(e,t){return e==="symbols"}function IC(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return v.createElement(jA,n);case"trapezoid":return v.createElement(Pte,n);case"sector":return v.createElement(EA,n);case"symbols":if(Lte(t))return v.createElement(y0,n);break;default:return null}}function $te(e){return v.isValidElement(e)?e.props:e}function Fte(e){var{option:t,shapeType:n,propTransformer:r=Mte,activeClassName:i="recharts-active-shape",isActive:a}=e,o=Ate(e,Ote),s;if(v.isValidElement(t))s=v.cloneElement(t,Af(Af({},o),$te(t)));else if(typeof t=="function")s=t(o);else if(jte(t)&&typeof t!="boolean"){var l=r(t,o);s=v.createElement(IC,{shapeType:n,elementProps:l})}else{var c=o;s=v.createElement(IC,{shapeType:n,elementProps:c})}return a?v.createElement(jt,{className:i},s):s}var CD=(e,t)=>{var n=Ve();return(r,i)=>a=>{e==null||e(r,i,a),n(pI({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},_D=e=>{var t=Ve();return(n,r)=>i=>{e==null||e(n,r,i),t(WX())}},ED=(e,t)=>{var n=Ve();return(r,i)=>a=>{e==null||e(r,i,a),n(qX({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function ND(e){var{fn:t,args:n}=e,r=Ve(),i=vn();return v.useEffect(()=>{if(!i){var a=t(n);return r(UX(a)),()=>{r(zX(a))}}},[t,n,r,i]),null}var PD=()=>{};function Ute(e){var{legendPayload:t}=e,n=Ve(),r=vn();return v.useEffect(()=>r?PD:(n(yA(t)),()=>{n(vA(t))}),[n,r,t]),null}function zte(e){var{legendPayload:t}=e,n=Ve(),r=re(je);return v.useEffect(()=>r!=="centric"&&r!=="radial"?PD:(n(yA(t)),()=>{n(vA(t))}),[n,r,t]),null}var Yp,Bte=()=>{var[e]=v.useState(()=>cc("uid-"));return e},Wte=(Yp=U_["useId".toString()])!==null&&Yp!==void 0?Yp:Bte;function qte(e,t){var n=Wte();return t||(e?"".concat(e,"-").concat(n):n)}var Hte=v.createContext(void 0),OD=e=>{var{id:t,type:n,children:r}=e,i=qte("recharts-".concat(n),t);return v.createElement(Hte.Provider,{value:i},r(i))},Kte={cartesianItems:[],polarItems:[]},AD=Un({name:"graphicalItems",initialState:Kte,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=ai(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=ai(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=ai(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:Vte,replaceCartesianGraphicalItem:Gte,removeCartesianGraphicalItem:Yte,addPolarGraphicalItem:Jte,removePolarGraphicalItem:Xte}=AD.actions,Qte=AD.reducer;function Zte(e){var t=Ve(),n=v.useRef(null);return v.useEffect(()=>{n.current===null?t(Vte(e)):n.current!==e&&t(Gte({prev:n.current,next:e})),n.current=e},[t,e]),v.useEffect(()=>()=>{n.current&&(t(Yte(n.current)),n.current=null)},[t]),null}function ene(e){var t=Ve();return v.useEffect(()=>(t(Jte(e)),()=>{t(Xte(e))}),[t,e]),null}function DC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function RC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DC(Object(n),!0).forEach(function(r){tne(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tne(e,t,n){return(t=nne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nne(e){var t=rne(e,"string");return typeof t=="symbol"?t:t+""}function rne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ine={xAxis:{},yAxis:{},zAxis:{}},TD=Un({name:"cartesianAxis",initialState:ine,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=RC(RC({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:ane,removeXAxis:one,addYAxis:sne,removeYAxis:lne,addZAxis:jue,removeZAxis:Cue,updateYAxisWidth:cne}=TD.actions,une=TD.reducer,dne=W([Ct],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),fne=W([dne,wi,ki],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),ID=()=>re(fne),hne=()=>re(OQ);function MC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function LC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MC(Object(n),!0).forEach(function(r){mne(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mne(e,t,n){return(t=pne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pne(e){var t=gne(e,"string");return typeof t=="symbol"?t:t+""}function gne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yne=e=>{var{point:t,childIndex:n,mainColor:r,activeDot:i,dataKey:a}=e;if(i===!1||t.x==null||t.y==null)return null;var o=LC(LC({index:n,dataKey:a,cx:t.x,cy:t.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Ae(i,!1)),f0(i)),s;return v.isValidElement(i)?s=v.cloneElement(i,o):typeof i=="function"?s=i(o):s=v.createElement(Vb,o),v.createElement(jt,{className:"recharts-active-dot"},s)};function vne(e){var{points:t,mainColor:n,activeDot:r,itemDataKey:i}=e,a=re(to),o=hne();if(t==null||o==null)return null;var s=t.find(l=>o.includes(l.payload));return it(s)?null:yne({point:s,childIndex:Number(a),mainColor:n,dataKey:i,activeDot:r})}function $C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$C(Object(n),!0).forEach(function(r){xne(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$C(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xne(e,t,n){return(t=bne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bne(e){var t=wne(e,"string");return typeof t=="symbol"?t:t+""}function wne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DD=(e,t)=>Ws(e,"radiusAxis",t),kne=W([DD],e=>{if(e!=null)return{scale:e}}),Sne=W([Wc,DD],(e,t)=>{if(!(e==null||t==null))return Tf(Tf({},e),{},{scale:t})}),jne=(e,t,n,r)=>qs(e,"radiusAxis",t,r),RD=(e,t,n)=>Rs(e,n),MD=(e,t,n)=>Ws(e,"angleAxis",n),Cne=W([RD,MD],(e,t)=>{if(!(e==null||t==null))return Tf(Tf({},e),{},{scale:t})}),_ne=(e,t,n,r)=>qs(e,"angleAxis",n,r),Ene=W([RD,MD,Ms],(e,t,n)=>{if(!(n==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:n.cx,cy:n.cy}}),Nne=(e,t,n,r,i)=>i,Pne=W([je,Sne,jne,Cne,_ne],(e,t,n,r,i)=>ua(e,"radiusAxis")?fc(t,n,!1):fc(r,i,!1)),One=W([uD,Nne],(e,t)=>{if(e!=null){var n=e.find(r=>r.type==="radar"&&t===r.id);return n==null?void 0:n.dataKey}}),Ane=W([kne,Ene,db,One,Pne],(e,t,n,r,i)=>{var{chartData:a,dataStartIndex:o,dataEndIndex:s}=n;if(!(e==null||t==null||a==null||i==null||r==null)){var l=a.slice(o,s+1);return Une({radiusAxis:e,angleAxis:t,displayedData:l,dataKey:r,bandSize:i})}}),Tne=["id"];function Ine(e,t){if(e==null)return{};var n,r,i=Dne(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Dne(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function FC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FC(Object(n),!0).forEach(function(r){Qb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qb(e,t,n){return(t=Rne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rne(e){var t=Mne(e,"string");return typeof t=="symbol"?t:t+""}function Mne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xs(){return xs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xs.apply(null,arguments)}function Zb(e,t){return e&&e!=="none"?e:t}var Lne=e=>{var{dataKey:t,name:n,stroke:r,fill:i,legendType:a,hide:o}=e;return[{inactive:o,dataKey:t,type:a,color:Zb(r,i),value:qh(n,t),payload:e}]};function $ne(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:a,hide:o,tooltipType:s}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,nameKey:void 0,dataKey:t,name:qh(a,t),hide:o,type:s,color:Zb(n,i),unit:""}}}function Fne(e,t){var n;return v.isValidElement(e)?n=v.cloneElement(e,t):typeof e=="function"?n=e(t):n=v.createElement(Vb,xs({},t,{className:Se("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),n}function Une(e){var{radiusAxis:t,angleAxis:n,displayedData:r,dataKey:i,bandSize:a}=e,{cx:o,cy:s}=n,l=!1,c=[],d=n.type!=="number"?a??0:0;r.forEach((h,m)=>{var p=vt(h,n.dataKey,m),g=vt(h,i),y=n.scale(p)+d,x=Array.isArray(g)?iD(g):g,b=it(x)?void 0:t.scale(x);Array.isArray(g)&&g.length>=2&&(l=!0),c.push(At(At({},De(o,s,b,y)),{},{name:p,value:g,cx:o,cy:s,radius:b,angle:y,payload:h}))});var f=[];return l&&c.forEach(h=>{if(Array.isArray(h.value)){var m=h.value[0],p=it(m)?void 0:t.scale(m);f.push(At(At({},h),{},{radius:p},De(o,s,p,h.angle)))}else f.push(h)}),{points:c,isRange:l,baseLinePoints:f}}function zne(e){var{points:t,props:n}=e,{dot:r,dataKey:i}=n;if(!r)return null;var a=Ine(n,Tne),o=Zt(a),s=Ae(r,!0),l=t.map((c,d)=>{var f=At(At(At({key:"dot-".concat(d),r:3},o),s),{},{dataKey:i,cx:c.x,cy:c.y,index:d,payload:c});return Fne(r,f)});return v.createElement(jt,{className:"recharts-radar-dots"},l)}function Bne(e){var{showLabels:t,points:n,children:r}=e,i=n.map(a=>{var o={x:a.x,y:a.y,width:0,height:0};return At(At({},o),{},{value:a.value,payload:a.payload,parentViewBox:void 0,viewBox:o,fill:void 0})});return v.createElement(oD,{value:t?i:null},r)}function Wne(e){var{points:t,baseLinePoints:n,props:r}=e;if(t==null)return null;var{shape:i,isRange:a,connectNulls:o}=r,s=d=>{var{onMouseEnter:f}=r;f&&f(r,d)},l=d=>{var{onMouseLeave:f}=r;f&&f(r,d)},c;return v.isValidElement(i)?c=v.cloneElement(i,At(At({},r),{},{points:t})):typeof i=="function"?c=i(At(At({},r),{},{points:t})):c=v.createElement(cD,xs({},Ae(r,!0),{onMouseEnter:s,onMouseLeave:l,points:t,baseLinePoints:a?n:null,connectNulls:o})),v.createElement(jt,{className:"recharts-radar-polygon"},c,v.createElement(zne,{props:r,points:t}))}var UC=(e,t,n)=>(r,i)=>{var a=e&&e[Math.floor(i*t)];return a?At(At({},r),{},{x:pt(a.x,r.x,n),y:pt(a.y,r.y,n)}):At(At({},r),{},{x:pt(r.cx,r.x,n),y:pt(r.cy,r.y,n)})};function qne(e){var{props:t,previousPointsRef:n,previousBaseLinePointsRef:r}=e,{points:i,baseLinePoints:a,isAnimationActive:o,animationBegin:s,animationDuration:l,animationEasing:c,onAnimationEnd:d,onAnimationStart:f}=t,h=n.current,m=r.current,p=h&&h.length/i.length,g=m&&m.length/a.length,y=Xh(t,"recharts-radar-"),[x,b]=v.useState(!1),w=!x,j=v.useCallback(()=>{typeof d=="function"&&d(),b(!1)},[d]),S=v.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return v.createElement(Bne,{showLabels:w,points:i},v.createElement(Jh,{animationId:y,begin:s,duration:l,isActive:o,easing:c,key:"radar-".concat(y),onAnimationEnd:j,onAnimationStart:S},k=>{var _=k===1?i:i.map(UC(h,p,k)),N=k===1?a:a==null?void 0:a.map(UC(m,g,k));return k>0&&(n.current=_,r.current=N),v.createElement(Wne,{points:_,baseLinePoints:N,props:t})}),v.createElement(lD,{label:t.label}),t.children)}function Hne(e){var t=v.useRef(void 0),n=v.useRef(void 0);return v.createElement(qne,{props:e,previousPointsRef:t,previousBaseLinePointsRef:n})}var Kne={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!lo.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class Vne extends v.PureComponent{render(){var{hide:t,className:n,points:r}=this.props;if(t||r==null)return null;var i=Se("recharts-radar",n);return v.createElement(v.Fragment,null,v.createElement(jt,{className:i},v.createElement(Hne,this.props)),v.createElement(vne,{points:r,mainColor:Zb(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function Gne(e){var t=vn(),n=re(r=>Ane(r,e.radiusAxisId,e.angleAxisId,t,e.id));return v.createElement(Vne,xs({},e,{points:n==null?void 0:n.points,baseLinePoints:n==null?void 0:n.baseLinePoints,isRange:n==null?void 0:n.isRange}))}class ew extends v.PureComponent{render(){return v.createElement(OD,{id:this.props.id,type:"radar"},t=>v.createElement(v.Fragment,null,v.createElement(ene,{type:"radar",id:t,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),v.createElement(zte,{legendPayload:Lne(this.props)}),v.createElement(ND,{fn:$ne,args:this.props}),v.createElement(Gne,xs({},this.props,{id:t}))))}}Qb(ew,"displayName","Radar");Qb(ew,"defaultProps",Kne);var Yne=!0,Jp="Invariant failed";function Jne(e,t){if(!e){if(Yne)throw new Error(Jp);var n=typeof t=="function"?t():t,r=n?"".concat(Jp,": ").concat(n):Jp;throw new Error(r)}}var Xne=["x","y"];function mv(){return mv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mv.apply(null,arguments)}function zC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zC(Object(n),!0).forEach(function(r){Qne(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qne(e,t,n){return(t=Zne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zne(e){var t=ere(e,"string");return typeof t=="symbol"?t:t+""}function ere(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tre(e,t){if(e==null)return{};var n,r,i=nre(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function nre(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function rre(e,t){var{x:n,y:r}=e,i=tre(e,Xne),a="".concat(n),o=parseInt(a,10),s="".concat(r),l=parseInt(s,10),c="".concat(t.height||i.height),d=parseInt(c,10),f="".concat(t.width||i.width),h=parseInt(f,10);return fl(fl(fl(fl(fl({},t),i),o?{x:o}:{}),l?{y:l}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function tw(e){return v.createElement(Fte,mv({shapeType:"rectangle",propTransformer:rre,activeClassName:"recharts-active-bar"},e))}var ire=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(ue(t))return t;var a=ue(r)||it(r);return a?t(r,i):(a||Jne(!1),n)}},are={},LD=Un({name:"errorBars",initialState:are,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}});LD.actions;var ore=LD.reducer,sre=["children"];function lre(e,t){if(e==null)return{};var n,r,i=cre(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function cre(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var ure={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},dre=v.createContext(ure);function fre(e){var{children:t}=e,n=lre(e,sre);return v.createElement(dre.Provider,{value:n},t)}function $D(e,t){var n,r,i=re(c=>ji(c,e)),a=re(c=>Ci(c,t)),o=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Sn.allowDataOverflow,s=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:jn.allowDataOverflow,l=o||s;return{needClip:l,needClipX:o,needClipY:s}}function hre(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=ID(),{needClipX:a,needClipY:o,needClip:s}=$D(t,n);if(!s)return null;var{x:l,y:c,width:d,height:f}=i;return v.createElement("clipPath",{id:"clipPath-".concat(r)},v.createElement("rect",{x:a?l:l-d/2,y:o?c:c-f/2,width:a?d:d*2,height:o?f:f*2}))}var mre=["onMouseEnter","onMouseLeave","onClick"],pre=["value","background","tooltipPosition"],gre=["id"],yre=["onMouseEnter","onClick","onMouseLeave"];function ra(){return ra=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ra.apply(null,arguments)}function BC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BC(Object(n),!0).forEach(function(r){vre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vre(e,t,n){return(t=xre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xre(e){var t=bre(e,"string");return typeof t=="symbol"?t:t+""}function bre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function If(e,t){if(e==null)return{};var n,r,i=wre(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function wre(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var kre=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:r,value:qh(n,t),payload:e}]};function Sre(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:a,hide:o,unit:s}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:qh(a,t),hide:o,type:e.tooltipType,color:e.fill,unit:s}}}function jre(e){var t=re(to),{data:n,dataKey:r,background:i,allOtherBarProps:a}=e,{onMouseEnter:o,onMouseLeave:s,onClick:l}=a,c=If(a,mre),d=CD(o,r),f=_D(s),h=ED(l,r);if(!i||n==null)return null;var m=Ae(i,!1);return v.createElement(v.Fragment,null,n.map((p,g)=>{var{value:y,background:x,tooltipPosition:b}=p,w=If(p,pre);if(!x)return null;var j=d(p,g),S=f(p,g),k=h(p,g),_=Vt(Vt(Vt(Vt(Vt({option:i,isActive:String(g)===t},w),{},{fill:"#eee"},x),m),As(c,p,g)),{},{onMouseEnter:j,onMouseLeave:S,onClick:k,dataKey:r,index:g,className:"recharts-bar-background-rectangle"});return v.createElement(tw,ra({key:"background-bar-".concat(_.index)},_))}))}function Cre(e){var{showLabels:t,children:n,rects:r}=e,i=r==null?void 0:r.map(a=>{var o={x:a.x,y:a.y,width:a.width,height:a.height};return Vt(Vt({},o),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:o,fill:a.fill})});return v.createElement(oD,{value:t?i:void 0},n)}function _re(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:a,dataKey:o}=e,s=re(to),l=re(NI),c=n&&String(a)===s&&(l==null||o===l),d=c?n:t;return v.createElement(tw,ra({},r,i,{isActive:c,option:d,index:a,dataKey:o}))}function Ere(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:a}=e;return v.createElement(tw,ra({},n,r,{isActive:!1,option:t,index:i,dataKey:a}))}function Nre(e){var{data:t,props:n}=e,r=Zt(n),i=If(r,gre),{shape:a,dataKey:o,activeBar:s}=n,{onMouseEnter:l,onClick:c,onMouseLeave:d}=n,f=If(n,yre),h=CD(l,o),m=_D(d),p=ED(c,o);return t?v.createElement(v.Fragment,null,t.map((g,y)=>v.createElement(jt,ra({className:"recharts-bar-rectangle"},As(f,g,y),{onMouseEnter:h(g,y),onMouseLeave:m(g,y),onClick:p(g,y),key:"rectangle-".concat(g==null?void 0:g.x,"-").concat(g==null?void 0:g.y,"-").concat(g==null?void 0:g.value,"-").concat(y)}),s?v.createElement(_re,{shape:a,activeBar:s,baseProps:i,entry:g,index:y,dataKey:o}):v.createElement(Ere,{shape:a,baseProps:i,entry:g,index:y,dataKey:o})))):null}function Pre(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:a,animationBegin:o,animationDuration:s,animationEasing:l,onAnimationEnd:c,onAnimationStart:d}=t,f=n.current,h=Xh(t,"recharts-bar-"),[m,p]=v.useState(!1),g=!m,y=v.useCallback(()=>{typeof c=="function"&&c(),p(!1)},[c]),x=v.useCallback(()=>{typeof d=="function"&&d(),p(!0)},[d]);return v.createElement(Cre,{showLabels:g,rects:r},v.createElement(Jh,{animationId:h,begin:o,duration:s,isActive:a,easing:l,onAnimationEnd:y,onAnimationStart:x,key:h},b=>{var w=b===1?r:r==null?void 0:r.map((j,S)=>{var k=f&&f[S];if(k)return Vt(Vt({},j),{},{x:pt(k.x,j.x,b),y:pt(k.y,j.y,b),width:pt(k.width,j.width,b),height:pt(k.height,j.height,b)});if(i==="horizontal"){var _=pt(0,j.height,b);return Vt(Vt({},j),{},{y:j.y+j.height-_,height:_})}var N=pt(0,j.width,b);return Vt(Vt({},j),{},{width:N})});return b>0&&(n.current=w??null),w==null?null:v.createElement(jt,null,v.createElement(Nre,{props:t,data:w}))}),v.createElement(lD,{label:t.label}),t.children)}function Ore(e){var t=v.useRef(null);return v.createElement(Pre,{previousRectanglesRef:t,props:e})}var FD=0,Are=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:vt(e,t)}};class Tre extends v.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:o,needClip:s,background:l,id:c}=this.props;if(t||n==null)return null;var d=Se("recharts-bar",i),f=c;return v.createElement(jt,{className:d,id:c},s&&v.createElement("defs",null,v.createElement(hre,{clipPathId:f,xAxisId:a,yAxisId:o})),v.createElement(jt,{className:"recharts-bar-rectangles",clipPath:s?"url(#clipPath-".concat(f,")"):void 0},v.createElement(jre,{data:n,dataKey:r,background:l,allOtherBarProps:this.props}),v.createElement(Ore,this.props)))}}var Ire={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!lo.isSsr,legendType:"rect",minPointSize:FD,xAxisId:0,yAxisId:0};function Dre(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:o,animationBegin:s,animationDuration:l,animationEasing:c,isAnimationActive:d}=e,{needClip:f}=$D(t,n),h=U0(),m=vn(),p=eq(e.children,WI),g=re(b=>lie(b,t,n,m,e.id,p));if(h!=="vertical"&&h!=="horizontal")return null;var y,x=g==null?void 0:g[0];return x==null||x.height==null||x.width==null?y=0:y=h==="vertical"?x.height/2:x.width/2,v.createElement(fre,{xAxisId:t,yAxisId:n,data:g,dataPointFormatter:Are,errorBarOffset:y},v.createElement(Tre,ra({},e,{layout:h,needClip:f,data:g,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:o,animationBegin:s,animationDuration:l,animationEasing:c,isAnimationActive:d})))}function Rre(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:o,yAxis:s,xAxisTicks:l,yAxisTicks:c,stackedData:d,displayedData:f,offset:h,cells:m,parentViewBox:p}=e,g=t==="horizontal"?s:o,y=d?g.scale.domain():null,x=aV({numericAxis:g});return f.map((b,w)=>{var j,S,k,_,N,P;d?j=ZK(d[w],y):(j=vt(b,n),Array.isArray(j)||(j=[x,j]));var E=ire(r,FD)(j[1],w);if(t==="horizontal"){var T,[L,$]=[s.scale(j[0]),s.scale(j[1])];S=DS({axis:o,ticks:l,bandSize:a,offset:i.offset,entry:b,index:w}),k=(T=$??L)!==null&&T!==void 0?T:void 0,_=i.size;var B=L-$;if(N=Dn(B)?0:B,P={x:S,y:h.top,width:_,height:h.height},Math.abs(E)>0&&Math.abs(N)<Math.abs(E)){var D=dn(N||E)*(Math.abs(E)-Math.abs(N));k-=D,N+=D}}else{var[z,G]=[o.scale(j[0]),o.scale(j[1])];if(S=z,k=DS({axis:s,ticks:c,bandSize:a,offset:i.offset,entry:b,index:w}),_=G-z,N=i.size,P={x:h.left,y:k,width:h.width,height:N},Math.abs(E)>0&&Math.abs(_)<Math.abs(E)){var I=dn(_||E)*(Math.abs(E)-Math.abs(_));_+=I}}if(S==null||k==null||_==null||N==null)return null;var R=Vt(Vt({},b),{},{x:S,y:k,width:_,height:N,value:d?j:j[1],payload:b,background:P,tooltipPosition:{x:S+_/2,y:k+N/2},parentViewBox:p},m&&m[w]&&m[w].props);return R}).filter(Boolean)}function Mre(e){var t=xn(e,Ire),n=vn();return v.createElement(OD,{id:t.id,type:"bar"},r=>v.createElement(v.Fragment,null,v.createElement(Ute,{legendPayload:kre(t)}),v.createElement(ND,{fn:Sre,args:t}),v.createElement(Zte,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:iV(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),v.createElement(Dre,ra({},t,{id:r}))))}var ud=v.memo(Mre);ud.displayName="Bar";function WC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WC(Object(n),!0).forEach(function(r){Lre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lre(e,t,n){return(t=$re(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $re(e){var t=Fre(e,"string");return typeof t=="symbol"?t:t+""}function Fre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ure=(e,t)=>t,zre=(e,t,n)=>n,Bre=(e,t,n,r)=>r,Wre=(e,t,n,r,i)=>i,Xc=W([kb,Wre],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),qre=W([Xc],e=>e==null?void 0:e.maxBarSize),Hre=(e,t,n,r,i,a)=>a,qC=(e,t,n)=>{var r=n??e;if(!it(r))return br(r,t,0)},Kre=W([je,kb,Ure,zre,Bre],(e,t,n,r,i)=>t.filter(a=>e==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),Vre=(e,t,n,r)=>{var i=je(e);return i==="horizontal"?sv(e,"yAxis",n,r):sv(e,"xAxis",t,r)},Gre=(e,t,n)=>{var r=je(e);return r==="horizontal"?Vj(e,"xAxis",t):Vj(e,"yAxis",n)},Yre=(e,t,n)=>{var r={},i=e.filter(sm),a=e.filter(c=>c.stackId==null),o=i.reduce((c,d)=>(c[d.stackId]||(c[d.stackId]=[]),c[d.stackId].push(d),c),r),s=Object.entries(o).map(c=>{var[d,f]=c,h=f.map(p=>p.dataKey),m=qC(t,n,f[0].barSize);return{stackId:d,dataKeys:h,barSize:m}}),l=a.map(c=>{var d=[c.dataKey].filter(h=>h!=null),f=qC(t,n,c.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...s,...l]},Jre=W([Kre,FJ,Gre],Yre),Xre=(e,t,n,r,i)=>{var a,o,s=Xc(e,t,n,r,i);if(s!=null){var l=je(e),c=_T(e),{maxBarSize:d}=s,f=it(d)?c:d,h,m;return l==="horizontal"?(h=vs(e,"xAxis",t,r),m=ys(e,"xAxis",t,r)):(h=vs(e,"yAxis",n,r),m=ys(e,"yAxis",n,r)),(a=(o=fc(h,m,!0))!==null&&o!==void 0?o:f)!==null&&a!==void 0?a:0}},UD=(e,t,n,r)=>{var i=je(e),a,o;return i==="horizontal"?(a=vs(e,"xAxis",t,r),o=ys(e,"xAxis",t,r)):(a=vs(e,"yAxis",n,r),o=ys(e,"yAxis",n,r)),fc(a,o)};function Qre(e,t,n,r,i){var a=r.length;if(!(a<1)){var o=br(e,n,0,!0),s,l=[];if(Mn(r[0].barSize)){var c=!1,d=n/a,f=r.reduce((x,b)=>x+(b.barSize||0),0);f+=(a-1)*o,f>=n&&(f-=(a-1)*o,o=0),f>=n&&d>0&&(c=!0,d*=.9,f=a*d);var h=(n-f)/2>>0,m={offset:h-o,size:0};s=r.reduce((x,b)=>{var w,j={stackId:b.stackId,dataKeys:b.dataKeys,position:{offset:m.offset+m.size+o,size:c?d:(w=b.barSize)!==null&&w!==void 0?w:0}},S=[...x,j];return m=S[S.length-1].position,S},l)}else{var p=br(t,n,0,!0);n-2*p-(a-1)*o<=0&&(o=0);var g=(n-2*p-(a-1)*o)/a;g>1&&(g>>=0);var y=Mn(i)?Math.min(g,i):g;s=r.reduce((x,b,w)=>[...x,{stackId:b.stackId,dataKeys:b.dataKeys,position:{offset:p+(g+o)*w+(g-y)/2,size:y}}],l)}return s}}var Zre=(e,t,n,r,i,a,o)=>{var s=it(o)?t:o,l=Qre(n,r,i!==a?i:a,e,s);return i!==a&&l!=null&&(l=l.map(c=>qu(qu({},c),{},{position:qu(qu({},c.position),{},{offset:c.position.offset-i/2})}))),l},eie=W([Jre,_T,$J,ET,Xre,UD,qre],Zre),tie=(e,t,n,r)=>vs(e,"xAxis",t,r),nie=(e,t,n,r)=>vs(e,"yAxis",n,r),rie=(e,t,n,r)=>ys(e,"xAxis",t,r),iie=(e,t,n,r)=>ys(e,"yAxis",n,r),aie=W([eie,Xc],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),oie=(e,t)=>{var n=xb(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:a}=i;if(a)return a.find(o=>o.key===n)}}}},sie=W([Vre,Xc],oie),lie=W([Ct,M0,tie,nie,rie,iie,aie,je,fb,UD,sie,Xc,Hre],(e,t,n,r,i,a,o,s,l,c,d,f,h)=>{var{chartData:m,dataStartIndex:p,dataEndIndex:g}=l;if(!(f==null||o==null||t==null||s!=="horizontal"&&s!=="vertical"||n==null||r==null||i==null||a==null||c==null)){var{data:y}=f,x;if(y!=null&&y.length>0?x=y:x=m==null?void 0:m.slice(p,g+1),x!=null)return Rre({layout:s,barSettings:f,pos:o,parentViewBox:t,bandSize:c,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:d,displayedData:x,offset:e,cells:h})}}),zD=e=>{var{chartData:t}=e,n=Ve(),r=vn();return v.useEffect(()=>r?()=>{}:(n(nC(t)),()=>{n(nC(void 0))}),[t,n,r]),null},HC={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},BD=Un({name:"brush",initialState:HC,reducers:{setBrushSettings(e,t){return t.payload==null?HC:t.payload}}});BD.actions;var cie=BD.reducer;function uie(e,t,n){return(t=die(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function die(e){var t=fie(e,"string");return typeof t=="symbol"?t:t+""}function fie(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class nw{static create(t){return new nw(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}uie(nw,"EPS",1e-4);function hie(e){return(e%180+180)%180}var mie=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=hie(i),o=a*Math.PI/180,s=Math.atan(r/n),l=o>s&&o<Math.PI-s?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},pie={dots:[],areas:[],lines:[]},WD=Un({name:"referenceElements",initialState:pie,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=ai(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=ai(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=ai(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}});WD.actions;var gie=WD.reducer,yie=v.createContext(void 0),vie=e=>{var{children:t}=e,[n]=v.useState("".concat(cc("recharts"),"-clip")),r=ID();if(r==null)return null;var{x:i,y:a,width:o,height:s}=r;return v.createElement(yie.Provider,{value:n},v.createElement("defs",null,v.createElement("clipPath",{id:n},v.createElement("rect",{x:i,y:a,height:s,width:o}))),t)};function bs(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function qD(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)if(n===void 0||n(e[i])===!0)r.push(e[i]);else return;return r}function xie(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return mie(r,n)}function bie(e,t,n){var r=n==="width",{x:i,y:a,width:o,height:s}=e;return t===1?{start:r?i:a,end:r?i+o:a+s}:{start:r?i+o:a+s,end:r?i:a}}function Df(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-i)<=0}function wie(e,t){return qD(e,t+1)}function kie(e,t,n,r,i){for(var a=(r||[]).slice(),{start:o,end:s}=t,l=0,c=1,d=o,f=function(){var p=r==null?void 0:r[l];if(p===void 0)return{v:qD(r,c)};var g=l,y,x=()=>(y===void 0&&(y=n(p,g)),y),b=p.coordinate,w=l===0||Df(e,b,x,d,s);w||(l=0,d=o,c+=1),w&&(d=b+e*(x()/2+i),l+=c)},h;c<=a.length;)if(h=f(),h)return h.v;return[]}function KC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KC(Object(n),!0).forEach(function(r){Sie(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sie(e,t,n){return(t=jie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jie(e){var t=Cie(e,"string");return typeof t=="symbol"?t:t+""}function Cie(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _ie(e,t,n,r,i){for(var a=(r||[]).slice(),o=a.length,{start:s}=t,{end:l}=t,c=function(h){var m=a[h],p,g=()=>(p===void 0&&(p=n(m,h)),p);if(h===o-1){var y=e*(m.coordinate+e*g()/2-l);a[h]=m=Mt(Mt({},m),{},{tickCoord:y>0?m.coordinate-y*e:m.coordinate})}else a[h]=m=Mt(Mt({},m),{},{tickCoord:m.coordinate});var x=Df(e,m.tickCoord,g,s,l);x&&(l=m.tickCoord-e*(g()/2+i),a[h]=Mt(Mt({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)c(d);return a}function Eie(e,t,n,r,i,a){var o=(r||[]).slice(),s=o.length,{start:l,end:c}=t;if(a){var d=r[s-1],f=n(d,s-1),h=e*(d.coordinate+e*f/2-c);o[s-1]=d=Mt(Mt({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=Df(e,d.tickCoord,()=>f,l,c);m&&(c=d.tickCoord-e*(f/2+i),o[s-1]=Mt(Mt({},d),{},{isShow:!0}))}for(var p=a?s-1:s,g=function(b){var w=o[b],j,S=()=>(j===void 0&&(j=n(w,b)),j);if(b===0){var k=e*(w.coordinate-e*S()/2-l);o[b]=w=Mt(Mt({},w),{},{tickCoord:k<0?w.coordinate-k*e:w.coordinate})}else o[b]=w=Mt(Mt({},w),{},{tickCoord:w.coordinate});var _=Df(e,w.tickCoord,S,l,c);_&&(l=w.tickCoord+e*(S()/2+i),o[b]=Mt(Mt({},w),{},{isShow:!0}))},y=0;y<p;y++)g(y);return o}function rw(e,t,n){var{tick:r,ticks:i,viewBox:a,minTickGap:o,orientation:s,interval:l,tickFormatter:c,unit:d,angle:f}=e;if(!i||!i.length||!r)return[];if(ue(l)||lo.isSsr){var h;return(h=wie(i,ue(l)?l:0))!==null&&h!==void 0?h:[]}var m=[],p=s==="top"||s==="bottom"?"width":"height",g=d&&p==="width"?Ll(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},y=(w,j)=>{var S=typeof c=="function"?c(w.value,j):w.value;return p==="width"?xie(Ll(S,{fontSize:t,letterSpacing:n}),g,f):Ll(S,{fontSize:t,letterSpacing:n})[p]},x=i.length>=2?dn(i[1].coordinate-i[0].coordinate):1,b=bie(a,x,p);return l==="equidistantPreserveStart"?kie(x,b,y,i,o):(l==="preserveStart"||l==="preserveStartEnd"?m=Eie(x,b,y,i,o,l==="preserveStartEnd"):m=_ie(x,b,y,i,o),m.filter(w=>w.isShow))}var Nie=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=e,o=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var s=n?n.getBoundingClientRect().width:0,l=i+a,c=o+l+s+(n?r:0);return Math.round(c)}return 0},Pie=["axisLine","width","height","className","hide","ticks"],Oie=["viewBox"],Aie=["viewBox"];function pv(e,t){if(e==null)return{};var n,r,i=Tie(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Tie(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function no(){return no=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},no.apply(null,arguments)}function VC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VC(Object(n),!0).forEach(function(r){Iie(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Iie(e,t,n){return(t=Die(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Die(e){var t=Rie(e,"string");return typeof t=="symbol"?t:t+""}function Rie(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iw={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function Mie(e){var{x:t,y:n,width:r,height:i,orientation:a,mirror:o,axisLine:s,otherSvgProps:l}=e;if(!s)return null;var c=mt(mt(mt({},l),Ae(s,!1)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!o||a==="bottom"&&o);c=mt(mt({},c),{},{x1:t,y1:n+d*i,x2:t+r,y2:n+d*i})}else{var f=+(a==="left"&&!o||a==="right"&&o);c=mt(mt({},c),{},{x1:t+f*r,y1:n,x2:t+f*r,y2:n+i})}return v.createElement("line",no({},c,{className:Se("recharts-cartesian-axis-line",ss(s,"className"))}))}function Lie(e,t,n,r,i,a,o,s,l){var c,d,f,h,m,p,g=s?-1:1,y=e.tickSize||o,x=ue(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":c=d=e.coordinate,h=n+ +!s*i,f=h-g*y,p=f-g*l,m=x;break;case"left":f=h=e.coordinate,d=t+ +!s*r,c=d-g*y,m=c-g*l,p=x;break;case"right":f=h=e.coordinate,d=t+ +s*r,c=d+g*y,m=c+g*l,p=x;break;default:c=d=e.coordinate,h=n+ +s*i,f=h+g*y,p=f+g*l,m=x;break}return{line:{x1:c,y1:f,x2:d,y2:h},tick:{x:m,y:p}}}function $ie(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function Fie(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Uie(e){var{option:t,tickProps:n,value:r}=e,i,a=Se(n.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(t))i=v.cloneElement(t,mt(mt({},n),{},{className:a}));else if(typeof t=="function")i=t(mt(mt({},n),{},{className:a}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=Se(o,t==null?void 0:t.className)),i=v.createElement(Jc,no({},n,{className:o}),r)}return i}function zie(e){var{ticks:t=[],tick:n,tickLine:r,stroke:i,tickFormatter:a,unit:o,padding:s,tickTextProps:l,orientation:c,mirror:d,x:f,y:h,width:m,height:p,tickSize:g,tickMargin:y,fontSize:x,letterSpacing:b,getTicksConfig:w,events:j}=e,S=rw(mt(mt({},w),{},{ticks:t}),x,b),k=$ie(c,d),_=Fie(c,d),N=Zt(w),P=Ae(n,!1),E=mt(mt({},N),{},{fill:"none"},Ae(r,!1)),T=S.map((L,$)=>{var{line:B,tick:D}=Lie(L,f,h,m,p,c,g,d,y),z=mt(mt(mt(mt({textAnchor:k,verticalAnchor:_},N),{},{stroke:"none",fill:i},P),D),{},{index:$,payload:L,visibleTicksCount:S.length,tickFormatter:a,padding:s},l);return v.createElement(jt,no({className:"recharts-cartesian-axis-tick",key:"tick-".concat(L.value,"-").concat(L.coordinate,"-").concat(L.tickCoord)},As(j,L,$)),r&&v.createElement("line",no({},E,B,{className:Se("recharts-cartesian-axis-tick-line",ss(r,"className"))})),n&&v.createElement(Uie,{option:n,tickProps:z,value:"".concat(typeof a=="function"?a(L.value,$):L.value).concat(o||"")}))});return T.length>0?v.createElement("g",{className:"recharts-cartesian-axis-ticks"},T):null}var Bie=v.forwardRef((e,t)=>{var{axisLine:n,width:r,height:i,className:a,hide:o,ticks:s}=e,l=pv(e,Pie),[c,d]=v.useState(""),[f,h]=v.useState(""),m=v.useRef([]);v.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var g;return Nie({ticks:m.current,label:(g=e.labelRef)===null||g===void 0?void 0:g.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var p=v.useCallback(g=>{if(g){var y=g.getElementsByClassName("recharts-cartesian-axis-tick-value");m.current=Array.from(y);var x=y[0];if(x){var b=window.getComputedStyle(x),w=b.fontSize,j=b.letterSpacing;(w!==c||j!==f)&&(d(w),h(j))}}},[c,f]);return o||r!=null&&r<=0||i!=null&&i<=0?null:v.createElement(jt,{className:Se("recharts-cartesian-axis",a),ref:p},v.createElement(Mie,{x:e.x,y:e.y,width:r,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:Zt(e)}),v.createElement(zie,{ticks:s,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:c,letterSpacing:f,getTicksConfig:e,events:l}),v.createElement(eee,{x:e.x,y:e.y,width:e.width,height:e.height},v.createElement(lee,{label:e.label}),e.children))}),Wie=v.memo(Bie,(e,t)=>{var{viewBox:n}=e,r=pv(e,Oie),{viewBox:i}=t,a=pv(t,Aie);return bs(n,i)&&bs(r,a)}),aw=v.forwardRef((e,t)=>{var n=xn(e,iw);return v.createElement(Wie,no({},n,{ref:t}))});aw.displayName="CartesianAxis";var qie=["x1","y1","x2","y2","key"],Hie=["offset"],Kie=["xAxisId","yAxisId"],Vie=["xAxisId","yAxisId"];function GC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GC(Object(n),!0).forEach(function(r){Gie(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Gie(e,t,n){return(t=Yie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yie(e){var t=Jie(e,"string");return typeof t=="symbol"?t:t+""}function Jie(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function La(){return La=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},La.apply(null,arguments)}function Rf(e,t){if(e==null)return{};var n,r,i=Xie(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Xie(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Qie=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:o,ry:s}=e;return v.createElement("rect",{x:r,y:i,ry:s,width:a,height:o,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function HD(e,t){var n;if(v.isValidElement(e))n=v.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:a,y2:o,key:s}=t,l=Rf(t,qie),c=Zt(l),d=Rf(c,Hie);n=v.createElement("line",La({},d,{x1:r,y1:i,x2:a,y2:o,fill:"none",key:s}))}return n}function Zie(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var a=Rf(e,Kie),o=i.map((s,l)=>{var c=$t($t({},a),{},{x1:t,y1:s,x2:t+n,y2:s,key:"line-".concat(l),index:l});return HD(r,c)});return v.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function eae(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var a=Rf(e,Vie),o=i.map((s,l)=>{var c=$t($t({},a),{},{x1:s,y1:t,x2:s,y2:t+n,key:"line-".concat(l),index:l});return HD(r,c)});return v.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function tae(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:a,height:o,horizontalPoints:s,horizontal:l=!0}=e;if(!l||!t||!t.length)return null;var c=s.map(f=>Math.round(f+i-i)).sort((f,h)=>f-h);i!==c[0]&&c.unshift(0);var d=c.map((f,h)=>{var m=!c[h+1],p=m?i+o-f:c[h+1]-f;if(p<=0)return null;var g=h%t.length;return v.createElement("rect",{key:"react-".concat(h),y:f,x:r,height:p,width:a,stroke:"none",fill:t[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return v.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function nae(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:o,height:s,verticalPoints:l}=e;if(!t||!n||!n.length)return null;var c=l.map(f=>Math.round(f+i-i)).sort((f,h)=>f-h);i!==c[0]&&c.unshift(0);var d=c.map((f,h)=>{var m=!c[h+1],p=m?i+o-f:c[h+1]-f;if(p<=0)return null;var g=h%n.length;return v.createElement("rect",{key:"react-".concat(h),x:f,y:a,width:p,height:s,stroke:"none",fill:n[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return v.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var rae=(e,t)=>{var{xAxis:n,width:r,height:i,offset:a}=e;return fA(rw($t($t($t({},iw),n),{},{ticks:hA(n,!0),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,t)},iae=(e,t)=>{var{yAxis:n,width:r,height:i,offset:a}=e;return fA(rw($t($t($t({},iw),n),{},{ticks:hA(n,!0),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,t)},aae={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function gv(e){var t=$0(),n=F0(),r=pA(),i=$t($t({},xn(e,aae)),{},{x:ue(e.x)?e.x:r.left,y:ue(e.y)?e.y:r.top,width:ue(e.width)?e.width:r.width,height:ue(e.height)?e.height:r.height}),{xAxisId:a,yAxisId:o,x:s,y:l,width:c,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:m}=i,p=vn(),g=re(P=>Gj(P,"xAxis",a,p)),y=re(P=>Gj(P,"yAxis",o,p));if(!ue(c)||c<=0||!ue(d)||d<=0||!ue(s)||s!==+s||!ue(l)||l!==+l)return null;var x=i.verticalCoordinatesGenerator||rae,b=i.horizontalCoordinatesGenerator||iae,{horizontalPoints:w,verticalPoints:j}=i;if((!w||!w.length)&&typeof b=="function"){var S=h&&h.length,k=b({yAxis:y?$t($t({},y),{},{ticks:S?h:y.ticks}):void 0,width:t,height:n,offset:r},S?!0:f);Ml(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(w=k)}if((!j||!j.length)&&typeof x=="function"){var _=m&&m.length,N=x({xAxis:g?$t($t({},g),{},{ticks:_?m:g.ticks}):void 0,width:t,height:n,offset:r},_?!0:f);Ml(Array.isArray(N),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(j=N)}return v.createElement("g",{className:"recharts-cartesian-grid"},v.createElement(Qie,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),v.createElement(tae,La({},i,{horizontalPoints:w})),v.createElement(nae,La({},i,{verticalPoints:j})),v.createElement(Zie,La({},i,{offset:r,horizontalPoints:w,xAxis:g,yAxis:y})),v.createElement(eae,La({},i,{offset:r,verticalPoints:j,xAxis:g,yAxis:y})))}gv.displayName="CartesianGrid";var oae=["dangerouslySetInnerHTML","ticks"],sae=["id"],lae=["domain"],cae=["domain"];function yv(){return yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yv.apply(null,arguments)}function Mf(e,t){if(e==null)return{};var n,r,i=uae(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function uae(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function dae(e){var t=Ve();return v.useEffect(()=>(t(ane(e)),()=>{t(one(e))}),[e,t]),null}var fae=e=>{var{xAxisId:t,className:n}=e,r=re(M0),i=vn(),a="xAxis",o=re(m=>Us(m,a,t,i)),s=re(m=>lI(m,a,t,i)),l=re(m=>iI(m,t)),c=re(m=>TX(m,t)),d=re(m=>RT(m,t));if(l==null||c==null||d==null)return null;var f=Mf(e,oae),h=Mf(d,sae);return v.createElement(aw,yv({},f,h,{scale:o,x:c.x,y:c.y,width:l.width,height:l.height,className:Se("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:s}))},hae={allowDataOverflow:Sn.allowDataOverflow,allowDecimals:Sn.allowDecimals,allowDuplicatedCategory:Sn.allowDuplicatedCategory,height:Sn.height,hide:!1,mirror:Sn.mirror,orientation:Sn.orientation,padding:Sn.padding,reversed:Sn.reversed,scale:Sn.scale,tickCount:Sn.tickCount,type:Sn.type,xAxisId:0},mae=e=>{var t,n,r,i,a,o=xn(e,hae);return v.createElement(v.Fragment,null,v.createElement(dae,{interval:(t=o.interval)!==null&&t!==void 0?t:"preserveEnd",id:o.xAxisId,scale:o.scale,type:o.type,padding:o.padding,allowDataOverflow:o.allowDataOverflow,domain:o.domain,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,includeHidden:(n=o.includeHidden)!==null&&n!==void 0?n:!1,reversed:o.reversed,ticks:o.ticks,height:o.height,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(r=o.angle)!==null&&r!==void 0?r:0,minTickGap:(i=o.minTickGap)!==null&&i!==void 0?i:5,tick:(a=o.tick)!==null&&a!==void 0?a:!0,tickFormatter:o.tickFormatter}),v.createElement(fae,o))},pae=(e,t)=>{var{domain:n}=e,r=Mf(e,lae),{domain:i}=t,a=Mf(t,cae);return bs(r,a)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:bs({domain:n},{domain:i}):!1},vv=v.memo(mae,pae);vv.displayName="XAxis";var gae=["dangerouslySetInnerHTML","ticks"],yae=["id"],vae=["domain"],xae=["domain"];function xv(){return xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xv.apply(null,arguments)}function Lf(e,t){if(e==null)return{};var n,r,i=bae(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function bae(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function wae(e){var t=Ve();return v.useEffect(()=>(t(sne(e)),()=>{t(lne(e))}),[e,t]),null}var kae=e=>{var{yAxisId:t,className:n,width:r,label:i}=e,a=v.useRef(null),o=v.useRef(null),s=re(M0),l=vn(),c=Ve(),d="yAxis",f=re(b=>Us(b,d,t,l)),h=re(b=>aI(b,t)),m=re(b=>DX(b,t)),p=re(b=>lI(b,d,t,l)),g=re(b=>MT(b,t));if(v.useLayoutEffect(()=>{if(!(r!=="auto"||!h||Kb(i)||v.isValidElement(i)||g==null)){var b=a.current;if(b){var w=b.getCalculatedWidth();Math.round(h.width)!==Math.round(w)&&c(cne({id:t,width:w}))}}},[p,h,c,i,t,r,g]),h==null||m==null||g==null)return null;var y=Lf(e,gae),x=Lf(g,yae);return v.createElement(aw,xv({},y,x,{ref:a,labelRef:o,scale:f,x:m.x,y:m.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:h.width,height:h.height,className:Se("recharts-".concat(d," ").concat(d),n),viewBox:s,ticks:p}))},Sae={allowDataOverflow:jn.allowDataOverflow,allowDecimals:jn.allowDecimals,allowDuplicatedCategory:jn.allowDuplicatedCategory,hide:!1,mirror:jn.mirror,orientation:jn.orientation,padding:jn.padding,reversed:jn.reversed,scale:jn.scale,tickCount:jn.tickCount,type:jn.type,width:jn.width,yAxisId:0},jae=e=>{var t,n,r,i,a,o=xn(e,Sae);return v.createElement(v.Fragment,null,v.createElement(wae,{interval:(t=o.interval)!==null&&t!==void 0?t:"preserveEnd",id:o.yAxisId,scale:o.scale,type:o.type,domain:o.domain,allowDataOverflow:o.allowDataOverflow,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,padding:o.padding,includeHidden:(n=o.includeHidden)!==null&&n!==void 0?n:!1,reversed:o.reversed,ticks:o.ticks,width:o.width,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(r=o.angle)!==null&&r!==void 0?r:0,minTickGap:(i=o.minTickGap)!==null&&i!==void 0?i:5,tick:(a=o.tick)!==null&&a!==void 0?a:!0,tickFormatter:o.tickFormatter}),v.createElement(kae,o))},Cae=(e,t)=>{var{domain:n}=e,r=Lf(e,vae),{domain:i}=t,a=Lf(t,xae);return bs(r,a)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:bs({domain:n},{domain:i}):!1},bv=v.memo(jae,Cae);bv.displayName="YAxis";var _ae={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qc=v;function Eae(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nae=typeof Object.is=="function"?Object.is:Eae,Pae=Qc.useSyncExternalStore,Oae=Qc.useRef,Aae=Qc.useEffect,Tae=Qc.useMemo,Iae=Qc.useDebugValue;_ae.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var a=Oae(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=Tae(function(){function l(m){if(!c){if(c=!0,d=m,m=r(m),i!==void 0&&o.hasValue){var p=o.value;if(i(p,m))return f=p}return f=m}if(p=f,Nae(d,m))return p;var g=r(m);return i!==void 0&&i(p,g)?(d=m,p):(d=m,f=g)}var c=!1,d,f,h=n===void 0?null:n;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,n,r,i]);var s=Pae(e,a[0],a[1]);return Aae(function(){o.hasValue=!0,o.value=s},[s]),Iae(s),s};function Dae(e){e()}function Rae(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Dae(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var YC={notify(){},get:()=>[]};function Mae(e,t){let n,r=YC,i=0,a=!1;function o(g){d();const y=r.subscribe(g);let x=!1;return()=>{x||(x=!0,y(),f())}}function s(){r.notify()}function l(){p.onStateChange&&p.onStateChange()}function c(){return a}function d(){i++,n||(n=t?t.addNestedSub(l):e.subscribe(l),r=Rae())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=YC)}function h(){a||(a=!0,d())}function m(){a&&(a=!1,f())}const p={addNestedSub:o,notifyNestedSubs:s,handleChangeWrapper:l,isSubscribed:c,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>r};return p}var Lae=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$ae=Lae(),Fae=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Uae=Fae(),zae=()=>$ae||Uae?v.useLayoutEffect:v.useEffect,Bae=zae(),Xp=Symbol.for("react-redux-context"),Qp=typeof globalThis<"u"?globalThis:{};function Wae(){if(!v.createContext)return{};const e=Qp[Xp]??(Qp[Xp]=new Map);let t=e.get(v.createContext);return t||(t=v.createContext(null),e.set(v.createContext,t)),t}var qae=Wae();function Hae(e){const{children:t,context:n,serverState:r,store:i}=e,a=v.useMemo(()=>{const l=Mae(i);return{store:i,subscription:l,getServerState:r?()=>r:void 0}},[i,r]),o=v.useMemo(()=>i.getState(),[i]);Bae(()=>{const{subscription:l}=a;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[a,o]);const s=n||qae;return v.createElement(s.Provider,{value:a},t)}var Kae=Hae,Vae=(e,t)=>t,ow=W([Vae,je,Ms,bt,jI,_i,LQ,Ct],BQ),sw=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},KD=nr("mouseClick"),VD=Mc();VD.startListening({actionCreator:KD,effect:(e,t)=>{var n=e.payload,r=ow(t.getState(),sw(n));(r==null?void 0:r.activeIndex)!=null&&t.dispatch(HX({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var wv=nr("mouseMove"),GD=Mc();GD.startListening({actionCreator:wv,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Lb(r,r.tooltip.settings.shared),a=ow(r,sw(n));i==="axis"&&((a==null?void 0:a.activeIndex)!=null?t.dispatch(yI({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(gI()))}});var JC={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},YD=Un({name:"rootProps",initialState:JC,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:JC.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Gae=YD.reducer,{updateOptions:Yae}=YD.actions,JD=Un({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Jae}=JD.actions,Xae=JD.reducer,XD=nr("keyDown"),QD=nr("focus"),lw=Mc();lw.startListening({actionCreator:XD,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var o=Number($b(i,Bs(n))),s=_i(n);if(a==="Enter"){var l=Nf(n,"axis","hover",String(i.index));t.dispatch(cv({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:l}));return}var c=MX(n),d=c==="left-to-right"?1:-1,f=a==="ArrowRight"?1:-1,h=o+f*d;if(!(s==null||h>=s.length||h<0)){var m=Nf(n,"axis","hover",String(h));t.dispatch(cv({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});lw.startListening({actionCreator:QD,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",o=Nf(n,"axis","hover",String(a));t.dispatch(cv({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:o}))}}}});var Hn=nr("externalEvent"),ZD=Mc();ZD.startListening({actionCreator:Hn,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:EQ(n),activeDataKey:NI(n),activeIndex:to(n),activeLabel:EI(n),activeTooltipIndex:to(n),isTooltipActive:NQ(n)};e.payload.handler(r,e.payload.reactEvent)}}});var Qae=W([zs],e=>e.tooltipItemPayloads),Zae=W([Qae,Gc,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(s=>s.settings.dataKey===r);if(i!=null){var{positions:a}=i;if(a!=null){var o=t(a,n);return o}}}),eR=nr("touchMove"),tR=Mc();tR.startListening({actionCreator:eR,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Lb(r,r.tooltip.settings.shared);if(i==="axis"){var a=ow(r,sw({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(yI({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var o,s=n.touches[0],l=document.elementFromPoint(s.clientX,s.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(hV),d=(o=l.getAttribute(mV))!==null&&o!==void 0?o:void 0,f=Zae(t.getState(),c,d);t.dispatch(pI({activeDataKey:d,activeIndex:c,activeCoordinate:f}))}}});var eoe=zO({brush:cie,cartesianAxis:une,chartData:rZ,errorBars:ore,graphicalItems:Qte,layout:MK,legend:PV,options:QQ,polarAxis:Yee,polarOptions:Xae,referenceElements:gie,rootProps:Gae,tooltip:KX}),toe=function(t){return sK({reducer:eoe,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([VD.middleware,GD.middleware,lw.middleware,ZD.middleware,tR.middleware]),devTools:lo.devToolsEnabled})};function nR(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=vn(),a=v.useRef(null);if(i)return n;a.current==null&&(a.current=toe(t));var o=N0;return v.createElement(Kae,{context:o,store:a.current},n)}function rR(e){var{layout:t,width:n,height:r,margin:i}=e,a=Ve(),o=vn();return v.useEffect(()=>{o||(a(IK(t)),a(DK({width:n,height:r})),a(TK(i)))},[a,o,t,n,r,i]),null}function iR(e){var t=Ve();return v.useEffect(()=>{t(Yae(e))},[t,e]),null}var noe=["children"];function roe(e,t){if(e==null)return{};var n,r,i=ioe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ioe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function $f(){return $f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$f.apply(null,arguments)}var aoe={width:"100%",height:"100%"},ooe=v.forwardRef((e,t)=>{var n=$0(),r=F0(),i=xA();if(!fs(n)||!fs(r))return null;var{children:a,otherAttributes:o,title:s,desc:l}=e,c,d;return typeof o.tabIndex=="number"?c=o.tabIndex:c=i?0:void 0,typeof o.role=="string"?d=o.role:d=i?"application":void 0,v.createElement(h0,$f({},o,{title:s,desc:l,role:d,tabIndex:c,width:n,height:r,style:aoe,ref:t}),a)}),soe=e=>{var{children:t}=e,n=re(Gh);if(!n)return null;var{width:r,height:i,y:a,x:o}=n;return v.createElement(h0,{width:r,height:i,x:o,y:a},t)},XC=v.forwardRef((e,t)=>{var{children:n}=e,r=roe(e,noe),i=vn();return i?v.createElement(soe,null,n):v.createElement(ooe,$f({ref:t},r),n)});function loe(){var e=Ve(),[t,n]=v.useState(null),r=re(fV);return v.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),a=i.width/t.offsetWidth;Mn(a)&&a!==r&&e(RK(a))}},[t,e,r]),n}function QC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function coe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QC(Object(n),!0).forEach(function(r){uoe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uoe(e,t,n){return(t=doe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function doe(e){var t=foe(e,"string");return typeof t=="symbol"?t:t+""}function foe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hoe=v.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:o,onDoubleClick:s,onMouseDown:l,onMouseEnter:c,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:m,onTouchMove:p,onTouchStart:g,style:y,width:x}=e,b=Ve(),[w,j]=v.useState(null),[S,k]=v.useState(null);fZ();var _=loe(),N=v.useCallback(q=>{_(q),typeof t=="function"&&t(q),j(q),k(q)},[_,t,j,k]),P=v.useCallback(q=>{b(KD(q)),b(Hn({handler:a,reactEvent:q}))},[b,a]),E=v.useCallback(q=>{b(wv(q)),b(Hn({handler:c,reactEvent:q}))},[b,c]),T=v.useCallback(q=>{b(gI()),b(Hn({handler:d,reactEvent:q}))},[b,d]),L=v.useCallback(q=>{b(wv(q)),b(Hn({handler:f,reactEvent:q}))},[b,f]),$=v.useCallback(()=>{b(QD())},[b]),B=v.useCallback(q=>{b(XD(q.key))},[b]),D=v.useCallback(q=>{b(Hn({handler:o,reactEvent:q}))},[b,o]),z=v.useCallback(q=>{b(Hn({handler:s,reactEvent:q}))},[b,s]),G=v.useCallback(q=>{b(Hn({handler:l,reactEvent:q}))},[b,l]),I=v.useCallback(q=>{b(Hn({handler:h,reactEvent:q}))},[b,h]),R=v.useCallback(q=>{b(Hn({handler:g,reactEvent:q}))},[b,g]),C=v.useCallback(q=>{b(eR(q)),b(Hn({handler:p,reactEvent:q}))},[b,p]),Q=v.useCallback(q=>{b(Hn({handler:m,reactEvent:q}))},[b,m]);return v.createElement(DI.Provider,{value:w},v.createElement(GP.Provider,{value:S},v.createElement("div",{className:Se("recharts-wrapper",r),style:coe({position:"relative",cursor:"default",width:x,height:i},y),onClick:P,onContextMenu:D,onDoubleClick:z,onFocus:$,onKeyDown:B,onMouseDown:G,onMouseEnter:E,onMouseLeave:T,onMouseMove:L,onMouseUp:I,onTouchEnd:Q,onTouchMove:C,onTouchStart:R,ref:N},n)))}),moe=["children","className","width","height","style","compact","title","desc"];function poe(e,t){if(e==null)return{};var n,r,i=goe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function goe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var aR=v.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:a,style:o,compact:s,title:l,desc:c}=e,d=poe(e,moe),f=Zt(d);return s?v.createElement(XC,{otherAttributes:f,title:l,desc:c},n):v.createElement(hoe,{className:r,style:o,width:i,height:a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},v.createElement(XC,{otherAttributes:f,title:l,desc:c,ref:t},v.createElement(vie,null,n)))}),yoe=["width","height"];function kv(){return kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kv.apply(null,arguments)}function voe(e,t){if(e==null)return{};var n,r,i=xoe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function xoe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var boe={top:5,right:5,bottom:5,left:5},woe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:boe,reverseStackOrder:!1,syncMethod:"index"},koe=v.forwardRef(function(t,n){var r,i=xn(t.categoricalChartProps,woe),{width:a,height:o}=i,s=voe(i,yoe);if(!fs(a)||!fs(o))return null;var{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,m={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return v.createElement(nR,{preloadedState:{options:m},reduxStoreName:(r=h.id)!==null&&r!==void 0?r:l},v.createElement(zD,{chartData:h.data}),v.createElement(rR,{width:a,height:o,layout:i.layout,margin:i.margin}),v.createElement(iR,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),v.createElement(aR,kv({},s,{width:a,height:o,ref:n})))}),Soe=["axis","item"],ZC=v.forwardRef((e,t)=>v.createElement(koe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Soe,tooltipPayloadSearcher:MI,categoricalChartProps:e,ref:t}));function joe(e){var t=Ve();return v.useEffect(()=>{t(Jae(e))},[t,e]),null}var Coe=["width","height","layout"];function Sv(){return Sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sv.apply(null,arguments)}function _oe(e,t){if(e==null)return{};var n,r,i=Eoe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Eoe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Noe={top:5,right:5,bottom:5,left:5},Poe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Noe,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},Ooe=v.forwardRef(function(t,n){var r,i=xn(t.categoricalChartProps,Poe),{width:a,height:o,layout:s}=i,l=_oe(i,Coe);if(!fs(a)||!fs(o))return null;var{chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h}=t,m={chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,eventEmitter:void 0};return v.createElement(nR,{preloadedState:{options:m},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:c},v.createElement(zD,{chartData:i.data}),v.createElement(rR,{width:a,height:o,layout:s,margin:i.margin}),v.createElement(iR,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),v.createElement(joe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),v.createElement(aR,Sv({width:a,height:o},l,{ref:n})))}),Aoe=["axis"],Toe={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Ioe=v.forwardRef((e,t)=>{var n=xn(e,Toe);return v.createElement(Ooe,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Aoe,tooltipPayloadSearcher:MI,categoricalChartProps:n,ref:t})});const ri=({children:e,className:t="",header:n,subheader:r,actions:i})=>u.jsxs("div",{className:`card rounded-lg border ${t}`,style:{backgroundColor:"var(--card)",borderColor:"var(--border)"},children:[(n||r||i)&&u.jsx("div",{className:"p-6 border-b",style:{borderColor:"var(--border)"},children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[n&&u.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--text)"},children:n}),r&&u.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-secondary)"},children:r})]}),i&&u.jsx("div",{className:"flex items-center space-x-2",children:i})]})}),u.jsx("div",{className:"p-6",children:e})]}),Doe={relevance:85,tone:92,length:78,accuracy:88,toxicity:95,promptable:82},Roe=e=>{const t=e==="7d"?7:e==="30d"?30:90,n=[];for(let r=t-1;r>=0;r--){const i=new Date;i.setDate(i.getDate()-r),n.push({ts:i.toISOString().split("T")[0],score:Math.floor(Math.random()*20)+70})}return n},Moe=e=>{const t=e==="7d"?7:e==="30d"?30:90,n=[];for(let r=t-1;r>=0;r--){const i=new Date;i.setDate(i.getDate()-r),n.push({ts:i.toISOString().split("T")[0],userCount:Math.floor(Math.random()*50)+10,assistantCount:Math.floor(Math.random()*50)+10})}return n},e_=async e=>{if({}.USE_MOCK==="1")return await new Promise(t=>setTimeout(t,300)),Doe;throw new Error("Analytics API not implemented")},t_=async e=>{if({}.USE_MOCK==="1")return await new Promise(t=>setTimeout(t,300)),Roe(e);throw new Error("Analytics API not implemented")},n_=async e=>{if({}.USE_MOCK==="1")return await new Promise(t=>setTimeout(t,300)),Moe(e);throw new Error("Analytics API not implemented")},Loe=()=>{const{t:e}=Ze(),[t,n]=v.useState(null),[r,i]=v.useState([]),[a,o]=v.useState([]),[s,l]=v.useState(!0),[c,d]=v.useState("7d");v.useEffect(()=>{(async()=>{l(!0);try{const[p,g,y]=await Promise.all([e_(c),t_(c),n_(c)]);n(p),i(g),o(y)}catch(p){console.error("Failed to fetch analytics data:",p)}finally{l(!1)}})()},[c]);const f=()=>{(async()=>{l(!0);try{const[p,g,y]=await Promise.all([e_(c),t_(c),n_(c)]);n(p),i(g),o(y)}catch(p){console.error("Failed to fetch analytics data:",p)}finally{l(!1)}})()},h=()=>{if(!t)return 0;const m=Object.values(t);return Math.round(m.reduce((p,g)=>p+g,0)/m.length)};return s?u.jsx("div",{className:"flex items-center justify-center py-12",children:u.jsx("div",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Loading analytics..."})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs(ri,{header:e("dashboard.title"),subheader:`Overall Score: ${h()}%`,actions:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("select",{value:c,onChange:m=>d(m.target.value),className:"text-sm px-2 py-1 rounded border",style:{backgroundColor:"var(--card)",borderColor:"var(--border)",color:"var(--text)"},children:[u.jsx("option",{value:"7d",children:"Last 7 days"}),u.jsx("option",{value:"30d",children:"Last 30 days"}),u.jsx("option",{value:"90d",children:"Last 90 days"})]}),u.jsx("button",{onClick:f,className:"text-sm px-3 py-1 rounded border hover:bg-gray-50 transition-colors",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:e("actions.refresh")})]}),children:[u.jsx("div",{className:"h-80",children:u.jsx(Vp,{width:"100%",height:"100%",children:u.jsxs(Ioe,{data:t?[t]:[],children:[u.jsx(pD,{}),u.jsx(vm,{dataKey:"subject"}),u.jsx(gm,{angle:90,domain:[0,100]}),u.jsx(ew,{name:"Performance",dataKey:"relevance",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6})]})})}),u.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{style:{color:"var(--text-secondary)"},children:"Relevance:"}),u.jsxs("span",{style:{color:"var(--text)"},children:[t==null?void 0:t.relevance,"%"]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{style:{color:"var(--text-secondary)"},children:"Tone:"}),u.jsxs("span",{style:{color:"var(--text)"},children:[t==null?void 0:t.tone,"%"]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{style:{color:"var(--text-secondary)"},children:"Length:"}),u.jsxs("span",{style:{color:"var(--text)"},children:[t==null?void 0:t.length,"%"]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{style:{color:"var(--text-secondary)"},children:"Accuracy:"}),u.jsxs("span",{style:{color:"var(--text)"},children:[t==null?void 0:t.accuracy,"%"]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{style:{color:"var(--text-secondary)"},children:"Toxicity:"}),u.jsxs("span",{style:{color:"var(--text)"},children:[t==null?void 0:t.toxicity,"%"]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{style:{color:"var(--text-secondary)"},children:"Promptable:"}),u.jsxs("span",{style:{color:"var(--text)"},children:[t==null?void 0:t.promptable,"%"]})]})]})]}),u.jsx(ri,{header:e("dashboard.timeline"),subheader:"Daily performance scores over time",children:u.jsx("div",{className:"h-80",children:u.jsx(Vp,{width:"100%",height:"100%",children:u.jsxs(ZC,{data:r,children:[u.jsx(gv,{strokeDasharray:"3 3"}),u.jsx(vv,{dataKey:"ts"}),u.jsx(bv,{domain:[0,100]}),u.jsx(sC,{}),u.jsx(ud,{dataKey:"score",fill:"#8884d8"})]})})})}),u.jsx(ri,{header:e("dashboard.activity"),subheader:"Message volume by role",children:u.jsx("div",{className:"h-80",children:u.jsx(Vp,{width:"100%",height:"100%",children:u.jsxs(ZC,{data:a,children:[u.jsx(gv,{strokeDasharray:"3 3"}),u.jsx(vv,{dataKey:"ts"}),u.jsx(bv,{}),u.jsx(sC,{}),u.jsx(Yh,{}),u.jsx(ud,{dataKey:"userCount",name:"User Messages",fill:"#8884d8"}),u.jsx(ud,{dataKey:"assistantCount",name:"Assistant Messages",fill:"#82ca9d"})]})})})})]})};function Fl({columns:e,data:t,loading:n=!1,sortable:r=!0,pagination:i,onSort:a,className:o=""}){const[s,l]=v.useState(""),[c,d]=v.useState("asc"),f=m=>{if(!r||!a)return;const p=s===m&&c==="asc"?"desc":"asc";l(m),d(p),a(m,p)},h=m=>s!==m?"↕️":c==="asc"?"↑":"↓";return n?u.jsx("div",{className:"flex items-center justify-center py-8",children:u.jsx("div",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Loading..."})}):u.jsxs("div",{className:`overflow-hidden ${o}`,children:[u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"sticky top-0",style:{backgroundColor:"var(--bg-secondary)"},children:u.jsx("tr",{children:e.map(m=>u.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium uppercase tracking-wider ${m.sortable&&r?"cursor-pointer hover:bg-gray-50":""}`,style:{color:"var(--text-muted)",width:m.width},onClick:()=>m.sortable&&f(String(m.key)),children:u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx("span",{children:m.label}),m.sortable&&r&&u.jsx("span",{className:"text-xs",children:h(String(m.key))})]})},String(m.key)))})}),u.jsx("tbody",{className:"divide-y",style:{borderColor:"var(--border)"},children:t.map((m,p)=>u.jsx("tr",{className:"hover:bg-gray-50",children:e.map(g=>u.jsx("td",{className:"px-4 py-3 text-sm",style:{color:"var(--text)"},children:g.render?g.render(m[g.key],m):String(m[g.key]||"")},String(g.key)))},p))})]})}),i&&u.jsxs("div",{className:"px-4 py-3 border-t flex items-center justify-between",style:{borderColor:"var(--border)"},children:[u.jsx("div",{className:"flex items-center space-x-2",children:u.jsxs("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Showing ",(i.page-1)*i.pageSize+1," to"," ",Math.min(i.page*i.pageSize,i.total)," of"," ",i.total," results"]})}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("select",{value:i.pageSize,onChange:m=>i.onPageSizeChange(Number(m.target.value)),className:"text-sm px-2 py-1 rounded border",style:{backgroundColor:"var(--card)",borderColor:"var(--border)",color:"var(--text)"},children:[u.jsx("option",{value:10,children:"10 per page"}),u.jsx("option",{value:25,children:"25 per page"}),u.jsx("option",{value:50,children:"50 per page"}),u.jsx("option",{value:100,children:"100 per page"})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx("button",{onClick:()=>i.onPageChange(i.page-1),disabled:i.page<=1,className:"px-3 py-1 text-sm rounded border disabled:opacity-50 disabled:cursor-not-allowed",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:"Previous"}),u.jsx("span",{className:"px-3 py-1 text-sm",style:{color:"var(--text)"},children:i.page}),u.jsx("button",{onClick:()=>i.onPageChange(i.page+1),disabled:i.page*i.pageSize>=i.total,className:"px-3 py-1 text-sm rounded border disabled:opacity-50 disabled:cursor-not-allowed",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:"Next"})]})]})]})]})}const dd=({status:e,children:t})=>{const n=r=>{switch(r){case"open":return{backgroundColor:"var(--success-light)",color:"var(--success)",border:"1px solid var(--success)"};case"closed":return{backgroundColor:"var(--error-light)",color:"var(--error)",border:"1px solid var(--error)"};case"synced":return{backgroundColor:"var(--success-light)",color:"var(--success)",border:"1px solid var(--success)"};case"error":return{backgroundColor:"var(--error-light)",color:"var(--error)",border:"1px solid var(--error)"};case"queued":return{backgroundColor:"var(--warning-light)",color:"var(--warning)",border:"1px solid var(--warning)"};case"indexing":return{backgroundColor:"var(--primary-light)",color:"var(--primary)",border:"1px solid var(--primary)"};default:return{backgroundColor:"var(--border-light)",color:"var(--text-muted)",border:"1px solid var(--border)"}}};return u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",style:n(e),children:t})},$oe=({children:e,left:t,right:n,className:r=""})=>u.jsxs("div",{className:`flex items-center justify-between py-4 ${r}`,children:[u.jsx("div",{className:"flex items-center space-x-4",children:t}),u.jsx("div",{className:"flex items-center space-x-4",children:n})]}),Foe=({isOpen:e,onClose:t,title:n,children:r,className:i=""})=>{const a=v.useRef(null);return v.useEffect(()=>{const o=s=>{s.key==="Escape"&&t()};return e&&(document.addEventListener("keydown",o),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",o),document.body.style.overflow="unset"}},[e,t]),v.useEffect(()=>{e&&a.current&&a.current.focus()},[e]),e?u.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:t}),u.jsx("div",{className:"absolute right-0 top-0 h-full w-full max-w-md",children:u.jsxs("div",{ref:a,className:`h-full flex flex-col ${i}`,style:{backgroundColor:"var(--card)"},tabIndex:-1,children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b",style:{borderColor:"var(--border)"},children:[u.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text)"},children:n}),u.jsx("button",{onClick:t,className:"p-2 rounded-md hover:bg-gray-100 transition-colors",style:{color:"var(--text-secondary)"},children:"✕"})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r})]})})]}):null},Uoe=[{id:"1",title:"PSDAP Program Discussion",status:"open",lastAt:"2024-01-15T10:30:00Z",messageCount:12},{id:"2",title:"API Integration Help",status:"closed",lastAt:"2024-01-14T15:45:00Z",messageCount:8},{id:"3",title:"General Questions",status:"open",lastAt:"2024-01-13T09:20:00Z",messageCount:15}],zoe=[{id:"1",sessionId:"1",role:"user",content:"What is the PSDAP program?",createdAt:"2024-01-15T10:30:00Z"},{id:"2",sessionId:"1",role:"assistant",content:"The PSDAP program is a comprehensive development initiative...",createdAt:"2024-01-15T10:31:00Z",feedback:"up",citations:[{sourceType:"document",title:"PSDAP Program Guide",snippet:"The PSDAP program provides..."}]}],r_=[{id:"1",requestId:"req-123",corrected:"The PSDAP program is a comprehensive development initiative that focuses on...",createdAt:"2024-01-15T11:00:00Z"}],i_=[{id:"1",messageId:"2",rating:1,note:"Very helpful response",createdAt:"2024-01-15T10:35:00Z"}],Boe=async(e={})=>{await new Promise(o=>setTimeout(o,300));let t=[...Uoe];e.search&&(t=t.filter(o=>o.title.toLowerCase().includes(e.search.toLowerCase()))),e.status&&e.status!=="all"&&(t=t.filter(o=>o.status===e.status)),e.sortBy&&t.sort((o,s)=>{const l=o[e.sortBy],c=s[e.sortBy],d=e.sortDirection==="desc"?-1:1;return l<c?-1*d:l>c?1*d:0});const n=e.page||1,r=e.pageSize||10,i=(n-1)*r,a=i+r;return{rows:t.slice(i,a),total:t.length}},Woe=async(e,t={})=>{await new Promise(s=>setTimeout(s,300));const n=zoe.filter(s=>s.sessionId===e),r=t.page||1,i=t.pageSize||10,a=(r-1)*i,o=a+i;return{rows:n.slice(a,o),total:n.length}},qoe=async(e={})=>(await new Promise(t=>setTimeout(t,300)),{rows:r_,total:r_.length}),Hoe=async(e={})=>(await new Promise(t=>setTimeout(t,300)),{rows:i_,total:i_.length}),Koe=()=>{const{t:e}=Ze(),t=Wt(),[n,r]=v.useState("sessions"),[i,a]=v.useState(null),[o,s]=v.useState([]),[l,c]=v.useState([]),[d,f]=v.useState([]),[h,m]=v.useState([]),[p,g]=v.useState(!1),[y,x]=v.useState(null),[b,w]=v.useState(!1),[j,S]=v.useState(""),[k,_]=v.useState("all"),[N,P]=v.useState({page:1,pageSize:10,total:0});v.useEffect(()=>{E(),L()},[j,k,N.page,N.pageSize]),v.useEffect(()=>{i&&T(i)},[i]);const E=async()=>{g(!0);try{const I=await Boe({page:N.page,pageSize:N.pageSize,search:j,status:k});s(I.rows),P(R=>({...R,total:I.total}))}catch(I){console.error("Failed to fetch sessions:",I)}finally{g(!1)}},T=async I=>{try{const R=await Woe(I,{page:1,pageSize:50});c(R.rows)}catch(R){console.error("Failed to fetch messages:",R)}},L=async()=>{try{const[I,R]=await Promise.all([qoe(),Hoe()]);f(I.rows),m(R.rows)}catch(I){console.error("Failed to fetch feedback:",I)}},$=async(I,R,C)=>{try{switch(I){case"open":t(`/chat/${R}`);break;case"rename":C&&console.log("Renaming session:",R,C);break;case"close":console.log("Closing session:",R);break;case"delete":console.log("Deleting session:",R);break}}catch(Q){console.error("Failed to perform session action:",Q)}},B=I=>{x(I),w(!0)},D=()=>{const I=[["Title","Status","Last Activity","Message Count"],...o.map(q=>[q.title,q.status,new Date(q.lastAt).toLocaleString(),q.messageCount.toString()])].map(q=>q.join(",")).join(`
`),R=new Blob([I],{type:"text/csv"}),C=window.URL.createObjectURL(R),Q=document.createElement("a");Q.href=C,Q.download="sessions.csv",Q.click(),window.URL.revokeObjectURL(C)},z=[{key:"title",label:e("labels.title"),sortable:!0,render:(I,R)=>u.jsx("button",{onClick:()=>a(R.id),className:"text-left hover:underline",style:{color:"var(--text)"},children:I})},{key:"status",label:e("labels.status"),render:I=>u.jsx(dd,{status:I,children:I})},{key:"lastAt",label:e("labels.lastActivity"),render:I=>new Date(I).toLocaleString()},{key:"messageCount",label:e("labels.count"),render:I=>I.toString()},{key:"actions",label:"Actions",render:(I,R)=>u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{onClick:()=>$("open",R.id),className:"text-xs px-2 py-1 rounded border hover:bg-gray-50",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:e("actions.open")}),u.jsx("button",{onClick:()=>$("close",R.id),className:"text-xs px-2 py-1 rounded border hover:bg-gray-50",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:e("actions.close")}),u.jsx("button",{onClick:()=>$("delete",R.id),className:"text-xs px-2 py-1 rounded border hover:bg-gray-50",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:e("actions.delete")})]})}],G=[{key:"createdAt",label:"Time",render:I=>new Date(I).toLocaleString()},{key:"role",label:"Role",render:I=>u.jsx("span",{className:`px-2 py-1 rounded text-xs ${I==="user"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:I})},{key:"content",label:"Content",render:I=>u.jsx("div",{className:"max-w-xs truncate",title:I,children:I})},{key:"feedback",label:"Feedback",render:I=>I?u.jsx("span",{className:`px-2 py-1 rounded text-xs ${I==="up"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I==="up"?"👍":"👎"}):"-"},{key:"actions",label:"Actions",render:(I,R)=>u.jsx("button",{onClick:()=>B(R),className:"text-xs px-2 py-1 rounded border hover:bg-gray-50",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:"View"})}];return u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"border-b",style:{borderColor:"var(--border)"},children:u.jsxs("nav",{className:"-mb-px flex space-x-8",children:[u.jsx("button",{onClick:()=>r("sessions"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="sessions"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,style:{color:n==="sessions"?"var(--primary)":"var(--text-secondary)"},children:e("usage.sessions")}),u.jsx("button",{onClick:()=>r("feedback"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="feedback"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,style:{color:n==="feedback"?"var(--primary)":"var(--text-secondary)"},children:e("usage.feedback.admin")})]})}),n==="sessions"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs(ri,{header:e("usage.sessions"),actions:u.jsx("button",{onClick:D,className:"text-sm px-3 py-1 rounded border hover:bg-gray-50",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:"Export CSV"}),children:[u.jsx($oe,{left:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("input",{type:"text",placeholder:e("filters.search"),value:j,onChange:I=>S(I.target.value),className:"px-3 py-1 border rounded text-sm",style:{backgroundColor:"var(--card)",borderColor:"var(--border)",color:"var(--text)"}}),u.jsxs("select",{value:k,onChange:I=>_(I.target.value),className:"text-sm px-2 py-1 rounded border",style:{backgroundColor:"var(--card)",borderColor:"var(--border)",color:"var(--text)"},children:[u.jsx("option",{value:"all",children:"All Status"}),u.jsx("option",{value:"open",children:"Open"}),u.jsx("option",{value:"closed",children:"Closed"})]})]})}),u.jsx(Fl,{columns:z,data:o,loading:p,pagination:{page:N.page,pageSize:N.pageSize,total:N.total,onPageChange:I=>P(R=>({...R,page:I})),onPageSizeChange:I=>P(R=>({...R,pageSize:I,page:1}))}})]}),i&&u.jsx(ri,{header:e("usage.messages"),children:u.jsx(Fl,{columns:G,data:l,loading:p})})]}),n==="feedback"&&u.jsxs("div",{className:"space-y-6",children:[u.jsx(ri,{header:e("usage.feedback.admin"),children:u.jsx("div",{className:"space-y-4",children:d.map(I=>u.jsxs("div",{className:"p-4 border rounded",style:{borderColor:"var(--border)"},children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("span",{className:"text-sm font-medium",style:{color:"var(--text)"},children:["Request ID: ",I.requestId]}),u.jsx("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:new Date(I.createdAt).toLocaleString()})]}),u.jsx("div",{className:"text-sm",style:{color:"var(--text-secondary)"},children:I.corrected})]},I.id))})}),u.jsx(ri,{header:e("usage.feedback.user"),children:u.jsx("div",{className:"space-y-4",children:h.map(I=>u.jsxs("div",{className:"p-4 border rounded",style:{borderColor:"var(--border)"},children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("span",{className:"text-sm font-medium",style:{color:"var(--text)"},children:["Message ID: ",I.messageId]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:`px-2 py-1 rounded text-xs ${I.rating===1?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.rating===1?"👍":"👎"}),u.jsx("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:new Date(I.createdAt).toLocaleString()})]})]}),I.note&&u.jsx("div",{className:"text-sm",style:{color:"var(--text-secondary)"},children:I.note})]},I.id))})})]}),u.jsx(Foe,{isOpen:b,onClose:()=>w(!1),title:"Message Details",children:y&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium mb-2",style:{color:"var(--text)"},children:"Content"}),u.jsx("div",{className:"p-3 rounded border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border)"},children:u.jsx("pre",{className:"whitespace-pre-wrap text-sm",style:{color:"var(--text)"},children:y.content})})]}),y.citations&&y.citations.length>0&&u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium mb-2",style:{color:"var(--text)"},children:"References"}),u.jsx("div",{className:"space-y-2",children:y.citations.map((I,R)=>u.jsxs("div",{className:"p-3 rounded border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border)"},children:[u.jsx("div",{className:"font-medium text-sm",style:{color:"var(--text)"},children:I.title}),I.snippet&&u.jsx("div",{className:"text-sm mt-1",style:{color:"var(--text-secondary)"},children:I.snippet}),I.url&&u.jsx("a",{href:I.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline",children:"View Source"})]},R))})]})]})})]})},Voe=()=>{const{t:e}=Ze(),[t,n]=v.useState(""),[r,i]=v.useState("gpt-4"),[a,o]=v.useState("https://api.openai.com/v1/chat/completions"),[s,l]=v.useState(null),[c,d]=v.useState(!1),[f,h]=v.useState(""),[m,p]=v.useState(""),[g,y]=v.useState(!1);v.useEffect(()=>{const k=localStorage.getItem("axpro_system_prompt");k&&n(k);const _=localStorage.getItem("axpro_prompt_last_updated");_&&l(JSON.parse(_))},[]);const x=()=>{localStorage.setItem("axpro_system_prompt",t);const k={by:"admin@tecace.com",timestamp:new Date().toISOString()};localStorage.setItem("axpro_prompt_last_updated",JSON.stringify(k)),l(k),alert("Prompt saved successfully!")},b=()=>{if(confirm("Are you sure you want to revert to the last saved version?")){const k=localStorage.getItem("axpro_system_prompt");k&&n(k)}},w=async()=>{if(f.trim()){y(!0);try{await new Promise(k=>setTimeout(k,2e3)),p(`This is a test response for: "${f}"

Generated by ${r} at ${a}`)}catch{p("Error: Failed to get test response")}finally{y(!1)}}},j=t.length,S=4e3;return u.jsxs("div",{className:"space-y-6",children:[u.jsx(ri,{header:e("mgmt.prompt"),subheader:"Configure the system prompt for the chatbot",actions:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{onClick:b,className:"text-sm px-3 py-1 rounded border hover:bg-gray-50",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:e("actions.revert")}),u.jsx("button",{onClick:x,className:"text-sm px-3 py-1 rounded border hover:bg-gray-50",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:e("actions.save")}),u.jsx("button",{onClick:()=>d(!0),className:"text-sm px-3 py-1 rounded border hover:bg-gray-50",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:e("actions.test")})]}),children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:"Model"}),u.jsx("input",{type:"text",value:r,onChange:k=>i(k.target.value),className:"w-full px-3 py-2 border rounded",style:{backgroundColor:"var(--card)",borderColor:"var(--border)",color:"var(--text)"},readOnly:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:"Endpoint"}),u.jsx("input",{type:"text",value:a,onChange:k=>o(k.target.value),className:"w-full px-3 py-2 border rounded",style:{backgroundColor:"var(--card)",borderColor:"var(--border)",color:"var(--text)"},readOnly:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:"System Prompt"}),u.jsx("textarea",{value:t,onChange:k=>n(k.target.value),className:"w-full px-3 py-2 border rounded",style:{backgroundColor:"var(--card)",borderColor:"var(--border)",color:"var(--text)"},rows:12,placeholder:"Enter the system prompt for the chatbot..."}),u.jsxs("div",{className:"flex justify-between items-center mt-2",children:[u.jsxs("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:[j," / ",S," characters"]}),j>S&&u.jsx("span",{className:"text-xs text-red-600",children:"Exceeds maximum length"})]})]}),s&&u.jsxs("div",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Last updated by ",s.by," on ",new Date(s.timestamp).toLocaleString()]})]})}),c&&u.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>d(!1)}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:u.jsx("div",{className:"w-full max-w-2xl rounded-lg border",style:{backgroundColor:"var(--card)",borderColor:"var(--border)"},children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--text)"},children:"Test Prompt"}),u.jsx("button",{onClick:()=>d(!1),className:"p-2 rounded-md hover:bg-gray-100",style:{color:"var(--text-secondary)"},children:"✕"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:"Test Input"}),u.jsx("textarea",{value:f,onChange:k=>h(k.target.value),className:"w-full px-3 py-2 border rounded",style:{backgroundColor:"var(--card)",borderColor:"var(--border)",color:"var(--text)"},rows:3,placeholder:"Enter a test message..."})]}),u.jsxs("div",{className:"flex justify-end space-x-2",children:[u.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 text-sm rounded border hover:bg-gray-50",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:"Cancel"}),u.jsx("button",{onClick:w,disabled:g||!f.trim(),className:"px-4 py-2 text-sm rounded border hover:bg-gray-50 disabled:opacity-50",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:g?"Testing...":"Test"})]}),m&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text)"},children:"Response"}),u.jsx("div",{className:"p-3 rounded border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border)"},children:u.jsx("pre",{className:"whitespace-pre-wrap text-sm",style:{color:"var(--text)"},children:m})})]})]})]})})})]})]})},Goe=[{id:"1",name:"PSDAP_Program_Guide.pdf",size:2048576,lastModified:"2024-01-15T10:00:00Z",contentType:"application/pdf"},{id:"2",name:"API_Documentation.md",size:512e3,lastModified:"2024-01-14T15:30:00Z",contentType:"text/markdown"},{id:"3",name:"User_Manual.docx",size:1024e3,lastModified:"2024-01-13T09:15:00Z",contentType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}],Yoe=[{id:"1",name:"PSDAP_Program_Guide.pdf",chunks:45,status:"synced",lastIndexedAt:"2024-01-15T10:30:00Z"},{id:"2",name:"API_Documentation.md",chunks:12,status:"indexing",lastIndexedAt:"2024-01-14T16:00:00Z"},{id:"3",name:"User_Manual.docx",chunks:0,status:"queued"}],Joe=[{id:"1",name:"PSDAP_Program_Guide.pdf",blobStatus:"present",chunks:45,syncStatus:"synced"},{id:"2",name:"API_Documentation.md",blobStatus:"present",chunks:12,syncStatus:"stale"},{id:"3",name:"User_Manual.docx",blobStatus:"missing",chunks:0,syncStatus:"error"}],Xoe=async(e={})=>{await new Promise(o=>setTimeout(o,300));let t=[...Goe];e.search&&(t=t.filter(o=>o.name.toLowerCase().includes(e.search.toLowerCase()))),e.sortBy&&t.sort((o,s)=>{const l=o[e.sortBy],c=s[e.sortBy],d=e.sortDirection==="desc"?-1:1;return l<c?-1*d:l>c?1*d:0});const n=e.page||1,r=e.pageSize||10,i=(n-1)*r,a=i+r;return{rows:t.slice(i,a),total:t.length}},Qoe=async e=>{await new Promise(t=>setTimeout(t,300)),console.log("Deleting file:",e)},Zoe=async(e={})=>{await new Promise(o=>setTimeout(o,300));let t=[...Yoe];e.search&&(t=t.filter(o=>o.name.toLowerCase().includes(e.search.toLowerCase()))),e.sortBy&&t.sort((o,s)=>{const l=o[e.sortBy],c=s[e.sortBy],d=e.sortDirection==="desc"?-1:1;return l===void 0||c===void 0?0:l<c?-1*d:l>c?1*d:0});const n=e.page||1,r=e.pageSize||10,i=(n-1)*r,a=i+r;return{rows:t.slice(i,a),total:t.length}},ese=async e=>{await new Promise(t=>setTimeout(t,300)),console.log("Reindexing:",e)},tse=async(e={})=>{await new Promise(o=>setTimeout(o,300));let t=[...Joe];e.search&&(t=t.filter(o=>o.name.toLowerCase().includes(e.search.toLowerCase()))),e.sortBy&&t.sort((o,s)=>{const l=o[e.sortBy],c=s[e.sortBy],d=e.sortDirection==="desc"?-1:1;return l<c?-1*d:l>c?1*d:0});const n=e.page||1,r=e.pageSize||10,i=(n-1)*r,a=i+r;return{rows:t.slice(i,a),total:t.length}},nse=()=>{const{t:e}=Ze(),[t,n]=v.useState("files"),[r,i]=v.useState([]),[a,o]=v.useState([]),[s,l]=v.useState([]),[c,d]=v.useState(!1),[f,h]=v.useState(""),[m,p]=v.useState({page:1,pageSize:10,total:0});v.useEffect(()=>{g()},[t,f,m.page,m.pageSize]);const g=async()=>{d(!0);try{let P;switch(t){case"files":P=await Xoe({page:m.page,pageSize:m.pageSize,search:f}),i(P.rows);break;case"index":P=await Zoe({page:m.page,pageSize:m.pageSize,search:f}),o(P.rows);break;case"sync":P=await tse({page:m.page,pageSize:m.pageSize,search:f}),l(P.rows);break}p(E=>({...E,total:P.total}))}catch(P){console.error("Failed to fetch data:",P)}finally{d(!1)}},y=async P=>{if(confirm("Are you sure you want to delete this file?"))try{await Qoe(P),g()}catch(E){console.error("Failed to delete file:",E)}},x=async P=>{try{await ese(P),g()}catch(E){console.error("Failed to reindex:",E)}},b=P=>{if(P===0)return"0 Bytes";const E=1024,T=["Bytes","KB","MB","GB"],L=Math.floor(Math.log(P)/Math.log(E));return parseFloat((P/Math.pow(E,L)).toFixed(2))+" "+T[L]},w=P=>new Date(P).toLocaleString(),j=[{key:"name",label:"Filename",sortable:!0,render:P=>u.jsx("span",{className:"font-medium",style:{color:"var(--text)"},children:P})},{key:"size",label:"Size",sortable:!0,render:P=>b(P)},{key:"lastModified",label:"Last Modified",sortable:!0,render:P=>w(P)},{key:"contentType",label:"Type",render:P=>u.jsx("span",{className:"text-xs px-2 py-1 rounded",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)"},children:P})},{key:"actions",label:"Actions",render:(P,E)=>u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{onClick:()=>window.open(`/files/${E.id}`,"_blank"),className:"text-xs px-2 py-1 rounded border hover:bg-gray-50",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:"View"}),u.jsx("button",{onClick:()=>window.open(`/files/${E.id}/download`,"_blank"),className:"text-xs px-2 py-1 rounded border hover:bg-gray-50",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:"Download"}),u.jsx("button",{onClick:()=>y(E.id),className:"text-xs px-2 py-1 rounded border hover:bg-gray-50",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:"Delete"})]})}],S=[{key:"name",label:"Filename",sortable:!0,render:P=>u.jsx("span",{className:"font-medium",style:{color:"var(--text)"},children:P})},{key:"chunks",label:"Chunks",sortable:!0,render:P=>P.toString()},{key:"status",label:"Status",render:P=>u.jsx(dd,{status:P,children:P})},{key:"lastIndexedAt",label:"Last Indexed",sortable:!0,render:P=>P?w(P):"-"},{key:"actions",label:"Actions",render:(P,E)=>u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{onClick:()=>x(E.id),className:"text-xs px-2 py-1 rounded border hover:bg-gray-50",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:"Reindex"}),u.jsx("button",{onClick:()=>window.open(`/index/${E.id}/chunks`,"_blank"),className:"text-xs px-2 py-1 rounded border hover:bg-gray-50",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:"View Chunks"})]})}],k=[{key:"name",label:"Filename",sortable:!0,render:P=>u.jsx("span",{className:"font-medium",style:{color:"var(--text)"},children:P})},{key:"blobStatus",label:"Blob Status",render:P=>u.jsx(dd,{status:P,children:P})},{key:"chunks",label:"Chunks",sortable:!0,render:P=>P.toString()},{key:"syncStatus",label:"Sync Status",render:P=>u.jsx(dd,{status:P,children:P})},{key:"actions",label:"Actions",render:(P,E)=>u.jsx("div",{className:"flex items-center space-x-2",children:u.jsx("button",{onClick:()=>window.open(`/sync/${E.id}`,"_blank"),className:"text-xs px-2 py-1 rounded border hover:bg-gray-50",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:"Open"})})}],_=()=>{switch(t){case"files":return r;case"index":return a;case"sync":return s;default:return[]}},N=()=>{switch(t){case"files":return j;case"index":return S;case"sync":return k;default:return[]}};return u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"border-b",style:{borderColor:"var(--border)"},children:u.jsx("nav",{className:"-mb-px flex space-x-8",children:[{key:"files",label:"File Library"},{key:"index",label:"Knowledge Index"},{key:"sync",label:"Sync Overview"}].map(P=>u.jsx("button",{onClick:()=>n(P.key),className:`py-2 px-1 border-b-2 font-medium text-sm ${t===P.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,style:{color:t===P.key?"var(--primary)":"var(--text-secondary)"},children:P.label},P.key))})}),u.jsxs(ri,{header:e("mgmt.knowledge"),actions:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"text",placeholder:"Search...",value:f,onChange:P=>h(P.target.value),className:"px-3 py-1 border rounded text-sm",style:{backgroundColor:"var(--card)",borderColor:"var(--border)",color:"var(--text)"}}),u.jsx("button",{onClick:g,className:"text-sm px-3 py-1 rounded border hover:bg-gray-50",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:e("actions.refresh")})]}),children:[t==="files"&&u.jsxs("div",{children:[u.jsx("div",{className:"mb-4 p-4 border-2 border-dashed rounded",style:{borderColor:"var(--border)",backgroundColor:"var(--bg-secondary)"},children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"File upload is disabled in mock mode"}),u.jsx("p",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:"In production, you can drag and drop files here to upload them"})]})}),u.jsx(Fl,{columns:N(),data:_(),loading:c,pagination:{page:m.page,pageSize:m.pageSize,total:m.total,onPageChange:P=>p(E=>({...E,page:P})),onPageSizeChange:P=>p(E=>({...E,pageSize:P,page:1}))}})]}),t==="index"&&u.jsx(Fl,{columns:N(),data:_(),loading:c,pagination:{page:m.page,pageSize:m.pageSize,total:m.total,onPageChange:P=>p(E=>({...E,page:P})),onPageSizeChange:P=>p(E=>({...E,pageSize:P,page:1}))}}),t==="sync"&&u.jsx(Fl,{columns:N(),data:_(),loading:c,pagination:{page:m.page,pageSize:m.pageSize,total:m.total,onPageChange:P=>p(E=>({...E,page:P})),onPageSizeChange:P=>p(E=>({...E,pageSize:P,page:1}))}})]})]})},Zp=()=>{var m;const e=Wt(),t=xi(),{theme:n,toggleTheme:r}=qr(),{language:i,setLanguage:a,t:o}=Ze(),{logout:s}=NN(),[l,c]=v.useState(null);si.useEffect(()=>{const p=yt();p&&c({email:p.email,role:p.role})},[yt]);const d=async()=>{await s(),e("/")},f=[{group:"Dashboard",items:[{key:"overview",label:o("dashboard.title"),path:"/admin"}]},{group:"Analytics",items:[{key:"usage",label:o("usage.sessions"),path:"/admin/usage"}]},{group:"Management",items:[{key:"prompt",label:o("mgmt.prompt"),path:"/admin/prompt"},{key:"knowledge",label:o("mgmt.knowledge"),path:"/admin/knowledge"}]}],h=p=>t.pathname===p;return u.jsx("div",{className:"min-h-screen",style:{backgroundColor:"var(--bg)"},children:u.jsxs("div",{className:"flex",children:[u.jsxs("div",{className:"w-64 h-screen border-r sticky top-0",style:{backgroundColor:"var(--card)",borderColor:"var(--border)"},children:[u.jsx("div",{className:"p-6",children:u.jsx("h1",{className:"text-xl font-bold",style:{color:"var(--text)"},children:"AX Pro Admin"})}),u.jsx("nav",{className:"px-4 pb-4",children:f.map(p=>u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:"var(--text-muted)"},children:p.group}),u.jsx("div",{className:"space-y-1",children:p.items.map(g=>u.jsx("button",{onClick:()=>e(g.path),className:`w-full text-left px-3 py-2 rounded-md text-sm transition-colors ${h(g.path)?"text-white":"hover:bg-gray-100"}`,style:{backgroundColor:h(g.path)?"var(--text)":"transparent",color:h(g.path)?"var(--bg)":"var(--text-secondary)"},children:g.label},g.key))})]},p.group))})]}),u.jsxs("div",{className:"flex-1 flex flex-col",children:[u.jsxs("header",{className:"h-16 border-b flex items-center justify-between px-6",style:{backgroundColor:"var(--card)",borderColor:"var(--border)"},children:[u.jsx("div",{className:"flex items-center space-x-4",children:u.jsx("h2",{className:"text-lg font-medium",style:{color:"var(--text)"},children:((m=f.flatMap(p=>p.items).find(p=>h(p.path)))==null?void 0:m.label)||"Admin Dashboard"})}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("select",{value:i,onChange:p=>a(p.target.value),className:"text-sm px-2 py-1 rounded border",style:{backgroundColor:"var(--card)",borderColor:"var(--border)",color:"var(--text)"},children:[u.jsx("option",{value:"en",children:"EN"}),u.jsx("option",{value:"ko",children:"KO"})]}),u.jsx("button",{onClick:r,className:"p-2 rounded-md hover:bg-gray-100 transition-colors",style:{color:"var(--text-secondary)"},children:n==="dark"?"☀️":"🌙"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:l==null?void 0:l.email}),u.jsx("button",{onClick:d,className:"text-sm px-3 py-1 rounded border hover:bg-gray-50 transition-colors",style:{borderColor:"var(--border)",color:"var(--text-secondary)"},children:o("auth.signOut")})]})]})]}),u.jsx("main",{className:"flex-1 p-6",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.pathname==="/admin"&&u.jsx(Loe,{}),t.pathname==="/admin/usage"&&u.jsx(Koe,{}),t.pathname==="/admin/prompt"&&u.jsx(Voe,{}),t.pathname==="/admin/knowledge"&&u.jsx(nse,{})]})})]})]})})};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rse=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ise=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),a_=e=>{const t=ise(e);return t.charAt(0).toUpperCase()+t.slice(1)},oR=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),ase=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ose={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sse=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...s},l)=>v.createElement("svg",{ref:l,...ose,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:oR("lucide",i),...!a&&!ase(s)&&{"aria-hidden":"true"},...s},[...o.map(([c,d])=>v.createElement(c,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=(e,t)=>{const n=v.forwardRef(({className:r,...i},a)=>v.createElement(sse,{ref:a,iconNode:t,className:oR(`lucide-${rse(a_(e))}`,`lucide-${e}`,r),...i}));return n.displayName=a_(e),n};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lse=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],cse=Ht("activity",lse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const use=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],dse=Ht("bell",use);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fse=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],hse=Ht("chart-column",fse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mse=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],pse=Ht("chevron-up",mse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gse=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],yse=Ht("database",gse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vse=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],xse=Ht("file-text",vse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bse=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],wse=Ht("log-out",bse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kse=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],Sse=Ht("megaphone",kse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jse=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Cse=Ht("message-square",jse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _se=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Ese=Ht("moon",_se);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nse=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Pse=Ht("refresh-cw",Nse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ose=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Ase=Ht("sun",Ose);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tse=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],Ise=Ht("thumbs-down",Tse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dse=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],Rse=Ht("thumbs-up",Dse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mse=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Lse=Ht("trash-2",Mse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $se=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Fse=Ht("user",$se),Use=wse,zse=dse,Bse=Ese,Wse=Ase,qse=Fse,o_=hse,jv=Cse,Hse=xse,s_=yse,Kse=Sse,_n=Rse,En=Ise,l_=cse,Ff=Lse,xm=Pse,Vse=pse;function Gse({performanceScore:e,performanceDate:t,currentTime:n,onSignOut:r}){const i=Wt(),{theme:a,toggleTheme:o}=qr(),{language:s,setLanguage:l,t:c}=Ze(),d=h=>h>=90?c("admin.excellent"):h>=80?c("admin.good"):h>=70?c("admin.fair"):c("admin.poor"),f=()=>{i("/admin/dashboard")};return u.jsxs("header",{className:"dashboard-header",children:[u.jsx("div",{className:"header-left",children:u.jsxs("div",{className:"logo",onClick:f,style:{cursor:"pointer"},children:[u.jsx("div",{className:"logo-hexagon",children:u.jsx("div",{className:"hexagon-outer",children:u.jsx("div",{className:"hexagon-inner"})})}),u.jsx("span",{className:"logo-text",children:"TecAce Ax Pro"})]})}),u.jsxs("div",{className:"header-right",children:[u.jsxs("div",{className:"performance-indicator",children:[u.jsxs("span",{className:"performance-text",children:["TecAce Ax Pro: ",e,"% (",d(e),t?`, ${t}`:"",")"]}),u.jsx("span",{className:"current-time",children:n})]}),u.jsxs("div",{className:"header-actions",children:[u.jsx("button",{className:"icon-btn","aria-label":c("admin.goToChat"),onClick:()=>i("/chat"),title:c("admin.goToChat"),children:u.jsx(jv,{size:18})}),u.jsx("button",{className:"icon-btn","aria-label":c("admin.notifications"),children:u.jsx(zse,{size:18})}),u.jsx("button",{className:"icon-btn","aria-label":c("admin.toggleTheme"),onClick:o,title:c("admin.toggleTheme"),children:a==="light"?u.jsx(Bse,{size:18}):u.jsx(Wse,{size:18})}),u.jsxs("select",{value:s,onChange:h=>l(h.target.value),className:"language-select",children:[u.jsx("option",{value:"en",children:"EN"}),u.jsx("option",{value:"ko",children:"KO"})]}),u.jsx("button",{className:"icon-btn","aria-label":c("admin.userProfile"),onClick:()=>i("/settings"),title:c("ui.settings"),children:u.jsx(qse,{size:18})}),u.jsx("button",{className:"icon-btn signout-btn","aria-label":c("admin.signOut"),onClick:r,title:c("admin.signOut"),children:u.jsx(Use,{size:18})})]})]})]})}function Yse({conversations:e,satisfaction:t,documents:n,performanceScore:r,performanceDate:i,isCollapsed:a,onToggleCollapse:o,onScrollToSection:s}){const l=Wt(),c=xi(),{customization:d,updateCustomization:f}=Tc(),{t:h}=Ze(),m=c.pathname==="/admin/dashboard",[p,g]=v.useState(!1),[y,x]=v.useState(""),[b,w]=v.useState("Main AI Assistant for HR Support"),j=N=>{m?s(N):l(`/admin/dashboard?section=${N}`)},S=()=>{x(d.title||"TecAce Ax Pro"),w(d.chatSubtitle||"Main AI Assistant for HR Support"),g(!0)},k=()=>{f({title:y,chatSubtitle:b}),g(!1)},_=()=>{g(!1)};return u.jsx("aside",{className:`dashboard-sidebar ${a?"collapsed":""}`,children:u.jsxs("div",{className:"sidebar-content",children:[u.jsx("div",{className:"sidebar-section",style:{paddingBottom:"20px",borderBottom:"1px solid var(--admin-border)"},children:u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},children:[u.jsxs("div",{style:{position:"relative"},children:[u.jsx("img",{src:d.avatarUrl,alt:"Chatbot Avatar",style:{width:"100px",height:"100px",borderRadius:"50%",objectFit:"cover",border:"3px solid var(--admin-primary)",boxShadow:"0 0 20px rgba(59, 230, 255, 0.3)"},onError:N=>{N.currentTarget.src="/default-profile-avatar.png"}}),u.jsx("div",{style:{position:"absolute",bottom:"5px",right:"5px",width:"20px",height:"20px",backgroundColor:"var(--admin-success, #10b981)",border:"3px solid var(--admin-bg)",borderRadius:"50%"}})]}),u.jsx("div",{style:{textAlign:"center",width:"100%",padding:"0 12px"},children:p?u.jsxs(u.Fragment,{children:[u.jsx("input",{type:"text",value:y,onChange:N=>x(N.target.value),placeholder:"Bot Title",style:{width:"100%",fontSize:"16px",fontWeight:"600",color:"var(--admin-text)",backgroundColor:"rgba(9, 14, 34, 0.6)",border:"1px solid var(--admin-primary)",borderRadius:"6px",padding:"8px 12px",marginBottom:"8px",textAlign:"center"}}),u.jsx("input",{type:"text",value:b,onChange:N=>w(N.target.value),placeholder:"Description",style:{width:"100%",fontSize:"12px",color:"var(--admin-text-muted)",backgroundColor:"rgba(9, 14, 34, 0.6)",border:"1px solid var(--admin-border)",borderRadius:"6px",padding:"6px 12px",textAlign:"center"}})]}):u.jsxs(u.Fragment,{children:[u.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"var(--admin-text)",marginBottom:"4px"},children:d.title||"TecAce Ax Pro"}),u.jsx("p",{style:{fontSize:"12px",color:"var(--admin-text-muted)"},children:d.chatSubtitle||"Main AI Assistant for HR Support"})]})}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginTop:"8px"},children:[u.jsxs("div",{style:{textAlign:"center"},children:[u.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",background:"linear-gradient(135deg, var(--admin-primary), var(--admin-accent))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:[r,"%"]}),u.jsx("div",{style:{fontSize:"10px",color:"var(--admin-text-muted)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Performance"}),u.jsx("div",{style:{fontSize:"9px",color:"var(--admin-text-muted)"},children:i||"9/10"})]}),u.jsxs("div",{style:{padding:"6px 12px",borderRadius:"12px",backgroundColor:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)"},children:[u.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"var(--admin-success)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"ACTIVE"}),u.jsx("div",{style:{fontSize:"9px",color:"var(--admin-text-muted)",textTransform:"uppercase"},children:"STATUS"})]})]}),u.jsx("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:p?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:k,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",borderRadius:"8px",fontSize:"12px",fontWeight:"500",color:"#041220",backgroundColor:"var(--admin-primary)",border:"none",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:N=>N.currentTarget.style.opacity="0.9",onMouseLeave:N=>N.currentTarget.style.opacity="1",children:[u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),u.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),u.jsx("polyline",{points:"7 3 7 8 15 8"})]}),"Save"]}),u.jsxs("button",{onClick:_,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",borderRadius:"8px",fontSize:"12px",fontWeight:"500",color:"#ffffff",backgroundColor:"var(--admin-danger, #ef4444)",border:"none",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:N=>N.currentTarget.style.opacity="0.9",onMouseLeave:N=>N.currentTarget.style.opacity="1",children:[u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),"Cancel"]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:S,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",borderRadius:"8px",fontSize:"12px",fontWeight:"500",color:"var(--admin-text)",backgroundColor:"rgba(9, 14, 34, 0.6)",border:"1px solid var(--admin-border)",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:N=>N.currentTarget.style.backgroundColor="rgba(59, 230, 255, 0.1)",onMouseLeave:N=>N.currentTarget.style.backgroundColor="rgba(9, 14, 34, 0.6)",children:[u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),u.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Edit"]}),u.jsxs("button",{onClick:()=>l("/settings?tab=photo"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",borderRadius:"8px",fontSize:"12px",fontWeight:"500",color:"var(--admin-text)",backgroundColor:"rgba(9, 14, 34, 0.6)",border:"1px solid var(--admin-border)",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:N=>N.currentTarget.style.backgroundColor="rgba(59, 230, 255, 0.1)",onMouseLeave:N=>N.currentTarget.style.backgroundColor="rgba(9, 14, 34, 0.6)",children:[u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),u.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),u.jsx("polyline",{points:"21 15 16 10 5 21"})]}),"Photo"]})]})})]})}),u.jsxs("div",{className:"sidebar-section",children:[u.jsx("h3",{className:"sidebar-section-title",children:h("admin.overview")}),u.jsxs("div",{className:"metrics-grid",children:[u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-icon",children:u.jsx(jv,{size:20})}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-value",children:e}),u.jsx("div",{className:"metric-label",children:h("admin.conversations")})]})]}),u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-icon",children:u.jsx(l_,{size:20})}),u.jsxs("div",{className:"metric-content",children:[u.jsxs("div",{className:"metric-value",children:[t,"%"]}),u.jsx("div",{className:"metric-label",children:h("admin.satisfaction")})]})]}),u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-icon",children:u.jsx(s_,{size:20})}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-value",children:n}),u.jsx("div",{className:"metric-label",children:h("admin.documents")})]})]}),u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-icon",children:u.jsx(o_,{size:20})}),u.jsxs("div",{className:"metric-content",children:[u.jsxs("div",{className:"metric-value",children:[r,"%"]}),u.jsx("div",{className:"metric-label",children:h("admin.performance")})]})]})]})]}),u.jsxs("div",{className:"sidebar-section",children:[u.jsx("h3",{className:"sidebar-section-title",children:h("admin.navigation")}),u.jsxs("nav",{className:"sidebar-nav",children:[u.jsxs("button",{className:"nav-item",onClick:()=>j("performance-radar"),children:[u.jsx(o_,{size:18}),u.jsx("span",{children:h("admin.performance")})]}),u.jsxs("button",{className:"nav-item",onClick:()=>j("daily-message-activity"),children:[u.jsx(l_,{size:18}),u.jsx("span",{children:h("admin.activity")})]}),u.jsxs("button",{className:"nav-item",onClick:()=>j("recent-conversations"),children:[u.jsx(jv,{size:18}),u.jsx("span",{children:h("admin.conversations")})]}),u.jsxs("button",{className:"nav-item",onClick:()=>j("user-feedback"),children:[u.jsx(Kse,{size:18}),u.jsx("span",{children:h("admin.feedback")})]}),u.jsxs("button",{className:"nav-item",onClick:()=>j("prompt-control"),children:[u.jsx(Hse,{size:18}),u.jsx("span",{children:"Prompt"})]}),u.jsxs("button",{className:"nav-item",onClick:()=>l("/admin/knowledge-management"),children:[u.jsx(s_,{size:18}),u.jsx("span",{children:h("admin.knowledgeBase")})]})]})]})]})})}const Jse=e=>[{value:"3d",label:e("admin.last3Days")},{value:"7d",label:e("admin.last7Days")},{value:"14d",label:e("admin.last2Weeks")},{value:"21d",label:e("admin.last3Weeks")},{value:"30d",label:e("admin.last30Days")},{value:"90d",label:e("admin.last3Months")},{value:"custom",label:e("admin.customRange")}];function Xse({data:e,selectedDate:t,onDateChange:n,title:r="Performance Timeline",includeSimulatedData:i,onIncludeSimulatedDataChange:a,estimationMode:o,onEstimationModeChange:s}){var G,I;const{t:l}=Ze(),[c,d]=v.useState(!1),[f,h]=v.useState(800),[m,p]=v.useState(!1),[g,y]=v.useState(null),[x,b]=v.useState("21d"),[w,j]=v.useState(""),[S,k]=v.useState(""),[_,N]=v.useState(!1),P=v.useRef(null);v.useEffect(()=>{if(c&&e.length>0){const R=e.findIndex(C=>C.Date===t);P.current=window.setInterval(()=>{const C=R>=0?(R+1)%e.length:0;n(e[C].Date)},f)}else P.current&&(clearInterval(P.current),P.current=null);return()=>{P.current&&clearInterval(P.current)}},[c,t,e,f,n]);const E=()=>{d(!c)},T=R=>{const C=[R.Toxicity,R["Prompt Injection"],R["Answer Correctness"],R["Answer Relevancy"],R.Length,R.Tone];return Math.round(C.reduce((Q,q)=>Q+q,0)/C.length*100)},L=()=>{const R=new Date,C=new Date;switch(x){case"3d":C.setDate(R.getDate()-3);break;case"7d":C.setDate(R.getDate()-7);break;case"14d":C.setDate(R.getDate()-14);break;case"21d":C.setDate(R.getDate()-21);break;case"30d":C.setDate(R.getDate()-30);break;case"90d":C.setDate(R.getDate()-90);break;case"custom":if(w&&S)return{startDate:w,endDate:S};C.setDate(R.getDate()-21);break}return{startDate:C.toISOString().split("T")[0],endDate:R.toISOString().split("T")[0]}},$=v.useMemo(()=>{const{startDate:R,endDate:C}=L();return e.filter(Q=>Q.Date>=R&&Q.Date<=C)},[e,x,w,S]),B=Math.max(...$.map(T),100),D=$.find(R=>R.Date===t),z=new Date().toISOString().split("T")[0];return e.length===0?u.jsx("div",{className:"performance-timeline",children:u.jsx("div",{className:"timeline-loading",children:"Loading data..."})}):u.jsxs("div",{className:"performance-timeline",children:[u.jsxs("div",{className:"timeline-single-row",children:[u.jsx("div",{className:"timeline-title-compact",children:u.jsx("h3",{children:r})}),u.jsxs("div",{className:"timeline-controls-compact",children:[u.jsx("div",{className:"date-range-selector",style:{marginRight:"12px"},children:u.jsx("select",{value:x,onChange:R=>{const C=R.target.value;b(C),N(C==="custom"),C!=="custom"&&(j(""),k(""))},className:"date-select-compact",style:{fontSize:"13px"},children:Jse(l).map(R=>u.jsx("option",{value:R.value,children:R.label},R.value))})}),_&&u.jsxs("div",{className:"custom-date-inputs",style:{display:"flex",gap:"4px",marginRight:"12px"},children:[u.jsx("input",{type:"date",value:w,onChange:R=>{j(R.target.value),S||k(new Date().toISOString().split("T")[0])},className:"date-select-compact",style:{fontSize:"11px",padding:"4px 6px"},max:new Date().toISOString().split("T")[0]}),u.jsx("span",{style:{color:"var(--admin-text-muted)",fontSize:"11px",alignSelf:"center"},children:"~"}),u.jsx("input",{type:"date",value:S,onChange:R=>k(R.target.value),className:"date-select-compact",style:{fontSize:"11px",padding:"4px 6px"},min:w,max:new Date().toISOString().split("T")[0]})]}),u.jsxs("div",{className:"date-selector-compact",children:[u.jsxs("label",{children:[l("admin.date"),":"]}),u.jsx("select",{className:"date-select-compact",value:t,onChange:R=>n(R.target.value),children:$.map(R=>u.jsx("option",{value:R.Date,children:R.Date},R.Date))})]}),u.jsx("button",{className:"play-btn-compact",onClick:E,title:c?"Pause":"Play",children:c?"⏸":"▶"}),c&&u.jsxs("select",{className:"speed-control-compact",value:f,onChange:R=>h(Number(R.target.value)),children:[u.jsx("option",{value:1200,children:"Slow"}),u.jsx("option",{value:800,children:"Normal"}),u.jsx("option",{value:400,children:"Fast"})]}),u.jsx("div",{className:"data-indicator-compact",children:u.jsx("span",{className:`indicator ${D!=null&&D.isSimulated?"estimated":"actual"}`,children:D!=null&&D.isSimulated?`📊 ${l("admin.estimated")}`:`📈 ${l("admin.actual")}`})}),u.jsxs("div",{className:"settings-container-compact",children:[u.jsx("button",{className:`settings-btn-compact ${m?"active":""}`,onClick:()=>p(!m),title:"Settings",children:"⚙️"}),m&&u.jsxs("div",{className:"settings-panel-compact",children:[u.jsx("div",{className:"setting-item",children:u.jsxs("label",{className:"checkbox-label",children:[u.jsx("input",{type:"checkbox",checked:i,onChange:R=>a(R.target.checked)}),l("admin.estimated")," 데이터 포함"]})}),u.jsxs("div",{className:"setting-item",children:[u.jsx("label",{className:"select-label",children:"추정 모드:"}),u.jsxs("select",{className:"mode-select",value:o,onChange:R=>s(R.target.value),children:[u.jsx("option",{value:"simple",children:"간단 (±5%)"}),u.jsx("option",{value:"improved",children:"개선 (±4% + 패턴)"}),u.jsx("option",{value:"realistic",children:"현실적 (트렌드 + 주간)"})]})]})]})]})]})]}),u.jsxs("div",{className:"timeline-chart",children:[u.jsx("div",{className:"chart-container",children:$.map(R=>{const C=T(R),Q=C/B*100,q=R.Date===t,A=R.Date===z,le=R.isSimulated,U=["bar"];return q?U.push("selected"):A?U.push("today"):le?U.push("simulated"):U.push("actual"),u.jsxs("div",{className:U.join(" "),style:{height:`${Math.max(Q,5)}%`,position:"relative"},onClick:()=>n(R.Date),onMouseEnter:()=>y(R.Date),onMouseLeave:()=>y(null),title:`${R.Date}: ${C}% ${le?`(${l("admin.estimated")})`:`(${l("admin.actual")})`}`,children:[u.jsx("span",{className:"bar-value",children:C}),g===R.Date&&u.jsxs("div",{className:"bar-hover-info",children:[u.jsx("div",{className:"hover-date",children:R.Date}),u.jsxs("div",{className:"hover-score",children:[C,"%"]}),u.jsx("div",{className:"hover-type",children:l(le?"admin.estimated":"admin.actual")})]})]},R.Date)})}),u.jsxs("div",{className:"date-labels",children:[u.jsx("span",{className:"date-start",children:(G=$[0])==null?void 0:G.Date}),u.jsx("span",{className:"date-end",children:(I=$[$.length-1])==null?void 0:I.Date})]})]})]})}function Qse({relevance:e,tone:t,length:n,accuracy:r,toxicity:i,promptInjection:a,timelineData:o=[],selectedDate:s="",onDateChange:l=()=>{},includeSimulatedData:c=!1,onIncludeSimulatedDataChange:d=()=>{},estimationMode:f="simple",onEstimationModeChange:h=()=>{}}){const{t:m}=Ze(),[p,g]=v.useState({relevance:!0,tone:!0,length:!0,accuracy:!0,toxicity:!0,promptInjection:!0});v.useState(!1);const y=[{key:"relevance",label:m("admin.relevance"),value:e,description:m("admin.contentMatching"),icon:"⚡",color:"#ff6b6b"},{key:"tone",label:m("admin.tone"),value:t,description:m("admin.responseStyle"),icon:"🎭",color:"#4ecdc4"},{key:"length",label:m("admin.length"),value:n,description:m("admin.responseSize"),icon:"📏",color:"#45b7d1"},{key:"accuracy",label:m("admin.accuracy"),value:r,description:m("admin.correctAnswers"),icon:"✓",color:"#96ceb4"},{key:"toxicity",label:m("admin.toxicity"),value:i,description:m("admin.safetyCheck"),icon:"🛡️",color:"#feca57"},{key:"promptInjection",label:m("admin.promptInjection"),value:a,description:m("admin.securityFilter"),icon:"🔒",color:"#ff9ff3"}],x=y.filter($=>p[$.key]),b=$=>{g(B=>({...B,[$]:!B[$]}))},w=Object.values(p).filter(Boolean).length,j=x.length>0?Math.round(x.reduce(($,B)=>$+B.value,0)/x.length):0,S=400,k=S/2,_=k,N=130,P=($,B,D)=>{const z=360/B,G=$*z-90,I=D/100*N,R=Math.cos(G*Math.PI/180)*I,C=Math.sin(G*Math.PI/180)*I;return{x:R,y:C,angle:G}},E=()=>x.length<3?"":`M ${x.map((B,D)=>{const z=P(D,x.length,B.value);return`${z.x+k},${z.y+k}`}).join(" L ")} Z`,T=($,B)=>{const D=360/B,z=$*D-90,G=N+50,I=Math.cos(z*Math.PI/180)*G,R=Math.sin(z*Math.PI/180)*G;let C="center";return z>=-45&&z<=45?C="center":z>45&&z<=135?C="left":z>135||z<=-135?C="center":C="right",{x:I,y:R,angle:z,textAlign:C}},L=()=>{const $=[];for(let B=20;B<=100;B+=20)$.push(u.jsx("circle",{cx:k,cy:_,r:B/100*N,fill:"none",stroke:"rgba(59, 230, 255, 0.15)",strokeWidth:"1"},`circle-${B}`));for(let B=0;B<x.length;B++){const D=360/x.length,z=B*D-90,G=Math.cos(z*Math.PI/180)*N,I=Math.sin(z*Math.PI/180)*N;$.push(u.jsx("line",{x1:k,y1:_,x2:k+G,y2:_+I,stroke:"rgba(59, 230, 255, 0.2)",strokeWidth:"1"},`line-${B}`))}return $};return u.jsxs("div",{className:"performance-radar-section",children:[u.jsxs("div",{className:"radar-main-layout",children:[u.jsxs("div",{className:"radar-chart-section",children:[u.jsxs("div",{className:"radar-header",children:[u.jsx("h2",{className:"radar-title",children:m("admin.performanceRadar")}),u.jsx("p",{className:"radar-description",children:m("admin.performanceRadarDesc")})]}),u.jsxs("div",{className:"radar-chart-container",children:[u.jsxs("div",{className:"radar-chart-large",children:[u.jsxs("svg",{className:"radar-svg-large",width:S,height:S,children:[L(),u.jsx("path",{d:E(),fill:"rgba(59, 230, 255, 0.1)",stroke:"rgba(59, 230, 255, 0.8)",strokeWidth:"2"}),x.map(($,B)=>{const D=P(B,x.length,$.value);return u.jsxs("g",{className:"radar-point-large",children:[u.jsx("circle",{className:"point-dot-large",cx:D.x+k,cy:D.y+k,r:"6",fill:$.color,stroke:"white",strokeWidth:"2"}),u.jsx("text",{x:D.x+k,y:D.y+k-15,textAnchor:"middle",className:"point-score-box",fill:$.color,fontSize:"12",fontWeight:"bold",children:$.value})]},B)})]}),u.jsxs("div",{className:"radar-center-large",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[u.jsx("div",{className:"center-score-large",children:j}),u.jsx("div",{className:"center-label-large",children:"OVERALL"})]})]}),y.map(($,B)=>{const D=T(B,y.length),z=p[$.key],G=$.key==="promptInjection",I=200,R=200,C=I+D.x,Q=R+D.y;return u.jsx("div",{className:`radar-label-clean radar-label-${$.key.toLowerCase()} ${z?"":"label-inactive"}`,style:{position:"absolute",left:`${C}px`,top:`${Q}px`,transform:"translate(-50%, -50%)",zIndex:10,borderColor:$.color,opacity:z?1:.5},children:u.jsxs("div",{className:"label-content",children:[u.jsx("span",{className:"label-name",style:{color:$.color},children:G?"PROMPT INJECTION":$.label.toUpperCase()}),u.jsx("span",{className:"label-score",style:{color:$.color},children:$.value})]})},B)})]})]}),u.jsxs("div",{className:"module-control-panel",children:[u.jsxs("div",{className:"module-control-header-side",children:[u.jsx("span",{className:"control-title",children:m("admin.moduleControl")}),u.jsxs("span",{className:"control-badge",children:[w," / ",y.length]})]}),u.jsx("div",{className:"control-list-side",children:y.map($=>u.jsxs("div",{className:"control-item-side","data-key":$.key,children:[u.jsxs("div",{className:"control-info",children:[u.jsx("span",{className:"control-icon",style:{color:$.color},children:$.icon}),u.jsxs("div",{className:"control-text",children:[u.jsx("span",{className:"control-label",children:$.label}),u.jsx("span",{className:"control-description",children:$.description})]})]}),u.jsx("div",{className:"control-actions",children:u.jsx("button",{className:`control-toggle-btn ${p[$.key]?"enabled":"disabled"}`,onClick:()=>b($.key),style:{borderColor:$.color,backgroundColor:p[$.key]?$.color:"transparent"},children:p[$.key]?"ON":"OFF"})})]},$.key))})]})]}),o&&o.length>0&&u.jsx("div",{className:"timeline-section-wrapper",style:{marginTop:"32px"},children:u.jsx(Xse,{data:o,selectedDate:s,onDateChange:l,title:"Performance Timeline",includeSimulatedData:c,onIncludeSimulatedDataChange:d,estimationMode:f,onEstimationModeChange:h})})]})}async function Uf(e=100){try{const t=Ie();console.log("Fetching chat data from Supabase...");const{data:n,error:r}=await t.from("chat").select("*").order("created_at",{ascending:!1}).limit(e);if(r)throw console.error("Supabase error:",r),new Error(`Failed to fetch chat data: ${r.message}`);return console.log(`✅ Fetched ${(n==null?void 0:n.length)||0} chat records`),n||[]}catch(t){throw console.error("Failed to fetch chat data:",t),t}}async function sR(e){try{const t=Ie();console.log(`Looking for chat with chat_id: ${e}`);const{data:n,error:r}=await t.from("chat").select("*").eq("chat_id",e).maybeSingle();return r?(console.error("Supabase error:",r),null):(n?console.log(`✅ Found chat for chat_id: ${e}`):console.warn(`No chat found for chat_id: ${e}`),n)}catch(t){return console.error("Error fetching chat by ID:",t),null}}const Zse=e=>[{value:"3d",label:e("admin.last3Days")},{value:"7d",label:e("admin.last7Days")},{value:"14d",label:e("admin.last2Weeks")},{value:"21d",label:e("admin.last3Weeks")},{value:"30d",label:e("admin.last30Days")},{value:"90d",label:e("admin.last3Months")},{value:"custom",label:e("admin.customRange")}];function ele({startDate:e,endDate:t}){const{t:n}=Ze(),[r,i]=v.useState([]),[a,o]=v.useState({totalMessages:0,avgPerDay:0,totalUserFeedback:0,totalAdminFeedback:0,totalCorrected:0,uniqueUsers:0,userSatisfaction:0,adminApproval:0}),[s,l]=v.useState(!0),[c,d]=v.useState("messages"),[f,h]=v.useState("21d"),[m,p]=v.useState(""),[g,y]=v.useState(""),[x,b]=v.useState(!1),w=()=>{if(e&&t)return{startDate:e,endDate:t};const T=new Date,L=new Date;switch(f){case"3d":L.setDate(T.getDate()-3);break;case"7d":L.setDate(T.getDate()-7);break;case"14d":L.setDate(T.getDate()-14);break;case"21d":L.setDate(T.getDate()-21);break;case"30d":L.setDate(T.getDate()-30);break;case"90d":L.setDate(T.getDate()-90);break;case"custom":if(m&&g)return{startDate:m,endDate:g};L.setDate(T.getDate()-21);break}return{startDate:L.toISOString().split("T")[0],endDate:T.toISOString().split("T")[0]}},{startDate:j,endDate:S}=w();v.useEffect(()=>{k()},[j,S,f,m,g]);const k=async()=>{l(!0);try{const[T,L,$]=await Promise.all([Uf(1e3),Ja(),zx()]);console.log("📊 Loaded data:",{chats:T.length,userFeedbacks:L.length,adminFeedbacks:$.length}),T.length>0&&(console.log("Sample chat object:",T[0]),console.log("Sample chat ID:",T[0].id),console.log("Sample chat all keys:",Object.keys(T[0]))),L.length>0&&console.log("Sample user feedback chat_id:",L[0].chat_id),$.length>0&&console.log("Sample admin feedback chat_id:",$[0].chat_id);const B=new Map;L.forEach(M=>{B.has(M.chat_id)||B.set(M.chat_id,[]),B.get(M.chat_id).push(M)});const D=new Map;$.forEach(M=>{D.set(M.chat_id,M)}),console.log("📋 Feedback maps created:",{userFeedbackMapSize:B.size,adminFeedbackMapSize:D.size,sampleUserFeedbackKeys:Array.from(B.keys()).slice(0,3),sampleChatIds:T.slice(0,3).map(M=>M.id)});const z=new Map,G=new Date(j),I=new Date(S);for(let M=new Date(G);M<=I;M.setDate(M.getDate()+1)){const Y=M.toISOString().split("T")[0];z.set(Y,{date:Y,messageCount:0,userFeedbackCount:0,userGoodCount:0,userBadCount:0,adminFeedbackCount:0,adminGoodCount:0,adminBadCount:0,correctedResponseCount:0,uniqueUsers:new Set})}const R=new Set;let C=0,Q=0;console.warn("⚠️ Chat table missing chat_id field - feedback will be estimated by day proportion"),T.forEach(M=>{if(!M.created_at)return;const Y=new Date(M.created_at).toISOString().split("T")[0],F=z.get(Y);F&&(F.messageCount++,F.uniqueUsers.add(M.user_id),R.add(M.user_id))}),L.forEach(M=>{if(!M.created_at)return;const Y=new Date(M.created_at).toISOString().split("T")[0],F=z.get(Y);F&&(F.userFeedbackCount++,M.reaction==="good"&&F.userGoodCount++,M.reaction==="bad"&&F.userBadCount++,C++)}),$.forEach(M=>{const Y=new Date(M.updated_at||M.created_at||"").toISOString().split("T")[0],F=z.get(Y);F&&(F.adminFeedbackCount++,M.feedback_verdict==="good"&&F.adminGoodCount++,M.feedback_verdict==="bad"&&F.adminBadCount++,M.corrected_response&&F.correctedResponseCount++,Q++)}),console.log("🔍 Feedback distribution by date:",{totalChats:T.length,userFeedbackDistributed:C,adminFeedbackDistributed:Q,totalUserFeedbacks:L.length,totalAdminFeedbacks:$.length});const q=Array.from(z.values()).find(M=>M.userFeedbackCount>0||M.adminFeedbackCount>0);q?console.log("📊 Sample day with feedback:",{date:q.date,messages:q.messageCount,userFeedback:q.userFeedbackCount,adminFeedback:q.adminFeedbackCount,corrected:q.correctedResponseCount}):console.log("⚠️ No days with feedback data found"),console.log("💡 To fix: Add chat_id column to Supabase chat table to match feedback.chat_id");const A=Array.from(z.values());i(A);const le=A.reduce((M,Y)=>M+Y.messageCount,0),U=A.reduce((M,Y)=>M+Y.userFeedbackCount,0),Z=A.reduce((M,Y)=>M+Y.userGoodCount,0),J=A.reduce((M,Y)=>M+Y.adminFeedbackCount,0),ne=A.reduce((M,Y)=>M+Y.adminGoodCount,0),X=A.reduce((M,Y)=>M+Y.correctedResponseCount,0);o({totalMessages:le,avgPerDay:A.length>0?Math.round(le/A.length*10)/10:0,totalUserFeedback:U,totalAdminFeedback:J,totalCorrected:X,uniqueUsers:R.size,userSatisfaction:U>0?Math.round(Z/U*100):0,adminApproval:J>0?Math.round(ne/J*100):0}),console.log("📈 Stats:",{totalMessages:le,totalUserFeedback:U,totalAdminFeedback:J,daysWithData:A.filter(M=>M.messageCount>0).length})}catch(T){console.error("Failed to load daily message activity:",T)}finally{l(!1)}},_=T=>c==="messages"?T.messageCount:c==="feedback"?T.userFeedbackCount:T.adminFeedbackCount,N=T=>{if(c==="feedback"){const L=T.userFeedbackCount;return L>0?Math.round(T.userGoodCount/L*100):null}else if(c==="admin"){const L=T.adminFeedbackCount;return L>0?Math.round(T.adminGoodCount/L*100):null}return null},P=T=>{const L=new Date(T),$=L.getMonth()+1,B=L.getDate(),D=L.toLocaleDateString("en-US",{weekday:"short"});return`${$}/${B} ${D}`},E=Math.max(...r.map(T=>_(T)),1);return u.jsxs("div",{className:"admin-card",style:{marginBottom:"24px"},children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--admin-text)"},children:n("admin.dailyMessageActivity")}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("select",{value:f,onChange:T=>{const L=T.target.value;h(L),b(L==="custom"),L!=="custom"&&(p(""),y(""))},className:"px-3 py-1 text-sm rounded border",style:{backgroundColor:"var(--admin-bg)",color:"var(--admin-text)",borderColor:"var(--admin-border)"},children:Zse(n).map(T=>u.jsx("option",{value:T.value,children:T.label},T.value))})}),x&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"date",value:m,onChange:T=>{p(T.target.value),g||y(new Date().toISOString().split("T")[0])},className:"px-2 py-1 text-xs rounded border",style:{backgroundColor:"var(--admin-bg)",color:"var(--admin-text)",borderColor:"var(--admin-border)"},max:new Date().toISOString().split("T")[0]}),u.jsx("span",{style:{color:"var(--admin-text-muted)"},children:"to"}),u.jsx("input",{type:"date",value:g,onChange:T=>y(T.target.value),className:"px-2 py-1 text-xs rounded border",style:{backgroundColor:"var(--admin-bg)",color:"var(--admin-text)",borderColor:"var(--admin-border)"},min:m,max:new Date().toISOString().split("T")[0]})]}),u.jsxs("div",{className:"text-sm",style:{color:"var(--admin-text-muted)"},children:[j," to ",S]})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px",marginBottom:"20px"},children:[u.jsxs("div",{style:{padding:"12px 16px",borderRadius:"8px",backgroundColor:"rgba(9, 14, 34, 0.4)",border:"1px solid var(--admin-border)"},children:[u.jsx("div",{style:{fontSize:"11px",color:"var(--admin-text-muted)",marginBottom:"4px"},children:n("admin.totalMessages")}),u.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--admin-primary)"},children:a.totalMessages}),u.jsxs("div",{style:{fontSize:"10px",color:"var(--admin-text-muted)"},children:[n("admin.average"),": ",a.avgPerDay," ",n("admin.avgPerDay")]})]}),u.jsxs("div",{style:{padding:"12px 16px",borderRadius:"8px",backgroundColor:"rgba(9, 14, 34, 0.4)",border:"1px solid var(--admin-border)"},children:[u.jsx("div",{style:{fontSize:"11px",color:"var(--admin-text-muted)",marginBottom:"4px"},children:n("admin.userFeedbackCount")}),u.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--admin-success)"},children:a.totalUserFeedback}),u.jsxs("div",{style:{fontSize:"10px",color:"var(--admin-text-muted)"},children:[a.userSatisfaction,"% ",n("admin.satisfaction")]})]}),u.jsxs("div",{style:{padding:"12px 16px",borderRadius:"8px",backgroundColor:"rgba(9, 14, 34, 0.4)",border:"1px solid var(--admin-border)"},children:[u.jsx("div",{style:{fontSize:"11px",color:"var(--admin-text-muted)",marginBottom:"4px"},children:n("admin.adminReviews")}),u.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--admin-accent)"},children:a.totalAdminFeedback}),u.jsxs("div",{style:{fontSize:"10px",color:"var(--admin-text-muted)"},children:[a.adminApproval,"% ",n("admin.approval")]})]}),u.jsxs("div",{style:{padding:"12px 16px",borderRadius:"8px",backgroundColor:"rgba(9, 14, 34, 0.4)",border:"1px solid var(--admin-border)"},children:[u.jsx("div",{style:{fontSize:"11px",color:"var(--admin-text-muted)",marginBottom:"4px"},children:n("admin.corrected")}),u.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--admin-warning, #ff9800)"},children:a.totalCorrected}),u.jsxs("div",{style:{fontSize:"10px",color:"var(--admin-text-muted)"},children:[a.uniqueUsers," ",n("admin.uniqueUsers")]})]})]}),u.jsxs("div",{className:"flex gap-2 mb-4",children:[u.jsx("button",{onClick:()=>d("messages"),className:`px-4 py-2 rounded-md text-sm transition-colors ${c==="messages"?"font-semibold":""}`,style:{backgroundColor:c==="messages"?"var(--admin-primary)":"rgba(9, 14, 34, 0.4)",color:c==="messages"?"#041220":"var(--admin-text)",border:"1px solid var(--admin-border)"},children:n("admin.messages")}),u.jsx("button",{onClick:()=>d("feedback"),className:`px-4 py-2 rounded-md text-sm transition-colors ${c==="feedback"?"font-semibold":""}`,style:{backgroundColor:c==="feedback"?"var(--admin-success)":"rgba(9, 14, 34, 0.4)",color:c==="feedback"?"#ffffff":"var(--admin-text)",border:"1px solid var(--admin-border)"},children:n("admin.userFeedbackCount")}),u.jsx("button",{onClick:()=>d("admin"),className:`px-4 py-2 rounded-md text-sm transition-colors ${c==="admin"?"font-semibold":""}`,style:{backgroundColor:c==="admin"?"var(--admin-accent)":"rgba(9, 14, 34, 0.4)",color:c==="admin"?"#ffffff":"var(--admin-text)",border:"1px solid var(--admin-border)"},children:n("admin.adminReviews")})]}),s?u.jsx("div",{className:"flex items-center justify-center p-8",children:u.jsx("p",{style:{color:"var(--admin-text-muted)"},children:"Loading activity data..."})}):r.length===0?u.jsx("div",{className:"flex items-center justify-center p-8",children:u.jsx("p",{style:{color:"var(--admin-text-muted)"},children:"No data available for this period"})}):u.jsxs("div",{children:[u.jsx("div",{style:{height:"200px",display:"flex",alignItems:"flex-end",gap:"8px",padding:"20px 0",borderBottom:"1px solid var(--admin-border)"},children:r.map((T,L)=>{const $=_(T),B=N(T),D=E>0?$/E*100:0;return L<3&&console.log(`📊 Day ${L} (${T.date}):`,{viewMode:c,value:$,score:B,messageCount:T.messageCount,userFeedbackCount:T.userFeedbackCount,adminFeedbackCount:T.adminFeedbackCount,correctedCount:T.correctedResponseCount}),u.jsxs("div",{style:{flex:1,height:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"center",position:"relative"},children:[$>0&&u.jsx("div",{style:{position:"absolute",top:`calc(${100-D}% - 25px)`,backgroundColor:c==="messages"?"var(--admin-primary)":c==="feedback"?"var(--admin-success)":"var(--admin-accent)",color:c==="messages"?"#041220":"#ffffff",padding:"2px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:$}),u.jsx("div",{style:{width:"100%",maxWidth:"40px",height:$>0?`${D}%`:"2px",background:$>0?c==="messages"?"linear-gradient(180deg, var(--admin-primary), var(--admin-primary-600))":c==="feedback"?"linear-gradient(180deg, var(--admin-success), #0d9488)":"linear-gradient(180deg, var(--admin-accent), #8b5cf6)":"rgba(100, 116, 139, 0.2)",borderRadius:"4px 4px 0 0",cursor:"pointer",transition:"opacity 0.2s"},title:`${P(T.date)}
${$} ${c}${B!==null?`
${B}% positive`:""}`,onMouseEnter:z=>z.currentTarget.style.opacity="0.8",onMouseLeave:z=>z.currentTarget.style.opacity="1"})]},T.date)})}),u.jsx("div",{style:{display:"flex",gap:"8px",paddingTop:"12px"},children:r.map(T=>u.jsx("div",{style:{flex:1,textAlign:"center",fontSize:"10px",color:"var(--admin-text-muted)"},children:P(T.date)},`label-${T.date}`))}),u.jsxs("div",{className:"mt-4 p-3 rounded text-xs flex items-center gap-2",style:{backgroundColor:"rgba(59, 230, 255, 0.05)",color:"var(--admin-text-muted)",border:"1px solid rgba(59, 230, 255, 0.1)"},children:[u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),u.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),u.jsxs("span",{children:[c==="messages"&&"Total messages sent per day",c==="feedback"&&"User feedback received per day",c==="admin"&&"Admin reviews completed per day"]})]})]})]})}async function c_(){try{const e=Ie();console.log("Fetching latest prompt from Supabase...");const{data:t,error:n}=await e.from("prompts").select("*").order("created_at",{ascending:!1}).limit(1);if(n)throw console.error("Supabase error:",n),new Error(`Failed to fetch prompt: ${n.message}`);if(!t||t.length===0)return console.log("No prompts found in database"),"";const r=t[0];return console.log("✅ Latest prompt fetched:",r.id),r.prompt_text||""}catch(e){throw console.error("Failed to fetch system prompt:",e),e}}async function tle(e){try{const t=Ie();console.log("💾 Creating new prompt in Supabase...");const{data:n,error:r}=await t.from("prompts").insert([{prompt_text:e}]).select();if(r)throw console.error("Supabase error:",r),new Error(`Failed to create prompt: ${r.message}`);const i=n[0];console.log("✅ New prompt created:",i.id)}catch(t){throw console.error("Failed to update system prompt:",t),t}}async function nle(e=10){try{const t=Ie();console.log("🔄 Fetching prompt history from Supabase..."),console.log("📊 Query: SELECT id, prompt_text, created_at FROM prompts ORDER BY created_at DESC LIMIT",e);const{data:n,error:r}=await t.from("prompts").select("id, prompt_text, created_at").order("created_at",{ascending:!1}).limit(e);if(console.log("📋 Raw Supabase response:",{data:n,error:r}),r)throw console.error("❌ Supabase error:",r),new Error(`Failed to fetch prompt history: ${r.message}`);return!n||n.length===0?(console.log("⚠️ No prompt history found in database"),[]):(console.log("✅ Prompt history fetched successfully:",n.length,"entries"),console.log("📚 First entry:",n[0]),n)}catch(t){throw console.error("❌ Failed to fetch prompt history:",t),t}}async function rle(e){try{const t=Ie();console.log("🗑️ Deleting prompt with ID:",e);const{error:n}=await t.from("prompts").delete().eq("id",e);if(n)throw console.error("❌ Supabase error:",n),new Error(`Failed to delete prompt: ${n.message}`);console.log("✅ Prompt deleted successfully:",e)}catch(t){throw console.error("❌ Failed to delete prompt:",t),t}}async function ile(){try{const e=await fetch("/prompt-api/force-prompt-reload",{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Force reload failed: ${e.status} ${e.statusText}`);return await e.json()}catch(e){return console.error("Force reload failed:",e),{status:"skipped",message:"Force reload endpoint not available"}}}function ale(){const{t:e}=Ze(),[t,n]=v.useState(""),[r,i]=v.useState(!0),[a,o]=v.useState(null),[s,l]=v.useState(!1),c=v.useRef(null),[d,f]=v.useState(!1),[h,m]=v.useState(!1),[p,g]=v.useState(!1),[y,x]=v.useState([]),[b,w]=v.useState(!1),[j,S]=v.useState(!1),[k,_]=v.useState({isOpen:!1,promptId:null,promptText:""}),[N,P]=v.useState({isOpen:!1,message:"",isSuccess:!1});v.useEffect(()=>{E()},[]);const E=async()=>{try{console.log("Loading system prompt...");const C=await c_();console.log("System prompt loaded"),n(C),o(new Date)}catch(C){console.error("Failed to load system prompt:",C),P({isOpen:!0,message:C instanceof Error?C.message:"Failed to load system prompt",isSuccess:!1})}finally{i(!1)}},T=async()=>{S(!0);try{console.log("🔄 Loading prompt history...");const C=await nle(10);console.log("📚 Raw history data:",C),x(C),console.log("✅ Prompt history loaded:",C.length,"entries")}catch(C){console.error("❌ Failed to load prompt history:",C),P({isOpen:!0,message:`Failed to load prompt history: ${C instanceof Error?C.message:"Unknown error"}`,isSuccess:!1})}finally{S(!1)}},L=async()=>{l(!0);try{const C=await c_();n(C),o(new Date)}catch(C){console.error("Failed to refresh system prompt:",C),P({isOpen:!0,message:C instanceof Error?C.message:"Failed to refresh system prompt",isSuccess:!1})}finally{l(!1)}},$=()=>{f(!0)},B=async()=>{m(!0),f(!1);try{console.log("Saving system prompt..."),await tle(t),console.log("System prompt saved successfully"),console.log("Attempting force reload...");const C=await ile();console.log("Force reload result:",C),P({isOpen:!0,message:"System prompt updated successfully!"+(C.status==="skipped"?"":` ${C.message}`),isSuccess:!0}),o(new Date)}catch(C){console.error("Save operation failed:",C),P({isOpen:!0,message:C instanceof Error?C.message:"Failed to update system prompt",isSuccess:!1})}finally{m(!1)}},D=()=>{f(!1)},z=()=>{P({isOpen:!1,message:"",isSuccess:!1})},G=(C,Q)=>{_({isOpen:!0,promptId:C,promptText:Q.substring(0,100)+(Q.length>100?"...":"")})},I=async()=>{if(k.promptId)try{console.log("🗑️ Deleting prompt:",k.promptId),await rle(k.promptId),x(C=>C.filter(Q=>Q.id!==k.promptId)),P({isOpen:!0,message:"Prompt deleted successfully!",isSuccess:!0})}catch(C){console.error("❌ Failed to delete prompt:",C),P({isOpen:!0,message:`Failed to delete prompt: ${C instanceof Error?C.message:"Unknown error"}`,isSuccess:!1})}finally{_({isOpen:!1,promptId:null,promptText:""})}},R=()=>{_({isOpen:!1,promptId:null,promptText:""})};return u.jsxs("div",{className:"admin-card",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--admin-text)"},children:e("admin.systemPrompt")}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>{w(!b),!b&&y.length===0&&T()},className:"px-3 py-1 text-xs rounded transition-colors hover:bg-blue-500/20",style:{color:"var(--admin-primary)",border:"1px solid rgba(59, 230, 255, 0.3)"},children:"📚 History"}),u.jsx("button",{onClick:()=>g(!p),className:"px-3 py-1 text-xs rounded transition-colors hover:bg-blue-500/20",style:{color:"var(--admin-primary)",border:"1px solid rgba(59, 230, 255, 0.3)"},children:p?"📉 Collapse":"📈 Expand"}),a&&u.jsxs("span",{className:"text-xs",style:{color:"var(--admin-text-muted)"},children:[e("admin.lastRefreshed"),": ",a.toLocaleString()]}),u.jsx("button",{className:"icon-btn",onClick:L,disabled:s,title:e("actions.refresh"),children:u.jsx(xm,{size:18,className:s?"animate-spin":""})})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("textarea",{ref:c,className:"w-full p-3 rounded-md font-mono text-sm",style:{backgroundColor:"rgba(9, 14, 34, 0.6)",border:"1px solid rgba(59, 230, 255, 0.15)",color:"var(--admin-text)",minHeight:p?"80vh":"300px",maxHeight:p?"none":"400px",resize:p?"none":"vertical"},placeholder:r?e("admin.loading"):"Enter your prompt instructions here...",value:t,onChange:C=>n(C.target.value),disabled:r}),b&&u.jsxs("div",{className:"mt-4 p-4 rounded-lg",style:{backgroundColor:"var(--admin-bg-secondary)"},children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h4",{className:"text-sm font-semibold",style:{color:"var(--admin-text)"},children:"📚 Prompt History"}),u.jsx("button",{onClick:T,disabled:j,className:"text-xs px-2 py-1 rounded transition-colors hover:bg-blue-500/20 disabled:opacity-50",style:{color:"var(--admin-primary)",border:"1px solid rgba(59, 230, 255, 0.3)"},children:j?"⏳ Loading...":"🔄 Refresh"})]}),j?u.jsx("p",{className:"text-sm",style:{color:"var(--admin-text-muted)"},children:"🔄 Loading history..."}):y.length===0?u.jsx("p",{className:"text-sm",style:{color:"var(--admin-text-muted)"},children:'No history available. Click "Refresh" to load.'}):u.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:y.map((C,Q)=>u.jsxs("div",{className:"p-3 rounded border hover:bg-blue-500/10 transition-colors",style:{borderColor:"var(--admin-border)",backgroundColor:Q===0?"rgba(59, 230, 255, 0.1)":"transparent"},children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs font-medium",style:{color:"var(--admin-text)"},children:Q===0?"🟢 Current":`#${Q+1}`}),u.jsx("button",{onClick:q=>{q.stopPropagation(),n(C.prompt_text)},className:"text-xs px-2 py-1 rounded transition-colors hover:bg-blue-500/20",style:{color:"var(--admin-primary)",border:"1px solid rgba(59, 230, 255, 0.3)"},title:"Load this prompt",children:"📥 Load"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs",style:{color:"var(--admin-text-muted)"},children:new Date(C.created_at).toLocaleString()}),Q>0&&u.jsx("button",{onClick:q=>{q.stopPropagation(),G(C.id,C.prompt_text)},className:"text-xs px-2 py-1 rounded transition-colors hover:bg-red-500/20",style:{color:"var(--admin-danger)",border:"1px solid rgba(239, 68, 68, 0.3)"},title:"Delete this prompt",children:"🗑️ Delete"})]})]}),u.jsx("p",{className:"text-xs font-mono whitespace-pre-wrap overflow-hidden",style:{color:"var(--admin-text-muted)",maxHeight:"60px",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:C.prompt_text})]},C.id))})]}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{className:"px-6 py-2 rounded-md font-medium transition-all",style:{background:"linear-gradient(180deg, var(--admin-primary), var(--admin-primary-600))",color:"#041220",opacity:r||h?.5:1,cursor:r||h?"not-allowed":"pointer"},onClick:$,disabled:r||h,children:e(r?"admin.loading":h?"admin.saving":"admin.saveChanges")})})]}),d&&u.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",style:{background:"radial-gradient(600px 400px at 50% 0%, rgba(124,140,255,0.12), transparent 60%), rgba(3,8,28,0.55)",backdropFilter:"blur(6px)"},children:u.jsxs("div",{className:"admin-card max-w-md w-full mx-4",children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--admin-text)"},children:e("admin.confirmUpdate")}),u.jsx("p",{className:"mb-6",style:{color:"var(--admin-text-muted)"},children:e("admin.confirmUpdateMessage")}),u.jsxs("div",{className:"flex justify-end gap-3",children:[u.jsx("button",{className:"px-4 py-2 rounded-md",style:{background:"transparent",border:"1px solid rgba(59,230,255,0.16)",color:"var(--admin-text)"},onClick:D,children:e("admin.cancel")}),u.jsx("button",{className:"px-4 py-2 rounded-md",style:{background:"linear-gradient(180deg, var(--admin-primary), var(--admin-primary-600))",color:"#041220"},onClick:B,children:e("admin.confirm")})]})]})}),N.isOpen&&u.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",style:{background:"radial-gradient(600px 400px at 50% 0%, rgba(124,140,255,0.12), transparent 60%), rgba(3,8,28,0.55)",backdropFilter:"blur(6px)"},children:u.jsxs("div",{className:"admin-card max-w-md w-full mx-4",children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:N.isSuccess?"var(--admin-success)":"var(--admin-danger)"},children:N.isSuccess?e("admin.success"):e("admin.error")}),u.jsx("p",{className:"mb-6",style:{color:"var(--admin-text)"},children:N.message}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{className:"px-4 py-2 rounded-md",style:{background:"linear-gradient(180deg, var(--admin-primary), var(--admin-primary-600))",color:"#041220"},onClick:z,children:e("admin.close")})})]})}),k.isOpen&&u.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",style:{background:"radial-gradient(600px 400px at 50% 0%, rgba(239,68,68,0.15), transparent 60%), rgba(3,8,28,0.75)",backdropFilter:"blur(8px)"},children:u.jsxs("div",{className:"admin-card max-w-lg w-full mx-4 border-2",style:{borderColor:"var(--admin-danger)"},children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4 p-4 rounded-lg",style:{backgroundColor:"rgba(239, 68, 68, 0.1)"},children:[u.jsx("div",{className:"text-2xl",children:"⚠️"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold",style:{color:"var(--admin-danger)"},children:"DANGER: Permanent Deletion"}),u.jsx("p",{className:"text-sm",style:{color:"var(--admin-text-muted)"},children:"This action cannot be undone!"})]})]}),u.jsxs("div",{className:"mb-4 p-4 rounded-lg border-2",style:{backgroundColor:"rgba(239, 68, 68, 0.05)",borderColor:"rgba(239, 68, 68, 0.3)"},children:[u.jsx("p",{className:"text-sm font-semibold mb-2",style:{color:"var(--admin-danger)"},children:"⚠️ WARNING: You are about to permanently delete this prompt!"}),u.jsxs("ul",{className:"text-sm space-y-1",style:{color:"var(--admin-text)"},children:[u.jsxs("li",{children:["• This action ",u.jsx("strong",{children:"CANNOT BE UNDONE"})]}),u.jsxs("li",{children:["• The prompt will be ",u.jsx("strong",{children:"permanently removed"})," from the database"]}),u.jsxs("li",{children:["• You will ",u.jsx("strong",{children:"lose access"})," to this prompt forever"]}),u.jsxs("li",{children:["• This may affect ",u.jsx("strong",{children:"chatbot behavior"})," if this was the active prompt"]})]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("p",{className:"text-sm font-semibold mb-2",style:{color:"var(--admin-text)"},children:"Prompt to be deleted:"}),u.jsx("div",{className:"p-3 rounded border-2",style:{backgroundColor:"var(--admin-bg-secondary)",borderColor:"rgba(239, 68, 68, 0.2)"},children:u.jsx("p",{className:"text-sm font-mono whitespace-pre-wrap",style:{color:"var(--admin-text-muted)"},children:k.promptText})})]}),u.jsx("div",{className:"mb-6 p-3 rounded",style:{backgroundColor:"rgba(239, 68, 68, 0.1)"},children:u.jsx("p",{className:"text-sm font-bold text-center",style:{color:"var(--admin-danger)"},children:"Are you absolutely sure you want to proceed?"})}),u.jsxs("div",{className:"flex justify-end gap-3",children:[u.jsx("button",{className:"px-6 py-3 rounded-md font-semibold transition-all hover:scale-105",style:{background:"transparent",border:"2px solid rgba(59,230,255,0.3)",color:"var(--admin-primary)"},onClick:R,children:"✅ Cancel (Safe)"}),u.jsx("button",{className:"px-6 py-3 rounded-md font-bold transition-all hover:scale-105",style:{background:"linear-gradient(180deg, #dc2626, #b91c1c)",color:"white",boxShadow:"0 4px 14px 0 rgba(239, 68, 68, 0.4)"},onClick:I,children:"🗑️ DELETE FOREVER"})]})]})})]})}function ole({scrollToChatId:e,highlightedChatId:t,onScrollComplete:n}){const{t:r}=Ze(),[i,a]=v.useState([]),[o,s]=v.useState([]),[l,c]=v.useState(!0),[d,f]=v.useState(null),[h,m]=v.useState(!1),[p,g]=v.useState(null),[y,x]=v.useState(""),[b,w]=v.useState(""),[j,S]=v.useState(!1),[k,_]=v.useState(""),[N,P]=v.useState("date-desc"),[E,T]=v.useState(10),[L,$]=v.useState("CSV"),[B,D]=v.useState(null),[z,G]=v.useState(null),[I,R]=v.useState(null),[C,Q]=v.useState(new Set),[q,A]=v.useState(null),[le,U]=v.useState("table");v.useEffect(()=>{Z()},[]),v.useEffect(()=>{ne()},[i,k,N,B,z,I]),v.useEffect(()=>{if(e){const H=document.getElementById(`chat-${e}`);H&&(H.scrollIntoView({behavior:"smooth",block:"center"}),n==null||n())}},[e,n]);const Z=async()=>{c(!0),f(null);try{const[H,se]=await Promise.all([Uf(50),Ja()]),me=new Map;se.forEach(V=>{me.set(V.chat_id,V)});const O=await Promise.all(H.map(async V=>{const ie=await Vd(V.chat_id);return{...V,user_feedback:me.get(V.chat_id)||null,admin_feedback:ie}}));a(O)}catch(H){console.error("Failed to load conversations:",H);const se=H instanceof Error?H.message:"Failed to load conversations";se.includes("Could not find the table")||se.includes("PGRST")?f(`Database table not accessible. Please check:
1. Table "chat" exists in Supabase
2. Row Level Security (RLS) policies allow SELECT
3. Supabase URL and key are correct`):f(se)}finally{c(!1)}},J=async()=>{m(!0);try{const[H,se]=await Promise.all([Uf(50),Ja()]),me=new Map;se.forEach(V=>{me.set(V.chat_id,V)});const O=H.map(V=>({...V,user_feedback:me.get(V.chat_id)||null}));a(O)}catch(H){console.error("Failed to refresh conversations:",H),f(H instanceof Error?H.message:"Failed to refresh conversations")}finally{m(!1)}},ne=()=>{let H=[...i];if(B&&(H=H.filter(se=>se.session_id===B)),z&&(H=H.filter(se=>se.user_id===z)),I&&(H=H.filter(se=>{if(!se.created_at)return!1;const me=new Date(se.created_at).toDateString(),O=new Date(I).toDateString();return me===O})),k){const se=k.toLowerCase();H=H.filter(me=>{var O,V,ie,pe,ge;return((O=me.user_id)==null?void 0:O.toLowerCase().includes(se))||String(me.id||"").toLowerCase().includes(se)||((V=me.chat_id)==null?void 0:V.toLowerCase().includes(se))||((ie=me.session_id)==null?void 0:ie.toLowerCase().includes(se))||((pe=me.chat_message)==null?void 0:pe.toLowerCase().includes(se))||((ge=me.response)==null?void 0:ge.toLowerCase().includes(se))})}H.sort((se,me)=>{switch(N){case"date-desc":return new Date(me.created_at||"").getTime()-new Date(se.created_at||"").getTime();case"date-asc":return new Date(se.created_at||"").getTime()-new Date(me.created_at||"").getTime();case"user":return(se.user_id||"").localeCompare(me.user_id||"");default:return 0}}),s(H)},X=H=>{if(!H)return"N/A";try{return new Date(H).toLocaleString()}catch{return H}},M=(H,se=100)=>H.length<=se?H:H.substring(0,se)+"...",Y=async(H,se)=>{const me=await Vd(H.chat_id);if(me&&me.feedback_verdict!==se){const O=me.feedback_verdict==="good"?"positive":"negative",V=se==="good"?"positive":"negative";if(!window.confirm(`A ${O} feedback was already provided for this chat message/response. Are you sure you would like to change it to a ${V} review? This will remove the previously saved ${O} feedback.`))return}g({chatId:H.chat_id,userMessage:H.chat_message||"",aiResponse:H.response||"",verdict:se,existingFeedback:me}),me?(x(me.feedback_text||""),w(me.corrected_response||"")):(x(""),w(""))},F=async()=>{if(p){if(p.verdict==="bad"&&!y&&!b){alert("For negative feedback, please provide either supervisor feedback or corrected response.");return}S(!0);try{await IN(p.chatId,p.verdict,y,b),g(null),x(""),w(""),alert("Admin feedback submitted successfully!"),J()}catch(H){console.error("Failed to submit admin feedback:",H),alert("Failed to submit feedback. Please try again.")}finally{S(!1)}}},he=()=>{g(null),x(""),w("")},ce=H=>{Q(se=>{const me=new Set(se);return me.has(H)?me.delete(H):me.add(H),me})},ke=async H=>{try{const se=i.find(me=>me.chat_id===H);se&&se.user_feedback?A({chatId:H,feedback:se.user_feedback}):A({chatId:H,feedback:null})}catch(se){console.error("Error fetching user feedback:",se),A({chatId:H,feedback:null})}},Pe=async H=>{const se=H.admin_feedback;se&&(x(se.feedback_text||""),w(se.corrected_response||""),g({chatId:H.chat_id,userMessage:H.chat_message||"",aiResponse:H.response||"",verdict:se.feedback_verdict,existingFeedback:se}))},Ee=H=>{B===H?D(null):(D(H),G(null))},Re=H=>{z===H?G(null):(G(H),D(null))},en=H=>{I===H?R(null):(R(H),D(null),G(null))},Sr=()=>{D(null),G(null),R(null),_("")},Ei=()=>{if(o.length===0){alert("No conversations to export");return}const H=o.map(se=>({chatId:se.id,userId:se.user_id||"",createdAt:se.created_at||"",userMessage:se.chat_message||"",aiResponse:se.response||""}));if(L==="CSV"){const se=["Chat ID","User ID","Created At","User Message","AI Response"],me=H.map(ge=>[ge.chatId,ge.userId,ge.createdAt,`"${ge.userMessage.replace(/"/g,'""')}"`,`"${ge.aiResponse.replace(/"/g,'""')}"`]),O=[se,...me].map(ge=>ge.join(",")).join(`
`),V=new Blob([O],{type:"text/csv;charset=utf-8;"}),ie=document.createElement("a"),pe=URL.createObjectURL(V);ie.setAttribute("href",pe),ie.setAttribute("download",`recent-conversations-${new Date().toISOString().split("T")[0]}.csv`),ie.style.visibility="hidden",document.body.appendChild(ie),ie.click(),document.body.removeChild(ie)}else{const se=JSON.stringify(H,null,2),me=new Blob([se],{type:"application/json;charset=utf-8;"}),O=document.createElement("a"),V=URL.createObjectURL(me);O.setAttribute("href",V),O.setAttribute("download",`recent-conversations-${new Date().toISOString().split("T")[0]}.json`),O.style.visibility="hidden",document.body.appendChild(O),O.click(),document.body.removeChild(O)}};if(l)return u.jsx("div",{className:"admin-card",children:u.jsx("div",{className:"flex items-center justify-center p-8",children:u.jsx("p",{style:{color:"var(--admin-text-muted)"},children:r("admin.loading")})})});if(d)return u.jsx("div",{className:"admin-card",children:u.jsxs("div",{className:"p-4",style:{color:"var(--admin-danger)"},children:[u.jsx("p",{className:"font-semibold mb-2",children:r("admin.error")}),u.jsx("p",{className:"text-sm whitespace-pre-line mb-3",children:d}),d.includes("Row Level Security")&&u.jsxs("div",{className:"mt-3 p-3 rounded text-xs",style:{backgroundColor:"rgba(0,0,0,0.2)",color:"var(--admin-text-muted)"},children:[u.jsx("p",{className:"font-semibold mb-2",children:"To fix RLS in Supabase:"}),u.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[u.jsx("li",{children:"Go to Supabase Dashboard → Table Editor"}),u.jsx("li",{children:'Select "chat" table'}),u.jsx("li",{children:'Click "RLS" tab'}),u.jsx("li",{children:'Add policy: "Enable read access for all users"'}),u.jsxs("li",{children:["Policy command: ",u.jsx("code",{children:"SELECT"}),", Target roles: ",u.jsx("code",{children:"anon"})]})]})]}),u.jsx("button",{onClick:Z,className:"mt-3 px-4 py-2 rounded-md text-sm",style:{background:"linear-gradient(180deg, var(--admin-primary), var(--admin-primary-600))",color:"#041220"},children:r("actions.refresh")})]})});const jr=o.slice(0,E);return u.jsxs("div",{className:"admin-card",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h3",{className:"text-lg font-semibold",style:{color:"var(--admin-text)"},children:[r("admin.recentConversations")," (",o.length,")"]}),u.jsx("button",{className:"icon-btn",onClick:J,disabled:h,title:r("actions.refresh"),children:u.jsx(xm,{size:18,className:h?"animate-spin":""})})]}),u.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-3",children:[u.jsxs("div",{className:"flex items-center gap-1 rounded-md overflow-hidden",style:{border:"1px solid var(--admin-border)"},children:[u.jsx("button",{onClick:()=>U("card"),className:"px-3 py-2 text-sm font-medium transition-colors",style:{backgroundColor:le==="card"?"var(--admin-primary)":"transparent",color:le==="card"?"#041220":"var(--admin-text)"},title:"Card View",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),u.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),u.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),u.jsx("rect",{x:"14",y:"14",width:"7",height:"7"})]})}),u.jsx("button",{onClick:()=>U("table"),className:"px-3 py-2 text-sm font-medium transition-colors",style:{backgroundColor:le==="table"?"var(--admin-primary)":"transparent",color:le==="table"?"#041220":"var(--admin-text)"},title:"Table View",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),u.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),u.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-sm",style:{color:"var(--admin-text)"},children:[r("admin.sortBy"),":"]}),u.jsxs("select",{value:N,onChange:H=>P(H.target.value),className:"px-3 py-2 rounded-md text-sm",style:{backgroundColor:"rgba(9, 14, 34, 0.6)",color:"var(--admin-text)",border:"1px solid var(--admin-border)"},children:[u.jsx("option",{value:"date-desc",children:r("admin.dateTimeNewest")}),u.jsx("option",{value:"date-asc",children:r("admin.dateTimeOldest")}),u.jsxs("option",{value:"user",children:[r("admin.user")," ID"]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-[200px]",children:[u.jsxs("span",{className:"text-sm",style:{color:"var(--admin-text)"},children:[r("admin.search"),":"]}),u.jsx("input",{type:"text",placeholder:r("admin.searchConversations"),value:k,onChange:H=>_(H.target.value),className:"flex-1 px-3 py-2 rounded-md text-sm",style:{backgroundColor:"rgba(9, 14, 34, 0.6)",color:"var(--admin-text)",border:"1px solid var(--admin-border)"}})]}),(B||z||I)&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs",style:{color:"var(--admin-text-muted)"},children:"Filters:"}),B&&u.jsxs("span",{className:"px-2 py-1 rounded text-xs",style:{backgroundColor:"rgba(34, 197, 94, 0.2)",color:"var(--admin-success)"},children:["Session: ",B]}),z&&u.jsxs("span",{className:"px-2 py-1 rounded text-xs",style:{backgroundColor:"rgba(59, 130, 246, 0.2)",color:"var(--admin-primary)"},children:["User: ",z]}),I&&u.jsxs("span",{className:"px-2 py-1 rounded text-xs",style:{backgroundColor:"rgba(168, 85, 247, 0.2)",color:"var(--admin-accent)"},children:["Date: ",new Date(I).toLocaleDateString()]}),u.jsx("button",{onClick:Sr,className:"px-2 py-1 rounded text-xs hover:bg-gray-500/20",style:{color:"var(--admin-text-muted)"},title:"Clear all filters",children:"✕ Clear"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("select",{className:"px-3 py-2 rounded-md text-sm",style:{backgroundColor:"rgba(9, 14, 34, 0.6)",color:"var(--admin-text)",border:"1px solid var(--admin-border)"},value:L,onChange:H=>$(H.target.value),children:[u.jsx("option",{children:"CSV"}),u.jsx("option",{children:"JSON"})]}),u.jsx("button",{onClick:Ei,className:"px-4 py-2 rounded-md text-sm font-medium",style:{backgroundColor:"rgba(59, 230, 255, 0.1)",color:"var(--admin-primary)",border:"1px solid var(--admin-primary)"},children:"Export"})]})]}),jr.length===0?u.jsx("div",{className:"text-center p-8",style:{color:"var(--admin-text-muted)"},children:u.jsx("p",{children:k?"No conversations match your search":"No conversations found"})}):le==="table"?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",style:{borderCollapse:"separate",borderSpacing:0},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{backgroundColor:"rgba(9, 14, 34, 0.6)",borderBottom:"2px solid var(--admin-border)"},children:[u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"100px"},children:"Date"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"100px"},children:"User ID"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"120px"},children:"Session ID"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"200px"},children:"User Message"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"200px"},children:"AI Response"}),u.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"80px"},children:"User FB"}),u.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"100px"},children:"Admin"})]})}),u.jsx("tbody",{children:jr.map((H,se)=>u.jsxs("tr",{id:`chat-${H.chat_id}`,className:"border-b transition-colors hover:bg-gray-100/5",style:{backgroundColor:t===H.chat_id?"rgba(59, 230, 255, 0.1)":se%2===0?"rgba(9, 14, 34, 0.3)":"rgba(9, 14, 34, 0.2)",borderColor:"var(--admin-border)"},children:[u.jsx("td",{className:"px-3 py-2 text-xs",style:{color:"var(--admin-text-muted)"},children:u.jsx("button",{onClick:()=>en(H.created_at||""),className:"hover:underline cursor-pointer",title:"Click to filter by date",children:X(H.created_at)})}),u.jsx("td",{className:"px-3 py-2 text-xs",style:{color:"var(--admin-text)"},children:u.jsx("button",{onClick:()=>Re(H.user_id),className:"hover:underline cursor-pointer text-blue-300",title:"Click to filter by user",children:H.user_id})}),u.jsx("td",{className:"px-3 py-2 text-xs",style:{color:"var(--admin-text-muted)"},children:H.session_id&&u.jsxs("button",{onClick:()=>Ee(H.session_id),className:"hover:underline cursor-pointer text-green-300",title:"Click to filter by session",children:[H.session_id.substring(0,12),"..."]})}),u.jsx("td",{className:"px-3 py-2 text-xs max-w-[250px]",style:{color:"var(--admin-text)"},children:u.jsx("div",{className:"truncate cursor-pointer hover:text-blue-400",onClick:()=>Y(H,"good"),title:H.chat_message,children:H.chat_message})}),u.jsx("td",{className:"px-3 py-2 text-xs max-w-[250px]",style:{color:"var(--admin-text-muted)"},children:u.jsx("div",{className:"truncate",title:H.response,children:H.response})}),u.jsx("td",{className:"px-3 py-2 text-center",children:H.user_feedback?u.jsx("button",{onClick:()=>ke(H.chat_id),className:"inline-flex items-center justify-center",title:"View user feedback",children:H.user_feedback.reaction==="good"?u.jsx(_n,{size:16,style:{color:"var(--admin-success)"}}):u.jsx(En,{size:16,style:{color:"var(--admin-danger)"}})}):u.jsx("span",{className:"text-xs",style:{color:"var(--admin-text-muted)"},children:"-"})}),u.jsx("td",{className:"px-3 py-2 text-center",children:H.admin_feedback?u.jsxs("div",{className:"inline-flex items-center gap-1",children:[H.admin_feedback.feedback_verdict==="good"?u.jsx(_n,{size:16,style:{color:"var(--admin-success)"}}):u.jsx(En,{size:16,style:{color:"var(--admin-danger)"}}),u.jsx("button",{onClick:()=>Pe(H),className:"text-xs px-1 py-0.5 rounded hover:bg-blue-500/20",style:{color:"var(--admin-primary)"},children:"Edit"})]}):u.jsxs("div",{className:"inline-flex gap-1",children:[u.jsx("button",{onClick:()=>Y(H,"good"),className:"p-1 rounded hover:bg-green-500/20",title:"Good",children:u.jsx(_n,{size:14,style:{color:"var(--admin-success)"}})}),u.jsx("button",{onClick:()=>Y(H,"bad"),className:"p-1 rounded hover:bg-red-500/20",title:"Bad",children:u.jsx(En,{size:14,style:{color:"var(--admin-danger)"}})})]})})]},H.id))})]})}):u.jsx("div",{className:"space-y-3",children:jr.map(H=>u.jsxs("div",{id:`chat-${H.chat_id}`,className:"p-4 rounded-lg border transition-all duration-500",style:{backgroundColor:t===H.chat_id?"rgba(59, 230, 255, 0.15)":"rgba(9, 14, 34, 0.4)",borderColor:t===H.chat_id?"var(--admin-primary)":"var(--admin-border)",boxShadow:t===H.chat_id?"0 0 20px rgba(59, 230, 255, 0.3)":"none"},children:[u.jsx("div",{className:"flex items-start justify-between mb-2",children:u.jsxs("div",{className:"flex-1",children:[u.jsxs("p",{className:"text-xs mb-1",style:{color:"var(--admin-text-muted)"},children:["User:",u.jsx("button",{onClick:()=>Re(H.user_id),className:`ml-1 hover:underline cursor-pointer ${z===H.user_id?"text-blue-400 font-semibold":"text-blue-300"}`,title:"Click to filter by this user",children:H.user_id})]}),u.jsxs("p",{className:"text-xs mb-1",style:{color:"var(--admin-text-muted)"},children:["Chat ID: ",H.chat_id]}),H.session_id&&u.jsxs("p",{className:"text-xs mb-1",style:{color:"var(--admin-text-muted)"},children:["Session:",u.jsx("button",{onClick:()=>Ee(H.session_id),className:`ml-1 hover:underline cursor-pointer ${B===H.session_id?"text-green-400 font-semibold":"text-green-300"}`,title:"Click to filter by this session",children:H.session_id})]}),u.jsx("p",{className:"text-xs",style:{color:"var(--admin-text-muted)"},children:u.jsx("button",{onClick:()=>en(H.created_at||""),className:`hover:underline cursor-pointer ${I===H.created_at?"text-purple-400 font-semibold":"text-purple-300"}`,title:"Click to filter by this date",children:X(H.created_at)})})]})}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"text-xs font-medium mb-1",style:{color:"var(--admin-primary)"},children:[r("admin.userMessage"),":"]}),u.jsxs("p",{className:"text-sm cursor-pointer hover:bg-gray-100/10 p-2 rounded transition-colors",style:{color:"var(--admin-text)"},onClick:()=>ce(H.chat_id),title:"Click to expand/collapse",children:[C.has(H.chat_id)?H.chat_message:M(H.chat_message),!C.has(H.chat_id)&&H.chat_message.length>100&&u.jsx("span",{className:"text-blue-400 ml-1",children:"... (click to expand)"})]})]}),u.jsxs("div",{children:[u.jsxs("p",{className:"text-xs font-medium mb-1",style:{color:"var(--admin-accent)"},children:[r("admin.aiResponse"),":"]}),u.jsxs("p",{className:"text-sm cursor-pointer hover:bg-gray-100/10 p-2 rounded transition-colors",style:{color:"var(--admin-text)"},onClick:()=>ce(H.chat_id),title:"Click to expand/collapse",children:[C.has(H.chat_id)?H.response:M(H.response),!C.has(H.chat_id)&&H.response.length>100&&u.jsx("span",{className:"text-blue-400 ml-1",children:"... (click to expand)"})]})]})]}),u.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t",style:{borderColor:"var(--admin-border)"},children:[u.jsx("div",{className:"flex items-center gap-2",children:H.user_feedback?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs",style:{color:"var(--admin-text-muted)"},children:"User:"}),H.user_feedback.reaction==="good"?u.jsxs("div",{className:"flex items-center gap-1 text-green-500",children:[u.jsx(_n,{size:14}),u.jsx("span",{className:"text-xs",children:"+"})]}):u.jsxs("div",{className:"flex items-center gap-1 text-red-500",children:[u.jsx(En,{size:14}),u.jsx("span",{className:"text-xs",children:"-"})]}),u.jsx("button",{onClick:()=>ke(H.chat_id),className:"text-xs px-1.5 py-0.5 rounded transition-colors hover:bg-blue-500/20",style:{color:"var(--admin-primary, #3be6ff)"},title:"View user feedback details",children:"Details"})]}):u.jsx("span",{className:"text-xs",style:{color:"var(--admin-text-muted)"},children:"No user feedback"})}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs",style:{color:"var(--admin-text-muted)"},children:"Admin:"}),H.admin_feedback?u.jsxs("div",{className:"flex items-center gap-2",children:[H.admin_feedback.feedback_verdict==="good"?u.jsxs("div",{className:"flex items-center gap-1 text-green-500",children:[u.jsx(_n,{size:14}),u.jsx("span",{className:"text-xs",children:"Good"})]}):u.jsxs("div",{className:"flex items-center gap-1 text-red-500",children:[u.jsx(En,{size:14}),u.jsx("span",{className:"text-xs",children:"Bad"})]}),u.jsx("button",{onClick:()=>Pe(H),className:"text-xs px-1.5 py-0.5 rounded transition-colors hover:bg-blue-500/20",style:{color:"var(--admin-primary, #3be6ff)"},title:"View/Edit admin feedback",children:"Edit"})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>Y(H,"good"),className:"p-1.5 rounded transition-colors hover:bg-green-500/20",title:"Mark as good",children:u.jsx(_n,{size:14,style:{color:"var(--admin-success, #10b981)"}})}),u.jsx("button",{onClick:()=>Y(H,"bad"),className:"p-1.5 rounded transition-colors hover:bg-red-500/20",title:"Mark as bad",children:u.jsx(En,{size:14,style:{color:"var(--admin-danger, #ef4444)"}})})]})]})]})]},H.id))}),o.length>E&&u.jsx("div",{className:"mt-4 text-center",children:u.jsxs("button",{onClick:()=>T(H=>H+10),className:"px-6 py-2 rounded-md text-sm font-medium",style:{background:"linear-gradient(180deg, var(--admin-primary), var(--admin-primary-600))",color:"#041220"},children:["Load More (",o.length-E," remaining)"]})}),p&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsx("div",{className:"rounded-lg max-w-2xl w-full mx-4",style:{backgroundColor:"var(--admin-bg-card)",border:"1px solid var(--admin-border)",maxHeight:"90vh",overflow:"auto"},children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h3",{className:"text-lg font-semibold",style:{color:"var(--admin-text)"},children:[p.existingFeedback?"✏️ Edit Admin Feedback":"Admin Feedback"," ",p.verdict==="good"?"👍":"👎"]}),u.jsx("button",{onClick:he,className:"p-1 hover:bg-gray-100/10 rounded",style:{color:"var(--admin-text-secondary)"},children:u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("p",{className:"text-xs font-medium mb-2",style:{color:"var(--admin-text-muted)"},children:[r("admin.userMessage"),":"]}),u.jsx("div",{className:"p-3 rounded",style:{backgroundColor:"rgba(9, 14, 34, 0.4)",border:"1px solid var(--admin-border)"},children:u.jsx("p",{className:"text-sm",style:{color:"var(--admin-text)"},children:p.userMessage})})]}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("p",{className:"text-xs font-medium mb-2",style:{color:"var(--admin-text-muted)"},children:[r("admin.aiResponse"),":"]}),u.jsx("div",{className:"p-3 rounded",style:{backgroundColor:"rgba(9, 14, 34, 0.4)",border:"1px solid var(--admin-border)"},children:u.jsx("p",{className:"text-sm",style:{color:"var(--admin-text)"},children:p.aiResponse})})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--admin-text)"},children:"Supervisor Feedback:"}),u.jsx("textarea",{value:y,onChange:H=>x(H.target.value),placeholder:"Explain what was wrong with this response...",className:"w-full h-24 resize-none text-sm p-3 rounded",style:{backgroundColor:"rgba(9, 14, 34, 0.6)",color:"var(--admin-text)",border:"1px solid var(--admin-border)"}})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--admin-text)"},children:"Corrected Response:"}),u.jsx("textarea",{value:b,onChange:H=>w(H.target.value),placeholder:"Enter the corrected response...",className:"w-full h-32 resize-none text-sm p-3 rounded",style:{backgroundColor:"rgba(9, 14, 34, 0.6)",color:"var(--admin-text)",border:"1px solid var(--admin-border)"}})]}),u.jsxs("div",{className:"flex justify-end gap-3",children:[u.jsx("button",{onClick:he,disabled:j,className:"px-4 py-2 text-sm font-medium rounded-md",style:{backgroundColor:"transparent",border:"1px solid var(--admin-border)",color:"var(--admin-text)"},children:"Cancel"}),u.jsx("button",{onClick:F,disabled:j,className:"px-6 py-2 text-sm font-medium rounded-md",style:{background:"linear-gradient(180deg, var(--admin-primary), var(--admin-primary-600))",color:"#041220",opacity:j?.6:1},children:j?"Submitting...":"Submit"})]})]})})}),q&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 max-w-3xl w-full max-h-[90vh] overflow-y-auto border-2",style:{backgroundColor:"var(--admin-card)",borderColor:"var(--admin-border)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",backdropFilter:"blur(10px)",opacity:1,background:"var(--admin-card)"},children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h3",{className:"text-xl font-bold flex items-center gap-2",style:{color:"var(--admin-text)"},children:"📝 User Feedback Details"}),u.jsx("button",{onClick:()=>A(null),className:"text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full p-2 transition-colors",style:{color:"var(--admin-text-muted)"},children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--admin-bg-secondary)"},children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("span",{className:"font-semibold text-sm",style:{color:"var(--admin-text)"},children:"Chat ID:"}),u.jsx("span",{className:"text-xs font-mono px-2 py-1 rounded",style:{backgroundColor:"var(--admin-primary)",color:"white"},children:q.chatId})]}),u.jsx("div",{className:"text-xs",style:{color:"var(--admin-text-muted)"},children:new Date().toLocaleString()})]}),q.feedback?u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex items-center gap-4 p-4 rounded-lg border-2",style:{borderColor:q.feedback.reaction==="good"?"#10b981":"#ef4444",backgroundColor:q.feedback.reaction==="good"?"#f0fdf4":"#fef2f2"},children:u.jsxs("div",{className:"flex items-center gap-2",children:[q.feedback.reaction==="good"?u.jsx(_n,{size:24,className:"text-green-600"}):u.jsx(En,{size:24,className:"text-red-600"}),u.jsx("span",{className:"font-semibold text-lg",style:{color:q.feedback.reaction==="good"?"#059669":"#dc2626"},children:q.feedback.reaction==="good"?"Positive Feedback":"Negative Feedback"})]})}),q.feedback.feedback_text&&u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold mb-2 flex items-center gap-2",style:{color:"var(--admin-text)"},children:"💬 User's Comment:"}),u.jsx("div",{className:"p-4 rounded-lg border-2",style:{backgroundColor:"var(--admin-bg-secondary)",borderColor:"var(--admin-border)"},children:u.jsxs("p",{className:"text-sm leading-relaxed",style:{color:"var(--admin-text)"},children:['"',q.feedback.feedback_text,'"']})})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm",style:{color:"var(--admin-text-muted)"},children:[u.jsx("span",{children:"📅"}),u.jsxs("span",{children:["Feedback submitted: ",new Date(q.feedback.created_at).toLocaleString()]})]})]}):u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"text-6xl mb-4",children:"😶"}),u.jsx("p",{className:"text-lg",style:{color:"var(--admin-text-muted)"},children:"No user feedback found for this chat."})]})]}),u.jsx("div",{className:"flex justify-center mt-8",children:u.jsx("button",{onClick:()=>A(null),className:"px-6 py-3 rounded-lg font-semibold transition-all hover:scale-105",style:{backgroundColor:"var(--admin-primary)",color:"white",boxShadow:"0 4px 14px 0 rgba(59, 230, 255, 0.3)"},children:"Close"})})]})})]})}function sle({onScrollToChat:e}){const{t}=Ze(),[n,r]=v.useState([]),[i,a]=v.useState([]),[o,s]=v.useState(!0),[l,c]=v.useState(null),[d,f]=v.useState(!1),[h,m]=v.useState(""),[p,g]=v.useState("date-desc"),[y,x]=v.useState("all"),[b,w]=v.useState(10),[j,S]=v.useState("CSV"),[k,_]=v.useState(null),[N,P]=v.useState(null),[E,T]=v.useState("table");v.useEffect(()=>{L()},[]),v.useEffect(()=>{B()},[n,h,p,y,k,N]);const L=async()=>{s(!0),c(null);try{const U=await Ja();r(U)}catch(U){console.error("Failed to load user feedback:",U),c(U instanceof Error?U.message:"Failed to load user feedback")}finally{s(!1)}},$=async()=>{f(!0);try{const U=await Ja();r(U)}catch(U){console.error("Failed to refresh user feedback:",U),c(U instanceof Error?U.message:"Failed to refresh user feedback")}finally{f(!1)}},B=()=>{let U=[...n];if(y!=="all"&&(U=U.filter(Z=>Z.reaction===y)),k&&(U=U.filter(Z=>Z.user_id===k)),N&&(U=U.filter(Z=>{if(!Z.created_at)return!1;const J=new Date(Z.created_at).toDateString(),ne=new Date(N).toDateString();return J===ne})),h){const Z=h.toLowerCase();U=U.filter(J=>{var ne,X,M;return((ne=J.user_id)==null?void 0:ne.toLowerCase().includes(Z))||((X=J.chat_id)==null?void 0:X.toLowerCase().includes(Z))||((M=J.feedback_text)==null?void 0:M.toLowerCase().includes(Z))})}U.sort((Z,J)=>{switch(p){case"date-desc":return new Date(J.created_at||"").getTime()-new Date(Z.created_at||"").getTime();case"date-asc":return new Date(Z.created_at||"").getTime()-new Date(J.created_at||"").getTime();case"user":return(Z.user_id||"").localeCompare(J.user_id||"");default:return 0}}),a(U)},D=async U=>{const Z=n.find(J=>J.id===U);if(Z)if(!Z.isExpanded&&!Z.chatData){console.log(`Fetching chat data for feedback ${U} with chat_id: ${Z.chat_id}`);const J=await sR(Z.chat_id);J?(console.log(`✅ Successfully loaded chat data for ${Z.chat_id}`),r(ne=>ne.map(X=>X.id===U?{...X,chatData:J,isExpanded:!0}:X))):(console.warn(`❌ Could not load chat data for ${Z.chat_id}. This might be due to a chat_id mismatch.`),r(ne=>ne.map(X=>X.id===U?{...X,chatData:null,isExpanded:!0}:X)))}else r(J=>J.map(ne=>ne.id===U?{...ne,isExpanded:!ne.isExpanded}:ne))},z=U=>{if(!U)return"N/A";try{return new Date(U).toLocaleString()}catch{return U}},G=U=>U==="good"?u.jsx(_n,{size:16,style:{color:"var(--admin-success)"}}):U==="bad"?u.jsx(En,{size:16,style:{color:"var(--admin-danger)"}}):u.jsx("span",{className:"text-xs",children:U}),I=(U,Z=150)=>U?U.length<=Z?U:U.substring(0,Z)+"...":"",R=U=>{k===U?_(null):(_(U),P(null))},C=U=>{N===U?P(null):(P(U),_(null))},Q=()=>{_(null),P(null),m(""),x("all")},q=async U=>{if(window.confirm("Are you sure you want to delete this user feedback? This action cannot be undone."))try{await RN(U),r(Z=>Z.filter(J=>J.id!==U)),console.log("✅ User feedback deleted successfully")}catch(Z){console.error("Failed to delete user feedback:",Z),alert("Failed to delete feedback. Please try again.")}},A=()=>{if(i.length===0){alert("No feedback to export");return}const U=i.map(Z=>{var J,ne;return{feedbackId:Z.id,chatId:Z.chat_id,userId:Z.user_id||"",reaction:Z.reaction||"",feedbackText:Z.feedback_text||"",createdAt:Z.created_at||"",userMessage:((J=Z.chatData)==null?void 0:J.chat_message)||"",aiResponse:((ne=Z.chatData)==null?void 0:ne.response)||""}});if(j==="CSV"){const Z=["Feedback ID","Chat ID","User ID","Reaction","Feedback Text","Created At","User Message","AI Response"],J=U.map(F=>[F.feedbackId,F.chatId,F.userId,F.reaction,`"${F.feedbackText.replace(/"/g,'""')}"`,F.createdAt,`"${F.userMessage.replace(/"/g,'""')}"`,`"${F.aiResponse.replace(/"/g,'""')}"`]),ne=[Z,...J].map(F=>F.join(",")).join(`
`),X=new Blob([ne],{type:"text/csv;charset=utf-8;"}),M=document.createElement("a"),Y=URL.createObjectURL(X);M.setAttribute("href",Y),M.setAttribute("download",`user-feedback-${new Date().toISOString().split("T")[0]}.csv`),M.style.visibility="hidden",document.body.appendChild(M),M.click(),document.body.removeChild(M)}else{const Z=JSON.stringify(U,null,2),J=new Blob([Z],{type:"application/json;charset=utf-8;"}),ne=document.createElement("a"),X=URL.createObjectURL(J);ne.setAttribute("href",X),ne.setAttribute("download",`user-feedback-${new Date().toISOString().split("T")[0]}.json`),ne.style.visibility="hidden",document.body.appendChild(ne),ne.click(),document.body.removeChild(ne)}};if(o)return u.jsx("div",{className:"admin-card",children:u.jsx("div",{className:"flex items-center justify-center p-8",children:u.jsx("p",{style:{color:"var(--admin-text-muted)"},children:t("admin.loading")})})});if(l)return u.jsx("div",{className:"admin-card",children:u.jsxs("div",{className:"p-4",style:{color:"var(--admin-danger)"},children:[u.jsx("p",{className:"font-semibold mb-2",children:t("admin.error")}),u.jsx("p",{className:"text-sm",children:l}),u.jsx("button",{onClick:L,className:"mt-3 px-4 py-2 rounded-md text-sm",style:{background:"linear-gradient(180deg, var(--admin-primary), var(--admin-primary-600))",color:"#041220"},children:t("actions.refresh")})]})});const le=i.slice(0,b);return u.jsxs("div",{className:"admin-card",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h3",{className:"text-lg font-semibold",style:{color:"var(--admin-text)"},children:["User Feedback (",i.length,")"]}),u.jsx("button",{className:"icon-btn",onClick:$,disabled:d,title:t("actions.refresh"),children:u.jsx(xm,{size:18,className:d?"animate-spin":""})})]}),u.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-3",children:[u.jsxs("div",{className:"flex items-center gap-1 rounded-md overflow-hidden",style:{border:"1px solid var(--admin-border)"},children:[u.jsx("button",{onClick:()=>T("card"),className:"px-3 py-2 text-sm font-medium transition-colors",style:{backgroundColor:E==="card"?"var(--admin-primary)":"transparent",color:E==="card"?"#041220":"var(--admin-text)"},title:"Card View",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),u.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),u.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),u.jsx("rect",{x:"14",y:"14",width:"7",height:"7"})]})}),u.jsx("button",{onClick:()=>T("table"),className:"px-3 py-2 text-sm font-medium transition-colors",style:{backgroundColor:E==="table"?"var(--admin-primary)":"transparent",color:E==="table"?"#041220":"var(--admin-text)"},title:"Table View",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),u.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),u.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-sm",style:{color:"var(--admin-text)"},children:"Sort by:"}),u.jsxs("select",{value:p,onChange:U=>g(U.target.value),className:"px-3 py-2 rounded-md text-sm",style:{backgroundColor:"rgba(9, 14, 34, 0.6)",color:"var(--admin-text)",border:"1px solid var(--admin-border)"},children:[u.jsx("option",{value:"date-desc",children:"Date/Time (Newest)"}),u.jsx("option",{value:"date-asc",children:"Date/Time (Oldest)"}),u.jsx("option",{value:"user",children:"User ID"})]})]}),u.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-[200px]",children:[u.jsx("span",{className:"text-sm",style:{color:"var(--admin-text)"},children:"Search:"}),u.jsx("input",{type:"text",placeholder:"Search feedback...",value:h,onChange:U=>m(U.target.value),className:"flex-1 px-3 py-2 rounded-md text-sm",style:{backgroundColor:"rgba(9, 14, 34, 0.6)",color:"var(--admin-text)",border:"1px solid var(--admin-border)"}})]}),(k||N)&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs",style:{color:"var(--admin-text-muted)"},children:"Filters:"}),k&&u.jsxs("span",{className:"px-2 py-1 rounded text-xs",style:{backgroundColor:"rgba(59, 130, 246, 0.2)",color:"var(--admin-primary)"},children:["User: ",k]}),N&&u.jsxs("span",{className:"px-2 py-1 rounded text-xs",style:{backgroundColor:"rgba(168, 85, 247, 0.2)",color:"var(--admin-accent)"},children:["Date: ",new Date(N).toLocaleDateString()]}),u.jsx("button",{onClick:Q,className:"px-2 py-1 rounded text-xs hover:bg-gray-500/20",style:{color:"var(--admin-text-muted)"},title:"Clear all filters",children:"✕ Clear"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("select",{className:"px-3 py-2 rounded-md text-sm",style:{backgroundColor:"rgba(9, 14, 34, 0.6)",color:"var(--admin-text)",border:"1px solid var(--admin-border)"},value:j,onChange:U=>S(U.target.value),children:[u.jsx("option",{children:"CSV"}),u.jsx("option",{children:"JSON"})]}),u.jsx("button",{onClick:A,className:"px-4 py-2 rounded-md text-sm font-medium",style:{backgroundColor:"rgba(59, 230, 255, 0.1)",color:"var(--admin-primary)",border:"1px solid var(--admin-primary)"},children:"Export"})]})]}),u.jsxs("div",{className:"mb-4 flex gap-2",children:[u.jsxs("button",{onClick:()=>x("all"),className:`px-4 py-2 rounded-md text-sm transition-colors ${y==="all"?"font-semibold":""}`,style:{backgroundColor:y==="all"?"var(--admin-primary)":"rgba(9, 14, 34, 0.4)",color:y==="all"?"#041220":"var(--admin-text)",border:"1px solid var(--admin-border)"},children:["All (",n.length,")"]}),u.jsxs("button",{onClick:()=>x("good"),className:`px-4 py-2 rounded-md text-sm transition-colors flex items-center gap-2 ${y==="good"?"font-semibold":""}`,style:{backgroundColor:y==="good"?"var(--admin-success)":"rgba(9, 14, 34, 0.4)",color:y==="good"?"#ffffff":"var(--admin-text)",border:"1px solid var(--admin-border)"},children:[u.jsx(_n,{size:14})," Good (",n.filter(U=>U.reaction==="good").length,")"]}),u.jsxs("button",{onClick:()=>x("bad"),className:`px-4 py-2 rounded-md text-sm transition-colors flex items-center gap-2 ${y==="bad"?"font-semibold":""}`,style:{backgroundColor:y==="bad"?"var(--admin-danger)":"rgba(9, 14, 34, 0.4)",color:y==="bad"?"#ffffff":"var(--admin-text)",border:"1px solid var(--admin-border)"},children:[u.jsx(En,{size:14})," Bad (",n.filter(U=>U.reaction==="bad").length,")"]})]}),le.length===0?u.jsx("div",{className:"text-center p-8",style:{color:"var(--admin-text-muted)"},children:u.jsx("p",{children:h||y!=="all"?"No feedback matches your filters":"No user feedback found"})}):E==="table"?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",style:{borderCollapse:"separate",borderSpacing:0},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{backgroundColor:"rgba(9, 14, 34, 0.6)",borderBottom:"2px solid var(--admin-border)"},children:[u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"100px"},children:"Date"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"80px"},children:"User ID"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"100px"},children:"Chat ID"}),u.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"70px"},children:"Reaction"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"200px"},children:"Comment"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"200px"},children:"User Message"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"200px"},children:"AI Response"}),u.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"60px"},children:"Delete"})]})}),u.jsx("tbody",{children:le.map((U,Z)=>{var J,ne,X,M;return u.jsxs("tr",{className:"border-b transition-colors hover:bg-gray-100/5",style:{backgroundColor:Z%2===0?"rgba(9, 14, 34, 0.3)":"rgba(9, 14, 34, 0.2)",borderColor:"var(--admin-border)"},children:[u.jsx("td",{className:"px-3 py-2 text-xs",style:{color:"var(--admin-text-muted)"},children:u.jsx("button",{onClick:()=>C(U.created_at||""),className:"hover:underline cursor-pointer",title:"Click to filter by date",children:z(U.created_at)})}),u.jsx("td",{className:"px-3 py-2 text-xs",style:{color:"var(--admin-text)"},children:u.jsx("button",{onClick:()=>R(U.user_id),className:"hover:underline cursor-pointer text-blue-300",title:"Click to filter by user",children:U.user_id})}),u.jsx("td",{className:"px-3 py-2 text-xs",children:u.jsx("button",{onClick:()=>e==null?void 0:e(U.chat_id),className:"text-blue-400 hover:text-blue-300 underline cursor-pointer truncate max-w-[120px] block",title:`Click to scroll to ${U.chat_id}`,children:U.chat_id.length>15?U.chat_id.substring(0,15)+"...":U.chat_id})}),u.jsx("td",{className:"px-3 py-2 text-center",children:U.reaction==="good"?u.jsx(_n,{size:16,style:{color:"var(--admin-success)",display:"inline"}}):u.jsx(En,{size:16,style:{color:"var(--admin-danger)",display:"inline"}})}),u.jsx("td",{className:"px-3 py-2 text-xs max-w-[220px]",style:{color:"var(--admin-text)"},children:u.jsx("div",{className:"truncate",title:U.feedback_text||"",children:U.feedback_text||"-"})}),u.jsx("td",{className:"px-3 py-2 text-xs max-w-[220px]",style:{color:"var(--admin-text-muted)"},children:u.jsx("div",{className:"truncate",title:((J=U.chatData)==null?void 0:J.chat_message)||"",children:((ne=U.chatData)==null?void 0:ne.chat_message)||"N/A"})}),u.jsx("td",{className:"px-3 py-2 text-xs max-w-[220px]",style:{color:"var(--admin-text-muted)"},children:u.jsx("div",{className:"truncate",title:((X=U.chatData)==null?void 0:X.response)||"",children:((M=U.chatData)==null?void 0:M.response)||"N/A"})}),u.jsx("td",{className:"px-3 py-2 text-center",children:u.jsx("button",{onClick:()=>q(U.id),className:"icon-btn hover:bg-red-500/20 transition-colors",title:"Delete feedback",children:u.jsx(Ff,{size:16,style:{color:"var(--admin-danger)"}})})})]},U.id)})})]})}):u.jsx("div",{className:"space-y-3",children:le.map(U=>u.jsxs("div",{className:"rounded-lg border",style:{backgroundColor:"rgba(9, 14, 34, 0.4)",borderColor:"var(--admin-border)"},children:[u.jsxs("div",{className:"p-4 cursor-pointer hover:bg-opacity-60 transition-colors",onClick:()=>D(U.id),children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[G(U.reaction),u.jsxs("span",{className:"text-sm font-medium",style:{color:"var(--admin-text)"},children:["User:",u.jsx("button",{onClick:Z=>{Z.stopPropagation(),R(U.user_id)},className:`ml-1 hover:underline cursor-pointer ${k===U.user_id?"text-blue-400 font-semibold":"text-blue-300"}`,title:"Click to filter by this user",children:U.user_id})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:Z=>{Z.stopPropagation(),C(U.created_at||"")},className:`text-xs hover:underline cursor-pointer ${N===U.created_at?"text-purple-400 font-semibold":"text-purple-300"}`,title:"Click to filter by this date",children:z(U.created_at)}),u.jsx("button",{onClick:Z=>{Z.stopPropagation(),q(U.id)},className:"icon-btn hover:bg-red-500/20 transition-colors",title:"Delete feedback",children:u.jsx(Ff,{size:16,style:{color:"var(--admin-danger)"}})}),u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"var(--admin-text-muted)",transform:U.isExpanded?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:u.jsx("polyline",{points:"6 9 12 15 18 9"})})]})]}),u.jsxs("p",{className:"text-xs mb-2",style:{color:"var(--admin-text-muted)"},children:["Chat ID:",u.jsx("button",{onClick:()=>e==null?void 0:e(U.chat_id),className:"ml-1 text-blue-400 hover:text-blue-300 underline cursor-pointer",title:"Click to scroll to this chat in Recent Conversations",children:U.chat_id})]}),U.feedback_text&&u.jsx("p",{className:"text-sm",style:{color:"var(--admin-text)"},children:I(U.feedback_text)})]}),U.isExpanded&&u.jsx("div",{className:"border-t p-4",style:{borderColor:"var(--admin-border)"},children:U.chatData?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-medium mb-1",style:{color:"var(--admin-primary)"},children:"User Message:"}),u.jsx("p",{className:"text-sm",style:{color:"var(--admin-text)"},children:U.chatData.chat_message})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-medium mb-1",style:{color:"var(--admin-accent)"},children:"AI Response:"}),u.jsx("button",{onClick:()=>e==null?void 0:e(U.chat_id),className:"text-sm text-left w-full p-2 rounded hover:bg-blue-500/10 transition-colors cursor-pointer",style:{color:"var(--admin-text)"},title:"Click to scroll to this chat in Recent Conversations",children:U.chatData.response})]})]}):U.chatData===null?u.jsxs("div",{className:"p-3 rounded",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)"},children:[u.jsx("p",{className:"text-sm font-medium mb-1",style:{color:"var(--admin-danger)"},children:"⚠️ Chat data not found"}),u.jsx("p",{className:"text-xs",style:{color:"var(--admin-text-muted)"},children:"The chat associated with this feedback could not be loaded. This might be due to a mismatch between the feedback chat_id and the chat table ID format."}),u.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--admin-text-muted)"},children:["Chat ID: ",U.chat_id]})]}):u.jsx("p",{className:"text-sm",style:{color:"var(--admin-text-muted)"},children:"Loading chat details..."})})]},U.id))}),i.length>b&&u.jsx("div",{className:"mt-4 text-center",children:u.jsxs("button",{onClick:()=>w(U=>U+10),className:"px-6 py-2 rounded-md text-sm font-medium",style:{background:"linear-gradient(180deg, var(--admin-primary), var(--admin-primary-600))",color:"#041220"},children:["Load More (",i.length-b," remaining)"]})})]})}function lle({onScrollToChat:e}){const{t}=Ze(),[n,r]=v.useState([]),[i,a]=v.useState([]),[o,s]=v.useState(!0),[l,c]=v.useState(null),[d,f]=v.useState(!1),[h,m]=v.useState(""),[p,g]=v.useState("date-desc"),[y,x]=v.useState("all"),[b,w]=v.useState(null),[j,S]=v.useState(null),[k,_]=v.useState("table");v.useEffect(()=>{N()},[]),v.useEffect(()=>{E()},[n,h,p,y,b,j]);const N=async()=>{s(!0),c(null);try{const D=await zx(),z=await Promise.all(D.map(async G=>{const I=await sR(G.chat_id);return{...G,chatData:I,isEnabled:!0}}));r(z)}catch(D){console.error("Failed to load admin feedback:",D),c(D instanceof Error?D.message:"Failed to load admin feedback")}finally{s(!1)}},P=async()=>{f(!0),await N(),f(!1)},E=()=>{let D=[...n];if(y!=="all"&&(D=D.filter(z=>z.feedback_verdict===y)),b&&(D=D.filter(z=>{var G;return((G=z.chatData)==null?void 0:G.user_id)===b})),j&&(D=D.filter(z=>{const G=z.updated_at||z.created_at;if(!G)return!1;const I=new Date(G).toDateString(),R=new Date(j).toDateString();return I===R})),h){const z=h.toLowerCase();D=D.filter(G=>{var I,R,C,Q,q,A,le;return((I=G.chat_id)==null?void 0:I.toLowerCase().includes(z))||((R=G.feedback_text)==null?void 0:R.toLowerCase().includes(z))||((C=G.corrected_response)==null?void 0:C.toLowerCase().includes(z))||((q=(Q=G.chatData)==null?void 0:Q.chat_message)==null?void 0:q.toLowerCase().includes(z))||((le=(A=G.chatData)==null?void 0:A.response)==null?void 0:le.toLowerCase().includes(z))})}D.sort((z,G)=>{switch(p){case"date-desc":return new Date(G.updated_at||G.created_at||"").getTime()-new Date(z.updated_at||z.created_at||"").getTime();case"date-asc":return new Date(z.updated_at||z.created_at||"").getTime()-new Date(G.updated_at||G.created_at||"").getTime();case"verdict":return(z.feedback_verdict||"").localeCompare(G.feedback_verdict||"");default:return 0}}),a(D)},T=async D=>{const z=n.find(I=>I.id===D);if(!z)return;const G=!z.apply;r(I=>I.map(R=>R.id===D?{...R,apply:G}:R));try{const{updateAdminFeedbackField:I}=await Hr(()=>Promise.resolve().then(()=>BU),void 0);await I(D,{apply:G})}catch(I){console.error("Failed to update apply status:",I),r(R=>R.map(C=>C.id===D?{...C,apply:!G}:C))}},L=async D=>{if(window.confirm("Are you sure you want to delete this admin feedback? This action cannot be undone."))try{await DN(D),r(z=>z.filter(G=>G.id!==D)),console.log("✅ Admin feedback deleted successfully")}catch(z){console.error("Failed to delete admin feedback:",z),alert("Failed to delete feedback. Please try again.")}},$=D=>{if(!D)return"N/A";try{return new Date(D).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{return D}},B=()=>{const D=i.filter(C=>(C==null?void 0:C.isEnabled)??!0);if(D.length===0){alert("No enabled feedback to export");return}const z=[["Chat ID","User ID","Date/Time","Verdict","User Message","AI Response","Feedback","Corrected Response"],...D.map(C=>{var Q,q,A;return[C.chat_id,((Q=C.chatData)==null?void 0:Q.user_id)||"",$(C.updated_at||C.created_at),C.feedback_verdict,((q=C.chatData)==null?void 0:q.chat_message)||"",((A=C.chatData)==null?void 0:A.response)||"",C.feedback_text||"",C.corrected_response||""]})].map(C=>C.map(Q=>`"${Q}"`).join(",")).join(`
`),G=new Blob([z],{type:"text/csv"}),I=URL.createObjectURL(G),R=document.createElement("a");R.href=I,R.download=`admin-feedback-${new Date().toISOString().split("T")[0]}.csv`,R.click(),URL.revokeObjectURL(I)};return o?u.jsx("div",{className:"admin-card",children:u.jsx("div",{className:"flex items-center justify-center p-8",children:u.jsx("p",{style:{color:"var(--admin-text-muted)"},children:t("admin.loading")})})}):l?u.jsx("div",{className:"admin-card",children:u.jsxs("div",{className:"p-4",style:{color:"var(--admin-danger)"},children:[u.jsx("p",{className:"font-semibold mb-2",children:t("admin.error")}),u.jsx("p",{className:"text-sm",children:l}),u.jsx("button",{onClick:N,className:"mt-3 px-4 py-2 rounded-md text-sm",style:{background:"linear-gradient(180deg, var(--admin-primary), var(--admin-primary-600))",color:"#041220"},children:t("actions.refresh")})]})}):u.jsxs("div",{className:"admin-card",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h3",{className:"text-lg font-semibold",style:{color:"var(--admin-text)"},children:["Admin Feedback (",i.length," feedback entries)"]}),u.jsx("button",{className:"icon-btn",onClick:P,disabled:d,title:t("actions.refresh"),children:u.jsx(xm,{size:18,className:d?"animate-spin":""})})]}),u.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-3",children:[u.jsxs("div",{className:"flex items-center gap-1 rounded-md overflow-hidden",style:{border:"1px solid var(--admin-border)"},children:[u.jsx("button",{onClick:()=>_("card"),className:"px-3 py-2 text-sm font-medium transition-colors",style:{backgroundColor:k==="card"?"var(--admin-primary)":"transparent",color:k==="card"?"#041220":"var(--admin-text)"},title:"Card View",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),u.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),u.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),u.jsx("rect",{x:"14",y:"14",width:"7",height:"7"})]})}),u.jsx("button",{onClick:()=>_("table"),className:"px-3 py-2 text-sm font-medium transition-colors",style:{backgroundColor:k==="table"?"var(--admin-primary)":"transparent",color:k==="table"?"#041220":"var(--admin-text)"},title:"Table View",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),u.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),u.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-sm",style:{color:"var(--admin-text)"},children:"Sort by:"}),u.jsxs("select",{value:p,onChange:D=>g(D.target.value),className:"px-3 py-2 rounded-md text-sm",style:{backgroundColor:"rgba(9, 14, 34, 0.6)",color:"var(--admin-text)",border:"1px solid var(--admin-border)"},children:[u.jsx("option",{value:"date-desc",children:"Date/Time (Newest)"}),u.jsx("option",{value:"date-asc",children:"Date/Time (Oldest)"}),u.jsx("option",{value:"verdict",children:"Verdict"})]})]}),u.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-[200px]",children:[u.jsx("span",{className:"text-sm",style:{color:"var(--admin-text)"},children:"Search:"}),u.jsx("input",{type:"text",placeholder:"Search feedback...",value:h,onChange:D=>m(D.target.value),className:"flex-1 px-3 py-2 rounded-md text-sm",style:{backgroundColor:"rgba(9, 14, 34, 0.6)",color:"var(--admin-text)",border:"1px solid var(--admin-border)"}})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("select",{className:"px-3 py-2 rounded-md text-sm",style:{backgroundColor:"rgba(9, 14, 34, 0.6)",color:"var(--admin-text)",border:"1px solid var(--admin-border)"},defaultValue:"CSV",children:[u.jsx("option",{children:"CSV"}),u.jsx("option",{children:"JSON"})]}),u.jsx("button",{onClick:B,className:"px-4 py-2 rounded-md text-sm font-medium",style:{backgroundColor:"rgba(59, 230, 255, 0.1)",color:"var(--admin-primary)",border:"1px solid var(--admin-primary)"},children:"Export"})]})]}),u.jsxs("div",{className:"flex gap-2 mb-4",children:[u.jsxs("button",{onClick:()=>x("all"),className:`px-4 py-2 rounded-md text-sm transition-colors ${y==="all"?"font-semibold":""}`,style:{backgroundColor:y==="all"?"var(--admin-primary)":"rgba(9, 14, 34, 0.4)",color:y==="all"?"#041220":"var(--admin-text)",border:"1px solid var(--admin-border)"},children:["All (",n.length,")"]}),u.jsxs("button",{onClick:()=>x("good"),className:`px-4 py-2 rounded-md text-sm transition-colors flex items-center gap-2 ${y==="good"?"font-semibold":""}`,style:{backgroundColor:y==="good"?"var(--admin-success)":"rgba(9, 14, 34, 0.4)",color:y==="good"?"#ffffff":"var(--admin-text)",border:"1px solid var(--admin-border)"},children:[u.jsx(_n,{size:14})," Good (",n.filter(D=>D.feedback_verdict==="good").length,")"]}),u.jsxs("button",{onClick:()=>x("bad"),className:`px-4 py-2 rounded-md text-sm transition-colors flex items-center gap-2 ${y==="bad"?"font-semibold":""}`,style:{backgroundColor:y==="bad"?"var(--admin-danger)":"rgba(9, 14, 34, 0.4)",color:y==="bad"?"#ffffff":"var(--admin-text)",border:"1px solid var(--admin-border)"},children:[u.jsx(En,{size:14})," Bad (",n.filter(D=>D.feedback_verdict==="bad").length,")"]})]}),i.length===0?u.jsx("div",{className:"text-center p-8",style:{color:"var(--admin-text-muted)"},children:u.jsx("p",{children:h||y!=="all"?"No feedback matches your filters":"No admin feedback found"})}):k==="table"?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",style:{borderCollapse:"separate",borderSpacing:0},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{backgroundColor:"rgba(9, 14, 34, 0.6)",borderBottom:"2px solid var(--admin-border)"},children:[u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"100px"},children:"Date"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"80px"},children:"User ID"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"100px"},children:"Chat ID"}),u.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"70px"},children:"Verdict"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"180px"},children:"Feedback"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"180px"},children:"Corrected"}),u.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"80px"},children:"Apply"}),u.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium",style:{color:"var(--admin-text)",minWidth:"60px"},children:"Delete"})]})}),u.jsx("tbody",{children:i.map((D,z)=>{var G;return u.jsxs("tr",{className:"border-b transition-colors hover:bg-gray-100/5",style:{backgroundColor:z%2===0?"rgba(9, 14, 34, 0.3)":"rgba(9, 14, 34, 0.2)",borderColor:"var(--admin-border)",opacity:(D==null?void 0:D.isEnabled)??!0?1:.5},children:[u.jsx("td",{className:"px-3 py-2 text-xs",style:{color:"var(--admin-text-muted)"},children:$(D.updated_at||D.created_at)}),u.jsx("td",{className:"px-3 py-2 text-xs",style:{color:"var(--admin-text)"},children:((G=D.chatData)==null?void 0:G.user_id)||"N/A"}),u.jsx("td",{className:"px-3 py-2 text-xs",children:u.jsx("button",{onClick:()=>e==null?void 0:e(D.chat_id),className:"text-blue-400 hover:text-blue-300 underline cursor-pointer truncate max-w-[120px] block",title:`Click to scroll to ${D.chat_id}`,children:D.chat_id.length>15?D.chat_id.substring(0,15)+"...":D.chat_id})}),u.jsx("td",{className:"px-3 py-2 text-center",children:D.feedback_verdict==="good"?u.jsx(_n,{size:16,style:{color:"var(--admin-success)",display:"inline"}}):u.jsx(En,{size:16,style:{color:"var(--admin-danger)",display:"inline"}})}),u.jsx("td",{className:"px-3 py-2 text-xs max-w-[220px]",style:{color:"var(--admin-text)"},children:u.jsx("div",{className:"truncate",title:D.feedback_text||"",children:D.feedback_text||"-"})}),u.jsx("td",{className:"px-3 py-2 text-xs max-w-[220px]",style:{color:"var(--admin-text-muted)"},children:u.jsx("div",{className:"truncate",title:D.corrected_response||"",children:D.corrected_response||"-"})}),u.jsx("td",{className:"px-3 py-2 text-center",children:u.jsx("button",{onClick:()=>T(D.id),className:"relative inline-flex h-5 w-9 items-center rounded-full transition-colors",style:{backgroundColor:D.apply?"var(--admin-primary)":"rgba(100, 116, 139, 0.3)"},title:D.apply?"Applied to prompt":"Not applied",children:u.jsx("span",{className:"inline-block h-3 w-3 transform rounded-full bg-white transition-transform",style:{transform:D.apply?"translateX(1.25rem)":"translateX(0.25rem)"}})})}),u.jsx("td",{className:"px-3 py-2 text-center",children:u.jsx("button",{onClick:()=>L(D.id),className:"icon-btn hover:bg-red-500/20 transition-colors",title:"Delete feedback",children:u.jsx(Ff,{size:16,style:{color:"var(--admin-danger)"}})})})]},D.id)})})]})}):u.jsx("div",{className:"space-y-3",children:i.map(D=>{var z,G,I;return u.jsx("div",{className:"rounded-lg border",style:{backgroundColor:"rgba(9, 14, 34, 0.4)",borderColor:"var(--admin-border)",opacity:(D==null?void 0:D.isEnabled)??!0?1:.5},children:u.jsxs("div",{className:"p-4",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsx("div",{className:"flex items-center gap-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[D.feedback_verdict==="good"?u.jsx(_n,{size:16,style:{color:"var(--admin-success)"}}):u.jsx(En,{size:16,style:{color:"var(--admin-danger)"}}),u.jsxs("span",{className:"text-sm font-semibold",style:{color:"var(--admin-text)"},children:["User: ",((z=D.chatData)==null?void 0:z.user_id)||"Unknown"]})]})}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-xs",style:{color:"var(--admin-text-muted)"},children:$(D.updated_at||D.created_at)}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("span",{className:"text-xs",style:{color:"var(--admin-text)"},children:"Apply to Prompt:"}),u.jsx("button",{onClick:()=>T(D.id),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors",style:{backgroundColor:D.apply?"var(--admin-primary)":"rgba(100, 116, 139, 0.3)"},children:u.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform",style:{transform:D.apply?"translateX(1.5rem)":"translateX(0.25rem)"}})})]}),u.jsx("button",{onClick:()=>L(D.id),className:"icon-btn hover:bg-red-500/20 transition-colors",title:"Delete feedback",children:u.jsx(Ff,{size:16,style:{color:"var(--admin-danger)"}})})]})]}),u.jsxs("div",{className:"space-y-3",children:[((G=D.chatData)==null?void 0:G.chat_message)&&u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-medium mb-1",style:{color:"var(--admin-text-muted)"},children:"User Message:"}),u.jsx("p",{className:"text-sm",style:{color:"var(--admin-text)"},children:D.chatData.chat_message})]}),u.jsxs("p",{className:"text-xs mb-2",style:{color:"var(--admin-text-muted)"},children:["Chat ID:",u.jsx("button",{onClick:()=>e==null?void 0:e(D.chat_id),className:"ml-1 text-blue-400 hover:text-blue-300 underline cursor-pointer",title:"Click to scroll to this chat in Recent Conversations",children:D.chat_id})]}),((I=D.chatData)==null?void 0:I.response)&&u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-medium mb-1",style:{color:"var(--admin-text-muted)"},children:"Original AI Response:"}),u.jsx("p",{className:"text-sm",style:{color:"var(--admin-text)"},children:D.chatData.response})]}),D.feedback_text&&u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-medium mb-1",style:{color:"var(--admin-warning, #ff9800)"},children:"Supervisor Feedback:"}),u.jsx("p",{className:"text-sm",style:{color:"var(--admin-text)"},children:D.feedback_text})]}),D.corrected_response&&u.jsxs("div",{className:"p-3 rounded",style:{backgroundColor:"rgba(59, 230, 255, 0.05)",border:"1px solid rgba(59, 230, 255, 0.2)"},children:[u.jsx("p",{className:"text-xs font-medium mb-1",style:{color:"var(--admin-primary)"},children:"Corrected Response:"}),u.jsx("p",{className:"text-sm",style:{color:"var(--admin-text)"},children:D.corrected_response})]})]})]})},D.id)})})]})}const cle=({message:e,type:t,onClose:n,duration:r=5e3})=>{v.useEffect(()=>{const o=setTimeout(()=>{n()},r);return()=>clearTimeout(o)},[r,n]);const i={success:"#10b981",error:"#ef4444",warning:"#f59e0b",info:"#3b82f6"}[t],a={success:"✓",error:"✕",warning:"⚠",info:"ℹ"}[t];return u.jsxs("div",{style:{position:"fixed",top:"24px",right:"24px",zIndex:9999,backgroundColor:i,color:"white",padding:"16px 24px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)",minWidth:"300px",maxWidth:"500px",animation:"slideIn 0.3s ease-out"},children:[u.jsx("span",{style:{fontSize:"20px",fontWeight:"bold"},children:a}),u.jsx("span",{style:{flex:1},children:e}),u.jsx("button",{onClick:n,style:{background:"none",border:"none",color:"white",cursor:"pointer",fontSize:"18px",padding:"0 4px",opacity:.8,transition:"opacity 0.2s"},onMouseEnter:o=>o.currentTarget.style.opacity="1",onMouseLeave:o=>o.currentTarget.style.opacity="0.8",children:"×"}),u.jsx("style",{children:`
        @keyframes slideIn {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
      `})]})},ule=({toasts:e,removeToast:t})=>u.jsx(u.Fragment,{children:e.map((n,r)=>u.jsx("div",{style:{position:"fixed",top:`${24+r*80}px`,right:"24px",zIndex:9999},children:u.jsx(cle,{message:n.message,type:n.type,onClose:()=>t(n.id)})},n.id))});function lR(e,t){return function(){return e.apply(t,arguments)}}const{toString:dle}=Object.prototype,{getPrototypeOf:cw}=Object,{iterator:bm,toStringTag:cR}=Symbol,wm=(e=>t=>{const n=dle.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kr=e=>(e=e.toLowerCase(),t=>wm(t)===e),km=e=>t=>typeof t===e,{isArray:Hs}=Array,ws=km("undefined");function Zc(e){return e!==null&&!ws(e)&&e.constructor!==null&&!ws(e.constructor)&&gn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const uR=kr("ArrayBuffer");function fle(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&uR(e.buffer),t}const hle=km("string"),gn=km("function"),dR=km("number"),eu=e=>e!==null&&typeof e=="object",mle=e=>e===!0||e===!1,fd=e=>{if(wm(e)!=="object")return!1;const t=cw(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(cR in e)&&!(bm in e)},ple=e=>{if(!eu(e)||Zc(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},gle=kr("Date"),yle=kr("File"),vle=kr("Blob"),xle=kr("FileList"),ble=e=>eu(e)&&gn(e.pipe),wle=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||gn(e.append)&&((t=wm(e))==="formdata"||t==="object"&&gn(e.toString)&&e.toString()==="[object FormData]"))},kle=kr("URLSearchParams"),[Sle,jle,Cle,_le]=["ReadableStream","Request","Response","Headers"].map(kr),Ele=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tu(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),Hs(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{if(Zc(e))return;const a=n?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;let s;for(r=0;r<o;r++)s=a[r],t.call(null,e[s],s,e)}}function fR(e,t){if(Zc(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const $a=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),hR=e=>!ws(e)&&e!==$a;function Cv(){const{caseless:e,skipUndefined:t}=hR(this)&&this||{},n={},r=(i,a)=>{const o=e&&fR(n,a)||a;fd(n[o])&&fd(i)?n[o]=Cv(n[o],i):fd(i)?n[o]=Cv({},i):Hs(i)?n[o]=i.slice():(!t||!ws(i))&&(n[o]=i)};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&tu(arguments[i],r);return n}const Nle=(e,t,n,{allOwnKeys:r}={})=>(tu(t,(i,a)=>{n&&gn(i)?e[a]=lR(i,n):e[a]=i},{allOwnKeys:r}),e),Ple=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Ole=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Ale=(e,t,n,r)=>{let i,a,o;const s={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)o=i[a],(!r||r(o,e,t))&&!s[o]&&(t[o]=e[o],s[o]=!0);e=n!==!1&&cw(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Tle=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},Ile=e=>{if(!e)return null;if(Hs(e))return e;let t=e.length;if(!dR(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Dle=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&cw(Uint8Array)),Rle=(e,t)=>{const r=(e&&e[bm]).call(e);let i;for(;(i=r.next())&&!i.done;){const a=i.value;t.call(e,a[0],a[1])}},Mle=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Lle=kr("HTMLFormElement"),$le=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),u_=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Fle=kr("RegExp"),mR=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};tu(n,(i,a)=>{let o;(o=t(i,a,e))!==!1&&(r[a]=o||i)}),Object.defineProperties(e,r)},Ule=e=>{mR(e,(t,n)=>{if(gn(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(gn(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},zle=(e,t)=>{const n={},r=i=>{i.forEach(a=>{n[a]=!0})};return Hs(e)?r(e):r(String(e).split(t)),n},Ble=()=>{},Wle=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function qle(e){return!!(e&&gn(e.append)&&e[cR]==="FormData"&&e[bm])}const Hle=e=>{const t=new Array(10),n=(r,i)=>{if(eu(r)){if(t.indexOf(r)>=0)return;if(Zc(r))return r;if(!("toJSON"in r)){t[i]=r;const a=Hs(r)?[]:{};return tu(r,(o,s)=>{const l=n(o,i+1);!ws(l)&&(a[s]=l)}),t[i]=void 0,a}}return r};return n(e,0)},Kle=kr("AsyncFunction"),Vle=e=>e&&(eu(e)||gn(e))&&gn(e.then)&&gn(e.catch),pR=((e,t)=>e?setImmediate:t?((n,r)=>($a.addEventListener("message",({source:i,data:a})=>{i===$a&&a===n&&r.length&&r.shift()()},!1),i=>{r.push(i),$a.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",gn($a.postMessage)),Gle=typeof queueMicrotask<"u"?queueMicrotask.bind($a):typeof process<"u"&&process.nextTick||pR,Yle=e=>e!=null&&gn(e[bm]),K={isArray:Hs,isArrayBuffer:uR,isBuffer:Zc,isFormData:wle,isArrayBufferView:fle,isString:hle,isNumber:dR,isBoolean:mle,isObject:eu,isPlainObject:fd,isEmptyObject:ple,isReadableStream:Sle,isRequest:jle,isResponse:Cle,isHeaders:_le,isUndefined:ws,isDate:gle,isFile:yle,isBlob:vle,isRegExp:Fle,isFunction:gn,isStream:ble,isURLSearchParams:kle,isTypedArray:Dle,isFileList:xle,forEach:tu,merge:Cv,extend:Nle,trim:Ele,stripBOM:Ple,inherits:Ole,toFlatObject:Ale,kindOf:wm,kindOfTest:kr,endsWith:Tle,toArray:Ile,forEachEntry:Rle,matchAll:Mle,isHTMLForm:Lle,hasOwnProperty:u_,hasOwnProp:u_,reduceDescriptors:mR,freezeMethods:Ule,toObjectSet:zle,toCamelCase:$le,noop:Ble,toFiniteNumber:Wle,findKey:fR,global:$a,isContextDefined:hR,isSpecCompliantForm:qle,toJSONObject:Hle,isAsyncFn:Kle,isThenable:Vle,setImmediate:pR,asap:Gle,isIterable:Yle};function ve(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}K.inherits(ve,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:K.toJSONObject(this.config),code:this.code,status:this.status}}});const gR=ve.prototype,yR={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{yR[e]={value:e}});Object.defineProperties(ve,yR);Object.defineProperty(gR,"isAxiosError",{value:!0});ve.from=(e,t,n,r,i,a)=>{const o=Object.create(gR);K.toFlatObject(e,o,function(d){return d!==Error.prototype},c=>c!=="isAxiosError");const s=e&&e.message?e.message:"Error",l=t==null&&e?e.code:t;return ve.call(o,s,l,n,r,i),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",a&&Object.assign(o,a),o};const Jle=null;function _v(e){return K.isPlainObject(e)||K.isArray(e)}function vR(e){return K.endsWith(e,"[]")?e.slice(0,-2):e}function d_(e,t,n){return e?e.concat(t).map(function(i,a){return i=vR(i),!n&&a?"["+i+"]":i}).join(n?".":""):t}function Xle(e){return K.isArray(e)&&!e.some(_v)}const Qle=K.toFlatObject(K,{},null,function(t){return/^is[A-Z]/.test(t)});function Sm(e,t,n){if(!K.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=K.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,y){return!K.isUndefined(y[g])});const r=n.metaTokens,i=n.visitor||d,a=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&K.isSpecCompliantForm(t);if(!K.isFunction(i))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(K.isDate(p))return p.toISOString();if(K.isBoolean(p))return p.toString();if(!l&&K.isBlob(p))throw new ve("Blob is not supported. Use a Buffer instead.");return K.isArrayBuffer(p)||K.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function d(p,g,y){let x=p;if(p&&!y&&typeof p=="object"){if(K.endsWith(g,"{}"))g=r?g:g.slice(0,-2),p=JSON.stringify(p);else if(K.isArray(p)&&Xle(p)||(K.isFileList(p)||K.endsWith(g,"[]"))&&(x=K.toArray(p)))return g=vR(g),x.forEach(function(w,j){!(K.isUndefined(w)||w===null)&&t.append(o===!0?d_([g],j,a):o===null?g:g+"[]",c(w))}),!1}return _v(p)?!0:(t.append(d_(y,g,a),c(p)),!1)}const f=[],h=Object.assign(Qle,{defaultVisitor:d,convertValue:c,isVisitable:_v});function m(p,g){if(!K.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));f.push(p),K.forEach(p,function(x,b){(!(K.isUndefined(x)||x===null)&&i.call(t,x,K.isString(b)?b.trim():b,g,h))===!0&&m(x,g?g.concat(b):[b])}),f.pop()}}if(!K.isObject(e))throw new TypeError("data must be an object");return m(e),t}function f_(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function uw(e,t){this._pairs=[],e&&Sm(e,this,t)}const xR=uw.prototype;xR.append=function(t,n){this._pairs.push([t,n])};xR.toString=function(t){const n=t?function(r){return t.call(this,r,f_)}:f_;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Zle(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function bR(e,t,n){if(!t)return e;const r=n&&n.encode||Zle;K.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let a;if(i?a=i(t,n):a=K.isURLSearchParams(t)?t.toString():new uw(t,n).toString(r),a){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class ece{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){K.forEach(this.handlers,function(r){r!==null&&t(r)})}}const h_=ece,wR={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},tce=typeof URLSearchParams<"u"?URLSearchParams:uw,nce=typeof FormData<"u"?FormData:null,rce=typeof Blob<"u"?Blob:null,ice={isBrowser:!0,classes:{URLSearchParams:tce,FormData:nce,Blob:rce},protocols:["http","https","file","blob","url","data"]},dw=typeof window<"u"&&typeof document<"u",Ev=typeof navigator=="object"&&navigator||void 0,ace=dw&&(!Ev||["ReactNative","NativeScript","NS"].indexOf(Ev.product)<0),oce=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),sce=dw&&window.location.href||"http://localhost",lce=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:dw,hasStandardBrowserEnv:ace,hasStandardBrowserWebWorkerEnv:oce,navigator:Ev,origin:sce},Symbol.toStringTag,{value:"Module"})),Ft={...lce,...ice};function cce(e,t){return Sm(e,new Ft.classes.URLSearchParams,{visitor:function(n,r,i,a){return Ft.isNode&&K.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function uce(e){return K.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function dce(e){const t={},n=Object.keys(e);let r;const i=n.length;let a;for(r=0;r<i;r++)a=n[r],t[a]=e[a];return t}function kR(e){function t(n,r,i,a){let o=n[a++];if(o==="__proto__")return!0;const s=Number.isFinite(+o),l=a>=n.length;return o=!o&&K.isArray(i)?i.length:o,l?(K.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!s):((!i[o]||!K.isObject(i[o]))&&(i[o]=[]),t(n,r,i[o],a)&&K.isArray(i[o])&&(i[o]=dce(i[o])),!s)}if(K.isFormData(e)&&K.isFunction(e.entries)){const n={};return K.forEachEntry(e,(r,i)=>{t(uce(r),i,n,0)}),n}return null}function fce(e,t,n){if(K.isString(e))try{return(t||JSON.parse)(e),K.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const fw={transitional:wR,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,a=K.isObject(t);if(a&&K.isHTMLForm(t)&&(t=new FormData(t)),K.isFormData(t))return i?JSON.stringify(kR(t)):t;if(K.isArrayBuffer(t)||K.isBuffer(t)||K.isStream(t)||K.isFile(t)||K.isBlob(t)||K.isReadableStream(t))return t;if(K.isArrayBufferView(t))return t.buffer;if(K.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return cce(t,this.formSerializer).toString();if((s=K.isFileList(t))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Sm(s?{"files[]":t}:t,l&&new l,this.formSerializer)}}return a||i?(n.setContentType("application/json",!1),fce(t)):t}],transformResponse:[function(t){const n=this.transitional||fw.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(K.isResponse(t)||K.isReadableStream(t))return t;if(t&&K.isString(t)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(s){if(o)throw s.name==="SyntaxError"?ve.from(s,ve.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ft.classes.FormData,Blob:Ft.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};K.forEach(["delete","get","head","post","put","patch"],e=>{fw.headers[e]={}});const hw=fw,hce=K.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),mce=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||t[n]&&hce[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},m_=Symbol("internals");function hl(e){return e&&String(e).trim().toLowerCase()}function hd(e){return e===!1||e==null?e:K.isArray(e)?e.map(hd):String(e)}function pce(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const gce=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function eg(e,t,n,r,i){if(K.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!K.isString(t)){if(K.isString(r))return t.indexOf(r)!==-1;if(K.isRegExp(r))return r.test(t)}}function yce(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function vce(e,t){const n=K.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,a,o){return this[r].call(this,t,i,a,o)},configurable:!0})})}class jm{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function a(s,l,c){const d=hl(l);if(!d)throw new Error("header name must be a non-empty string");const f=K.findKey(i,d);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||l]=hd(s))}const o=(s,l)=>K.forEach(s,(c,d)=>a(c,d,l));if(K.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(K.isString(t)&&(t=t.trim())&&!gce(t))o(mce(t),n);else if(K.isObject(t)&&K.isIterable(t)){let s={},l,c;for(const d of t){if(!K.isArray(d))throw TypeError("Object iterator must return a key-value pair");s[c=d[0]]=(l=s[c])?K.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}o(s,n)}else t!=null&&a(n,t,r);return this}get(t,n){if(t=hl(t),t){const r=K.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return pce(i);if(K.isFunction(n))return n.call(this,i,r);if(K.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=hl(t),t){const r=K.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||eg(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function a(o){if(o=hl(o),o){const s=K.findKey(r,o);s&&(!n||eg(r,r[s],s,n))&&(delete r[s],i=!0)}}return K.isArray(t)?t.forEach(a):a(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const a=n[r];(!t||eg(this,this[a],a,t,!0))&&(delete this[a],i=!0)}return i}normalize(t){const n=this,r={};return K.forEach(this,(i,a)=>{const o=K.findKey(r,a);if(o){n[o]=hd(i),delete n[a];return}const s=t?yce(a):String(a).trim();s!==a&&delete n[a],n[s]=hd(i),r[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return K.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&K.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[m_]=this[m_]={accessors:{}}).accessors,i=this.prototype;function a(o){const s=hl(o);r[s]||(vce(i,o),r[s]=!0)}return K.isArray(t)?t.forEach(a):a(t),this}}jm.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);K.reduceDescriptors(jm.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});K.freezeMethods(jm);const vr=jm;function tg(e,t){const n=this||hw,r=t||n,i=vr.from(r.headers);let a=r.data;return K.forEach(e,function(s){a=s.call(n,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function SR(e){return!!(e&&e.__CANCEL__)}function Ks(e,t,n){ve.call(this,e??"canceled",ve.ERR_CANCELED,t,n),this.name="CanceledError"}K.inherits(Ks,ve,{__CANCEL__:!0});function jR(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new ve("Request failed with status code "+n.status,[ve.ERR_BAD_REQUEST,ve.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function xce(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function bce(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,a=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),d=r[a];o||(o=c),n[i]=l,r[i]=c;let f=a,h=0;for(;f!==i;)h+=n[f++],f=f%e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),c-o<t)return;const m=d&&c-d;return m?Math.round(h*1e3/m):void 0}}function wce(e,t){let n=0,r=1e3/t,i,a;const o=(c,d=Date.now())=>{n=d,i=null,a&&(clearTimeout(a),a=null),e(...c)};return[(...c)=>{const d=Date.now(),f=d-n;f>=r?o(c,d):(i=c,a||(a=setTimeout(()=>{a=null,o(i)},r-f)))},()=>i&&o(i)]}const zf=(e,t,n=3)=>{let r=0;const i=bce(50,250);return wce(a=>{const o=a.loaded,s=a.lengthComputable?a.total:void 0,l=o-r,c=i(l),d=o<=s;r=o;const f={loaded:o,total:s,progress:s?o/s:void 0,bytes:l,rate:c||void 0,estimated:c&&s&&d?(s-o)/c:void 0,event:a,lengthComputable:s!=null,[t?"download":"upload"]:!0};e(f)},n)},p_=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},g_=e=>(...t)=>K.asap(()=>e(...t)),kce=Ft.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Ft.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Ft.origin),Ft.navigator&&/(msie|trident)/i.test(Ft.navigator.userAgent)):()=>!0,Sce=Ft.hasStandardBrowserEnv?{write(e,t,n,r,i,a){const o=[e+"="+encodeURIComponent(t)];K.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),K.isString(r)&&o.push("path="+r),K.isString(i)&&o.push("domain="+i),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function jce(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Cce(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function CR(e,t,n){let r=!jce(t);return e&&(r||n==!1)?Cce(e,t):t}const y_=e=>e instanceof vr?{...e}:e;function ro(e,t){t=t||{};const n={};function r(c,d,f,h){return K.isPlainObject(c)&&K.isPlainObject(d)?K.merge.call({caseless:h},c,d):K.isPlainObject(d)?K.merge({},d):K.isArray(d)?d.slice():d}function i(c,d,f,h){if(K.isUndefined(d)){if(!K.isUndefined(c))return r(void 0,c,f,h)}else return r(c,d,f,h)}function a(c,d){if(!K.isUndefined(d))return r(void 0,d)}function o(c,d){if(K.isUndefined(d)){if(!K.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function s(c,d,f){if(f in t)return r(c,d);if(f in e)return r(void 0,c)}const l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(c,d,f)=>i(y_(c),y_(d),f,!0)};return K.forEach(Object.keys({...e,...t}),function(d){const f=l[d]||i,h=f(e[d],t[d],d);K.isUndefined(h)&&f!==s||(n[d]=h)}),n}const _R=e=>{const t=ro({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:s}=t;if(t.headers=o=vr.from(o),t.url=bR(CR(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),s&&o.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),K.isFormData(n)){if(Ft.hasStandardBrowserEnv||Ft.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(K.isFunction(n.getHeaders)){const l=n.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([d,f])=>{c.includes(d.toLowerCase())&&o.set(d,f)})}}if(Ft.hasStandardBrowserEnv&&(r&&K.isFunction(r)&&(r=r(t)),r||r!==!1&&kce(t.url))){const l=i&&a&&Sce.read(a);l&&o.set(i,l)}return t},_ce=typeof XMLHttpRequest<"u",Ece=_ce&&function(e){return new Promise(function(n,r){const i=_R(e);let a=i.data;const o=vr.from(i.headers).normalize();let{responseType:s,onUploadProgress:l,onDownloadProgress:c}=i,d,f,h,m,p;function g(){m&&m(),p&&p(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let y=new XMLHttpRequest;y.open(i.method.toUpperCase(),i.url,!0),y.timeout=i.timeout;function x(){if(!y)return;const w=vr.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),S={data:!s||s==="text"||s==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:w,config:e,request:y};jR(function(_){n(_),g()},function(_){r(_),g()},S),y=null}"onloadend"in y?y.onloadend=x:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(x)},y.onabort=function(){y&&(r(new ve("Request aborted",ve.ECONNABORTED,e,y)),y=null)},y.onerror=function(j){const S=j&&j.message?j.message:"Network Error",k=new ve(S,ve.ERR_NETWORK,e,y);k.event=j||null,r(k),y=null},y.ontimeout=function(){let j=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const S=i.transitional||wR;i.timeoutErrorMessage&&(j=i.timeoutErrorMessage),r(new ve(j,S.clarifyTimeoutError?ve.ETIMEDOUT:ve.ECONNABORTED,e,y)),y=null},a===void 0&&o.setContentType(null),"setRequestHeader"in y&&K.forEach(o.toJSON(),function(j,S){y.setRequestHeader(S,j)}),K.isUndefined(i.withCredentials)||(y.withCredentials=!!i.withCredentials),s&&s!=="json"&&(y.responseType=i.responseType),c&&([h,p]=zf(c,!0),y.addEventListener("progress",h)),l&&y.upload&&([f,m]=zf(l),y.upload.addEventListener("progress",f),y.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(d=w=>{y&&(r(!w||w.type?new Ks(null,e,y):w),y.abort(),y=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const b=xce(i.url);if(b&&Ft.protocols.indexOf(b)===-1){r(new ve("Unsupported protocol "+b+":",ve.ERR_BAD_REQUEST,e));return}y.send(a||null)})},Nce=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const a=function(c){if(!i){i=!0,s();const d=c instanceof Error?c:this.reason;r.abort(d instanceof ve?d:new Ks(d instanceof Error?d.message:d))}};let o=t&&setTimeout(()=>{o=null,a(new ve(`timeout ${t} of ms exceeded`,ve.ETIMEDOUT))},t);const s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(a):c.removeEventListener("abort",a)}),e=null)};e.forEach(c=>c.addEventListener("abort",a));const{signal:l}=r;return l.unsubscribe=()=>K.asap(s),l}},Pce=Nce,Oce=function*(e,t){let n=e.byteLength;if(!t||n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},Ace=async function*(e,t){for await(const n of Tce(e))yield*Oce(n,t)},Tce=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},v_=(e,t,n,r)=>{const i=Ace(e,t);let a=0,o,s=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await i.next();if(c){s(),l.close();return}let f=d.byteLength;if(n){let h=a+=f;n(h)}l.enqueue(new Uint8Array(d))}catch(c){throw s(c),c}},cancel(l){return s(l),i.return()}},{highWaterMark:2})},x_=64*1024,{isFunction:Hu}=K,Ice=(({Request:e,Response:t})=>({Request:e,Response:t}))(K.global),{ReadableStream:b_,TextEncoder:w_}=K.global,k_=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Dce=e=>{e=K.merge.call({skipUndefined:!0},Ice,e);const{fetch:t,Request:n,Response:r}=e,i=t?Hu(t):typeof fetch=="function",a=Hu(n),o=Hu(r);if(!i)return!1;const s=i&&Hu(b_),l=i&&(typeof w_=="function"?(p=>g=>p.encode(g))(new w_):async p=>new Uint8Array(await new n(p).arrayBuffer())),c=a&&s&&k_(()=>{let p=!1;const g=new n(Ft.origin,{body:new b_,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!g}),d=o&&s&&k_(()=>K.isReadableStream(new r("").body)),f={stream:d&&(p=>p.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!f[p]&&(f[p]=(g,y)=>{let x=g&&g[p];if(x)return x.call(g);throw new ve(`Response type '${p}' is not supported`,ve.ERR_NOT_SUPPORT,y)})});const h=async p=>{if(p==null)return 0;if(K.isBlob(p))return p.size;if(K.isSpecCompliantForm(p))return(await new n(Ft.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(K.isArrayBufferView(p)||K.isArrayBuffer(p))return p.byteLength;if(K.isURLSearchParams(p)&&(p=p+""),K.isString(p))return(await l(p)).byteLength},m=async(p,g)=>{const y=K.toFiniteNumber(p.getContentLength());return y??h(g)};return async p=>{let{url:g,method:y,data:x,signal:b,cancelToken:w,timeout:j,onDownloadProgress:S,onUploadProgress:k,responseType:_,headers:N,withCredentials:P="same-origin",fetchOptions:E}=_R(p),T=t||fetch;_=_?(_+"").toLowerCase():"text";let L=Pce([b,w&&w.toAbortSignal()],j),$=null;const B=L&&L.unsubscribe&&(()=>{L.unsubscribe()});let D;try{if(k&&c&&y!=="get"&&y!=="head"&&(D=await m(N,x))!==0){let Q=new n(g,{method:"POST",body:x,duplex:"half"}),q;if(K.isFormData(x)&&(q=Q.headers.get("content-type"))&&N.setContentType(q),Q.body){const[A,le]=p_(D,zf(g_(k)));x=v_(Q.body,x_,A,le)}}K.isString(P)||(P=P?"include":"omit");const z=a&&"credentials"in n.prototype,G={...E,signal:L,method:y.toUpperCase(),headers:N.normalize().toJSON(),body:x,duplex:"half",credentials:z?P:void 0};$=a&&new n(g,G);let I=await(a?T($,E):T(g,G));const R=d&&(_==="stream"||_==="response");if(d&&(S||R&&B)){const Q={};["status","statusText","headers"].forEach(U=>{Q[U]=I[U]});const q=K.toFiniteNumber(I.headers.get("content-length")),[A,le]=S&&p_(q,zf(g_(S),!0))||[];I=new r(v_(I.body,x_,A,()=>{le&&le(),B&&B()}),Q)}_=_||"text";let C=await f[K.findKey(f,_)||"text"](I,p);return!R&&B&&B(),await new Promise((Q,q)=>{jR(Q,q,{data:C,headers:vr.from(I.headers),status:I.status,statusText:I.statusText,config:p,request:$})})}catch(z){throw B&&B(),z&&z.name==="TypeError"&&/Load failed|fetch/i.test(z.message)?Object.assign(new ve("Network Error",ve.ERR_NETWORK,p,$),{cause:z.cause||z}):ve.from(z,z&&z.code,p,$)}}},Rce=new Map,ER=e=>{let t=e?e.env:{};const{fetch:n,Request:r,Response:i}=t,a=[r,i,n];let o=a.length,s=o,l,c,d=Rce;for(;s--;)l=a[s],c=d.get(l),c===void 0&&d.set(l,c=s?new Map:Dce(t)),d=c;return c};ER();const Nv={http:Jle,xhr:Ece,fetch:{get:ER}};K.forEach(Nv,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const S_=e=>`- ${e}`,Mce=e=>K.isFunction(e)||e===null||e===!1,NR={getAdapter:(e,t)=>{e=K.isArray(e)?e:[e];const{length:n}=e;let r,i;const a={};for(let o=0;o<n;o++){r=e[o];let s;if(i=r,!Mce(r)&&(i=Nv[(s=String(r)).toLowerCase()],i===void 0))throw new ve(`Unknown adapter '${s}'`);if(i&&(K.isFunction(i)||(i=i.get(t))))break;a[s||"#"+o]=i}if(!i){const o=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let s=n?o.length>1?`since :
`+o.map(S_).join(`
`):" "+S_(o[0]):"as no adapter specified";throw new ve("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return i},adapters:Nv};function ng(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ks(null,e)}function j_(e){return ng(e),e.headers=vr.from(e.headers),e.data=tg.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),NR.getAdapter(e.adapter||hw.adapter,e)(e).then(function(r){return ng(e),r.data=tg.call(e,e.transformResponse,r),r.headers=vr.from(r.headers),r},function(r){return SR(r)||(ng(e),r&&r.response&&(r.response.data=tg.call(e,e.transformResponse,r.response),r.response.headers=vr.from(r.response.headers))),Promise.reject(r)})}const PR="1.12.2",Cm={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Cm[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const C_={};Cm.transitional=function(t,n,r){function i(a,o){return"[Axios v"+PR+"] Transitional option '"+a+"'"+o+(r?". "+r:"")}return(a,o,s)=>{if(t===!1)throw new ve(i(o," has been removed"+(n?" in "+n:"")),ve.ERR_DEPRECATED);return n&&!C_[o]&&(C_[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,o,s):!0}};Cm.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function Lce(e,t,n){if(typeof e!="object")throw new ve("options must be an object",ve.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const a=r[i],o=t[a];if(o){const s=e[a],l=s===void 0||o(s,a,e);if(l!==!0)throw new ve("option "+a+" must be "+l,ve.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ve("Unknown option "+a,ve.ERR_BAD_OPTION)}}const md={assertOptions:Lce,validators:Cm},Nr=md.validators;class Bf{constructor(t){this.defaults=t||{},this.interceptors={request:new h_,response:new h_}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ro(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:a}=n;r!==void 0&&md.assertOptions(r,{silentJSONParsing:Nr.transitional(Nr.boolean),forcedJSONParsing:Nr.transitional(Nr.boolean),clarifyTimeoutError:Nr.transitional(Nr.boolean)},!1),i!=null&&(K.isFunction(i)?n.paramsSerializer={serialize:i}:md.assertOptions(i,{encode:Nr.function,serialize:Nr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),md.assertOptions(n,{baseUrl:Nr.spelling("baseURL"),withXsrfToken:Nr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=a&&K.merge(a.common,a[n.method]);a&&K.forEach(["delete","get","head","post","put","patch","common"],p=>{delete a[p]}),n.headers=vr.concat(o,a);const s=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(l=l&&g.synchronous,s.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let d,f=0,h;if(!l){const p=[j_.bind(this),void 0];for(p.unshift(...s),p.push(...c),h=p.length,d=Promise.resolve(n);f<h;)d=d.then(p[f++],p[f++]);return d}h=s.length;let m=n;for(;f<h;){const p=s[f++],g=s[f++];try{m=p(m)}catch(y){g.call(this,y);break}}try{d=j_.call(this,m)}catch(p){return Promise.reject(p)}for(f=0,h=c.length;f<h;)d=d.then(c[f++],c[f++]);return d}getUri(t){t=ro(this.defaults,t);const n=CR(t.baseURL,t.url,t.allowAbsoluteUrls);return bR(n,t.params,t.paramsSerializer)}}K.forEach(["delete","get","head","options"],function(t){Bf.prototype[t]=function(n,r){return this.request(ro(r||{},{method:t,url:n,data:(r||{}).data}))}});K.forEach(["post","put","patch"],function(t){function n(r){return function(a,o,s){return this.request(ro(s||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Bf.prototype[t]=n(),Bf.prototype[t+"Form"]=n(!0)});const pd=Bf;class mw{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(s=>{r.subscribe(s),a=s}).then(i);return o.cancel=function(){r.unsubscribe(a)},o},t(function(a,o,s){r.reason||(r.reason=new Ks(a,o,s),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new mw(function(i){t=i}),cancel:t}}}const $ce=mw;function Fce(e){return function(n){return e.apply(null,n)}}function Uce(e){return K.isObject(e)&&e.isAxiosError===!0}const Pv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Pv).forEach(([e,t])=>{Pv[t]=e});const zce=Pv;function OR(e){const t=new pd(e),n=lR(pd.prototype.request,t);return K.extend(n,pd.prototype,t,{allOwnKeys:!0}),K.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return OR(ro(e,i))},n}const dt=OR(hw);dt.Axios=pd;dt.CanceledError=Ks;dt.CancelToken=$ce;dt.isCancel=SR;dt.VERSION=PR;dt.toFormData=Sm;dt.AxiosError=ve;dt.Cancel=dt.CanceledError;dt.all=function(t){return Promise.all(t)};dt.spread=Fce;dt.isAxiosError=Uce;dt.mergeConfig=ro;dt.AxiosHeaders=vr;dt.formToJSON=e=>kR(K.isHTMLForm(e)?new FormData(e):e);dt.getAdapter=NR.getAdapter;dt.HttpStatusCode=zce;dt.default=dt;const nu=dt,_o={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_N8N_BASE_URL||"https://n8n.srv978041.hstgr.cloud",AR={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_N8N_UPLOAD_WEBHOOK_ID||"1f18f1aa-44c4-467f-b299-c87c9b6f9459",_m={UPLOAD:`${_o}/webhook/${AR}`,LIST_FILES:`${_o}/webhook/${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_N8N_LIST_FILES_WEBHOOK_ID||"list-files"}`,DELETE_FILE:`${_o}/webhook/${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_N8N_DELETE_FILE_WEBHOOK_ID||"delete-file"}`,REINDEX_FILE:`${_o}/webhook/${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_N8N_REINDEX_FILE_WEBHOOK_ID||"reindex-file"}`,GET_FILE_STATUS:`${_o}/webhook/${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_N8N_FILE_STATUS_WEBHOOK_ID||"file-status"}`};async function TR(e){const t=[];try{const n=new FormData;e.forEach(i=>{n.append("Files",i)});const r=await nu.post(_m.UPLOAD,n,{headers:{Accept:"*/*","Content-Type":"multipart/form-data"},timeout:3e4});e.forEach(i=>{t.push({success:!0,message:"File uploaded successfully",fileName:i.name})}),console.log("RAG upload response:",r.data)}catch(n){console.error("Error uploading files to RAG:",n),e.forEach(r=>{var i,a;t.push({success:!1,message:"Failed to upload file",fileName:r.name,error:((a=(i=n.response)==null?void 0:i.data)==null?void 0:a.message)||n.message||"Unknown error"})})}return t}async function Bce(e){return(await TR([e]))[0]}async function Wce(){var e,t;try{console.log("Fetching files from n8n RAG system...");const n=await nu.post(_m.LIST_FILES,{},{headers:{Accept:"application/json","Content-Type":"application/json"},timeout:1e4});console.log("Files fetched successfully:",n.data);let r=[];Array.isArray(n.data)?r=n.data:n.data.files&&Array.isArray(n.data.files)?r=n.data.files:n.data.data&&Array.isArray(n.data.data)?r=n.data.data:(console.warn("Unexpected response format from n8n:",n.data),r=[]);const i=r.map((a,o)=>({id:a.id||a.fileId||a.file_id||`file-${Date.now()}-${o}`,name:a.name||a.fileName||a.file_name||"Unknown",size:a.size||a.fileSize||a.file_size||0,type:a.type||a.contentType||a.content_type||"application/octet-stream",uploadedAt:a.uploadedAt||a.createdAt||a.uploadDate||a.created_at||new Date().toISOString(),status:a.status||"ready",url:a.url||a.downloadUrl||a.download_url,lastModified:a.lastModified||a.updatedAt||a.updated_at,syncStatus:"pending"}));console.log("🔍 Checking sync status for files (batched by filename)...");try{const a=Ie(),{data:o,error:s}=await a.from("documents").select("metadata->>fileName as fileName");s&&console.warn("⚠️ Failed to fetch document filenames for sync check:",s);const l=new Set;if(o&&o.length>0)for(const c of o){const d=c.fileName;d&&typeof d=="string"&&l.add(d.trim().toLowerCase())}console.log("[SyncCheck] Indexed filenames count:",l.size),l.size>0&&console.log("[SyncCheck] Example indexed name:",Array.from(l)[0]);for(let c=0;c<i.length;c++){const d=i[c],f=(d.name||"").trim(),m=(f.includes("/")?f.substring(f.lastIndexOf("/")+1):f).toLowerCase();d.syncStatus=l.has(m)?"synced":"pending"}}catch(a){console.warn("⚠️ Error during batched sync status calculation:",a);for(let o=0;o<i.length;o++)i[o].syncStatus="error"}return{success:!0,files:i,total:i.length,message:"Files fetched successfully"}}catch(n){return console.error("Error fetching files from RAG:",n),{success:!1,files:[],total:0,message:((t=(e=n.response)==null?void 0:e.data)==null?void 0:t.message)||n.message||"Failed to fetch files"}}}function IR(e){let t=e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x00-\x7F]/g,"_").replace(/\s+/g,"_").replace(/[<>:"/\\|?*]/g,"_").replace(/_+/g,"_").trim();return t.includes(".")||(t+=".txt"),t}function DR(e){return e.size>52428800?{valid:!1,error:"File size must be less than 50MB"}:(/[^\x00-\x7F]/.test(e.name),["application/pdf","text/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/markdown","application/json","text/html"].includes(e.type)?{valid:!0}:{valid:!1,error:"Unsupported file type. Please upload PDF, Word, Excel, CSV, TXT, MD, JSON, or HTML files."})}function RR(e){if(e===0)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,r)).toFixed(2))+" "+n[r]}function qce(e){return e.includes("pdf")?"📄":e.includes("word")||e.includes("document")?"📝":e.includes("excel")||e.includes("spreadsheet")?"📊":e.includes("csv")?"📈":e.includes("text")?"📃":e.includes("markdown")?"📋":e.includes("json")?"🔧":e.includes("html")?"🌐":"📁"}async function Hce(e){var t,n;try{console.log(`Re-indexing file via n8n: ${e}`);const r=await nu.post(_m.REINDEX_FILE,{fileId:e},{headers:{Accept:"application/json","Content-Type":"application/json"},timeout:15e3});return console.log("Re-index response:",r.data),{success:!0,message:r.data.message||"File re-indexed successfully"}}catch(r){return console.error("Error re-indexing file:",r),{success:!1,message:((n=(t=r.response)==null?void 0:t.data)==null?void 0:n.message)||r.message||"Failed to re-index file"}}}async function Kce(e){var t,n;try{console.log(`Deleting file from RAG via n8n: ${e}`);const r=await nu.post(_m.DELETE_FILE,{fileId:e},{headers:{Accept:"application/json","Content-Type":"application/json"},timeout:1e4});return console.log("Delete response:",r.data),{success:!0,message:r.data.message||"File deleted successfully"}}catch(r){return console.error("Error deleting file:",r),{success:!1,message:((n=(t=r.response)==null?void 0:t.data)==null?void 0:n.message)||r.message||"Failed to delete file"}}}const Zi="knowledge-base";async function Vce(e,t){try{const{data:n,error:r}=await e.storage.from(Zi).list("files",{limit:1e3,offset:0});if(r)return console.error("Error listing files:",r),t;if(!n||n.length===0||!n.some(d=>d.name===t))return t;const a=t.split("."),o=a.length>1?`.${a.pop()}`:"",s=a.join(".");let l=1,c=`${s} (${l})${o}`;for(;n.some(d=>d.name===c);)l++,c=`${s} (${l})${o}`;return console.log(`📝 Duplicate file detected: ${t} → ${c}`),c}catch(n){return console.error("Error in getUniqueFileName:",n),t}}async function pw(e){const t=[],n=Ie();for(const r of e)try{const i=DR(r);if(!i.valid){t.push({success:!1,message:"File validation failed",fileName:r.name,error:i.error});continue}const a=IR(r.name);a!==r.name&&console.warn(`⚠️ Filename sanitized: "${r.name}" → "${a}"`);const o=await Vce(n,a),s=`files/${o}`;console.log(`Uploading file to Supabase Storage: ${s}`);const{data:l,error:c}=await n.storage.from(Zi).upload(s,r,{cacheControl:"3600",upsert:!1});if(c){console.error("Supabase upload error:",c),t.push({success:!1,message:"Failed to upload file",fileName:r.name,error:c.message});continue}console.log("File uploaded successfully:",l),t.push({success:!0,message:"File uploaded successfully",fileName:o})}catch(i){console.error("Error uploading file to Supabase:",i),t.push({success:!1,message:"Failed to upload file",fileName:r.name,error:i.message||"Unknown error"})}return t}async function Gce(e){return(await pw([e]))[0]}async function MR(){var e;try{console.log("Fetching files from Supabase Storage...");const t=Ie(),{data:n,error:r}=await t.storage.from(Zi).list("files",{limit:100,offset:0,sortBy:{column:"created_at",order:"desc"}});if(r)return console.error("Supabase list error:",r),{success:!1,files:[],total:0,message:r.message};console.log("Files fetched from Supabase:",n);const i=n.map(a=>{var o,s;return{id:a.id||a.name,name:a.name,size:((o=a.metadata)==null?void 0:o.size)||0,type:((s=a.metadata)==null?void 0:s.mimetype)||"application/octet-stream",uploadedAt:a.created_at||new Date().toISOString(),status:"ready",lastModified:a.updated_at||a.created_at,syncStatus:"pending"}});console.log("🔍 Checking sync status for files...");try{let a=[],o=!0,s=0;const l=1e3;for(;o;){const{data:m,error:p}=await t.from("documents").select("metadata").range(s*l,(s+1)*l-1);if(p){console.warn(`⚠️ Error fetching page ${s}:`,p);break}m&&m.length>0?(a=[...a,...m],o=m.length===l,s++):o=!1}console.log(`📊 Total documents fetched: ${a.length} (${s} pages)`);const c=new Set,d=new Map;if(a&&a.length>0){console.log("📋 First document metadata sample:",(e=a[0])==null?void 0:e.metadata);for(const m of a){const p=m.metadata||{};JSON.stringify(p).toLowerCase().includes("badillo")&&(console.log("🔍 RAW Badillo metadata found:",p),console.log(`   Type: ${typeof p}`),console.log("   Keys:",Object.keys(p)));const g=p.fileName;if(g){const y=g.toLowerCase().trim();c.add(y),d.set(y,g),g.toLowerCase().includes("badillo")&&console.log("🔍 Found Badillo file in DB:",{original:g,normalized:y,metadata:p}),[y.replace(/\s+/g,"_"),y.replace(/_+/g," "),y.replace(/[^\x00-\x7F]/g,"")].forEach(b=>{b!==y&&(c.add(b),d.set(b,g))})}}}console.log(`[SyncCheck] Indexed filenames count: ${c.size}`),console.log(`[SyncCheck] Unique documents: ${d.size}`);const f=Array.from(new Set(d.values()));console.log(`[SyncCheck] ALL indexed files (${f.length}):`,f);const h=Array.from(c).filter(m=>m.includes("badillo"));h.length>0?console.log("🔍 All Badillo variants in indexedNameSet:",h):(console.warn(`⚠️ No Badillo file found in ${(a==null?void 0:a.length)||0} indexed documents!`),console.log("📋 Checking first 5 metadata entries:",a==null?void 0:a.slice(0,5).map(m=>m.metadata)));for(let m=0;m<i.length;m++){const p=i[m],g=p.name.toLowerCase().trim(),y=[g,g.replace(/\s+/g," "),g.replace(/\s+/g,"_"),g.replace(/_+/g," "),g.replace(/[^\x00-\x7F]/g,""),g.replace(/\s+/g,"").replace(/_+/g,"")];try{y.push(decodeURIComponent(g)),y.push(encodeURIComponent(g).toLowerCase())}catch{}let x=!1,b="";for(const w of y)if(c.has(w)){x=!0,b=w;break}if(x)p.syncStatus="synced",console.log(`✅ File "${p.name}" is SYNCED (matched via: "${b}")`);else{p.syncStatus="pending",console.log(`⏳ File "${p.name}" is NOT INDEXED`),console.log(`   Storage filename: "${p.name}"`),console.log(`   Tried variants (${y.length}):`,y.slice(0,5)),console.log("   Sample indexed files:",Array.from(new Set(d.values())).slice(0,5));const w=Array.from(new Set(d.values())).filter(j=>j.toLowerCase().includes(g.substring(0,20).toLowerCase())||g.includes(j.substring(0,20).toLowerCase()));w.length>0&&console.log("   🔍 Possible matches:",w)}}}catch(a){console.warn("⚠️ Error during sync status calculation:",a);for(let o=0;o<i.length;o++)i[o].syncStatus="error"}return{success:!0,files:i,total:i.length,message:"Files fetched successfully"}}catch(t){return console.error("Error fetching files from Supabase:",t),{success:!1,files:[],total:0,message:t.message||"Failed to fetch files"}}}async function LR(e){try{console.log(`Deleting file from Supabase Storage: ${e}`);const t=Ie(),n=`files/${e}`,{error:r}=await t.storage.from(Zi).remove([n]);return r?(console.error("Supabase delete error:",r),{success:!1,message:r.message}):(console.log("File deleted successfully from Supabase"),{success:!0,message:"File deleted successfully"})}catch(t){return console.error("Error deleting file from Supabase:",t),{success:!1,message:t.message||"Failed to delete file"}}}async function Yce(e){try{const t=Ie(),n=`files/${e}`,{data:r}=t.storage.from(Zi).getPublicUrl(n);return r.publicUrl}catch(t){return console.error("Error getting file URL:",t),null}}function $R(e){if(e.size>52428800)return{valid:!1,error:"File size must be less than 50MB"};const n=[".pdf",".docx",".doc",".xlsx",".xls",".pptx",".ppt",".txt",".md",".csv",".json",".html",".rtf",".xml",".css",".js",".ts"],r=e.name.toLowerCase();return n.some(a=>r.endsWith(a))?{valid:!0}:{valid:!1,error:`Unsupported file type. Allowed: ${n.join(", ")}`}}async function gw(e=50,t=0){try{console.log(`Fetching vector documents from Supabase (limit: ${e}, offset: ${t})...`);const n=Ie(),{data:r,error:i,count:a}=await n.from("documents").select("id, content, metadata, created_at",{count:"exact"}).order("id",{ascending:!1}).range(t,t+e-1);return i?(console.error("Supabase error:",i),{success:!1,documents:[],total:0,message:i.message}):(console.log(`✅ Fetched ${(r==null?void 0:r.length)||0} documents from Supabase (Total: ${a||0})`),{success:!0,documents:r||[],total:a||0,message:"Documents fetched successfully"})}catch(n){return console.error("Error fetching vector documents:",n),{success:!1,documents:[],total:0,message:n.message||"Failed to fetch documents"}}}async function yw(e){var t,n;try{const r=Ie(),i=`files/${e}`;console.log(`🔍 Requesting signed URL for: ${i}`);const{data:a,error:o}=await r.storage.from(Zi).createSignedUrl(i,3600);if(console.log("🔍 Signed URL response:",{urlData:a,urlError:o}),o||!(a!=null&&a.signedUrl))return console.error("Error getting file URL:",o),{success:!1,message:"Failed to get file URL"};const{data:s}=r.storage.from(Zi).getPublicUrl(i);console.log("🔍 Public URL for comparison:",s),console.log(`📤 Sending file to n8n for indexing: ${e}`);let l=a.signedUrl;if(a.signedUrl.startsWith("http"))console.log("✅ URL already full, no conversion needed");else{const g={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_SUPABASE_URL||"https://qpyteahuynkgkbmdasbv.supabase.co";a.signedUrl.startsWith("/object/")?(l=`${g}/storage/v1${a.signedUrl}`,console.log("🔧 Converted relative URL to full URL")):a.signedUrl.startsWith("/storage/")?(l=`${g}${a.signedUrl}`,console.log("🔧 Converted /storage/ URL to full URL")):(l=`${g}/storage/v1/object/sign/${Zi}/${i}?token=${a.signedUrl.split("token=")[1]||""}`,console.log("🔧 Used fallback URL construction"))}console.log(`🔗 FINAL URL SENT TO N8N: ${l}`),console.log(`⏰ Request time: ${new Date().toISOString()}`);const{getSession:c}=await Hr(()=>Promise.resolve().then(()=>sU),void 0),d=c(),f=AR;console.log("👤 Using default FILE INDEXING webhook");const h={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_N8N_DEV_MODE==="true"||localStorage.getItem("n8n-dev-mode")==="true",m=h?`https://n8n.srv978041.hstgr.cloud/webhook-test/${f}`:{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_N8N_BASE_URL?`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_N8N_BASE_URL}/webhook/${f}`:`${_o}/webhook/${f}`;console.log(`🔧 Webhook mode: ${h?"DEV (test)":"PRODUCTION"}`),console.log(`🌐 Using webhook: ${m}`),console.log(`👤 User: ${(d==null?void 0:d.email)||"Unknown"} (${(d==null?void 0:d.userId)||"Unknown"})`),h&&console.warn("⚠️ Using TEST webhook - this may not be active!"),console.log(`🌐 n8n Webhook URL: ${m}`);const p=[{fileUrl:l,fileName:e,source:"supabase-storage"}];console.log("📦 Payload being sent:",p);try{const g=await nu.post(m,p,{headers:{"Content-Type":"application/json"},timeout:3e4});console.log("✅ File sent to n8n for indexing:",g.data),console.log("📊 Response status:",g.status),console.log("📋 Response headers:",g.headers);const y=g.data.workflowId||g.data.executionId,x=g.data.estimatedTime||"30-60 seconds";return{success:!0,message:`File sent for indexing successfully. Processing time: ${x}`,...y&&{workflowId:y},...x&&{estimatedTime:x}}}catch(g){console.warn("⚠️ Axios failed (likely CORS), trying fetch with no-cors:",g);try{const y=await fetch(m,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});return console.log(`✅ Fetch request sent (no-cors mode) - status: ${y.status}`),console.log(`🔍 Response type: ${y.type}`),y.status===0?(console.log("✅ Request sent successfully (no-cors mode)"),{success:!0,message:"File sent for indexing (CORS bypassed). Processing time: 30-60 seconds"}):(console.warn(`⚠️ Unexpected status in no-cors mode: ${y.status}`),{success:!0,message:`File sent for indexing (CORS bypassed, status: ${y.status}). Processing time: 30-60 seconds`})}catch(y){if(console.error("❌ Both axios and fetch failed:",y),(t=y==null?void 0:y.message)!=null&&t.includes("404")||(n=y==null?void 0:y.message)!=null&&n.includes("ERR_ABORTED"))return{success:!1,message:`Webhook URL not found (404). Please check if the webhook is active: ${m}`};throw y}}}catch(r){const i=r instanceof Error?r.message:"Failed to index file";return console.error("Error indexing file:",r),{success:!1,message:i}}}async function FR(e){try{const t=Ie(),{data:n,error:r}=await t.from("documents").select("id, created_at, metadata").ilike("metadata->>fileName",e).order("created_at",{ascending:!1});if(r)return console.error("Error checking indexing status:",r),{success:!1,message:"Failed to check indexing status",status:"failed"};if(n&&n.length>0){const i=n[0];return{success:!0,message:`File indexed successfully with ${n.length} chunks`,status:"completed",chunksCount:n.length,lastUpdated:i.created_at}}else return{success:!0,message:"File not yet indexed or indexing in progress",status:"pending"}}catch(t){return console.error("Error checking indexing status:",t),{success:!1,message:"Failed to check indexing status",status:"failed"}}}async function UR(e){try{const t=Ie();console.log(`🗑️ Direct Supabase deletion for filename: "${e}"`),console.log(`🔍 Filename length: ${e.length}`),console.log(`🔍 Filename characters: ${e.split("").map(l=>l.charCodeAt(0)).join(",")}`);let n=[],r=0;console.log("🔍 Trying exact match...");let{data:i,error:a}=await t.from("documents").select("id, metadata").eq("metadata->>fileName",e);if(!a&&i&&i.length>0)n=i,r=i.length,console.log(`✅ Found ${r} records with exact match`);else{console.log("❌ Exact match failed, trying ilike...");let{data:l,error:c}=await t.from("documents").select("id, metadata").ilike("metadata->>fileName",e);if(!c&&l&&l.length>0)n=l,r=l.length,console.log(`✅ Found ${r} records with ilike match`);else{console.log("❌ ilike match failed, trying contains...");let{data:d,error:f}=await t.from("documents").select("id, metadata").ilike("metadata->>fileName",`%${e}%`);if(!f&&d&&d.length>0)n=d,r=d.length,console.log(`✅ Found ${r} records with contains match`);else{console.log("❌ All query approaches failed");let{data:h}=await t.from("documents").select("metadata").limit(10);console.log("🔍 Sample metadata from database:",h);let{data:m}=await t.from("documents").select("metadata->>fileName").not("metadata->>fileName","is",null);if(m){const p=[...new Set(m.map(g=>g.fileName))];console.log("🔍 All unique filenames in database:",p),console.log('🔍 Looking for filename containing "PM-Marketing":',p.filter(g=>g&&g.includes("PM-Marketing"))),console.log('🔍 Looking for filename containing "Team Notebook":',p.filter(g=>g&&g.includes("Team Notebook")))}return{success:!1,message:`No records found for filename: ${e}. Check console for debugging info.`,deletedCount:0}}}}if(console.log(`📊 Found ${r} records to delete for filename: ${e}`),r===0)return{success:!0,message:`No records found for filename: ${e}`,deletedCount:0};let o=t.from("documents").delete();if(n.length>0){const l=n.map(c=>c.id);o=o.in("id",l)}else o=o.ilike("metadata->>fileName",e);const{error:s}=await o;return s?(console.error("Error deleting records:",s),{success:!1,message:`Failed to delete documents: ${s.message}`,deletedCount:0}):(console.log(`✅ Successfully deleted ${r} records for filename: ${e}`),{success:!0,message:`File ${e} unindexed successfully (${r} chunks removed)`,deletedCount:r})}catch(t){return console.error("Error in direct Supabase deletion:",t),{success:!1,message:`Failed to delete documents: ${t.message}`,deletedCount:0}}}async function zR(e){try{return console.log("🗑️ Unindexing file using direct Supabase deletion:",e),await UR(e)}catch(t){return console.error("❌ Failed to unindex file:",t),{success:!1,message:`Failed to unindex file: ${t.message||"Unknown error"}`}}}async function Jce(e){return await UR(e)}async function Xce(e){try{const t=Ie();console.log(`🔍 Checking sync status for: ${e}`);const{data:n,error:r}=await t.from("documents").select("id, metadata").ilike("metadata->>fileName",e);return r?(console.error("Error checking sync status:",r),{success:!1,syncStatus:"error",message:`Error checking sync status: ${r.message}`}):n&&n.length>0?{success:!0,syncStatus:"synced",message:`File is indexed (${n.length} chunks)`,chunksCount:n.length}:{success:!0,syncStatus:"pending",message:"File is not indexed (pending)"}}catch(t){return console.error("Error checking sync status:",t),{success:!1,syncStatus:"error",message:`Error checking sync status: ${t.message}`}}}const Qce=Object.freeze(Object.defineProperty({__proto__:null,checkFileSyncStatus:Xce,checkIndexingStatus:FR,deleteFileFromRAG:Kce,deleteFileFromSupabase:LR,fetchFilesFromRAG:Wce,fetchFilesFromSupabase:MR,fetchVectorDocuments:gw,formatFileSize:RR,getFileIcon:qce,getSupabaseFileUrl:Yce,indexFileToVector:yw,reindexFile:Hce,sanitizeFileName:IR,unindexFileByFilename:zR,unindexFileDirect:Jce,uploadFilesToRAG:TR,uploadFilesToSupabase:pw,uploadSingleFileToRAG:Bce,uploadSingleFileToSupabase:Gce,validateFile:DR,validateFileExtended:$R},Symbol.toStringTag,{value:"Module"})),__=()=>{const{t:e}=Ze(),t=v.useRef(null),[n,r]=v.useState(!1),[i,a]=v.useState([]),[o,s]=v.useState(!1),[l,c]=v.useState([]),[d,f]=v.useState(""),[h,m]=v.useState("date"),[p,g]=v.useState("desc"),[y,x]=v.useState(!1),[b,w]=v.useState(null),[j,S]=v.useState(null),[k,_]=v.useState([]),[N,P]=v.useState({}),[E,T]=v.useState(new Set),[L,$]=v.useState(()=>localStorage.getItem("n8n-dev-mode")==="true"),B="supabase",D=(M,Y)=>{const F=Date.now().toString();_(he=>[...he,{id:F,message:M,type:Y}])},z=M=>{_(Y=>Y.filter(F=>F.id!==M))},G=()=>{const M=!L;$(M),localStorage.setItem("n8n-dev-mode",M.toString()),console.log(`🔧 Switched to ${M?"DEV":"PRODUCTION"} mode`)},I=()=>{$(!1),localStorage.setItem("n8n-dev-mode","false"),console.log("🔧 Reset to PRODUCTION mode")};v.useEffect(()=>{R()},[B]),v.useEffect(()=>{const M=localStorage.getItem("n8n-dev-mode");(M===null||M==="true")&&($(!1),localStorage.setItem("n8n-dev-mode","false"),console.log("🔧 Defaulted to PRODUCTION mode"))},[]),v.useEffect(()=>{window.resetToProduction=I,window.toggleDevMode=G,console.log("🔧 Debug commands available:"),console.log("  - window.resetToProduction() - Reset to production mode"),console.log("  - window.toggleDevMode() - Toggle between dev/prod")},[]),v.useEffect(()=>{if(E.size===0)return;const M=setInterval(async()=>{for(const Y of E)try{const F=await FR(Y);P(he=>({...he,[Y]:{status:F.status,message:F.message,chunksCount:F.chunksCount,lastUpdated:F.lastUpdated}})),(F.status==="completed"||F.status==="failed")&&T(he=>{const ce=new Set(he);return ce.delete(Y),ce})}catch(F){console.error(`Error polling status for ${Y}:`,F)}},3e3);return()=>clearInterval(M)},[E]);const R=async()=>{x(!0),w(null);try{const M=await MR();M.success?(c(M.files),console.log(`✅ Loaded ${M.files.length} files from Supabase Storage`)):(w(M.message||"Failed to load files from Supabase"),console.error("Failed to load files:",M.message))}catch(M){w("Failed to connect to Supabase Storage. Please check your configuration."),console.error("Error loading files:",M)}finally{x(!1)}},C=()=>{R()},Q=async(M,Y)=>{if(confirm(`Are you sure you want to delete "${Y}"?`))try{const F=await LR(Y);F.success?(c(he=>he.filter(ce=>ce.id!==M)),console.log(`✅ File ${Y} deleted successfully`)):alert(`Failed to delete file: ${F.message}`)}catch(F){console.error("Error deleting file:",F),alert("Failed to delete file")}},q=async M=>{S(M);try{console.log("🔄 Starting index process for:",M),P(F=>({...F,[M]:{status:"processing",message:"Sending file to n8n for indexing..."}}));const Y=await yw(M);console.log("📋 Index result:",Y),Y.success?(T(F=>new Set(F).add(M)),P(F=>({...F,[M]:{status:"processing",message:Y.message||"File sent for indexing, checking status..."}})),D(`✅ ${Y.message} - Status will update automatically. Check Knowledge Index tab when complete.`,"success"),R()):(P(F=>({...F,[M]:{status:"failed",message:Y.message||"Failed to send file for indexing"}})),D(`❌ Failed to index file: ${Y.message}`,"error"))}catch(Y){console.error("❌ Error indexing file:",Y),P(F=>({...F,[M]:{status:"failed",message:`Error: ${Y}`}})),D(`❌ Error indexing file: ${Y}`,"error")}finally{S(null)}},A=async M=>{try{const Y=(await Hr(()=>import("./supabase-5292f094.js"),[])).getSupabaseClient(),F=`files/${M}`,{data:he,error:ce}=await Y.storage.from("knowledge-base").createSignedUrl(F,3600);if(ce){console.error("Error creating signed URL:",ce),alert(`Failed to get download URL: ${ce.message}`);return}he!=null&&he.signedUrl?window.open(he.signedUrl,"_blank"):alert("Failed to get download URL")}catch(Y){console.error("Error downloading file:",Y),alert("Failed to download file")}},le=v.useCallback(M=>{if(!M||M.length===0)return;const Y=Array.from(M),F=[],he=[];Y.forEach(ce=>{const ke=$R(ce);ke.valid?F.push(ce):he.push(`${ce.name}: ${ke.error}`)}),he.length>0&&alert(he.join(`
`)),F.length>0&&U(F)},[B]),U=async M=>{r(!0),a([]);try{const Y=await pw(M);a(Y);const F=Y.filter(ke=>ke.success).length,he=Y.filter(ke=>!ke.success).length,ce=Y.filter(ke=>!ke.success);if(F>0&&D(`✅ ${F} file(s) uploaded successfully`,"success"),he>0){const ke=ce.map(Pe=>Pe.message).join(", ");D(`❌ ${he} file(s) failed: ${ke}`,"error")}await R()}catch(Y){console.error("Upload error:",Y)}finally{r(!1)}},Z=v.useCallback(M=>{M.preventDefault(),M.stopPropagation(),M.type==="dragenter"||M.type==="dragover"?s(!0):M.type==="dragleave"&&s(!1)},[]),J=v.useCallback(M=>{M.preventDefault(),M.stopPropagation(),s(!1),M.dataTransfer.files&&M.dataTransfer.files[0]&&le(M.dataTransfer.files)},[le]),ne=M=>{le(M.target.files)},X=l.filter(M=>M.name.toLowerCase().includes(d.toLowerCase())).sort((M,Y)=>{let F=0;switch(h){case"name":F=M.name.localeCompare(Y.name);break;case"date":F=new Date(M.uploadedAt).getTime()-new Date(Y.uploadedAt).getTime();break;case"size":F=M.size-Y.size;break}return p==="asc"?F:-F});return u.jsxs("div",{className:"file-library",children:[u.jsx("div",{className:"fl-header",children:u.jsxs("div",{className:"fl-header-content",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"fl-title",children:e("knowledge.fileLibrary")}),u.jsx("p",{className:"fl-description",children:e("knowledge.fileLibraryDescription")})]}),u.jsx("div",{className:"webhook-mode-toggle",children:u.jsx("button",{onClick:G,className:`mode-toggle-btn ${L?"dev-mode":"prod-mode"}`,children:L?"🔧 DEV Mode":"🚀 PROD Mode"})})]})}),u.jsx("div",{className:"fl-upload-section",children:u.jsxs("div",{className:`fl-upload-area ${o?"drag-active":""} ${n?"uploading":""}`,onDragEnter:Z,onDragLeave:Z,onDragOver:Z,onDrop:J,onClick:()=>{var M;return(M=t.current)==null?void 0:M.click()},children:[u.jsx("input",{ref:t,type:"file",multiple:!0,accept:".txt,.md,.json,.csv,.xml,.html,.css,.js,.ts,.pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx",onChange:ne,style:{display:"none"},disabled:n}),u.jsx("div",{className:"upload-content",children:n?u.jsxs("div",{className:"upload-loading",children:[u.jsx("div",{className:"spinner"}),u.jsx("p",{children:e("knowledge.uploadingFiles")})]}):u.jsxs("div",{className:"upload-prompt",children:[u.jsx("div",{className:"upload-icon",children:"↑"}),u.jsx("p",{className:"upload-text",children:e("knowledge.dragFilesHere")}),u.jsx("p",{className:"upload-formats",children:e("knowledge.supportedFormats")})]})})]})}),u.jsxs("div",{className:"fl-controls",children:[u.jsx("div",{className:"fl-search",children:u.jsx("input",{type:"text",placeholder:e("knowledge.searchByFilename"),value:d,onChange:M=>f(M.target.value),className:"search-input"})}),u.jsxs("button",{className:"refresh-btn",onClick:C,disabled:y,children:[u.jsx("span",{className:"refresh-icon",children:"↻"}),y?e("knowledge.loading")||"Loading...":e("knowledge.refresh")]})]}),b&&u.jsx("div",{className:"error-message",style:{padding:"12px",backgroundColor:"#fee",color:"#c33",borderRadius:"4px",marginBottom:"16px"},children:b}),u.jsx("div",{className:"fl-table-container",children:y?u.jsxs("div",{className:"loading-state",style:{textAlign:"center",padding:"40px",color:"#666"},children:[u.jsx("div",{className:"spinner",style:{width:"24px",height:"24px",border:"2px solid #f3f3f3",borderTop:"2px solid #333",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),"Loading files from n8n..."]}):u.jsxs("table",{className:"fl-table",style:{width:"100%",minWidth:"900px"},children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{style:{width:"30%",minWidth:"200px"},children:e("knowledge.fileName")}),u.jsx("th",{style:{width:"10%",minWidth:"80px"},children:e("knowledge.size")}),u.jsx("th",{style:{width:"15%",minWidth:"150px"},children:e("knowledge.lastModified")}),u.jsx("th",{style:{width:"15%",minWidth:"120px"},children:e("knowledge.contentType")}),u.jsx("th",{style:{width:"10%",minWidth:"100px",textAlign:"center"},children:e("knowledge.syncStatus")}),u.jsx("th",{style:{width:"20%",minWidth:"150px",textAlign:"right",paddingRight:"16px"},children:e("knowledge.actions")})]})}),u.jsx("tbody",{children:X.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:6,style:{textAlign:"center",padding:"40px",color:"#666"},children:b?"Failed to load files":"No files found. Upload some files to get started."})}):X.map(M=>u.jsxs("tr",{children:[u.jsx("td",{className:"file-name",style:{wordBreak:"break-word"},children:M.name}),u.jsx("td",{style:{whiteSpace:"nowrap"},children:RR(M.size)}),u.jsx("td",{style:{whiteSpace:"nowrap"},children:new Date(M.uploadedAt).toLocaleString()}),u.jsx("td",{style:{wordBreak:"break-word"},children:M.type}),u.jsx("td",{className:"sync-status-cell",style:{whiteSpace:"nowrap"},children:u.jsx("span",{style:{color:M.syncStatus==="synced"?"#10b981":"#f59e0b",fontWeight:M.syncStatus==="pending"?"bold":"normal",fontSize:"14px"},children:M.syncStatus==="synced"?"✓ Synced":"⚠ Not Indexed"})}),u.jsx("td",{style:{textAlign:"right",paddingRight:"16px"},children:u.jsxs("div",{className:"file-actions",style:{justifyContent:"flex-end"},children:[M.syncStatus==="pending"&&u.jsx("button",{className:"icon-action-btn index-btn",title:"Index this file",onClick:()=>q(M.name),disabled:j===M.name,style:{backgroundColor:"var(--admin-primary, #3b82f6)",color:"white",borderColor:"var(--admin-primary, #3b82f6)"},children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("polyline",{points:"12 6 12 12 16 14"})]})}),u.jsx("button",{className:"icon-action-btn",title:e("knowledge.download"),onClick:()=>A(M.name),children:u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})})}),u.jsx("button",{className:"icon-action-btn delete-icon-btn",title:e("knowledge.delete"),onClick:()=>Q(M.id,M.name),children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("polyline",{points:"3 6 5 6 21 6"}),u.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})})]},M.id))})]})}),u.jsx(ule,{toasts:k,removeToast:z})]})},Zce=()=>{const{t:e}=Ze(),[t,n]=v.useState(""),[r,i]=v.useState(1),[a,o]=v.useState(50),[s,l]=v.useState(0),[c,d]=v.useState([]),[f,h]=v.useState(!1),[m,p]=v.useState(null),[g,y]=v.useState(null),[x,b]=v.useState(null),[w,j]=v.useState(!1),[S,k]=v.useState(null),[_,N]=v.useState(""),[P,E]=v.useState(new Set);v.useEffect(()=>{T()},[r,a]);const T=async()=>{var J;h(!0),p(null);try{const X=(r-1)*500;console.log(`🔄 Loading documents from Supabase (Page ${r}, 500 items, offset: ${X})...`),console.log("⏰ Current time:",new Date().toISOString());const M=await gw(500,X);if(console.log("📋 Raw response:",M),console.log("📊 Total documents found:",M.total||0),console.log("📄 Documents array length:",((J=M.documents)==null?void 0:J.length)||0),M.documents&&M.documents.length>0&&(console.log("📅 Document creation times:"),M.documents.forEach((Y,F)=>{console.log(`  ${F+1}. ID: ${Y.id}, Created: ${Y.created_at||"N/A"}, Metadata:`,Y.metadata)})),M.success){const{fetchFilesFromSupabase:Y}=await Hr(()=>Promise.resolve().then(()=>Qce),void 0),F=await Y(),he=new Set((F.files||[]).map(Ee=>Ee.name.toLowerCase())),ce=M.documents.map(Ee=>{var jr,H,se,me;const Re=Ee.metadata||{};let en="Unknown";Re.fileName?en=Re.fileName:Re.source&&Re.source!=="blob"?en=Re.source:(H=(jr=Re.pdf)==null?void 0:jr.info)!=null&&H.Title?en=Re.pdf.info.Title:Re.blobType&&(en=`document.${Re.blobType.split("/")[1]||"pdf"}`);let Sr="";(se=Re.loc)!=null&&se.lines?Sr=`Lines ${Re.loc.lines.from}-${Re.loc.lines.to}`:(me=Re.loc)!=null&&me.pageNumber&&(Sr=`Page ${Re.loc.pageNumber}`);const Ei=he.has(en.toLowerCase())?"synced":"orphaned";return{id:Ee.id.toString(),fileName:en,source:Re.source||"blob",chunkIndex:Re.chunkIndex||0,content:Ee.content,pageInfo:Sr,syncStatus:Ei,createdAt:Ee.created_at||new Date().toISOString(),metadata:Re}}),ke={};ce.forEach(Ee=>{ke[Ee.fileName]=(ke[Ee.fileName]||0)+1});const Pe={};ce.forEach(Ee=>{Pe[Ee.fileName]||(Pe[Ee.fileName]=0),Pe[Ee.fileName]++,Ee.chunkInfo=`${Pe[Ee.fileName]} of ${ke[Ee.fileName]}`}),d(ce),l(M.total),console.log(`✅ Loaded ${ce.length} documents from Supabase`)}else p(M.message||"Failed to load documents"),console.error("Failed to load documents:",M.message)}catch(ne){p("Failed to connect to Supabase. Please check your configuration."),console.error("Error loading documents:",ne)}finally{h(!1)}},L=()=>{console.log("🔄 Manual refresh triggered by user"),N(new Date().toLocaleTimeString()),i(1),T()},$=J=>{y(J)},B=async J=>{b(J);try{const ne=await yw(J);ne.success?(alert(`✅ ${ne.message}`),T()):alert(`❌ ${ne.message}`)}catch(ne){alert(`❌ Error indexing file: ${ne}`)}finally{b(null)}},D=async J=>{if(confirm(`⚠️ Are you sure you want to unindex all chunks for "${J}"? This will remove ALL chunks for this file.`)){b(J);try{const ne=await zR(J);ne.success?(alert(`✅ ${ne.message} (${ne.deletedCount||0} chunks removed)`),T()):alert(`❌ ${ne.message}`)}catch(ne){alert(`❌ Error unindexing file: ${ne}`)}finally{b(null)}}},z=J=>{E(ne=>{const X=new Set(ne);return X.has(J)?X.delete(J):X.add(J),X})},G=c.filter(J=>J.fileName.toLowerCase().includes(t.toLowerCase())||J.source.toLowerCase().includes(t.toLowerCase())||J.content.toLowerCase().includes(t.toLowerCase())),I=G.reduce((J,ne)=>(J[ne.fileName]||(J[ne.fileName]=[]),J[ne.fileName].push(ne),J),{}),R=Object.keys(I).length,C=20,Q=Math.ceil(R/C),q=Object.entries(I),A=(r-1)*C,le=A+C,U=q.slice(A,le),Z=Object.fromEntries(U);return u.jsxs("div",{className:"knowledge-index",children:[u.jsxs("div",{className:"ki-header",children:[u.jsx("h2",{className:"ki-title",children:e("knowledge.knowledgeIndex")}),u.jsx("p",{className:"ki-description",children:e("knowledge.knowledgeIndexDescription")})]}),u.jsxs("div",{className:"ki-controls",children:[u.jsx("div",{className:"ki-search",children:u.jsx("input",{type:"text",placeholder:e("knowledge.searchByTitleFilepathContent"),value:t,onChange:J=>n(J.target.value),className:"search-input"})}),u.jsxs("div",{className:"ki-pagination-info",children:[u.jsxs("span",{children:["Total: ",s.toLocaleString()," chunks in ",R," files"]}),u.jsxs("span",{children:["Showing ",Object.keys(Z).length," files (Page ",r," of ",Q||1,")"]})]}),u.jsxs("div",{className:"ki-navigation",children:[u.jsx("button",{className:"nav-btn prev-btn",disabled:r===1,onClick:()=>i(J=>Math.max(1,J-1)),children:e("knowledge.previous")}),u.jsx("button",{className:"nav-btn next-btn",disabled:r===Q,onClick:()=>i(J=>Math.min(Q,J+1)),children:e("knowledge.next")})]}),u.jsxs("button",{className:"refresh-btn",onClick:L,disabled:f,children:[u.jsx("span",{className:"refresh-icon",children:"↻"}),f?"Loading...":e("knowledge.refresh"),_&&u.jsxs("span",{style:{fontSize:"0.8em",opacity:.7,marginLeft:"8px"},children:["(Last: ",_,")"]})]})]}),u.jsxs("div",{style:{backgroundColor:"var(--admin-bg-secondary)",border:"1px solid var(--admin-border)",borderRadius:"6px",padding:"12px",marginBottom:"16px",fontSize:"0.9em"},children:[u.jsx("strong",{children:"🔍 Debug Info:"})," Total: ",s," chunks (",R," unique files) | Loaded: ",c.length," chunks | Showing: ",Object.keys(Z).length," files on this page | Last Refresh: ",_||"Never"," |",u.jsx("button",{onClick:()=>{console.log("📊 Current documents state:",c),console.log("📊 Filtered documents:",G)},style:{marginLeft:"8px",padding:"2px 6px",fontSize:"0.8em"},children:"Log State"})]}),m&&u.jsx("div",{className:"error-message",style:{padding:"12px",backgroundColor:"#fee",color:"#c33",borderRadius:"4px",marginBottom:"16px"},children:m}),u.jsx("div",{className:"ki-table-container",children:f?u.jsxs("div",{className:"loading-state",style:{textAlign:"center",padding:"40px",color:"#666"},children:[u.jsx("div",{className:"spinner",style:{width:"24px",height:"24px",border:"2px solid #f3f3f3",borderTop:"2px solid #333",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),"Loading documents..."]}):u.jsxs("table",{className:"ki-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"File Name"}),u.jsx("th",{children:"Chunk"}),u.jsx("th",{children:"Location"}),u.jsx("th",{children:"Content Preview"}),u.jsx("th",{children:"Sync Status"}),u.jsx("th",{children:"Created"}),u.jsx("th",{children:"Actions"})]})}),u.jsx("tbody",{children:G.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:7,style:{textAlign:"center",padding:"40px",color:"#666"},children:m?"Failed to load documents":"No documents found. Upload and index files to see them here."})}):Object.entries(Z).map(([J,ne])=>{const X=P.has(J),M=ne[0],Y=ne.length;return u.jsxs(si.Fragment,{children:[u.jsxs("tr",{onClick:()=>z(J),style:{cursor:"pointer",backgroundColor:X?"rgba(59, 230, 255, 0.1)":void 0,fontWeight:X?"500":"normal"},children:[u.jsx("td",{className:"doc-title",title:J,style:{maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("span",{style:{fontSize:"12px",color:"var(--admin-primary)"},children:X?"▼":"▶"}),J]})}),u.jsxs("td",{className:"doc-chunk-index",style:{color:"var(--admin-primary)",fontWeight:"600"},children:[Y," ",Y===1?"chunk":"chunks"]}),u.jsx("td",{className:"doc-page-info",children:M.pageInfo||"-"}),u.jsxs("td",{className:"doc-content",title:M.content,style:{maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[M.content.substring(0,100),"..."]}),u.jsx("td",{children:u.jsx("span",{style:{color:M.syncStatus==="synced"?"#10b981":"#f59e0b",fontSize:"14px"},children:M.syncStatus==="synced"?"Synced":"Orphaned"})}),u.jsx("td",{style:{fontSize:"13px",color:"var(--admin-text-muted)"},children:M.createdAt?new Date(M.createdAt).toLocaleDateString():"-"}),u.jsx("td",{onClick:F=>F.stopPropagation(),children:u.jsxs("div",{className:"file-actions",children:[u.jsx("button",{className:"icon-action-btn",title:"View details",onClick:()=>$(M),children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),u.jsx("button",{className:"icon-action-btn delete-icon-btn",title:"Unindex all chunks",onClick:()=>D(J),disabled:x===J,children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("polyline",{points:"3 6 5 6 21 6"}),u.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})})]}),X&&ne.map((F,he)=>u.jsxs("tr",{style:{backgroundColor:"rgba(9, 14, 34, 0.3)"},children:[u.jsxs("td",{style:{paddingLeft:"40px",fontSize:"13px",color:"var(--admin-text-muted)"},children:["└ Chunk ",he+1]}),u.jsx("td",{className:"doc-chunk-index",children:F.chunkInfo||`${he+1} of ${Y}`}),u.jsx("td",{className:"doc-page-info",children:F.pageInfo||"-"}),u.jsxs("td",{className:"doc-content",title:F.content,style:{maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"13px"},children:[F.content.substring(0,100),"..."]}),u.jsx("td",{children:u.jsx("span",{style:{color:F.syncStatus==="synced"?"#10b981":"#f59e0b",fontSize:"13px"},children:F.syncStatus==="synced"?"Synced":"Orphaned"})}),u.jsx("td",{style:{fontSize:"12px",color:"var(--admin-text-muted)"},children:F.createdAt?new Date(F.createdAt).toLocaleDateString():"-"}),u.jsx("td",{children:u.jsx("button",{className:"icon-action-btn",title:"View this chunk",onClick:()=>$(F),style:{fontSize:"12px"},children:u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})})]},F.id))]},J)})})]})}),g&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:()=>y(null),children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2",style:{backgroundColor:"var(--card, #2f2f2f)",borderColor:"var(--admin-border)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},onClick:J=>J.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h3",{className:"text-xl font-bold",style:{color:"var(--admin-text)"},children:"Content Preview"}),u.jsx("button",{onClick:()=>y(null),className:"text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full p-2 transition-colors",style:{color:"var(--admin-text-muted)"},children:"✕"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"p-4 rounded-lg",style:{backgroundColor:"var(--admin-bg-secondary)"},children:u.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-semibold",style:{color:"var(--admin-text-muted)"},children:"File Name:"}),u.jsx("span",{className:"ml-2",style:{color:"var(--admin-text)"},children:g.fileName})]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-semibold",style:{color:"var(--admin-text-muted)"},children:"Chunk:"}),u.jsx("span",{className:"ml-2",style:{color:"var(--admin-text)"},children:g.chunkInfo||"1 of 1"})]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-semibold",style:{color:"var(--admin-text-muted)"},children:"Source:"}),u.jsx("span",{className:"ml-2",style:{color:"var(--admin-text)"},children:g.source})]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-semibold",style:{color:"var(--admin-text-muted)"},children:"Location:"}),u.jsx("span",{className:"ml-2",style:{color:"var(--admin-text)"},children:g.pageInfo||"N/A"})]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-semibold",style:{color:"var(--admin-text-muted)"},children:"Document ID:"}),u.jsx("span",{className:"ml-2 font-mono text-xs",style:{color:"var(--admin-text-muted)"},children:g.id})]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-semibold",style:{color:"var(--admin-text-muted)"},children:"Sync Status:"}),u.jsx("span",{className:"ml-2",style:{color:"var(--admin-text)"},children:g.syncStatus==="synced"?"Synced":"Pending"})]})]})}),g.metadata&&u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold mb-2",style:{color:"var(--admin-text)"},children:"Metadata"}),u.jsx("div",{className:"p-4 rounded-lg border-2 font-mono text-sm",style:{backgroundColor:"var(--admin-bg-secondary)",borderColor:"var(--admin-border)",color:"var(--admin-text)",maxHeight:"200px",overflowY:"auto"},children:u.jsx("pre",{children:JSON.stringify(g.metadata,null,2)})})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold mb-2",style:{color:"var(--admin-text)"},children:"Content"}),u.jsx("div",{className:"p-4 rounded-lg border-2 font-mono text-sm whitespace-pre-wrap",style:{backgroundColor:"var(--admin-bg-secondary)",borderColor:"var(--admin-border)",color:"var(--admin-text)",maxHeight:"400px",overflowY:"auto"},children:g.content})]})]}),u.jsx("div",{className:"flex justify-center mt-6",children:u.jsx("button",{onClick:()=>y(null),className:"px-6 py-3 rounded-lg font-semibold transition-all hover:scale-105",style:{backgroundColor:"var(--admin-primary)",color:"white",boxShadow:"0 4px 14px 0 rgba(59, 230, 255, 0.3)"},children:"Close"})})]})}),w&&S&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:()=>j(!1),children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 max-w-6xl w-full max-h-[90vh] overflow-y-auto border-2",style:{backgroundColor:"var(--card, #2f2f2f)",borderColor:"var(--admin-border)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},onClick:J=>J.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h3",{className:"text-xl font-bold",style:{color:"var(--admin-text)"},children:"📊 File Metadata & Chunk Information"}),u.jsx("button",{onClick:()=>j(!1),className:"text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full p-2 transition-colors",style:{color:"var(--admin-text-muted)"},children:"✕"})]}),u.jsx("div",{className:"space-y-6",children:Object.values(S).map(J=>u.jsxs("div",{className:"p-4 rounded-lg border-2",style:{backgroundColor:"var(--admin-bg-secondary)",borderColor:"var(--admin-border)"},children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h4",{className:"text-lg font-semibold",style:{color:"var(--admin-text)"},children:["📄 ",J.fileName]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("span",{className:"px-3 py-1 rounded-full text-sm font-medium",style:{backgroundColor:"rgba(59, 230, 255, 0.1)",color:"var(--admin-primary)"},children:[J.chunkCount," chunks"]}),u.jsx("button",{onClick:()=>B(J.fileName),disabled:x===J.fileName,className:"px-3 py-1 rounded text-sm font-medium transition-colors",style:{backgroundColor:x===J.fileName?"#6b7280":"#10b981",color:"white"},children:x===J.fileName?"⏳ Indexing...":"📤 Index"}),u.jsx("button",{onClick:()=>D(J.fileName),disabled:x===J.fileName,className:"px-3 py-1 rounded text-sm font-medium transition-colors",style:{backgroundColor:x===J.fileName?"#6b7280":"#ef4444",color:"white"},children:x===J.fileName?"⏳ Unindexing...":"🗑️ Unindex"})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:J.chunks.map((ne,X)=>u.jsx("div",{className:"p-3 rounded border",style:{backgroundColor:"var(--admin-card)",borderColor:"var(--admin-border)"},children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"text-sm font-medium",style:{color:"var(--admin-text)"},children:["Chunk #",ne.chunkIndex]}),u.jsxs("span",{className:"text-xs",style:{color:"var(--admin-text-muted)"},children:["ID: ",ne.id]})]}),u.jsxs("div",{className:"text-xs",style:{color:"var(--admin-text-muted)"},children:["Source: ",ne.source]}),u.jsxs("div",{className:"text-xs",style:{color:"var(--admin-text-muted)"},children:["Location: ",ne.pageInfo||"N/A"]}),u.jsxs("div",{className:"text-xs",style:{color:"var(--admin-text-muted)"},children:["Status: ",u.jsx("span",{className:"sync-status-text",children:ne.syncStatus==="synced"?"Synced":"Pending"})]}),u.jsxs("div",{className:"text-xs font-mono",style:{color:"var(--admin-text-muted)",maxHeight:"60px",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:[ne.content.substring(0,100),"..."]})]})},ne.id))})]},J.fileName))}),u.jsx("div",{className:"flex justify-center mt-6",children:u.jsx("button",{onClick:()=>j(!1),className:"px-6 py-3 rounded-lg font-semibold transition-all hover:scale-105",style:{backgroundColor:"var(--admin-primary)",color:"white",boxShadow:"0 4px 14px 0 rgba(59, 230, 255, 0.3)"},children:"Close"})})]})})]})};const eue=()=>{const{t:e}=Ze(),{theme:t}=qr(),[n,r]=v.useState("file-library"),i=[{id:"file-library",label:e("knowledge.fileLibrary")},{id:"knowledge-index",label:e("knowledge.knowledgeIndex")}],a=()=>{switch(n){case"file-library":return u.jsx(__,{});case"knowledge-index":return u.jsx(Zce,{});default:return u.jsx(__,{})}};return u.jsxs("div",{className:"knowledge-management","data-theme":t,children:[u.jsx("div",{className:"km-header",children:u.jsxs("div",{className:"km-title-section",children:[u.jsx("h1",{className:"km-title",children:e("knowledge.title")}),u.jsx("p",{className:"km-subtitle",children:e("knowledge.subtitle")})]})}),u.jsx("div",{className:"km-tabs",children:i.map(o=>u.jsx("button",{className:`km-tab ${n===o.id?"active":""}`,onClick:()=>r(o.id),children:o.label},o.id))}),u.jsx("div",{className:"km-content",children:a()})]})},tue="1X5lAcD0uJVtmbEdPjnP6XlesS3pzsmd_",nue="608001025",E_=`https://docs.google.com/spreadsheets/d/${tue}/export?format=csv&gid=${nue}`;async function rue(e="simple"){try{console.log("🔄 Fetching from Google Sheets:",E_);const t=await fetch(E_,{cache:"no-store",mode:"cors"});if(console.log("📊 Response status:",t.status),!t.ok)throw new Error(`Sheets CSV fetch failed: ${t.status}`);const n=await t.text();console.log("📄 CSV data received, length:",n.length);const r=n.split(`
`).filter(s=>s.trim());if(r.length===0)return console.log("⚠️ No data in CSV, using dummy data"),rg();const i=r[0].split(",").map(s=>s.trim().replace(/"/g,""));console.log("📋 Headers found:",i);const a=[];for(let s=1;s<r.length;s++){const l=r[s].split(",").map(c=>c.trim().replace(/"/g,""));if(l.length>=i.length&&l[0]){const c={};i.forEach((f,h)=>{c[f]=l[h]||""});const d={Date:String(c.Date||c.date||"").slice(0,10),Toxicity:Number(c.Toxicity||0),"Prompt Injection":Number(c["Prompt Injection"]||c.PromptInjection||0),"Answer Correctness":Number(c["Answer Correctness"]||c.Correctness||0),"Answer Relevancy":Number(c["Answer Relevancy"]||c.Relevancy||0),Length:Number(c.Length||0),Tone:Number(c.Tone||0),isSimulated:!1};d.Date&&d.Date!=="0000-00-00"&&a.push(d)}}const o=a.sort((s,l)=>s.Date.localeCompare(l.Date));return o.length===0?(console.log("⚠️ No valid rows found, using dummy data"),rg()):(console.log("✅ Successfully loaded",o.length,"real rows from Google Sheets"),o.length<30?(console.log(`📅 Adding estimated data with ${e} mode`),iue(o,e)):o)}catch(t){return console.error("❌ Failed to fetch Google Sheets data:",t),console.log("🔄 Using dummy data instead"),rg()}}function iue(e,t){const n=[],r=new Date;r.setHours(0,0,0,0);let i=r;if(e.length>0){const s=new Date(e[e.length-1].Date);i=s<r?s:r}for(let s=29;s>=0;s--){const c=new Date(i.getTime()-s*24*60*60*1e3).toISOString().split("T")[0],d=e.find(f=>f.Date===c);if(d)n.push(d);else{const f=e[e.length-1]||sue();let h;switch(t){case"simple":h=N_(f,c);break;case"improved":h=aue(f,c,s);break;case"realistic":h=oue(f,c,s);break;default:h=N_(f,c)}n.push(h)}}const a=n.filter(s=>s.isSimulated).length,o=n.filter(s=>!s.isSimulated).length;return console.log(`📈 Generated data (${t}): ${o} real + ${a} simulated = ${n.length} total`),n.sort((s,l)=>s.Date.localeCompare(l.Date))}function N_(e,t){const n=(Math.random()-.5)*.1;return{Date:t,Toxicity:Math.max(0,Math.min(1,e.Toxicity+n)),"Prompt Injection":Math.max(0,Math.min(1,e["Prompt Injection"]+n)),"Answer Correctness":Math.max(0,Math.min(1,e["Answer Correctness"]+n)),"Answer Relevancy":Math.max(0,Math.min(1,e["Answer Relevancy"]+n)),Length:Math.max(0,Math.min(1,e.Length+n)),Tone:Math.max(0,Math.min(1,e.Tone+n)),isSimulated:!0}}function aue(e,t,n){const r=(Math.random()-.5)*.08,i=Math.sin(n/7*Math.PI)*.02,a=r+i;return{Date:t,Toxicity:Math.max(0,Math.min(1,e.Toxicity+a*.5)),"Prompt Injection":Math.max(0,Math.min(1,e["Prompt Injection"]+a*.5)),"Answer Correctness":Math.max(0,Math.min(1,e["Answer Correctness"]+a)),"Answer Relevancy":Math.max(0,Math.min(1,e["Answer Relevancy"]+a)),Length:Math.max(0,Math.min(1,e.Length+a*1.2)),Tone:Math.max(0,Math.min(1,e.Tone+a*1.2)),isSimulated:!0}}function oue(e,t,n){const i=1-Math.abs(n-29)*.005,a=(Math.random()-.5)*.03,o=(Math.random()-.5)*.06,s=(Math.random()-.5)*.1,c=new Date(t).getDay(),d=c===0||c===6?.95:1;return{Date:t,Toxicity:Math.max(0,Math.min(1,e.Toxicity*i*d+a)),"Prompt Injection":Math.max(0,Math.min(1,e["Prompt Injection"]*i*d+a)),"Answer Correctness":Math.max(0,Math.min(1,e["Answer Correctness"]*i*d+o)),"Answer Relevancy":Math.max(0,Math.min(1,e["Answer Relevancy"]*i*d+o)),Length:Math.max(0,Math.min(1,e.Length*i+s)),Tone:Math.max(0,Math.min(1,e.Tone*i+s)),isSimulated:!0}}function sue(){return{Date:"",Toxicity:.8,"Prompt Injection":.85,"Answer Correctness":.8,"Answer Relevancy":.85,Length:.7,Tone:.75,isSimulated:!1}}function rg(){console.log("🎲 Generating dummy radar data...");const e=[],t=new Date;t.setHours(0,0,0,0);for(let n=30;n>=0;n--){const i=new Date(t.getTime()-n*24*60*60*1e3).toISOString().split("T")[0];e.push({Date:i,Toxicity:Math.random()*.3+.7,"Prompt Injection":Math.random()*.2+.8,"Answer Correctness":Math.random()*.2+.8,"Answer Relevancy":Math.random()*.15+.85,Length:Math.random()*.3+.7,Tone:Math.random()*.25+.75,isSimulated:!0})}return console.log("✅ Generated",e.length,"dummy rows"),e}function lue(e,t){return t?e:e.filter(n=>!n.isSimulated)}function Ku(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function P_(){const e=Wt(),[t]=v$(),n=xi(),{theme:r}=qr(),{t:i}=Ze(),[a,o]=v.useState(!1),[,s]=v.useState(""),[,l]=v.useState(""),[c,d]=v.useState([]),[f,h]=v.useState(""),[m,p]=v.useState(!0),[g,y]=v.useState("simple"),[x,b]=v.useState(null),[w,j]=v.useState(null),[S,k]=v.useState(0),[_,N]=v.useState(0),[P,E]=v.useState(0),T=new Date().toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0});v.useEffect(()=>{const q=new Date,A=new Date;A.setDate(q.getDate()-6),s(Ku(A)),l(Ku(q)),$(),L()},[]);const L=async()=>{try{const q=await Uf(1e3);k(q.length);const A=await Ja();if(A.length>0){const Z=A.filter(J=>J.reaction==="good").length/A.length*100;N(Math.round(Z*10)/10)}else N(0);const le=await gw();le.success&&E(le.total),console.log("✅ Metrics loaded:",{conversations:q.length,satisfaction:_,documents:le.total})}catch(q){console.error("❌ Failed to load metrics:",q)}};v.useEffect(()=>{$()},[g]);const $=async()=>{try{console.log("📊 Loading Google Sheets data for Performance Timeline...");const q=await rue(g);d(q),q.length>0&&h(q[q.length-1].Date),console.log("✅ Loaded",q.length,"days of performance data")}catch(q){console.error("❌ Failed to load radar data:",q)}},B=lue(c,m),D=B.find(q=>q.Date===f)||B[B.length-1],z=D?{relevance:Math.round(D["Answer Relevancy"]*100),tone:Math.round(D.Tone*100),length:Math.round(D.Length*100),accuracy:Math.round(D["Answer Correctness"]*100),toxicity:Math.round(D.Toxicity*100),promptInjection:Math.round(D["Prompt Injection"]*100)}:{relevance:85,tone:78,length:82,accuracy:92,toxicity:95,promptInjection:88},G=Math.round((z.relevance+z.tone+z.length+z.accuracy+z.toxicity+z.promptInjection)/6);v.useEffect(()=>{const q=t.get("section");q&&setTimeout(()=>{C(q)},500)},[t]);const I=()=>{try{na()}catch{}localStorage.removeItem("authToken"),sessionStorage.removeItem("axAccess"),e("/",{replace:!0})},R=()=>{o(!a)},C=q=>{const A=document.getElementById(q);A&&A.scrollIntoView({behavior:"smooth",block:"start"})},Q=q=>{j(q),b(q);const A=document.getElementById("recent-conversations");A&&A.scrollIntoView({behavior:"smooth"}),setTimeout(()=>{b(null)},3e3)};return u.jsx("div",{className:"admin-layout","data-theme":r,children:u.jsxs("div",{className:"dashboard-layout",children:[u.jsx(Gse,{performanceScore:G,performanceDate:Ku(new Date),currentTime:T,onSignOut:I}),u.jsxs("div",{className:"dashboard-content",children:[u.jsx(Yse,{conversations:S,satisfaction:_,documents:P,performanceScore:G,performanceDate:Ku(new Date),isCollapsed:a,onToggleCollapse:R,onScrollToSection:C}),u.jsx("main",{className:"dashboard-main",children:n.pathname==="/admin/knowledge-management"?u.jsx(eue,{}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"dashboard-grid",children:u.jsx("div",{className:"grid-left",children:u.jsx("div",{id:"performance-radar",children:u.jsx(Qse,{...z,timelineData:B,selectedDate:f,onDateChange:h,includeSimulatedData:m,onIncludeSimulatedDataChange:p,estimationMode:g,onEstimationModeChange:y})})})}),u.jsxs("div",{className:"content-module",children:[u.jsx("div",{id:"daily-message-activity",className:"content-section",children:u.jsx(ele,{})}),u.jsxs("div",{id:"recent-conversations",className:"content-section",children:[u.jsx("h2",{className:"section-title",children:i("admin.recentConversations")}),u.jsx(ole,{scrollToChatId:w,highlightedChatId:x,onScrollComplete:()=>j(null)})]}),u.jsxs("div",{id:"admin-feedback",className:"content-section",children:[u.jsx("h2",{className:"section-title",children:"Admin Feedback"}),u.jsx(lle,{onScrollToChat:Q})]}),u.jsxs("div",{id:"user-feedback",className:"content-section",children:[u.jsx("h2",{className:"section-title",children:i("admin.userFeedback")}),u.jsx(sle,{onScrollToChat:Q})]}),u.jsxs("div",{id:"prompt-control",className:"content-section",children:[u.jsx("h2",{className:"section-title",children:i("admin.promptControl")}),u.jsx(ale,{})]})]})]})})]})]})})}function cue(){const[e,t]=v.useState(!1);v.useEffect(()=>{const r=()=>{const a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,o=[".admin-dashboard-content",".dashboard-content",".knowledge-management-container","main",".main-content"];let s=a;o.forEach(l=>{const c=document.querySelector(l);c&&c.scrollTop>s&&(s=c.scrollTop)}),t(s>200)};r();const i=setInterval(r,500);return window.addEventListener("scroll",r,!0),()=>{window.removeEventListener("scroll",r,!0),clearInterval(i)}},[]);const n=()=>{const r=[".admin-dashboard-content",".dashboard-content",".knowledge-management-container","main",".main-content",'[class*="content"]'];let i=!1;for(const a of r){const o=document.querySelector(a);if(o&&o.scrollTop>0){o.scrollTo({top:0,behavior:"smooth"}),i=!0;break}}i||window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{document.documentElement.scrollTop=0,document.body.scrollTop=0,r.forEach(a=>{const o=document.querySelector(a);o&&(o.scrollTop=0)})},100)};return e?u.jsx("button",{onClick:n,style:{position:"fixed",bottom:"100px",right:"32px",width:"48px",height:"48px",borderRadius:"50%",backgroundColor:"var(--admin-primary, #3b82f6)",color:"#ffffff",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",transition:"all 0.3s ease",zIndex:99999,opacity:.9},onMouseEnter:r=>{r.currentTarget.style.opacity="1",r.currentTarget.style.transform="translateY(-4px)",r.currentTarget.style.boxShadow="0 8px 20px rgba(59, 130, 246, 0.4)"},onMouseLeave:r=>{r.currentTarget.style.opacity="0.9",r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.3)"},"aria-label":"Scroll to top",title:"Scroll to top",children:u.jsx(Vse,{size:24})}):null}const ig=()=>{const e=yt();if(e)try{const t=localStorage.getItem("axpro_user_settings");if(t&&JSON.parse(t)[e.userId]){console.log("User already has settings, skipping migration");return}console.log("Migrating global settings to user-specific settings for:",e.email);const n=JSON.parse(localStorage.getItem("axpro_n8n_configs")||"[]"),r=localStorage.getItem("axpro_active_n8n_config")||"",i=localStorage.getItem("axpro_supabase_url")||"",a=localStorage.getItem("axpro_supabase_anon_key")||"",o=JSON.parse(localStorage.getItem("axpro_api_configs")||"[]"),s=JSON.parse(localStorage.getItem("axpro_ui_customization")||"{}");let l;e.userId==="409esj1923"||e.email==="chatbot-admin@tecace.com"?l={userId:e.userId,email:e.email,n8nConfigs:[{id:"admin_default",name:"Admin Default Webhook",webhookUrl:"https://n8n.srv978041.hstgr.cloud/webhook/328757ba-62e6-465e-be1b-2fff0fd1d353",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],activeN8nConfigId:"admin_default",supabaseConfig:{url:"https://qpyteahuynkgkbmdasbv.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFweXRlYWh1eW5rZ2tibWRhc2J2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5NDk2NTcsImV4cCI6MjA3NTUyNTY1N30.qvp5ox6Xm0wYcZK89S2MYVu18fqyfYmT8nercIFMKOY"},apiConfigs:o,uiCustomization:s,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}:e.userId==="user123456"||e.email==="chatbot-user@tecace.com"?l={userId:e.userId,email:e.email,n8nConfigs:[{id:"regular_user_default",name:"Regular User Webhook (Admin)",webhookUrl:"https://n8n.srv978041.hstgr.cloud/webhook/328757ba-62e6-465e-be1b-2fff0fd1d353",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],activeN8nConfigId:"regular_user_default",supabaseConfig:{url:"https://qpyteahuynkgkbmdasbv.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFweXRlYWh1eW5rZ2tibWRhc2J2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5NDk2NTcsImV4cCI6MjA3NTUyNTY1N30.qvp5ox6Xm0wYcZK89S2MYVu18fqyfYmT8nercIFMKOY"},apiConfigs:o,uiCustomization:s,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}:l={userId:e.userId,email:e.email,n8nConfigs:n,activeN8nConfigId:r,supabaseConfig:{url:i,anonKey:a},apiConfigs:o,uiCustomization:s,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},dh(l),console.log("Successfully migrated settings for user:",e.email)}catch(t){console.error("Failed to migrate settings:",t)}},uue=()=>{const e=yt();if(!e)return;const t=localStorage.getItem("axpro_user_settings");if(!t){ig();return}try{JSON.parse(t)[e.userId]||ig()}catch(n){console.error("Failed to check migration status:",n),ig()}},Pr=({children:e,requiredRole:t})=>Lx(t)?u.jsx(u.Fragment,{children:e}):u.jsx(Z2,{to:"/",replace:!0}),due=()=>(v.useEffect(()=>{uue()},[]),u.jsx(x$,{children:u.jsx(w$,{children:u.jsx(m$,{children:u.jsxs("div",{className:"App",children:[u.jsx(cue,{}),u.jsxs(o$,{children:[u.jsx(rn,{path:"/",element:u.jsx(uU,{})}),u.jsx(rn,{path:"/signup",element:u.jsx(dU,{})}),u.jsx(rn,{path:"/group-management",element:u.jsx(Pr,{requiredRole:"user",children:u.jsx(xU,{})})}),u.jsx(rn,{path:"/chat",element:u.jsx(Pr,{requiredRole:"user",children:u.jsx(rS,{})})}),u.jsx(rn,{path:"/chat/:sessionId",element:u.jsx(Pr,{requiredRole:"user",children:u.jsx(rS,{})})}),u.jsx(rn,{path:"/dashboard",element:u.jsx(Pr,{requiredRole:"admin",children:u.jsx(BW,{})})}),u.jsx(rn,{path:"/settings",element:u.jsx(Pr,{requiredRole:"user",children:u.jsx(WW,{})})}),u.jsx(rn,{path:"/admin/dashboard",element:u.jsx(Pr,{requiredRole:"admin",children:u.jsx(P_,{})})}),u.jsx(rn,{path:"/admin",element:u.jsx(Pr,{requiredRole:"admin",children:u.jsx(Zp,{})})}),u.jsx(rn,{path:"/admin/usage",element:u.jsx(Pr,{requiredRole:"admin",children:u.jsx(Zp,{})})}),u.jsx(rn,{path:"/admin/prompt",element:u.jsx(Pr,{requiredRole:"admin",children:u.jsx(Zp,{})})}),u.jsx(rn,{path:"/admin/knowledge-management",element:u.jsx(Pr,{requiredRole:"admin",children:u.jsx(P_,{})})}),u.jsx(rn,{path:"*",element:u.jsx(Z2,{to:"/",replace:!0})})]})]})})})}));ag.createRoot(document.getElementById("root")).render(u.jsx(si.StrictMode,{children:u.jsx(due,{})}));export{Dx as c};
